(function(global){Big["DP"]=20;Big["RM"]=1;var MAX_DP=1E6,MAX_POWER=1E6,TO_EXP_NEG=-7,TO_EXP_POS=21,P=Big.prototype,isValid=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ONE=new Big(1);function Big(n){var i,j,nL,x=this;if(!(x instanceof Big))return new Big(n);if(n instanceof Big){x["s"]=n["s"];x["e"]=n["e"];x["c"]=n["c"].slice();return}if(n===0&&1/n<0)n="-0";else if(!isValid.test(n+=""))throwErr(NaN);x["s"]=n.charAt(0)=="-"?(n=n.slice(1),-1):1;if((i=n.indexOf("."))>-1)n=n.replace(".","");if((j=n.search(/e/i))>
0){if(i<0)i=j;i+=+n.slice(j+1);n=n.substring(0,j)}else if(i<0)i=n.length;for(j=0;n.charAt(j)=="0";j++);if(j==(nL=n.length))x["c"]=[x["e"]=0];else{for(;n.charAt(--nL)=="0";);x["e"]=i-j-1;x["c"]=[];for(i=0;j<=nL;x["c"][i++]=+n.charAt(j++));}}function rnd(x,dp,rm,more){var xc=x["c"],i=x["e"]+dp+1;if(rm===1)more=xc[i]>=5;else if(rm===2)more=xc[i]>5||xc[i]==5&&(more||(i<0||(xc[i+1]!=null||xc[i-1]&1)));else if(rm===3)more=more||(xc[i]!=null||i<0);else if(more=false,rm!==0)throwErr("!Big.RM!");if(i<1||!xc[0])x["c"]=
more?(x["e"]=-dp,[1]):[x["e"]=0];else{xc.length=i--;if(more)for(;++xc[i]>9;){xc[i]=0;if(!i--){++x["e"];xc.unshift(1)}}for(i=xc.length;!xc[--i];xc.pop());}return x}function throwErr(message){var err=new Error(message);err["name"]="BigError";throw err;}P["abs"]=function(){var x=new Big(this);x["s"]=1;return x};P["cmp"]=function(y){var xNeg,x=this,xc=x["c"],yc=(y=new Big(y))["c"],i=x["s"],j=y["s"],k=x["e"],l=y["e"];if(!xc[0]||!yc[0])return!xc[0]?!yc[0]?0:-j:i;if(i!=j)return i;xNeg=i<0;if(k!=l)return k>
l^xNeg?1:-1;for(i=-1,j=(k=xc.length)<(l=yc.length)?k:l;++i<j;)if(xc[i]!=yc[i])return xc[i]>yc[i]^xNeg?1:-1;return k==l?0:k>l^xNeg?1:-1};P["div"]=function(y){var x=this,dvd=x["c"],dvs=(y=new Big(y))["c"],s=x["s"]==y["s"]?1:-1,dp=Big["DP"];if(dp!==~~dp||(dp<0||dp>MAX_DP))throwErr("!Big.DP!");if(!dvd[0]||!dvs[0]){if(dvd[0]==dvs[0])throwErr(NaN);if(!dvs[0])throwErr(s/0);return new Big(s*0)}var dvsL,dvsT,next,cmp,remI,dvsZ=dvs.slice(),dvdI=dvsL=dvs.length,dvdL=dvd.length,rem=dvd.slice(0,dvsL),remL=rem.length,
quo=new Big(ONE),qc=quo["c"]=[],qi=0,digits=dp+(quo["e"]=x["e"]-y["e"])+1;quo["s"]=s;s=digits<0?0:digits;dvsZ.unshift(0);for(;remL++<dvsL;rem.push(0));do{for(next=0;next<10;next++){if(dvsL!=(remL=rem.length))cmp=dvsL>remL?1:-1;else for(remI=-1,cmp=0;++remI<dvsL;)if(dvs[remI]!=rem[remI]){cmp=dvs[remI]>rem[remI]?1:-1;break}if(cmp<0){for(dvsT=remL==dvsL?dvs:dvsZ;remL;){if(rem[--remL]<dvsT[remL]){for(remI=remL;remI&&!rem[--remI];rem[remI]=9);--rem[remI];rem[remL]+=10}rem[remL]-=dvsT[remL]}for(;!rem[0];rem.shift());
}else break}qc[qi++]=cmp?next:++next;rem[0]&&cmp?rem[remL]=dvd[dvdI]||0:rem=[dvd[dvdI]]}while((dvdI++<dvdL||rem[0]!=null)&&s--);if(!qc[0]&&qi!=1){qc.shift();quo["e"]--}if(qi>digits)rnd(quo,dp,Big["RM"],rem[0]!=null);return quo};P["eq"]=function(y){return!this.cmp(y)};P["gt"]=function(y){return this.cmp(y)>0};P["gte"]=function(y){return this.cmp(y)>-1};P["lt"]=function(y){return this.cmp(y)<0};P["lte"]=function(y){return this.cmp(y)<1};P["minus"]=function(y){var d,i,j,xLTy,x=this,a=x["s"],b=(y=new Big(y))["s"];
if(a!=b)return y["s"]=-b,x["plus"](y);var xc=x["c"].slice(),xe=x["e"],yc=y["c"],ye=y["e"];if(!xc[0]||!yc[0])return yc[0]?(y["s"]=-b,y):new Big(xc[0]?x:0);if(a=xe-ye){d=(xLTy=a<0)?(a=-a,xc):(ye=xe,yc);for(d.reverse(),b=a;b--;d.push(0));d.reverse()}else{j=((xLTy=xc.length<yc.length)?xc:yc).length;for(a=b=0;b<j;b++)if(xc[b]!=yc[b]){xLTy=xc[b]<yc[b];break}}if(xLTy){d=xc,xc=yc,yc=d;y["s"]=-y["s"]}if((b=-((j=xc.length)-yc.length))>0)for(;b--;xc[j++]=0);for(b=yc.length;b>a;){if(xc[--b]<yc[b]){for(i=b;i&&
!xc[--i];xc[i]=9);--xc[i];xc[b]+=10}xc[b]-=yc[b]}for(;xc[--j]==0;xc.pop());for(;xc[0]==0;xc.shift(),--ye);if(!xc[0]){y["s"]=1;xc=[ye=0]}return y["c"]=xc,y["e"]=ye,y};P["mod"]=function(y){y=new Big(y);var c,x=this,i=x["s"],j=y["s"];if(!y["c"][0])throwErr(NaN);x["s"]=y["s"]=1;c=y.cmp(x)==1;x["s"]=i,y["s"]=j;return c?new Big(x):(i=Big["DP"],j=Big["RM"],Big["DP"]=Big["RM"]=0,x=x["div"](y),Big["DP"]=i,Big["RM"]=j,this["minus"](x["times"](y)))};P["plus"]=function(y){var d,x=this,a=x["s"],b=(y=new Big(y))["s"];
if(a!=b)return y["s"]=-b,x["minus"](y);var xe=x["e"],xc=x["c"],ye=y["e"],yc=y["c"];if(!xc[0]||!yc[0])return yc[0]?y:new Big(xc[0]?x:a*0);if(xc=xc.slice(),a=xe-ye){d=a>0?(ye=xe,yc):(a=-a,xc);for(d.reverse();a--;d.push(0));d.reverse()}if(xc.length-yc.length<0)d=yc,yc=xc,xc=d;for(a=yc.length,b=0;a;b=(xc[--a]=xc[a]+yc[a]+b)/10^0,xc[a]%=10);if(b){xc.unshift(b);++ye}for(a=xc.length;xc[--a]==0;xc.pop());return y["c"]=xc,y["e"]=ye,y};P["pow"]=function(e){var isNeg=e<0,x=new Big(this),y=ONE;if(e!==~~e||(e<
-MAX_POWER||e>MAX_POWER))throwErr("!pow!");for(e=isNeg?-e:e;;){if(e&1)y=y["times"](x);e>>=1;if(!e)break;x=x["times"](x)}return isNeg?ONE["div"](y):y};P["round"]=function(dp,rm){var x=new Big(this);if(dp==null)dp=0;else if(dp!==~~dp||(dp<0||dp>MAX_DP))throwErr("!round!");rnd(x,dp,rm==null?Big["RM"]:rm);return x};P["sqrt"]=function(){var estimate,r,approx,x=this,xc=x["c"],i=x["s"],e=x["e"],half=new Big("0.5");if(!xc[0])return new Big(x);if(i<0)throwErr(NaN);i=Math.sqrt(x.toString());if(i==0||i==1/0){estimate=
xc.join("");if(!(estimate.length+e&1))estimate+="0";r=new Big(Math.sqrt(estimate).toString());r["e"]=((e+1)/2|0)-(e<0||e&1)}else r=new Big(i.toString());i=r["e"]+(Big["DP"]+=4);do{approx=r;r=half["times"](approx["plus"](x["div"](approx)))}while(approx["c"].slice(0,i).join("")!==r["c"].slice(0,i).join(""));rnd(r,Big["DP"]-=4,Big["RM"]);return r};P["times"]=function(y){var c,x=this,xc=x["c"],yc=(y=new Big(y))["c"],a=xc.length,b=yc.length,i=x["e"],j=y["e"];y["s"]=x["s"]==y["s"]?1:-1;if(!xc[0]||!yc[0])return new Big(y["s"]*
0);y["e"]=i+j;if(a<b)c=xc,xc=yc,yc=c,j=a,a=b,b=j;for(j=a+b,c=[];j--;c.push(0));for(i=b-1;i>-1;i--){for(b=0,j=a+i;j>i;b=c[j]+yc[i]*xc[j-i-1]+b,c[j--]=b%10|0,b=b/10|0);if(b)c[j]=(c[j]+b)%10}b&&++y["e"];!c[0]&&c.shift();for(j=c.length;!c[--j];c.pop());return y["c"]=c,y};P["toString"]=P["valueOf"]=P["toJSON"]=function(){var x=this,e=x["e"],str=x["c"].join(""),strL=str.length;if(e<=TO_EXP_NEG||e>=TO_EXP_POS)str=str.charAt(0)+(strL>1?"."+str.slice(1):"")+(e<0?"e":"e+")+e;else if(e<0){for(;++e;str="0"+str);
str="0."+str}else if(e>0)if(++e>strL)for(e-=strL;e--;str+="0");else{if(e<strL)str=str.slice(0,e)+"."+str.slice(e)}else if(strL>1)str=str.charAt(0)+"."+str.slice(1);return x["s"]<0&&x["c"][0]?"-"+str:str};function format(x,dp,toE){var i=dp-(x=new Big(x))["e"],c=x["c"];if(c.length>++dp)rnd(x,i,Big["RM"]);i=!c[0]?i+1:toE?dp:(c=x["c"],x["e"]+i+1);for(;c.length<i;c.push(0));i=x["e"];return toE==1||toE==2&&(dp<=i||i<=TO_EXP_NEG)?(x["s"]<0&&c[0]?"-":"")+(c.length>1?(c.splice(1,0,"."),c.join("")):c[0])+(i<
0?"e":"e+")+i:x.toString()}P["toExponential"]=function(dp){if(dp==null)dp=this["c"].length-1;else if(dp!==~~dp||(dp<0||dp>MAX_DP))throwErr("!toExp!");return format(this,dp,1)};P["toFixed"]=function(dp){var str,x=this,neg=TO_EXP_NEG,pos=TO_EXP_POS;TO_EXP_NEG=-(TO_EXP_POS=1/0);if(dp==null)str=x.toString();else if(dp===~~dp&&(dp>=0&&dp<=MAX_DP)){str=format(x,x["e"]+dp);if(x["s"]<0&&(x["c"][0]&&str.indexOf("-")<0))str="-"+str}TO_EXP_NEG=neg,TO_EXP_POS=pos;if(!str)throwErr("!toFix!");return str};P["toPrecision"]=
function(sd){if(sd==null)return this.toString();else if(sd!==~~sd||(sd<1||sd>MAX_DP))throwErr("!toPre!");return format(this,sd-1,2)};if(typeof module!=="undefined"&&module.exports)module.exports=Big;else if(typeof define=="function"&&define.amd)define(function(){return Big});else global["Big"]=Big})(this);(function(global,factory){if(typeof module==="object"&&typeof module.exports==="object")module.exports=global.document?factory(global,true):function(w){if(!w.document)throw new Error("jQuery requires a window with a document");return factory(w)};else factory(global)})(typeof window!=="undefined"?window:this,function(window,noGlobal){var arr=[];var slice=arr.slice;var concat=arr.concat;var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;
var trim="".trim;var support={};var document=window.document,version="2.1.0",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return num!=null?num<0?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=
jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret},each:function(callback,args){return jQuery.each(this,callback,args)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&
j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++}if(typeof target!=="object"&&!jQuery.isFunction(target))target={};if(i===length){target=this;i--}for(;i<length;i++)if((options=arguments[i])!=null)for(name in options){src=
target[name];copy=options[name];if(target===copy)continue;if(deep&&(copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy))))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else clone=src&&jQuery.isPlainObject(src)?src:{};target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined)target[name]=copy}return target};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg);},noop:function(){},
isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray,isWindow:function(obj){return obj!=null&&obj===obj.window},isNumeric:function(obj){return obj-parseFloat(obj)>=0},isPlainObject:function(obj){if(jQuery.type(obj)!=="object"||(obj.nodeType||jQuery.isWindow(obj)))return false;try{if(obj.constructor&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return false}catch(e){return false}return true},isEmptyObject:function(obj){var name;for(name in obj)return false;
return true},type:function(obj){if(obj==null)return obj+"";return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code);if(code)if(code.indexOf("use strict")===1){script=document.createElement("script");script.text=code;document.head.appendChild(script).parentNode.removeChild(script)}else indirect(code)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,
fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args)if(isArray)for(;i<length;i++){value=callback.apply(obj[i],args);if(value===false)break}else for(i in obj){value=callback.apply(obj[i],args);if(value===false)break}else if(isArray)for(;i<length;i++){value=callback.call(obj[i],i,obj[i]);if(value===false)break}else for(i in obj){value=callback.call(obj[i],
i,obj[i]);if(value===false)break}return obj},trim:function(text){return text==null?"":trim.call(text)},makeArray:function(arr,results){var ret=results||[];if(arr!=null)if(isArraylike(Object(arr)))jQuery.merge(ret,typeof arr==="string"?[arr]:arr);else push.call(ret,arr);return ret},inArray:function(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i)},merge:function(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++)first[i++]=second[j];first.length=i;return first},grep:function(elems,
callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect)matches.push(elems[i])}return matches},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray)for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null)ret.push(value)}else for(i in elems){value=callback(elems[i],i,arg);if(value!=null)ret.push(value)}return concat.apply([],
ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn))return undefined;args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},now:Date.now,support:support});jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=
name.toLowerCase()});function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);if(type==="function"||jQuery.isWindow(obj))return false;if(obj.nodeType===1&&length)return true;return type==="array"||(length===0||typeof length==="number"&&(length>0&&length-1 in obj))}var Sizzle=function(window){var i,support,Expr,getText,isXML,compile,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+-new Date,preferredDoc=
window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b)hasDuplicate=true;return 0},strundefined=typeof undefined,MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){var i=0,len=this.length;for(;i<len;i++)if(this[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:([*^$|!~]?\x3d)"+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+attributes.replace(3,8)+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+
whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([\x3e+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("\x3d"+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={"ID":new RegExp("^#("+characterEncoding+")"),"CLASS":new RegExp("^\\.("+characterEncoding+")"),"TAG":new RegExp("^("+characterEncoding.replace("w","w*")+")"),"ATTR":new RegExp("^"+
attributes),"PSEUDO":new RegExp("^"+pseudos),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),"bool":new RegExp("^(?:"+booleans+")$","i"),"needsContext":new RegExp("^"+whitespace+"*[\x3e+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?\x3d[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,
rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes);JSCOMPILER_PRESERVE(arr[preferredDoc.childNodes.length].nodeType)}catch(e){push=
{apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){var j=target.length,i=0;while(target[j++]=els[i++]);target.length=j-1}}}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document)setDocument(context);context=context||document;results=results||[];if(!selector||typeof selector!=="string")return results;if((nodeType=context.nodeType)!==
1&&nodeType!==9)return[];if(documentIsHTML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1])if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results}}else return results}else{if(context.ownerDocument&&((elem=context.ownerDocument.getElementById(m))&&(contains(context,elem)&&elem.id===m))){results.push(elem);return results}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results}else if((m=
match[3])&&(support.getElementsByClassName&&context.getElementsByClassName)){push.apply(results,context.getElementsByClassName(m));return results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){nid=old=expando;newContext=context;newSelector=nodeType===9&&selector;if(nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);if(old=context.getAttribute("id"))nid=old.replace(rescape,"\\$\x26");else context.setAttribute("id",nid);nid="[id\x3d'"+nid+"'] ";i=groups.length;
while(i--)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&testContext(context.parentNode)||context;newSelector=groups.join(",")}if(newSelector)try{push.apply(results,newContext.querySelectorAll(newSelector));return results}catch(qsaError){}finally{if(!old)context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength)delete cache[keys.shift()];
return cache[key+" "]=value}return cache}function markFunction(fn){fn[expando]=true;return fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return false}finally{if(div.parentNode)div.parentNode.removeChild(div);div=null}}function addHandle(attrs,handler){var arr=attrs.split("|"),i=attrs.length;while(i--)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&(a.nodeType===1&&(b.nodeType===1&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||
MAX_NEGATIVE)));if(diff)return diff;if(cur)while(cur=cur.nextSibling)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,
matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--)if(seed[j=matchIndexes[i]])seed[j]=!(matches[j]=seed[j])})})}function testContext(context){return context&&(typeof context.getElementsByTagName!==strundefined&&context)}support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};setDocument=Sizzle.setDocument=function(node){var hasCompare,
doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;if(doc===document||(doc.nodeType!==9||!doc.documentElement))return document;document=doc;docElem=doc.documentElement;documentIsHTML=!isXML(doc);if(parent&&parent!==parent.top)if(parent.addEventListener)parent.addEventListener("unload",function(){setDocument()},false);else if(parent.attachEvent)parent.attachEvent("onunload",function(){setDocument()});support.attributes=assert(function(div){div.className="i";return!div.getAttribute("className")});
support.getElementsByTagName=assert(function(div){div.appendChild(doc.createComment(""));return!div.getElementsByTagName("*").length});support.getElementsByClassName=rnative.test(doc.getElementsByClassName)&&assert(function(div){div.innerHTML="\x3cdiv class\x3d'a'\x3e\x3c/div\x3e\x3cdiv class\x3d'a i'\x3e\x3c/div\x3e";div.firstChild.className="i";return div.getElementsByClassName("i").length===2});support.getById=assert(function(div){docElem.appendChild(div).id=expando;return!doc.getElementsByName||
!doc.getElementsByName(expando).length});if(support.getById){Expr.find["ID"]=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}};Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}}else{delete Expr.find["ID"];Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==
strundefined&&elem.getAttributeNode("id");return node&&node.value===attrId}}}Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!==strundefined)return context.getElementsByTagName(tag)}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while(elem=results[i++])if(elem.nodeType===1)tmp.push(elem);return tmp}return results};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!==
strundefined&&documentIsHTML)return context.getElementsByClassName(className)};rbuggyMatches=[];rbuggyQSA=[];if(support.qsa=rnative.test(doc.querySelectorAll)){assert(function(div){div.innerHTML="\x3cselect t\x3d''\x3e\x3coption selected\x3d''\x3e\x3c/option\x3e\x3c/select\x3e";if(div.querySelectorAll("[t^\x3d'']").length)rbuggyQSA.push("[*^$]\x3d"+whitespace+"*(?:''|\"\")");if(!div.querySelectorAll("[selected]").length)rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")");if(!div.querySelectorAll(":checked").length)rbuggyQSA.push(":checked")});
assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden");div.appendChild(input).setAttribute("name","D");if(div.querySelectorAll("[name\x3dd]").length)rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?\x3d");if(!div.querySelectorAll(":enabled").length)rbuggyQSA.push(":enabled",":disabled");div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:")})}if(support.matchesSelector=rnative.test(matches=docElem.webkitMatchesSelector||(docElem.mozMatchesSelector||(docElem.oMatchesSelector||
docElem.msMatchesSelector))))assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!\x3d'']:x");rbuggyMatches.push("!\x3d",pseudos)});rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===
bup||!!(bup&&(bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return true;return false};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0}var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare)return compare;compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||!support.sortDetached&&b.compareDocumentPosition(a)===
compare){if(a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a))return-1;if(b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b))return 1;return sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0}return compare&4?-1:1}:function(a,b){if(a===b){hasDuplicate=true;return 0}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0;else if(aup===
bup)return siblingCheck(a,b);cur=a;while(cur=cur.parentNode)ap.unshift(cur);cur=b;while(cur=cur.parentNode)bp.unshift(cur);while(ap[i]===bp[i])i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0};return doc};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document)setDocument(elem);expr=expr.replace(rattributeQuotes,"\x3d'$1']");if(support.matchesSelector&&
(documentIsHTML&&((!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))))try{var ret=matches.call(elem,expr);if(ret||(support.disconnectedMatch||elem.document&&elem.document.nodeType!==11))return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document)setDocument(context);return contains(context,elem)};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document)setDocument(elem);
var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&
results.slice(0);results.sort(sortOrder);if(hasDuplicate){while(elem=results[i++])if(elem===results[i])j=duplicates.push(i);while(j--)results.splice(duplicates[j],1)}sortInput=null;return results};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType)while(node=elem[i++])ret+=getText(node);else if(nodeType===1||(nodeType===9||nodeType===11))if(typeof elem.textContent==="string")return elem.textContent;else for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=
getText(elem);else if(nodeType===3||nodeType===4)return elem.nodeValue;return ret};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{"\x3e":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[4]||(match[5]||"")).replace(runescape,funescape);if(match[2]==="~\x3d")match[3]=" "+
match[3]+" ";return match.slice(0,4)},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3])Sizzle.error(match[0]);match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+(match[7]+match[8]||match[3]==="odd")}else if(match[3])Sizzle.error(match[0]);return match},"PSEUDO":function(match){var excess,unquoted=!match[5]&&match[2];if(matchExpr["CHILD"].test(match[0]))return null;if(match[3]&&match[4]!==undefined)match[2]=
match[4];else if(unquoted&&(rpseudo.test(unquoted)&&((excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)))){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}return match.slice(0,3)}},filter:{"TAG":function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},"CLASS":function(className){var pattern=
classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||(typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||""))})},"ATTR":function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null)return operator==="!\x3d";if(!operator)return true;result+="";return operator==="\x3d"?result===
check:operator==="!\x3d"?result!==check:operator==="^\x3d"?check&&result.indexOf(check)===0:operator==="*\x3d"?check&&result.indexOf(check)>-1:operator==="$\x3d"?check&&result.slice(-check.length)===check:operator==="~\x3d"?(" "+result+" ").indexOf(check)>-1:operator==="|\x3d"?result===check||result.slice(0,check.length+1)===check+"-":false}},"CHILD":function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&
last===0?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){while(dir){node=elem;while(node=node[dir])if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)return false;start=dir=type==="only"&&(!start&&"nextSibling")}return true}start=[forward?parent.firstChild:parent.lastChild];
if(forward&&useCache){outerCache=parent[expando]||(parent[expando]={});cache=outerCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=cache[0]===dirruns&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while(node=++nodeIndex&&(node&&node[dir])||((diff=nodeIndex=0)||start.pop()))if(node.nodeType===1&&(++diff&&node===elem)){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&((cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns))diff=cache[1];else while(node=
++nodeIndex&&(node&&node[dir])||((diff=nodeIndex=0)||start.pop()))if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache)(node[expando]||(node[expando]={}))[type]=[dirruns,diff];if(node===elem)break}diff-=last;return diff===first||diff%first===0&&diff/first>=0}}},"PSEUDO":function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||(Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo));if(fn[expando])return fn(argument);if(fn.length>1){args=
[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{"not":markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,
unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--)if(elem=unmatched[i])seed[i]=!(matches[i]=elem)}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);return!results.pop()}}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),"contains":markFunction(function(text){return function(elem){return(elem.textContent||(elem.innerText||getText(elem))).indexOf(text)>-1}}),"lang":markFunction(function(lang){if(!ridentifier.test(lang||
""))Sizzle.error("unsupported lang: "+lang);lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang")){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0}while((elem=elem.parentNode)&&elem.nodeType===1);return false}}),"target":function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},"root":function(elem){return elem===
docElem},"focus":function(elem){return elem===document.activeElement&&((!document.hasFocus||document.hasFocus())&&!!(elem.type||(elem.href||~elem.tabIndex)))},"enabled":function(elem){return elem.disabled===false},"disabled":function(elem){return elem.disabled===true},"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&!!elem.selected},"selected":function(elem){if(elem.parentNode)JSCOMPILER_PRESERVE(elem.parentNode.selectedIndex);
return elem.selected===true},"empty":function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return false;return true},"parent":function(elem){return!Expr.pseudos["empty"](elem)},"header":function(elem){return rheader.test(elem.nodeName)},"input":function(elem){return rinputs.test(elem.nodeName)},"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},"text":function(elem){var attr;return elem.nodeName.toLowerCase()===
"input"&&(elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text"))},"first":createPositionalPseudo(function(){return[0]}),"last":createPositionalPseudo(function(matchIndexes,length){return[length-1]}),"eq":createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),"even":createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),"odd":createPositionalPseudo(function(matchIndexes,
length){var i=1;for(;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),"lt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;)matchIndexes.push(i);return matchIndexes}),"gt":createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;)matchIndexes.push(i);return matchIndexes})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,
image:true})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:true,reset:true})Expr.pseudos[i]=createButtonPseudo(i);function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters;function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match)soFar=
soFar.slice(match[0].length)||soFar;groups.push(tokens=[])}matched=false;if(match=rcombinators.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter)if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length)}if(!matched)break}return parseOnly?soFar.length:
soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir])if(elem.nodeType===1||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,
outerCache,newCache=[dirruns,doneName];if(xml)while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements)if(matcher(elem,context,xml))return true}else while(elem=elem[dir])if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});if((oldCache=outerCache[dir])&&(oldCache[0]===dirruns&&oldCache[1]===doneName))return newCache[2]=oldCache[2];else{outerCache[dir]=newCache;if(newCache[2]=matcher(elem,context,xml))return true}}}}function elementMatcher(matchers){return matchers.length>
1?function(elem,context,xml){var i=matchers.length;while(i--)if(!matchers[i](elem,context,xml))return false;return true}:matchers[0]}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++)if(elem=unmatched[i])if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped)map.push(i)}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando])postFilter=
setMatcher(postFilter);if(postFinder&&!postFinder[expando])postFinder=setMatcher(postFinder,postSelector);return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher)matcher(matcherIn,
matcherOut,context,xml);if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--)if(elem=temp[i])matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--)if(elem=matcherOut[i])temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}i=matcherOut.length;while(i--)if((elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1)seed[temp]=!(results[temp]=
elem)}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder)postFinder(null,results,matcherOut,xml);else push.apply(results,matcherOut)}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),
matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];for(;i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=
++i;for(;j<len;j++)if(Expr.relative[tokens[j].type])break;return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>
0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=dirruns+=contextBackup==null?1:Math.random()||0.1,len=elems.length;if(outermost)outermostContext=context!==document&&context;for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;while(matcher=elementMatchers[j++])if(matcher(elem,context,xml)){results.push(elem);
break}if(outermost)dirruns=dirrunsUnique}if(bySet){if(elem=!matcher&&elem)matchedCount--;if(seed)unmatched.push(elem)}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while(matcher=setMatchers[j++])matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)while(i--)if(!(unmatched[i]||setMatched[i]))setMatched[i]=pop.call(results);setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&(!seed&&(setMatched.length>0&&matchedCount+setMatchers.length>1)))Sizzle.uniqueSort(results)}if(outermost){dirruns=
dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!group)group=tokenize(selector);i=group.length;while(i--){cached=matcherFromTokens(group[i]);if(cached[expando])setMatchers.push(cached);else elementMatchers.push(cached)}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))}return cached};
function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++)Sizzle(selector,contexts[i],results);return results}function select(selector,context,results,seed){var i,tokens,token,type,find,match=tokenize(selector);if(!seed)if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&((token=tokens[0]).type==="ID"&&(support.getById&&(context.nodeType===9&&(documentIsHTML&&Expr.relative[tokens[1].type]))))){context=(Expr.find["ID"](token.matches[0].replace(runescape,
funescape),context)||[])[0];if(!context)return results;selector=selector.slice(tokens.shift().value.length)}i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[type=token.type])break;if(find=Expr.find[type])if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context)){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results}break}}}compile(selector,
match)(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context);return results}support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(div1){return div1.compareDocumentPosition(document.createElement("div"))&1});if(!assert(function(div){div.innerHTML="\x3ca href\x3d'#'\x3e\x3c/a\x3e";return div.firstChild.getAttribute("href")==="#"}))addHandle("type|href|height|width",
function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,name.toLowerCase()==="type"?1:2)});if(!support.attributes||!assert(function(div){div.innerHTML="\x3cinput/\x3e";div.firstChild.setAttribute("value","");return div.firstChild.getAttribute("value")===""}))addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input")return elem.defaultValue});if(!assert(function(div){return div.getAttribute("disabled")==null}))addHandle(booleans,function(elem,name,isXML){var val;
if(!isXML)return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null});return Sizzle}(window);jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/;var risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,
not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if(typeof qualifier==="string"){if(risSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>=0!==not})}jQuery.filter=function(expr,elems,not){var elem=
elems[0];if(not)expr=":not("+expr+")";return elems.length===1&&elem.nodeType===1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1}))};jQuery.fn.extend({find:function(selector){var i,len=this.length,ret=[],self=this;if(typeof selector!=="string")return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++)if(jQuery.contains(self[i],this))return true}));for(i=0;i<len;i++)jQuery.find(selector,self[i],ret);
ret=this.pushStack(len>1?jQuery.unique(ret):ret);ret.selector=this.selector?this.selector+" "+selector:selector;return ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],false))},not:function(selector){return this.pushStack(winnow(this,selector||[],true))},is:function(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=
function(selector,context){var match,elem;if(!selector)return this;if(typeof selector==="string"){if(selector[0]==="\x3c"&&(selector[selector.length-1]==="\x3e"&&selector.length>=3))match=[null,selector,null];else match=rquickExpr.exec(selector);if(match&&(match[1]||!context))if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)if(jQuery.isFunction(this[match]))this[match](context[match]);
else this.attr(match,context[match]);return this}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}else if(!context||context.jquery)return(context||rootjQuery).find(selector);else return this.constructor(context).find(selector)}else if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}else if(jQuery.isFunction(selector))return typeof rootjQuery.ready!=="undefined"?rootjQuery.ready(selector):
selector(jQuery);if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.extend({dir:function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9)if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until))break;
matched.push(elem)}return matched},sibling:function(n,elem){var matched=[];for(;n;n=n.nextSibling)if(n.nodeType===1&&n!==elem)matched.push(n);return matched}});jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++)if(jQuery.contains(this,targets[i]))return true})},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,
context||this.context):0;for(;i<l;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)},index:function(elem){if(!elem)return this[0]&&this[0].parentNode?this.first().prevAll().length:-1;if(typeof elem==="string")return indexOf.call(jQuery(elem),this[0]);return indexOf.call(this,elem.jquery?elem[0]:
elem)},add:function(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1);return cur}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,
i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||
{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until")selector=until;if(selector&&typeof selector==="string")matched=jQuery.filter(selector,matched);if(this.length>1){if(!guaranteedUnique[name])jQuery.unique(matched);if(rparentsprev.test(name))matched.reverse()}return this.pushStack(matched)}});
var rnotwhite=/\S+/g;var optionsCache={};function createOptions(options){var object=optionsCache[options]={};jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?optionsCache[options]||createOptions(options):jQuery.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;fired=true;firingIndex=
firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++)if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;break}firing=false;if(list)if(stack){if(stack.length)fire(stack.shift())}else if(memory)list=[];else self.disable()},self={add:function(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);if(type==="function"){if(!options.unique||!self.has(arg))list.push(arg)}else if(arg&&
(arg.length&&type!=="string"))add(arg)})})(arguments);if(firing)firingLength=list.length;else if(memory){firingStart=start;fire(memory)}}return this},remove:function(){if(list)jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength)firingLength--;if(index<=firingIndex)firingIndex--}}});return this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!!(list&&list.length)},empty:function(){list=[];firingLength=
0;return this},disable:function(){list=stack=memory=undefined;return this},disabled:function(){return!list},lock:function(){stack=undefined;if(!memory)self.disable();return this},locked:function(){return!stack},fireWith:function(context,args){if(list&&(!fired||stack)){args=args||[];args=[context,args.slice?args.slice():args];if(firing)stack.push(args);else fire(args)}return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return!!fired}};return self};jQuery.extend({Deferred:function(func){var tuples=
[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&
fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise))returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify);else newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})});fns=null}).promise()},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;
if(stateString)list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock);deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?promise:this,arguments);return this};deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func)func.call(deferred,deferred);return deferred},when:function(subordinate){var i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=length!==1||subordinate&&jQuery.isFunction(subordinate.promise)?length:
0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?slice.call(arguments):value;if(values===progressValues)deferred.notifyWith(contexts,values);else if(!--remaining)deferred.resolveWith(contexts,values)}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++)if(resolveValues[i]&&
jQuery.isFunction(resolveValues[i].promise))resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues));else--remaining}if(!remaining)deferred.resolveWith(resolveContexts,resolveValues);return deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){jQuery.ready.promise().done(fn);return this};jQuery.extend({isReady:false,readyWait:1,holdReady:function(hold){if(hold)jQuery.readyWait++;else jQuery.ready(true)},
ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady)return;jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0)return;readyList.resolveWith(document,[jQuery]);if(jQuery.fn.trigger)jQuery(document).trigger("ready").off("ready")}});function completed(){document.removeEventListener("DOMContentLoaded",completed,false);window.removeEventListener("load",completed,false);jQuery.ready()}jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState===
"complete")setTimeout(jQuery.ready);else{document.addEventListener("DOMContentLoaded",completed,false);window.addEventListener("load",completed,false)}}return readyList.promise(obj)};jQuery.ready.promise();var access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key)jQuery.access(elems,fn,i,key[i],true,emptyGet,raw)}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value))raw=
true;if(bulk)if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value)}}if(fn)for(;i<len;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet};jQuery.acceptData=function(owner){return owner.nodeType===1||(owner.nodeType===9||!+owner.nodeType)};function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}});this.expando=jQuery.expando+
Math.random()}Data.uid=1;Data.accepts=jQuery.acceptData;Data.prototype={key:function(owner){if(!Data.accepts(owner))return 0;var descriptor={},unlock=owner[this.expando];if(!unlock){unlock=Data.uid++;try{descriptor[this.expando]={value:unlock};Object.defineProperties(owner,descriptor)}catch(e){descriptor[this.expando]=unlock;jQuery.extend(owner,descriptor)}}if(!this.cache[unlock])this.cache[unlock]={};return unlock},set:function(owner,data,value){var prop,unlock=this.key(owner),cache=this.cache[unlock];
if(typeof data==="string")cache[data]=value;else if(jQuery.isEmptyObject(cache))jQuery.extend(this.cache[unlock],data);else for(prop in data)cache[prop]=data[prop];return cache},get:function(owner,key){var cache=this.cache[this.key(owner)];return key===undefined?cache:cache[key]},access:function(owner,key,value){var stored;if(key===undefined||key&&typeof key==="string"&&value===undefined){stored=this.get(owner,key);return stored!==undefined?stored:this.get(owner,jQuery.camelCase(key))}this.set(owner,
key,value);return value!==undefined?value:key},remove:function(owner,key){var i,name,camel,unlock=this.key(owner),cache=this.cache[unlock];if(key===undefined)this.cache[unlock]={};else{if(jQuery.isArray(key))name=key.concat(key.map(jQuery.camelCase));else{camel=jQuery.camelCase(key);if(key in cache)name=[key,camel];else{name=camel;name=name in cache?[name]:name.match(rnotwhite)||[]}}i=name.length;while(i--)delete cache[name[i]]}},hasData:function(owner){return!jQuery.isEmptyObject(this.cache[owner[this.expando]]||
{})},discard:function(owner){if(owner[this.expando])delete this.cache[owner[this.expando]]}};var data_priv=new Data;var data_user=new Data;var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?
jQuery.parseJSON(data):data}catch(e){}data_user.set(elem,key,data)}else data=undefined}return data}jQuery.extend({hasData:function(elem){return data_user.hasData(elem)||data_priv.hasData(elem)},data:function(elem,name,data){return data_user.access(elem,name,data)},removeData:function(elem,name){data_user.remove(elem,name)},_data:function(elem,name,data){return data_priv.access(elem,name,data)},_removeData:function(elem,name){data_priv.remove(elem,name)}});jQuery.fn.extend({data:function(key,value){var i,
name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=data_user.get(elem);if(elem.nodeType===1&&!data_priv.get(elem,"hasDataAttrs")){i=attrs.length;while(i--){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name])}}data_priv.set(elem,"hasDataAttrs",true)}}return data}if(typeof key==="object")return this.each(function(){data_user.set(this,key)});return access(this,function(value){var data,camelKey=jQuery.camelCase(key);
if(elem&&value===undefined){data=data_user.get(elem,key);if(data!==undefined)return data;data=data_user.get(elem,camelKey);if(data!==undefined)return data;data=dataAttr(elem,camelKey,undefined);if(data!==undefined)return data;return}this.each(function(){var data=data_user.get(this,camelKey);data_user.set(this,camelKey,value);if(key.indexOf("-")!==-1&&data!==undefined)data_user.set(this,key,value)})},null,value,arguments.length>1,null,true)},removeData:function(key){return this.each(function(){data_user.remove(this,
key)})}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=data_priv.get(elem,type);if(data)if(!queue||jQuery.isArray(data))queue=data_priv.access(elem,type,jQuery.makeArray(data));else queue.push(data);return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();
startLength--}if(fn){if(type==="fx")queue.unshift("inprogress");delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks)hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return data_priv.get(elem,key)||data_priv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(elem,[type+"queue",key])})})}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<
setter)return jQuery.queue(this[0],type);return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress")jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!--count)defer.resolveWith(elements,
[elements])};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=data_priv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var cssExpand=["Top","Right","Bottom","Left"];var isHidden=function(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)};var rcheckableType=/^(?:checkbox|radio)$/i;
(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div"));div.innerHTML="\x3cinput type\x3d'radio' checked\x3d'checked' name\x3d't'/\x3e";support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="\x3ctextarea\x3ex\x3c/textarea\x3e";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue})();var strundefined=typeof undefined;support.focusinBubbles="onfocusin"in window;var rkeyEvent=/^key/,rmouseEvent=
/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;function returnTrue(){return true}function returnFalse(){return false}function safeActiveElement(){try{return document.activeElement}catch(err){}}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.get(elem);if(!elemData)return;if(handler.handler){handleObjIn=
handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid)handler.guid=jQuery.guid++;if(!(events=elemData.events))events=elemData.events={};if(!(eventHandle=elemData.handle))eventHandle=elemData.handle=function(e){return typeof jQuery!==strundefined&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined};types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||
"").split(".").sort();if(!type)continue;special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||
special.setup.call(elem,data,namespaces,eventHandle)===false)if(elem.addEventListener)elem.addEventListener(type,eventHandle,false)}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid)handleObj.handler.guid=handler.guid}if(selector)handlers.splice(handlers.delegateCount++,0,handleObj);else handlers.push(handleObj);jQuery.event.global[type]=true}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,
origType,elemData=data_priv.hasData(elem)&&data_priv.get(elem);if(!elemData||!(events=elemData.events))return;types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,true);continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];
tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&((!handler||handler.guid===handleObj.guid)&&((!tmp||tmp.test(handleObj.namespace))&&(!selector||(selector===handleObj.selector||selector==="**"&&handleObj.selector))))){handlers.splice(j,1);if(handleObj.selector)handlers.delegateCount--;if(special.remove)special.remove.call(elem,handleObj)}}if(origCount&&!handlers.length){if(!special.teardown||
special.teardown.call(elem,namespaces,elemData.handle)===false)jQuery.removeEvent(elem,type,elemData.handle);delete events[type]}}if(jQuery.isEmptyObject(events)){delete elemData.handle;data_priv.remove(elem,"events")}},trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===
3||elem.nodeType===8)return;if(rfocusMorph.test(type+jQuery.event.triggered))return;if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;
if(!event.target)event.target=elem;data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&(special.trigger&&special.trigger.apply(elem,data)===false))return;if(!onlyHandlers&&(!special.noBubble&&!jQuery.isWindow(elem))){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type))cur=cur.parentNode;for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}if(tmp===(elem.ownerDocument||document))eventPath.push(tmp.defaultView||
(tmp.parentWindow||window))}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(data_priv.get(cur,"events")||{})[event.type]&&data_priv.get(cur,"handle");if(handle)handle.apply(cur,data);handle=ontype&&cur[ontype];if(handle&&(handle.apply&&jQuery.acceptData(cur))){event.result=handle.apply(cur,data);if(event.result===false)event.preventDefault()}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented())if((!special._default||
special._default.apply(eventPath.pop(),data)===false)&&jQuery.acceptData(elem))if(ontype&&(jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem))){tmp=elem[ontype];if(tmp)elem[ontype]=null;jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(tmp)elem[ontype]=tmp}return event.result},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=slice.call(arguments),handlers=(data_priv.get(this,"events")||{})[event.type]||[],special=
jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false)return;handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped())if(!event.namespace_re||event.namespace_re.test(handleObj.namespace)){event.handleObj=handleObj;event.data=
handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined)if((event.result=ret)===false){event.preventDefault();event.stopPropagation()}}}if(special.postDispatch)special.postDispatch.call(this,event);return event.result},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&(cur.nodeType&&(!event.button||event.type!=="click")))for(;cur!==
this;cur=cur.parentNode||this)if(cur.disabled!==true||event.type!=="click"){matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matches[sel]===undefined)matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length;if(matches[sel])matches.push(handleObj)}if(matches.length)handlerQueue.push({elem:cur,handlers:matches})}if(delegateCount<handlers.length)handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)});
return handlerQueue},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null)event.which=original.charCode!=null?original.charCode:original.keyCode;return event}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,
original){var eventDoc,doc,body,button=original.button;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||(body&&body.scrollLeft||0))-(doc&&doc.clientLeft||(body&&body.clientLeft||0));event.pageY=original.clientY+(doc&&doc.scrollTop||(body&&body.scrollTop||0))-(doc&&doc.clientTop||(body&&body.clientTop||0))}if(!event.which&&button!==undefined)event.which=button&
1?1:button&2?3:button&4?2:0;return event}},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook)this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{};copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=copy.length;while(i--){prop=copy[i];event[prop]=originalEvent[prop]}if(!event.target)event.target=document;
if(event.target.nodeType===3)event.target=event.target.parentNode;return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&(this.click&&jQuery.nodeName(this,"input"))){this.click();
return false}},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){if(event.result!==undefined)event.originalEvent.returnValue=event.result}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true,originalEvent:{}});if(bubble)jQuery.event.trigger(e,null,elem);else jQuery.event.dispatch.call(elem,e);if(e.isDefaultPrevented())event.preventDefault()}};jQuery.removeEvent=function(elem,
type,handle){if(elem.removeEventListener)elem.removeEventListener(type,handle,false)};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&(src.getPreventDefault&&src.getPreventDefault())?returnTrue:returnFalse}else this.type=src;if(props)jQuery.extend(this,props);this.timeStamp=src&&src.timeStamp||jQuery.now();
this[jQuery.expando]=true};jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&e.preventDefault)e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&e.stopPropagation)e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;
this.stopPropagation()}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});if(!support.focusinBubbles)jQuery.each({focus:"focusin",blur:"focusout"},function(orig,
fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true)};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix);if(!attaches)doc.addEventListener(orig,handler,true);data_priv.access(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);data_priv.remove(doc,fix)}else data_priv.access(doc,
fix,attaches)}}});jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types)this.on(type,selector,data,types[type],one);return this}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null)if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}if(fn===false)fn=returnFalse;else if(!fn)return this;if(one===
1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&(types.preventDefault&&types.handleObj)){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:
handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(type in types)this.off(type,selector,types[type]);return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false)fn=returnFalse;return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem)return jQuery.event.trigger(type,
data,elem,true)}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"\x3cselect multiple\x3d'multiple'\x3e","\x3c/select\x3e"],thead:[1,"\x3ctable\x3e","\x3c/table\x3e"],col:[2,"\x3ctable\x3e\x3ccolgroup\x3e",
"\x3c/colgroup\x3e\x3c/table\x3e"],tr:[2,"\x3ctable\x3e\x3ctbody\x3e","\x3c/tbody\x3e\x3c/table\x3e"],td:[3,"\x3ctable\x3e\x3ctbody\x3e\x3ctr\x3e","\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==11?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||
elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match)elem.type=match[1];else elem.removeAttribute("type");return elem}function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++)data_priv.set(elems[i],"globalEval",!refElements||data_priv.get(refElements[i],"globalEval"))}function cloneCopyEvent(src,
dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1)return;if(data_priv.hasData(src)){pdataOld=data_priv.access(src);pdataCur=data_priv.set(dest,pdataOld);events=pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events={};for(type in events)for(i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i])}}if(data_user.hasData(src)){udataOld=data_user.access(src);udataCur=jQuery.extend({},udataOld);data_user.set(dest,udataCur)}}function getAll(context,
tag){var ret=context.getElementsByTagName?context.getElementsByTagName(tag||"*"):context.querySelectorAll?context.querySelectorAll(tag||"*"):[];return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type))dest.checked=src.checked;else if(nodeName==="input"||nodeName==="textarea")dest.defaultValue=src.defaultValue}jQuery.extend({clone:function(elem,
dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!support.noCloneChecked&&((elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem))){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++)fixInput(srcElements[i],destElements[i])}if(dataAndEvents)if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<
l;i++)cloneCopyEvent(srcElements[i],destElements[i])}else cloneCopyEvent(elem,clone);destElements=getAll(clone,"script");if(destElements.length>0)setGlobalEval(destElements,!inPage&&getAll(elem,"script"));return clone},buildFragment:function(elems,context,scripts,selection){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++){elem=elems[i];if(elem||elem===0)if(jQuery.type(elem)==="object")jQuery.merge(nodes,elem.nodeType?[elem]:elem);
else if(!rhtml.test(elem))nodes.push(context.createTextNode(elem));else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"\x3c$1\x3e\x3c/$2\x3e")+wrap[2];j=wrap[0];while(j--)tmp=tmp.lastChild;jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}}fragment.textContent="";i=0;while(elem=nodes[i++]){if(selection&&jQuery.inArray(elem,selection)!==
-1)continue;contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains)setGlobalEval(tmp);if(scripts){j=0;while(elem=tmp[j++])if(rscriptType.test(elem.type||""))scripts.push(elem)}}return fragment},cleanData:function(elems){var data,elem,events,type,key,j,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(jQuery.acceptData(elem)){key=elem[data_priv.expando];if(key&&(data=data_priv.cache[key])){events=Object.keys(data.events||
{});if(events.length)for(j=0;(type=events[j])!==undefined;j++)if(special[type])jQuery.event.remove(elem,type);else jQuery.removeEvent(elem,type,data.handle);if(data_priv.cache[key])delete data_priv.cache[key]}}delete data_user.cache[elem[data_user.expando]]}}});jQuery.fn.extend({text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||(this.nodeType===11||this.nodeType===9))this.textContent=value})},null,
value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||(this.nodeType===11||this.nodeType===9)){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||(this.nodeType===11||this.nodeType===9)){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){if(this.parentNode)this.parentNode.insertBefore(elem,
this)})},after:function(){return this.domManip(arguments,function(elem){if(this.parentNode)this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function(selector,keepData){var elem,elems=selector?jQuery.filter(selector,this):this,i=0;for(;(elem=elems[i])!=null;i++){if(!keepData&&elem.nodeType===1)jQuery.cleanData(getAll(elem));if(elem.parentNode){if(keepData&&jQuery.contains(elem.ownerDocument,elem))setGlobalEval(getAll(elem,"script"));elem.parentNode.removeChild(elem)}}return this},empty:function(){var elem,
i=0;for(;(elem=this[i])!=null;i++)if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent=""}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&
elem.nodeType===1)return elem.innerHTML;if(typeof value==="string"&&(!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()])){value=value.replace(rxhtmlTag,"\x3c$1\x3e\x3c/$2\x3e");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value}}elem=0}catch(e){}}if(elem)this.empty().append(value)},null,value,arguments.length)},replaceWith:function(){var arg=arguments[0];this.domManip(arguments,function(elem){arg=this.parentNode;
jQuery.cleanData(getAll(this));if(arg)arg.replaceChild(elem,this)});return arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function(selector){return this.remove(selector,true)},domManip:function(args,callback){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&(typeof value==="string"&&(!support.checkClone&&rchecked.test(value))))return this.each(function(index){var self=
set.eq(index);if(isFunction)args[0]=value.call(this,index,self.html());self.domManip(args,callback)});if(l){fragment=jQuery.buildFragment(args,this[0].ownerDocument,false,this);first=fragment.firstChild;if(fragment.childNodes.length===1)fragment=first;if(first){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts)jQuery.merge(scripts,getAll(node,"script"))}callback.call(this[i],
node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&(!data_priv.access(node,"globalEval")&&jQuery.contains(doc,node)))if(node.src){if(jQuery._evalUrl)jQuery._evalUrl(node.src)}else jQuery.globalEval(node.textContent.replace(rcleanScript,""))}}}}return this}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},
function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get())}return this.pushStack(ret)}});var iframe,elemdisplay={};function actualDisplay(name,doc){var elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle?window.getDefaultComputedStyle(elem[0]).display:jQuery.css(elem[0],"display");
elem.detach();return display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if(display==="none"||!display){iframe=(iframe||jQuery("\x3ciframe frameborder\x3d'0' width\x3d'0' height\x3d'0'/\x3e")).appendTo(doc.documentElement);doc=iframe[0].contentDocument;doc.write();doc.close();display=actualDisplay(nodeName,doc);iframe.detach()}elemdisplay[nodeName]=display}return display}var rmargin=/^margin/;var rnumnonpx=new RegExp("^("+
pnum+")(?!px)[a-z%]+$","i");var getStyles=function(elem){return elem.ownerDocument.defaultView.getComputedStyle(elem,null)};function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);if(computed)ret=computed.getPropertyValue(name)||computed[name];if(computed){if(ret===""&&!jQuery.contains(elem.ownerDocument,elem))ret=jQuery.style(elem,name);if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;
style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret!==undefined?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function(){if(conditionFn()){delete this.get;return}return(this.get=hookFn).apply(this,arguments)}}}(function(){var pixelPositionVal,boxSizingReliableVal,divReset="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;"+"-moz-box-sizing:content-box;box-sizing:content-box",
docElem=document.documentElement,container=document.createElement("div"),div=document.createElement("div");div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";container.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;"+"margin-top:1px";container.appendChild(div);function computePixelPositionAndBoxSizingReliable(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;"+
"box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;"+"position:absolute;top:1%";docElem.appendChild(container);var divStyle=window.getComputedStyle(div,null);pixelPositionVal=divStyle.top!=="1%";boxSizingReliableVal=divStyle.width==="4px";docElem.removeChild(container)}if(window.getComputedStyle)jQuery.extend(support,{pixelPosition:function(){computePixelPositionAndBoxSizingReliable();return pixelPositionVal},boxSizingReliable:function(){if(boxSizingReliableVal==null)computePixelPositionAndBoxSizingReliable();
return boxSizingReliableVal},reliableMarginRight:function(){var ret,marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText=divReset;marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";docElem.appendChild(container);ret=!parseFloat(window.getComputedStyle(marginDiv,null).marginRight);docElem.removeChild(container);div.innerHTML="";return ret}})})();jQuery.swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=
elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret};var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])\x3d("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssPrefixes=["Webkit","O","Moz","ms"];function vendorPropName(style,name){if(name in style)return name;var capName=
name[0].toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in style)return name}return origName}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin")val+=jQuery.css(elem,
extra+cssExpand[i],true,styles);if(isBorderBox){if(extra==="content")val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="margin")val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding")val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),
isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null)val=elem.style[name];if(rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;
for(;index<length;index++){elem=elements[index];if(!elem.style)continue;values[index]=data_priv.get(elem,"olddisplay");display=elem.style.display;if(show){if(!values[index]&&display==="none")elem.style.display="";if(elem.style.display===""&&isHidden(elem))values[index]=data_priv.access(elem,"olddisplay",defaultDisplay(elem.nodeName))}else if(!values[index]){hidden=isHidden(elem);if(display&&display!=="none"||!hidden)data_priv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))}}for(index=
0;index<length;index++){elem=elements[index];if(!elem.style)continue;if(!show||(elem.style.display==="none"||elem.style.display===""))elem.style.display=show?values[index]||"":"none"}return elements}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{"columnCount":true,"fillOpacity":true,"fontWeight":true,"lineHeight":true,"opacity":true,"order":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},
cssProps:{"float":"cssFloat"},style:function(elem,name,value,extra){if(!elem||(elem.nodeType===3||(elem.nodeType===8||!elem.style)))return;var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));type=
"number"}if(value==null||value!==value)return;if(type==="number"&&!jQuery.cssNumber[origName])value+="px";if(!support.clearCloneStyle&&(value===""&&name.indexOf("background")===0))style[name]="inherit";if(!hooks||(!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined)){style[name]="";style[name]=value}}else{if(hooks&&("get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined))return ret;return style[name]}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);
name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks)val=hooks.get(elem,true,extra);if(val===undefined)val=curCSS(elem,name,styles);if(val==="normal"&&name in cssNormalTransform)val=cssNormalTransform[name];if(extra===""||extra){num=parseFloat(val);return extra===true||jQuery.isNumeric(num)?num||0:val}return val}});jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]=
{get:function(elem,computed,extra){if(computed)return elem.offsetWidth===0&&rdisplayswap.test(jQuery.css(elem,"display"))?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles):0)}}});jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,
function(elem,computed){if(computed)return jQuery.swap(elem,{"display":"inline-block"},curCSS,[elem,"marginRight"])});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||(parts[i-2]||parts[0]);return expanded}};if(!rmargin.test(prefix))jQuery.cssHooks[prefix+suffix].set=setPositiveNumber});
jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++)map[name[i]]=jQuery.css(elem,name[i],false,styles);return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(state){if(typeof state==="boolean")return state?
this.show():this.hide();return this.each(function(){if(isHidden(this))jQuery(this).show();else jQuery(this).hide()})}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||"swing";this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},
cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration)this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration);else this.pos=eased=percent;this.now=(this.end-this.start)*eased+this.start;if(this.options.step)this.options.step.call(this.elem,this.now,this);if(hooks&&hooks.set)hooks.set(this);
else Tween.propHooks._default.set(this);return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem[tween.prop]!=null&&(!tween.elem.style||tween.elem.style[tween.prop]==null))return tween.elem[tween.prop];result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result},set:function(tween){if(jQuery.fx.step[tween.prop])jQuery.fx.step[tween.prop](tween);else if(tween.elem.style&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=
null||jQuery.cssHooks[tween.prop]))jQuery.style(tween.elem,tween.prop,tween.now+tween.unit);else tween.elem[tween.prop]=tween.now}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode)tween.elem[tween.prop]=tween.now}};jQuery.easing={linear:function(p){return p},swing:function(p){return 0.5-Math.cos(p*Math.PI)/2}};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])\x3d|)("+
pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||unit!=="px"&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3];parts=parts||[];start=+target||1;do{scale=scale||".5";start=start/scale;jQuery.style(tween.elem,
prop,start+unit)}while(scale!==(scale=tween.cur()/target)&&(scale!==1&&--maxIterations))}if(parts){start=tween.start=+start||(+target||0);tween.unit=unit;tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]}return tween}]};function createFxNow(){setTimeout(function(){fxNow=undefined});return fxNow=jQuery.now()}function genFx(type,includeWidth){var which,i=0,attrs={height:type};includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=
type}if(includeWidth)attrs.opacity=attrs.width=type;return attrs}function createTween(value,prop,animation){var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;for(;index<length;index++)if(tween=collection[index].call(animation,prop,value))return tween}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=data_priv.get(elem,"fxshow");
if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued)oldfire()}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length)hooks.empty.fire()})})}if(elem.nodeType===1&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];display=jQuery.css(elem,"display");if(display==="none")display=defaultDisplay(elem.nodeName);
if(display==="inline"&&jQuery.css(elem,"float")==="none")style.display="inline-block"}if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}for(prop in props){value=props[prop];if(rfxtypes.exec(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show"))if(value==="show"&&(dataShow&&dataShow[prop]!==undefined))hidden=true;else continue;orig[prop]=dataShow&&
dataShow[prop]||jQuery.style(elem,prop)}}if(!jQuery.isEmptyObject(orig)){if(dataShow){if("hidden"in dataShow)hidden=dataShow.hidden}else dataShow=data_priv.access(elem,"fxshow",{});if(toggle)dataShow.hidden=!hidden;if(hidden)jQuery(elem).show();else anim.done(function(){jQuery(elem).hide()});anim.done(function(){var prop;data_priv.remove(elem,"fxshow");for(prop in orig)jQuery.style(elem,prop,orig[prop])});for(prop in orig){tween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=
tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0}}}}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value)if(!(index in
props)){props[index]=value[index];specialEasing[index]=easing}}else specialEasing[name]=easing}}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return false;var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;
for(;index<length;index++)animation.tweens[index].run(percent);deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length)return remaining;else{deferred.resolveWith(elem,[animation]);return false}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=
jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;stopped=true;for(;index<length;index++)animation.tweens[index].run(1);if(gotoEnd)deferred.resolveWith(elem,[animation,gotoEnd]);else deferred.rejectWith(elem,[animation,gotoEnd]);return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);
for(;index<length;index++){result=animationPrefilters[index].call(animation,elem,props,animation.opts);if(result)return result}jQuery.map(props,createTween,animation);if(jQuery.isFunction(animation.opts.start))animation.opts.start.call(elem,animation);jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}jQuery.Animation=
jQuery.extend(Animation,{tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else props=props.split(" ");var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];tweeners[prop]=tweeners[prop]||[];tweeners[prop].unshift(callback)}},prefilter:function(callback,prepend){if(prepend)animationPrefilters.unshift(callback);else animationPrefilters.push(callback)}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},
speed):{complete:fn||(!fn&&easing||jQuery.isFunction(speed)&&speed),duration:speed,easing:fn&&easing||easing&&(!jQuery.isFunction(easing)&&easing)};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true)opt.queue="fx";opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old))opt.old.call(this);if(opt.queue)jQuery.dequeue(this,opt.queue)};
return opt};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||data_priv.get(this,"finish"))anim.stop(true)};doAnimation.finish=doAnimation;return empty||optall.queue===false?
this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false)this.queue(type||"fx",[]);return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=data_priv.get(this);if(index){if(data[index]&&data[index].stop)stopQueue(data[index])}else for(index in data)if(data[index]&&
(data[index].stop&&rrun.test(index)))stopQueue(data[index]);for(index=timers.length;index--;)if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}if(dequeue||!gotoEnd)jQuery.dequeue(this,type)})},finish:function(type){if(type!==false)type=type||"fx";return this.each(function(){var index,data=data_priv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:
0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop)hooks.stop.call(this,true);for(index=timers.length;index--;)if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1)}for(index=0;index<length;index++)if(queue[index]&&queue[index].finish)queue[index].finish.call(this);delete data.finish})}});jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==
null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.timers=[];jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;fxNow=jQuery.now();for(;i<
timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer)timers.splice(i--,1)}if(!timers.length)jQuery.fx.stop();fxNow=undefined};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);if(timer())jQuery.fx.start();else jQuery.timers.pop()};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId)timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval)};jQuery.fx.stop=function(){clearInterval(timerId);timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,
type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;select.disabled=true;support.optDisabled=!opt.disabled;input=document.createElement("input");
input.value="t";input.type="radio";support.radioValue=input.value==="t"})();var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}});jQuery.extend({attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(!elem||(nType===3||(nType===8||nType===2)))return;if(typeof elem.getAttribute===strundefined)return jQuery.prop(elem,
name,value);if(nType!==1||!jQuery.isXMLDoc(elem)){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)}if(value!==undefined)if(value===null)jQuery.removeAttr(elem,name);else if(hooks&&("set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined))return ret;else{elem.setAttribute(name,value+"");return value}else if(hooks&&("get"in hooks&&(ret=hooks.get(elem,name))!==null))return ret;else{ret=jQuery.find.attr(elem,name);return ret==null?undefined:
ret}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&elem.nodeType===1)while(name=attrNames[i++]){propName=jQuery.propFix[name]||name;if(jQuery.expr.match.bool.test(name))elem[propName]=false;elem.removeAttribute(name)}},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&(value==="radio"&&jQuery.nodeName(elem,"input"))){var val=elem.value;elem.setAttribute("type",value);if(val)elem.value=val;return value}}}}});boolHook={set:function(elem,
value,name){if(value===false)jQuery.removeAttr(elem,name);else elem.setAttribute(name,name);return name}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle;if(!isXML){handle=attrHandle[name];attrHandle[name]=ret;ret=getter(elem,name,isXML)!=null?name.toLowerCase():null;attrHandle[name]=handle}return ret}});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function(name,
value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}});jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||(nType===3||(nType===8||nType===2)))return;notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined)return hooks&&
("set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined)?ret:elem[name]=value;else return hooks&&("get"in hooks&&(ret=hooks.get(elem,name))!==null)?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){return elem.hasAttribute("tabindex")||(rfocusable.test(elem.nodeName)||elem.href)?elem.tabIndex:-1}}}});if(!support.optSelected)jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode)JSCOMPILER_PRESERVE(parent.parentNode.selectedIndex);return null}};
jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed=typeof value==="string"&&value,i=0,len=this.length;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed){classes=(value||
"").match(rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ");if(cur){j=0;while(clazz=classes[j++])if(cur.indexOf(" "+clazz+" ")<0)cur+=clazz+" ";finalValue=jQuery.trim(cur);if(elem.className!==finalValue)elem.className=finalValue}}}return this},removeClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed=arguments.length===0||typeof value==="string"&&value,i=0,len=this.length;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,
j,this.className))});if(proceed){classes=(value||"").match(rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"");if(cur){j=0;while(clazz=classes[j++])while(cur.indexOf(" "+clazz+" ")>=0)cur=cur.replace(" "+clazz+" "," ");finalValue=value?jQuery.trim(cur):"";if(elem.className!==finalValue)elem.className=finalValue}}}return this},toggleClass:function(value,stateVal){var type=typeof value;if(typeof stateVal==="boolean"&&type===
"string")return stateVal?this.addClass(value):this.removeClass(value);if(jQuery.isFunction(value))return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)});return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];while(className=classNames[i++])if(self.hasClass(className))self.removeClass(className);else self.addClass(className)}else if(type===strundefined||type==="boolean"){if(this.className)data_priv.set(this,
"__className__",this.className);this.className=this.className||value===false?"":data_priv.get(this,"__className__")||""}})},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++)if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0)return true;return false}});var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];
if(hooks&&("get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined))return ret;ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1)return;if(isFunction)val=value.call(this,i,jQuery(this).val());else val=value;if(val==null)val="";else if(typeof val==="number")val+="";else if(jQuery.isArray(val))val=jQuery.map(val,function(value){return value==null?"":value+""});hooks=
jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||(!("set"in hooks)||hooks.set(this,val,"value")===undefined))this.value=val})}});jQuery.extend({valHooks:{select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&((support.optDisabled?!option.disabled:option.getAttribute("disabled")===
null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup")))){value=jQuery(option).val();if(one)return value;values.push(value)}}return values},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(option.selected=jQuery.inArray(jQuery(option).val(),values)>=0)optionSet=true}if(!optionSet)elem.selectedIndex=-1;return values}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=
{set:function(elem,value){if(jQuery.isArray(value))return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}};if(!support.checkOn)jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=
function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,
selector||"**",fn)}});var nonce=jQuery.now();var rquery=/\?/;jQuery.parseJSON=function(data){return JSON.parse(data+"")};jQuery.parseXML=function(data){var xml,tmp;if(!data||typeof data!=="string")return null;try{tmp=new DOMParser;xml=tmp.parseFromString(data,"text/xml")}catch(e){xml=undefined}if(!xml||xml.getElementsByTagName("parsererror").length)jQuery.error("Invalid XML: "+data);return xml};var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=
/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!==
"string"){func=dataTypeExpression;dataTypeExpression="*"}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func))while(dataType=dataTypes[i++])if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func)}else(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;
function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&(!seekingTransport&&!inspected[dataTypeOrTransport])){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false}else if(seekingTransport)return!(selected=dataTypeOrTransport)});return selected}return inspect(options.dataTypes[0])||
!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)if(src[key]!==undefined)(flatOptions[key]?target:deep||(deep={}))[key]=src[key];if(deep)jQuery.extend(true,target,deep);return target}function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined)ct=s.mimeType||jqXHR.getResponseHeader("Content-Type")}if(ct)for(type in contents)if(contents[type]&&
contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType)firstDataType=type}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0])dataTypes.unshift(finalDataType);return responses[finalDataType]}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters=
{},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];current=dataTypes.shift();while(current){if(s.responseFields[current])jqXHR[s.responseFields[current]]=response;if(!prev&&(isSuccess&&s.dataFilter))response=s.dataFilter(response,s.dataType);prev=current;current=dataTypes.shift();if(current)if(current==="*")current=prev;else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv)for(conv2 in converters){tmp=
conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true)conv=converters[conv2];else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1])}break}}}if(conv!==true)if(conv&&s["throws"])response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}return{state:"success",data:response}}jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,
type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},
flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},
options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString))responseHeaders[match[1].toLowerCase()]=
match[2]}match=responseHeaders[key.toLowerCase()]}return match==null?null:match},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();if(!state){name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}return this},overrideMimeType:function(type){if(!state)s.mimeType=type;return this},statusCode:function(map){var code;if(map)if(state<2)for(code in map)statusCode[code]=[statusCode[code],
map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;if(transport)transport.abort(finalText);done(0,finalText);return this}};deferred.promise(jqXHR).complete=completeDeferred.add;jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;s.url=((url||(s.url||ajaxLocation))+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.type=options.method||(options.type||(s.method||s.type));s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||
[""];if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!==ajaxLocParts[1]||(parts[2]!==ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?"80":"443"))!==(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443")))))}if(s.data&&(s.processData&&typeof s.data!=="string"))s.data=jQuery.param(s.data,s.traditional);inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2)return jqXHR;fireGlobals=s.global;if(fireGlobals&&jQuery.active++===0)jQuery.event.trigger("ajaxStart");
s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url;if(!s.hasContent){if(s.data){cacheURL=s.url+=(rquery.test(cacheURL)?"\x26":"?")+s.data;delete s.data}if(s.cache===false)s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_\x3d"+nonce++):cacheURL+(rquery.test(cacheURL)?"\x26":"?")+"_\x3d"+nonce++}if(s.ifModified){if(jQuery.lastModified[cacheURL])jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]);if(jQuery.etag[cacheURL])jqXHR.setRequestHeader("If-None-Match",
jQuery.etag[cacheURL])}if(s.data&&(s.hasContent&&s.contentType!==false)||options.contentType)jqXHR.setRequestHeader("Content-Type",s.contentType);jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q\x3d0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2))return jqXHR.abort();strAbort="abort";for(i in{success:1,
error:1,complete:1})jqXHR[i](s[i]);transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport)done(-1,"No Transport");else{jqXHR.readyState=1;if(fireGlobals)globalEventContext.trigger("ajaxSend",[jqXHR,s]);if(s.async&&s.timeout>0)timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout);try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<2)done(-1,e);else throw e;}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,
response,modified,statusText=nativeStatusText;if(state===2)return;state=2;if(timeoutTimer)clearTimeout(timeoutTimer);transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses)response=ajaxHandleResponses(s,jqXHR,responses);response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified)jQuery.lastModified[cacheURL]=modified;modified=jqXHR.getResponseHeader("etag");
if(modified)jQuery.etag[cacheURL]=modified}if(status===204||s.type==="HEAD")statusText="nocontent";else if(status===304)statusText="notmodified";else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0)status=0}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess)deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);else deferred.rejectWith(callbackContext,
[jqXHR,statusText,error]);jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals)globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]);completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!--jQuery.active)jQuery.event.trigger("ajaxStop")}}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,
undefined,callback,"script")}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}});jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}});jQuery._evalUrl=function(url){return jQuery.ajax({url:url,
type:"GET",dataType:"script",async:false,global:false,"throws":true})};jQuery.fn.extend({wrapAll:function(html){var wrap;if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode)wrap.insertBefore(this[0]);wrap.map(function(){var elem=this;while(elem.firstElementChild)elem=elem.firstElementChild;return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapInner(html.call(this,
i))});return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length)contents.wrapAll(html);else self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body"))jQuery(this).replaceWith(this.childNodes)}).end()}});jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=
0&&elem.offsetHeight<=0};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix))add(prefix,v);else buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add)});
else if(!traditional&&jQuery.type(obj)==="object")for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add);else add(prefix,obj)}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value==null?"":value;s[s.length]=encodeURIComponent(key)+"\x3d"+encodeURIComponent(value)};if(traditional===undefined)traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional;if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,
function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("\x26").replace(r20,"+")};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&(!jQuery(this).is(":disabled")&&(rsubmittable.test(this.nodeName)&&(!rsubmitterTypes.test(type)&&
(this.checked||!rcheckableType.test(type)))))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var xhrId=0,xhrCallbacks={},xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();if(window.ActiveXObject)jQuery(window).on("unload",
function(){for(var key in xhrCallbacks)xhrCallbacks[key]()});support.cors=!!xhrSupported&&"withCredentials"in xhrSupported;support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var callback;if(support.cors||xhrSupported&&!options.crossDomain)return{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];
if(options.mimeType&&xhr.overrideMimeType)xhr.overrideMimeType(options.mimeType);if(!options.crossDomain&&!headers["X-Requested-With"])headers["X-Requested-With"]="XMLHttpRequest";for(i in headers)xhr.setRequestHeader(i,headers[i]);callback=function(type){return function(){if(callback){delete xhrCallbacks[id];callback=xhr.onload=xhr.onerror=null;if(type==="abort")xhr.abort();else if(type==="error")complete(xhr.status,xhr.statusText);else complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,
typeof xhr.responseText==="string"?{text:xhr.responseText}:undefined,xhr.getAllResponseHeaders())}}};xhr.onload=callback();xhr.onerror=callback("error");callback=xhrCallbacks[id]=callback("abort");xhr.send(options.hasContent&&options.data||null)},abort:function(){if(callback)callback()}}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){jQuery.globalEval(text);
return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined)s.cache=false;if(s.crossDomain)s.type="GET"});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("\x3cscript\x3e").prop({async:true,charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();callback=null;if(evt)complete(evt.type==="error"?404:200,evt.type)});document.head.appendChild(script[0])},abort:function(){if(callback)callback()}}}});
var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&(!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&(rjsonp.test(s.data)&&"data")));if(jsonProp||
s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp)s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName);else if(s.jsonp!==false)s.url+=(rquery.test(s.url)?"\x26":"?")+s.jsonp+"\x3d"+callbackName;s.converters["script json"]=function(){if(!responseContainer)jQuery.error(callbackName+" was not called");return responseContainer[0]};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=
arguments};jqXHR.always(function(){window[callbackName]=overwritten;if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&jQuery.isFunction(overwritten))overwritten(responseContainer[0]);responseContainer=overwritten=undefined});return"script"}});jQuery.parseHTML=function(data,context,keepScripts){if(!data||typeof data!=="string")return null;if(typeof context==="boolean"){keepScripts=context;context=false}context=context||document;
var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed)return[context.createElement(parsed[1])];parsed=jQuery.buildFragment([data],context,scripts);if(scripts&&scripts.length)jQuery(scripts).remove();return jQuery.merge([],parsed.childNodes)};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load)return _load.apply(this,arguments);var selector,type,response,self=this,off=url.indexOf(" ");if(off>=0){selector=url.slice(off);url=url.slice(0,
off)}if(jQuery.isFunction(params)){callback=params;params=undefined}else if(params&&typeof params==="object")type="POST";if(self.length>0)jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("\x3cdiv\x3e").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])});return this};jQuery.expr.filters.animated=
function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var docElem=window.document.documentElement;function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView}jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static")elem.style.position="relative";curOffset=curElem.offset();
curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options))options=options.call(elem,i,curOffset);if(options.top!=null)props.top=options.top-curOffset.top+curTop;if(options.left!=null)props.left=
options.left-curOffset.left+curLeft;if("using"in options)options.using.call(elem,props);else curElem.css(props)}};jQuery.fn.extend({offset:function(options){if(arguments.length)return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(!doc)return;docElem=doc.documentElement;if(!jQuery.contains(docElem,elem))return box;if(typeof elem.getBoundingClientRect!==strundefined)box=elem.getBoundingClientRect();
win=getWindow(doc);return{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft}},position:function(){if(!this[0])return;var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed")offset=elem.getBoundingClientRect();else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html"))parentOffset=offsetParent.offset();parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",
true);parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",true)}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||docElem;while(offsetParent&&(!jQuery.nodeName(offsetParent,"html")&&jQuery.css(offsetParent,"position")==="static"))offsetParent=offsetParent.offsetParent;return offsetParent||docElem})}});jQuery.each({scrollLeft:"pageXOffset",
scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined)return win?win[prop]:elem[method];if(win)win.scrollTo(!top?val:window.pageXOffset,top?val:window.pageYOffset);else elem[method]=val},method,val,arguments.length,null)}});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=
curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}})});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem))return elem.document.documentElement["client"+
name];if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});jQuery.fn.size=function(){return this.length};jQuery.fn.andSelf=jQuery.fn.addBack;if(typeof define==="function"&&define.amd)define("jquery",[],function(){return jQuery});var _jQuery=
window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery)window.$=_$;if(deep&&window.jQuery===jQuery)window.jQuery=_jQuery;return jQuery};if(typeof noGlobal===strundefined)window.jQuery=window.$=jQuery;return jQuery});(function($,window,document,undefined){var bootstrap_growl_remove=[];$.growl=function(content,options){var message=null,title=null,icon=null,$growl,growlClass,css,offsetAmount;if(Object.prototype.toString.call(content)=="[object Object]"){message=content.message;title=" "+content.title+" ";icon=content.icon}else message=content;options=$.extend(true,{},$.growl.default_options,options);if(options.template.icon_type==="class")options.template.icon='\x3cspan class\x3d""\x3e';else options.template.icon=
'\x3cimg src\x3d"" /\x3e';growlClass="bootstrap-growl-"+options.position.from+"-"+options.position.align;$growl=$(options.template.container);$growl.addClass(growlClass);if(options.type)$growl.addClass("alert-"+options.type);else $growl.addClass("alert-info");if(options.allow_dismiss)$growl.append($(options.template.dismiss));if(icon)if(options.template.icon)if(options.template.icon_type=="class")$growl.append($(options.template.icon).addClass(icon));else $growl.append($(options.template.icon).attr("src",
icon));else $growl.append(icon);if(title){if(options.template.title)$growl.append($(options.template.title).html(title));else $growl.append(title);$growl.append(options.template.title_divider)}if(options.template.message)$growl.append($(options.template.message).html(message));else $growl.append(message);offsetAmount=options.offset;$("."+growlClass).each(function(){return offsetAmount=Math.max(offsetAmount,parseInt($(this).css(options.position.from))+$(this).outerHeight()+options.spacing)});css={"position":options.ele===
"body"?"fixed":"absolute","margin":0,"z-index":options.z_index,"display":"none"};css[options.position.from]=offsetAmount+"px";$growl.css(css);$(options.ele).append($growl);switch(options.position.align){case "center":$growl.css({"left":"50%","marginLeft":-($growl.outerWidth()/2)+"px"});break;case "left":$growl.css("left",options.offset+"px");break;case "right":$growl.css("right",options.offsetRight+"px");break}if(options.onGrowlShow)options.onGrowlShow(event);var fadeIn=$growl.fadeIn(options.fade_in,
function(event){if(options.onGrowlShown)options.onGrowlShown(event);if(options.delay>0){if(options.pause_on_mouseover==true)$growl.on("mouseover",function(){clearTimeout(bootstrap_growl_remove[$growl.index()])}).on("mouseleave",function(){bootstrap_growl_remove[$growl.index()]=setTimeout(function(){$growl.fadeOut(options.fade_out,function(event){return $growl.alert("close")})},options.delay)});bootstrap_growl_remove[$growl.index()]=setTimeout(function(){$growl.fadeOut(options.fade_out,function(event){return $growl.alert("close")})},
options.delay)}});$growl.bind("close.bs.alert",function(event){if(options.onGrowlClose)options.onGrowlClose(event)});$growl.bind("closed.bs.alert",function(event){if(options.onGrowlClosed)options.onGrowlClosed(event);var pos=$(this).css(options.position.from);$(this).nextAll("."+growlClass).each(function(){$(this).css(options.position.from,pos);pos=parseInt(pos)+options.spacing+$(this).outerHeight()})});return $growl};$.growl.default_options={ele:"body",type:"info",allow_dismiss:true,position:{from:"top",
align:"right"},offset:60,offsetRight:10,spacing:10,z_index:1029,fade_in:400,fade_out:400,delay:5E3,pause_on_mouseover:true,onGrowlShow:null,onGrowlShown:null,onGrowlClose:null,onGrowlClosed:null,template:{icon_type:"class",container:'\x3cdiv class\x3d"col-xs-10 col-sm-10 col-md-3 alert"\x3e',dismiss:'\x3cbutton type\x3d"button" class\x3d"close" data-dismiss\x3d"alert" aria-hidden\x3d"true"\x3e\x26times;\x3c/button\x3e',title:"\x3cstrong\x3e",title_divider:"",message:""}}})(jQuery,window,document);(function($){var RSS=function(target,url,options,callback){this.target=target;this.url=url;this.html=[];this.effectQueue=[];this.options=$.extend({ssl:false,limit:null,key:null,layoutTemplate:"\x3cul\x3e{entries}\x3c/ul\x3e",entryTemplate:'\x3cli\x3e\x3ca href\x3d"{url}"\x3e[{author}@{date}] {title}\x3c/a\x3e\x3cbr/\x3e{shortBodyPlain}\x3c/li\x3e',tokens:{},outputMode:"json",effect:"show",error:function(){},success:function(){}},options||{});this.callback=callback||this.options.success};RSS.htmlTags=
["doctype","html","head","title","base","link","meta","style","script","noscript","body","article","nav","aside","section","header","footer","h1-h6","hgroup","address","p","hr","pre","blockquote","ol","ul","li","dl","dt","dd","figure","figcaption","div","table","caption","thead","tbody","tfoot","tr","th","td","col","colgroup","form","fieldset","legend","label","input","button","select","datalist","optgroup","option","textarea","keygen","output","progress","meter","details","summary","command","menu",
"del","ins","img","iframe","embed","object","param","video","audio","source","canvas","track","map","area","a","em","strong","i","b","u","s","small","abbr","q","cite","dfn","sub","sup","time","code","kbd","samp","var","mark","bdi","bdo","ruby","rt","rp","span","br","wbr"];RSS.prototype.load=function(callback){var apiProtocol="http"+(this.options.ssl?"s":""),apiHost=apiProtocol+"://ajax.googleapis.com/ajax/services/feed/load",apiUrl=apiHost+"?v\x3d1.0\x26output\x3d"+this.options.outputMode+"\x26callback\x3d?\x26q\x3d"+
encodeURIComponent(this.url);if(this.options.limit!=null)apiUrl+="\x26num\x3d"+this.options.limit;if(this.options.key!=null)apiUrl+="\x26key\x3d"+this.options.key;$.getJSON(apiUrl,callback)};RSS.prototype.render=function(){var self=this;this.load(function(data){try{self.feed=data.responseData.feed;self.entries=data.responseData.feed.entries}catch(e){self.entries=[];self.feed=null;return self.options.error.call(self)}var html=self.generateHTMLForEntries();self.target.append(html.layout);if(html.entries.length!==
0)self.appendEntriesAndApplyEffects($("entries",html.layout),html.entries);if(self.effectQueue.length>0)self.executeEffectQueue(self.callback);else $.isFunction(self.callback)&&self.callback.call(this,self.target)})};RSS.prototype.appendEntriesAndApplyEffects=function(target,entries){var self=this;$.each(entries,function(idx,entry){var $html=self.wrapContent(entry);if(self.options.effect==="show")target.before($html);else{$html.css({display:"none"});target.before($html);self.applyEffect($html,self.options.effect)}});
target.remove()};RSS.prototype.generateHTMLForEntries=function(){var self=this,result={entries:[],layout:null};$(this.entries).each(function(){var entry=this;if(self.isRelevant(entry,result.entries.length)){var evaluatedString=self.evaluateStringForEntry(self.options.entryTemplate,entry);result.entries.push(evaluatedString)}});if(!!this.options.entryTemplate)result.layout=this.wrapContent(this.options.layoutTemplate.replace("{entries}","\x3centries\x3e\x3c/entries\x3e"));else result.layout=this.wrapContent("\x3cdiv\x3e\x3centries\x3e\x3c/entries\x3e\x3c/div\x3e");
return result};RSS.prototype.wrapContent=function(content){if($.trim(content).indexOf("\x3c")!==0)return $("\x3cdiv\x3e"+content+"\x3c/div\x3e");else return $(content)};RSS.prototype.applyEffect=function($element,effect,callback){var self=this;switch(effect){case "slide":$element.slideDown("slow",callback);break;case "slideFast":$element.slideDown(callback);break;case "slideSynced":self.effectQueue.push({element:$element,effect:"slide"});break;case "slideFastSynced":self.effectQueue.push({element:$element,
effect:"slideFast"});break}};RSS.prototype.executeEffectQueue=function(callback){var self=this;this.effectQueue.reverse();var executeEffectQueueItem=function(){var item=self.effectQueue.pop();if(item)self.applyEffect(item.element,item.effect,executeEffectQueueItem);else callback&&callback()};executeEffectQueueItem()};RSS.prototype.evaluateStringForEntry=function(string,entry){var result=string,self=this;$(string.match(/(\{.*?\})/g)).each(function(){var token=this.toString();result=result.replace(token,
self.getValueForToken(token,entry))});return result};RSS.prototype.isRelevant=function(entry,entryCount){var tokenMap=this.getTokenMap(entry);if(this.options.filter)if(this.options.filterLimit&&this.options.filterLimit==entryCount)return false;else return this.options.filter(entry,tokenMap);else return true};RSS.prototype.getTokenMap=function(entry){if(!this.feedTokens){var feed=JSON.parse(JSON.stringify(this.feed));delete feed.entries;this.feedTokens=feed}return $.extend({feed:this.feedTokens,url:String(entry.link).escapeHTML(),
author:entry.author,date:entry.publishedDate,title:entry.title,body:entry.content,shortBody:entry.contentSnippet,bodyPlain:function(entry){var result=entry.content.replace(/<script[\\r\\\s\S]*<\/script>/mgi,"").replace(/<\/?[^>]+>/gi,"");for(var i=0;i<RSS.htmlTags.length;i++)result=result.replace(new RegExp("\x3c"+RSS.htmlTags[i],"gi"),"");return result}(entry),shortBodyPlain:entry.contentSnippet.replace(/<\/?[^>]+>/gi,""),index:$.inArray(entry,this.entries),totalEntries:this.entries.length,teaserImage:function(entry){try{return entry.content.match(/(<img.*?>)/gi)[0]}catch(e){return""}}(entry),
teaserImageUrl:function(entry){try{return entry.content.match(/(<img.*?>)/gi)[0].match(/src="(.*?)"/)[1]}catch(e){return""}}(entry)},this.options.tokens)};RSS.prototype.getValueForToken=function(_token,entry){var tokenMap=this.getTokenMap(entry),token=_token.replace(/[\{\}]/g,""),result=tokenMap[token];if(typeof result!="undefined")return typeof result=="function"?result(entry,tokenMap):result;else throw new Error("Unknown token: "+_token);};$.fn.rss=function(url,options,callback){(new RSS(this,url,
options,callback)).render();return this}})(jQuery);(function($){var retryKey="__RETRY__"+(new Date).getTime();function isPromiseResolved(promise){if(promise.state)return promise.state()!=="pending";else return promise.isResolved()||promise.isRejected()}$.ajaxPrefilter(function(options,originalOptions,jqXHR){if(options[retryKey]||typeof options.shouldRetry==="undefined")return;originalOptions[retryKey]=true;var dfr=$.Deferred(),completeDeferred=$.Deferred(),statusCode={},retryCount=0,newOptions,finalStatusCode,shouldRetry=function(jqXHR,retryCount,
method){var result,test=options.shouldRetry,type=typeof test;switch(type){case "number":result=retryCount<test;break;case "boolean":result=test;break;case "function":result=test(jqXHR,retryCount,method);break}if(method.toLowerCase()=="post")result=false;if(typeof result==="object"&&typeof result.then==="function")return $.Deferred(function(dfr){result.then(dfr.resolve,function(){dfr.resolve(false)})}).promise();return $.when(result)};newOptions=$.extend({},originalOptions,{success:$.noop,error:$.noop,
complete:$.noop,statusCode:{}});(function tryRequest(options,lastJqXHR,finalizer){(!lastJqXHR?$.when(true):shouldRetry(lastJqXHR,retryCount++,options.type||"GET")).done(function(willRetry){if(willRetry===true)(!lastJqXHR?jqXHR:$.ajax(options)).then(function(data,textStatus,jqXHR){finalStatusCode=jqXHR.status;dfr.resolveWith(this,arguments);dfr.done(statusCode[finalStatusCode]);completeDeferred.resolveWith(this,[jqXHR,textStatus])},function(jqXHR,textStatus){var failureArgs=arguments,failureContext=
this;tryRequest(options,jqXHR,function(){finalStatusCode=jqXHR.status;dfr.rejectWith(failureContext,failureArgs);dfr.fail(statusCode[finalStatusCode]);completeDeferred.resolveWith(failureContext,[jqXHR,textStatus])})});else finalizer()})})(newOptions);if(jqXHR.complete){jqXHR.complete=completeDeferred.done;jqXHR.success=dfr.done;jqXHR.error=dfr.fail}$.extend(jqXHR,dfr.promise());jqXHR.statusCode=function(map){var code;if(map)if(isPromiseResolved(dfr))dfr.then(map[finalStatusCode],map[finalStatusCode]);
else for(code in map)statusCode[code]=[statusCode[code],map[code]];return this}})})(jQuery);(function($){$.ajaxMultiQueue=function(n){return new MultiQueue(~~n)};function MultiQueue(number){var queues,i,current=0;if(!queues){queues=new Array(number);for(i=0;i<number;i++)queues[i]=$({})}function queue(ajaxOpts){var jqXHR,dfd=$.Deferred(),promise=dfd.promise();queues[current].queue(doRequest);current=(current+1)%number;function doRequest(next){if(ajaxOpts.currentPage&&ajaxOpts.currentPage!=NRS.currentPage)next();else if(ajaxOpts.currentSubPage&&ajaxOpts.currentSubPage!=NRS.currentSubPage)next();
else{jqXHR=$.ajax(ajaxOpts);jqXHR.done(dfd.resolve).fail(dfd.reject).then(next,next)}}return promise}return{queue:queue}}})(jQuery);if(typeof jQuery==="undefined")throw new Error("Bootstrap requires jQuery");
JSCOMPILER_PRESERVE(+function($){function transitionEnd(){var el=document.createElement("bootstrap");var transEndEventNames={"WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend","transition":"transitionend"};for(var name in transEndEventNames)if(el.style[name]!==undefined)return{end:transEndEventNames[name]}}$.fn.emulateTransitionEnd=function(duration){var called=false,$el=this;$(this).one($.support.transition.end,function(){called=
true});var callback=function(){if(!called)$($el).trigger($.support.transition.end)};setTimeout(callback,duration);return this};$(function(){$.support.transition=transitionEnd()})}(jQuery));
JSCOMPILER_PRESERVE(+function($){var dismiss='[data-dismiss\x3d"alert"]';var Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.prototype.close=function(e){var $this=$(this);var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}var $parent=$(selector);if(e)e.preventDefault();if(!$parent.length)$parent=$this.hasClass("alert")?$this:$this.parent();$parent.trigger(e=$.Event("close.bs.alert"));if(e.isDefaultPrevented())return;
$parent.removeClass("in");function removeElement(){$parent.trigger("closed.bs.alert").remove()}$.support.transition&&$parent.hasClass("fade")?$parent.one($.support.transition.end,removeElement).emulateTransitionEnd(150):removeElement()};var old=$.fn.alert;$.fn.alert=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.alert");if(!data)$this.data("bs.alert",data=new Alert(this));if(typeof option=="string")data[option].call($this)})};$.fn.alert.Constructor=Alert;$.fn.alert.noConflict=
function(){$.fn.alert=old;return this};$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery));
JSCOMPILER_PRESERVE(+function($){var Button=function(element,options){this.$element=$(element);this.options=$.extend({},Button.DEFAULTS,options)};Button.DEFAULTS={loadingText:"loading..."};Button.prototype.setState=function(state){var d="disabled";var $el=this.$element;var val=$el.is("input")?"val":"html";var data=$el.data();state=state+"Text";if(!data.resetText)$el.data("resetText",$el[val]());$el[val](data[state]||this.options[state]);setTimeout(function(){state=="loadingText"?$el.addClass(d).attr(d,
d):$el.removeClass(d).removeAttr(d)},0)};Button.prototype.toggle=function(){var $parent=this.$element.closest('[data-toggle\x3d"buttons"]');var changed=true;if($parent.length){var $input=this.$element.find("input");if($input.prop("type")==="radio")if($input.prop("checked")&&this.$element.hasClass("active"))changed=false;else $parent.find(".active").removeClass("active");if(changed)$input.prop("checked",!this.$element.hasClass("active")).trigger("change")}if(changed)this.$element.toggleClass("active")};
var old=$.fn.button;$.fn.button=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.button");var options=typeof option=="object"&&option;if(!data)$this.data("bs.button",data=new Button(this,options));if(option=="toggle")data.toggle();else if(option)data.setState(option)})};$.fn.button.Constructor=Button;$.fn.button.noConflict=function(){$.fn.button=old;return this};$(document).on("click.bs.button.data-api","[data-toggle^\x3dbutton]",function(e){var $btn=$(e.target);
if(!$btn.hasClass("btn"))$btn=$btn.closest(".btn");$btn.button("toggle");e.preventDefault()})}(jQuery));
JSCOMPILER_PRESERVE(+function($){var Carousel=function(element,options){this.$element=$(element);this.$indicators=this.$element.find(".carousel-indicators");this.options=options;this.paused=this.sliding=this.interval=this.$active=this.$items=null;this.options.pause=="hover"&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))};Carousel.DEFAULTS={interval:5E3,pause:"hover",wrap:true};Carousel.prototype.cycle=function(e){e||(this.paused=false);this.interval&&
clearInterval(this.interval);this.options.interval&&(!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval)));return this};Carousel.prototype.getActiveIndex=function(){this.$active=this.$element.find(".item.active");this.$items=this.$active.parent().children();return this.$items.index(this.$active)};Carousel.prototype.to=function(pos){var that=this;var activeIndex=this.getActiveIndex();if(pos>this.$items.length-1||pos<0)return;if(this.sliding)return this.$element.one("slid.bs.carousel",
function(){that.to(pos)});if(activeIndex==pos)return this.pause().cycle();return this.slide(pos>activeIndex?"next":"prev",$(this.$items[pos]))};Carousel.prototype.pause=function(e){e||(this.paused=true);if(this.$element.find(".next, .prev").length&&$.support.transition.end){this.$element.trigger($.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};Carousel.prototype.next=function(){if(this.sliding)return;return this.slide("next")};Carousel.prototype.prev=
function(){if(this.sliding)return;return this.slide("prev")};Carousel.prototype.slide=function(type,next){var $active=this.$element.find(".item.active");var $next=next||$active[type]();var isCycling=this.interval;var direction=type=="next"?"left":"right";var fallback=type=="next"?"first":"last";var that=this;if(!$next.length){if(!this.options.wrap)return;$next=this.$element.find(".item")[fallback]()}this.sliding=true;isCycling&&this.pause();var e=$.Event("slide.bs.carousel",{relatedTarget:$next[0],
direction:direction});if($next.hasClass("active"))return;if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");this.$element.one("slid.bs.carousel",function(){var $nextIndicator=$(that.$indicators.children()[that.getActiveIndex()]);$nextIndicator&&$nextIndicator.addClass("active")})}if($.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(e);if(e.isDefaultPrevented())return;$next.addClass(type);JSCOMPILER_PRESERVE($next[0].offsetWidth);$active.addClass(direction);
$next.addClass(direction);$active.one($.support.transition.end,function(){$next.removeClass([type,direction].join(" ")).addClass("active");$active.removeClass(["active",direction].join(" "));that.sliding=false;setTimeout(function(){that.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(600)}else{this.$element.trigger(e);if(e.isDefaultPrevented())return;$active.removeClass("active");$next.addClass("active");this.sliding=false;this.$element.trigger("slid.bs.carousel")}isCycling&&this.cycle();
return this};var old=$.fn.carousel;$.fn.carousel=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.carousel");var options=$.extend({},Carousel.DEFAULTS,$this.data(),typeof option=="object"&&option);var action=typeof option=="string"?option:options.slide;if(!data)$this.data("bs.carousel",data=new Carousel(this,options));if(typeof option=="number")data.to(option);else if(action)data[action]();else if(options.interval)data.pause().cycle()})};$.fn.carousel.Constructor=
Carousel;$.fn.carousel.noConflict=function(){$.fn.carousel=old;return this};$(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var $this=$(this),href;var $target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""));var options=$.extend({},$target.data(),$this.data());var slideIndex=$this.attr("data-slide-to");if(slideIndex)options.interval=false;$target.carousel(options);if(slideIndex=$this.attr("data-slide-to"))$target.data("bs.carousel").to(slideIndex);
e.preventDefault()});$(window).on("load",function(){$('[data-ride\x3d"carousel"]').each(function(){var $carousel=$(this);$carousel.carousel($carousel.data())})})}(jQuery));
JSCOMPILER_PRESERVE(+function($){var Collapse=function(element,options){this.$element=$(element);this.options=$.extend({},Collapse.DEFAULTS,options);this.transitioning=null;if(this.options.parent)this.$parent=$(this.options.parent);if(this.options.toggle)this.toggle()};Collapse.DEFAULTS={toggle:true};Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"};Collapse.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;
var startEvent=$.Event("show.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;var actives=this.$parent&&this.$parent.find("\x3e .panel \x3e .in");if(actives&&actives.length){var hasData=actives.data("bs.collapse");if(hasData&&hasData.transitioning)return;actives.collapse("hide");hasData||actives.data("bs.collapse",null)}var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0);this.transitioning=1;var complete=
function(){this.$element.removeClass("collapsing").addClass("in")[dimension]("auto");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350)[dimension](this.$element[0][scrollSize])};Collapse.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var startEvent=
$.Event("hide.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;var dimension=this.dimension();JSCOMPILER_PRESERVE(this.$element[dimension](this.$element[dimension]())[0].offsetHeight);this.$element.addClass("collapsing").removeClass("collapse").removeClass("in");this.transitioning=1;var complete=function(){this.transitioning=0;this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};if(!$.support.transition)return complete.call(this);
this.$element[dimension](0).one($.support.transition.end,$.proxy(complete,this)).emulateTransitionEnd(350)};Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var old=$.fn.collapse;$.fn.collapse=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.collapse");var options=$.extend({},Collapse.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data)$this.data("bs.collapse",data=new Collapse(this,options));if(typeof option==
"string")data[option]()})};$.fn.collapse.Constructor=Collapse;$.fn.collapse.noConflict=function(){$.fn.collapse=old;return this};$(document).on("click.bs.collapse.data-api","[data-toggle\x3dcollapse]",function(e){var $this=$(this),href;var target=$this.attr("data-target")||(e.preventDefault()||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""));var $target=$(target);var data=$target.data("bs.collapse");var option=data?"toggle":$this.data();var parent=$this.attr("data-parent");var $parent=
parent&&$(parent);if(!data||!data.transitioning){if($parent)$parent.find('[data-toggle\x3dcollapse][data-parent\x3d"'+parent+'"]').not($this).addClass("collapsed");$this[$target.hasClass("in")?"addClass":"removeClass"]("collapsed")}$target.collapse(option)})}(jQuery));
JSCOMPILER_PRESERVE(+function($){var backdrop=".dropdown-backdrop";var toggle="[data-toggle\x3ddropdown]";var Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.prototype.toggle=function(e){var $this=$(this);if($this.is(".disabled, :disabled"))return;var $parent=getParent($this);var isActive=$parent.hasClass("open");clearMenus();if(!isActive){if("ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length)$('\x3cdiv class\x3d"dropdown-backdrop"/\x3e').insertAfter($(this)).on("click",
clearMenus);$parent.trigger(e=$.Event("show.bs.dropdown"));if(e.isDefaultPrevented())return;$parent.toggleClass("open").trigger("shown.bs.dropdown");$this.focus()}return false};Dropdown.prototype.keydown=function(e){if(!/(38|40|27)/.test(e.keyCode))return;var $this=$(this);e.preventDefault();e.stopPropagation();if($this.is(".disabled, :disabled"))return;var $parent=getParent($this);var isActive=$parent.hasClass("open");if(!isActive||isActive&&e.keyCode==27){if(e.which==27)$parent.find(toggle).focus();
return $this.click()}var $items=$("[role\x3dmenu] li:not(.divider):visible a",$parent);if(!$items.length)return;var index=$items.index($items.filter(":focus"));if(e.keyCode==38&&index>0)index--;if(e.keyCode==40&&index<$items.length-1)index++;if(!~index)index=0;$items.eq(index).focus()};function clearMenus(){$(backdrop).remove();$(toggle).each(function(e){var $parent=getParent($(this));if(!$parent.hasClass("open"))return;$parent.trigger(e=$.Event("hide.bs.dropdown"));if(e.isDefaultPrevented())return;
$parent.removeClass("open").trigger("hidden.bs.dropdown")})}function getParent($this){var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&(/#/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,""))}var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.dropdown");if(!data)$this.data("bs.dropdown",
data=new Dropdown(this));if(typeof option=="string")data[option].call($this)})};$.fn.dropdown.Constructor=Dropdown;$.fn.dropdown.noConflict=function(){$.fn.dropdown=old;return this};$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle+", [role\x3dmenu]",Dropdown.prototype.keydown)}(jQuery));
JSCOMPILER_PRESERVE(+function($){var Modal=function(element,options){this.options=options;this.$element=$(element);this.$backdrop=this.isShown=null;if(this.options.remote)this.$element.load(this.options.remote)};Modal.DEFAULTS={backdrop:true,keyboard:true,show:true};Modal.prototype.toggle=function(_relatedTarget){return this[!this.isShown?"show":"hide"](_relatedTarget)};Modal.prototype.show=function(_relatedTarget){var that=this;var e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e);
if(this.isShown||e.isDefaultPrevented())return;this.isShown=true;this.escape();this.$element.on("click.dismiss.modal",'[data-dismiss\x3d"modal"]',$.proxy(this.hide,this));this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");if(!that.$element.parent().length)that.$element.appendTo(document.body);that.$element.show();if(transition)JSCOMPILER_PRESERVE(that.$element[0].offsetWidth);that.$element.addClass("in").attr("aria-hidden",false);that.enforceFocus();var e=
$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$element.find(".modal-dialog").one($.support.transition.end,function(){that.$element.focus().trigger(e)}).emulateTransitionEnd(300):that.$element.focus().trigger(e)})};Modal.prototype.hide=function(e){if(e)e.preventDefault();e=$.Event("hide.bs.modal");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=false;this.escape();$(document).off("focusin.bs.modal");this.$element.removeClass("in").attr("aria-hidden",
true).off("click.dismiss.modal");$.support.transition&&this.$element.hasClass("fade")?this.$element.one($.support.transition.end,$.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()};Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){if(this.$element[0]!==e.target&&!this.$element.has(e.target).length)this.$element.focus()},this))};Modal.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on("keyup.dismiss.bs.modal",
$.proxy(function(e){e.which==27&&this.hide()},this));else if(!this.isShown)this.$element.off("keyup.dismiss.bs.modal")};Modal.prototype.hideModal=function(){var that=this;this.$element.hide();this.backdrop(function(){that.removeBackdrop();that.$element.trigger("hidden.bs.modal")})};Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};Modal.prototype.backdrop=function(callback){var that=this;var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&
this.options.backdrop){var doAnimate=$.support.transition&&animate;this.$backdrop=$('\x3cdiv class\x3d"modal-backdrop '+animate+'" /\x3e').appendTo(document.body);this.$element.on("click.dismiss.modal",$.proxy(function(e){if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.hide.call(this)},this));if(doAnimate)JSCOMPILER_PRESERVE(this.$backdrop[0].offsetWidth);this.$backdrop.addClass("in");if(!callback)return;doAnimate?this.$backdrop.one($.support.transition.end,
callback).emulateTransitionEnd(150):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback()}else if(callback)callback()};var old=$.fn.modal;$.fn.modal=function(option,_relatedTarget){return this.each(function(){var $this=$(this);var data=$this.data("bs.modal");var options=$.extend({},Modal.DEFAULTS,$this.data(),typeof option=="object"&&
option);if(!data)$this.data("bs.modal",data=new Modal(this,options));if(typeof option=="string")data[option](_relatedTarget);else if(options.show)data.show(_relatedTarget)})};$.fn.modal.Constructor=Modal;$.fn.modal.noConflict=function(){$.fn.modal=old;return this};$(document).on("click.bs.modal.data-api",'[data-toggle\x3d"modal"]',function(e){var $this=$(this);var href=$this.attr("href");var $target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,""));var option=$target.data("modal")?
"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());e.preventDefault();$target.modal(option,this).one("hide",function(){$this.is(":visible")&&$this.focus()})});$(document).on("show.bs.modal",".modal",function(){$(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){$(document.body).removeClass("modal-open")})}(jQuery));
JSCOMPILER_PRESERVE(+function($){var Tooltip=function(element,options){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",element,options)};Tooltip.DEFAULTS={animation:true,placement:"top",selector:false,template:'\x3cdiv class\x3d"tooltip"\x3e\x3cdiv class\x3d"tooltip-arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"tooltip-inner"\x3e\x3c/div\x3e\x3c/div\x3e',trigger:"hover focus",title:"",delay:0,html:false,container:false};Tooltip.prototype.init=function(type,
element,options){this.enabled=true;this.type=type;this.$element=$(element);this.options=this.getOptions(options);var triggers=this.options.trigger.split(" ");for(var i=triggers.length;i--;){var trigger=triggers[i];if(trigger=="click")this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if(trigger!="manual"){var eventIn=trigger=="hover"?"mouseenter":"focus";var eventOut=trigger=="hover"?"mouseleave":"blur";this.$element.on(eventIn+"."+this.type,this.options.selector,
$.proxy(this.enter,this));this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS};Tooltip.prototype.getOptions=function(options){options=$.extend({},this.getDefaults(),this.$element.data(),options);if(options.delay&&typeof options.delay=="number")options.delay={show:options.delay,hide:options.delay};
return options};Tooltip.prototype.getDelegateOptions=function(){var options={};var defaults=this.getDefaults();this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value)options[key]=value});return options};Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(self.timeout);self.hoverState="in";if(!self.options.delay||!self.options.delay.show)return self.show();
self.timeout=setTimeout(function(){if(self.hoverState=="in")self.show()},self.options.delay.show)};Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(self.timeout);self.hoverState="out";if(!self.options.delay||!self.options.delay.hide)return self.hide();self.timeout=setTimeout(function(){if(self.hoverState=="out")self.hide()},self.options.delay.hide)};Tooltip.prototype.show=
function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);if(e.isDefaultPrevented())return;var $tip=this.tip();this.setContent();if(this.options.animation)$tip.addClass("fade");var placement=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;var autoToken=/\s?auto?\s?/i;var autoPlace=autoToken.test(placement);if(autoPlace)placement=placement.replace(autoToken,"")||"top";$tip.detach().css({top:0,
left:0,display:"block"}).addClass(placement);this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition();var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(autoPlace){var $parent=this.$element.parent();var orgPlacement=placement;var docScroll=document.documentElement.scrollTop||document.body.scrollTop;var parentWidth=this.options.container=="body"?window.innerWidth:$parent.outerWidth();var parentHeight=this.options.container==
"body"?window.innerHeight:$parent.outerHeight();var parentLeft=this.options.container=="body"?0:$parent.offset().left;placement=placement=="bottom"&&pos.top+pos.height+actualHeight-docScroll>parentHeight?"top":placement=="top"&&pos.top-docScroll-actualHeight<0?"bottom":placement=="right"&&pos.right+actualWidth>parentWidth?"left":placement=="left"&&pos.left-actualWidth<parentLeft?"right":placement;$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,
pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);this.$element.trigger("shown.bs."+this.type)}};Tooltip.prototype.applyPlacement=function(offset,placement){var replace;var $tip=this.tip();var width=$tip[0].offsetWidth;var height=$tip[0].offsetHeight;var marginTop=parseInt($tip.css("margin-top"),10);var marginLeft=parseInt($tip.css("margin-left"),10);if(isNaN(marginTop))marginTop=0;if(isNaN(marginLeft))marginLeft=0;offset.top=offset.top+marginTop;offset.left=offset.left+
marginLeft;$tip.offset(offset).addClass("in");var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(placement=="top"&&actualHeight!=height){replace=true;offset.top=offset.top+height-actualHeight}if(/bottom|top/.test(placement)){var delta=0;if(offset.left<0){delta=offset.left*-2;offset.left=0;$tip.offset(offset);actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight}this.replaceArrow(delta-width+actualWidth,actualWidth,"left")}else this.replaceArrow(actualHeight-height,
actualHeight,"top");if(replace)$tip.offset(offset)};Tooltip.prototype.replaceArrow=function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")};Tooltip.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title);$tip.removeClass("fade in top bottom left right")};Tooltip.prototype.hide=function(){var that=this;var $tip=this.tip();var e=$.Event("hide.bs."+this.type);function complete(){if(that.hoverState!=
"in")$tip.detach()}this.$element.trigger(e);if(e.isDefaultPrevented())return;$tip.removeClass("in");$.support.transition&&this.$tip.hasClass("fade")?$tip.one($.support.transition.end,complete).emulateTransitionEnd(150):complete();this.$element.trigger("hidden.bs."+this.type);return this};Tooltip.prototype.fixTitle=function(){var $e=this.$element;if($e.attr("title")||typeof $e.attr("data-original-title")!="string")$e.attr("data-original-title",$e.attr("title")||"").attr("title","")};Tooltip.prototype.hasContent=
function(){return this.getTitle()};Tooltip.prototype.getPosition=function(){var el=this.$element[0];return $.extend({},typeof el.getBoundingClientRect=="function"?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())};Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return placement=="bottom"?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:placement=="top"?{top:pos.top-actualHeight,left:pos.left+pos.width/
2-actualWidth/2}:placement=="left"?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}};Tooltip.prototype.getTitle=function(){var title;var $e=this.$element;var o=this.options;title=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title);return title};Tooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template)};Tooltip.prototype.arrow=function(){return this.$arrow=
this.$arrow||this.tip().find(".tooltip-arrow")};Tooltip.prototype.validate=function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}};Tooltip.prototype.enable=function(){this.enabled=true};Tooltip.prototype.disable=function(){this.enabled=false};Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled};Tooltip.prototype.toggle=function(e){var self=e?$(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;self.tip().hasClass("in")?
self.leave(self):self.enter(self)};Tooltip.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tooltip");var options=typeof option=="object"&&option;if(!data)$this.data("bs.tooltip",data=new Tooltip(this,options));if(typeof option=="string")data[option]()})};$.fn.tooltip.Constructor=Tooltip;$.fn.tooltip.noConflict=function(){$.fn.tooltip=
old;return this}}(jQuery));
JSCOMPILER_PRESERVE(+function($){var Popover=function(element,options){this.init("popover",element,options)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'\x3cdiv class\x3d"popover"\x3e\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3ch3 class\x3d"popover-title"\x3e\x3c/h3\x3e\x3cdiv class\x3d"popover-content"\x3e\x3c/div\x3e\x3c/div\x3e'});Popover.prototype=$.extend({},
$.fn.tooltip.Constructor.prototype);Popover.prototype.constructor=Popover;Popover.prototype.getDefaults=function(){return Popover.DEFAULTS};Popover.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();var content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title);$tip.find(".popover-content")[this.options.html?"html":"text"](content);$tip.removeClass("fade top bottom left right in");if(!$tip.find(".popover-title").html())$tip.find(".popover-title").hide()};
Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()};Popover.prototype.getContent=function(){var $e=this.$element;var o=this.options;return $e.attr("data-content")||(typeof o.content=="function"?o.content.call($e[0]):o.content)};Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};Popover.prototype.tip=function(){if(!this.$tip)this.$tip=$(this.options.template);return this.$tip};var old=$.fn.popover;$.fn.popover=function(option){return this.each(function(){var $this=
$(this);var data=$this.data("bs.popover");var options=typeof option=="object"&&option;if(!data)$this.data("bs.popover",data=new Popover(this,options));if(typeof option=="string")data[option]()})};$.fn.popover.Constructor=Popover;$.fn.popover.noConflict=function(){$.fn.popover=old;return this}}(jQuery));
JSCOMPILER_PRESERVE(+function($){function ScrollSpy(element,options){var href;var process=$.proxy(this.process,this);this.$element=$(element).is("body")?$(window):$(element);this.$body=$("body");this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",process);this.options=$.extend({},ScrollSpy.DEFAULTS,options);this.selector=(this.options.target||((href=$(element).attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")||""))+" .nav li \x3e a";this.offsets=$([]);this.targets=$([]);this.activeTarget=
null;this.refresh();this.process()}ScrollSpy.DEFAULTS={offset:10};ScrollSpy.prototype.refresh=function(){var offsetMethod=this.$element[0]==window?"offset":"position";this.offsets=$([]);this.targets=$([]);var self=this;var $targets=this.$body.find(this.selector).map(function(){var $el=$(this);var href=$el.data("target")||$el.attr("href");var $href=/^#\w/.test(href)&&$(href);return $href&&($href.length&&[[$href[offsetMethod]().top+(!$.isWindow(self.$scrollElement.get(0))&&self.$scrollElement.scrollTop()),
href]])||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){self.offsets.push(this[0]);self.targets.push(this[1])})};ScrollSpy.prototype.process=function(){var scrollTop=this.$scrollElement.scrollTop()+this.options.offset;var scrollHeight=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight;var maxScroll=scrollHeight-this.$scrollElement.height();var offsets=this.offsets;var targets=this.targets;var activeTarget=this.activeTarget;var i;if(scrollTop>=maxScroll)return activeTarget!=
(i=targets.last()[0])&&this.activate(i);for(i=offsets.length;i--;)activeTarget!=targets[i]&&(scrollTop>=offsets[i]&&((!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i])))};ScrollSpy.prototype.activate=function(target){this.activeTarget=target;$(this.selector).parents(".active").removeClass("active");var selector=this.selector+'[data-target\x3d"'+target+'"],'+this.selector+'[href\x3d"'+target+'"]';var active=$(selector).parents("li").addClass("active");if(active.parent(".dropdown-menu").length)active=
active.closest("li.dropdown").addClass("active");active.trigger("activate.bs.scrollspy")};var old=$.fn.scrollspy;$.fn.scrollspy=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.scrollspy");var options=typeof option=="object"&&option;if(!data)$this.data("bs.scrollspy",data=new ScrollSpy(this,options));if(typeof option=="string")data[option]()})};$.fn.scrollspy.Constructor=ScrollSpy;$.fn.scrollspy.noConflict=function(){$.fn.scrollspy=old;return this};$(window).on("load",
function(){$('[data-spy\x3d"scroll"]').each(function(){var $spy=$(this);$spy.scrollspy($spy.data())})})}(jQuery));
JSCOMPILER_PRESERVE(+function($){var Tab=function(element){this.element=$(element)};Tab.prototype.show=function(){var $this=this.element;var $ul=$this.closest("ul:not(.dropdown-menu)");var selector=$this.data("target");if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}if($this.parent("li").hasClass("active"))return;var previous=$ul.find(".active:last a")[0];var e=$.Event("show.bs.tab",{relatedTarget:previous});$this.trigger(e);if(e.isDefaultPrevented())return;
var $target=$(selector);this.activate($this.parent("li"),$ul);this.activate($target,$target.parent(),function(){$this.trigger({type:"shown.bs.tab",relatedTarget:previous})})};Tab.prototype.activate=function(element,container,callback){var $active=container.find("\x3e .active");var transition=callback&&($.support.transition&&$active.hasClass("fade"));function next(){$active.removeClass("active").find("\x3e .dropdown-menu \x3e .active").removeClass("active");element.addClass("active");if(transition){JSCOMPILER_PRESERVE(element[0].offsetWidth);
element.addClass("in")}else element.removeClass("fade");if(element.parent(".dropdown-menu"))element.closest("li.dropdown").addClass("active");callback&&callback()}transition?$active.one($.support.transition.end,next).emulateTransitionEnd(150):next();$active.removeClass("in")};var old=$.fn.tab;$.fn.tab=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tab");if(!data)$this.data("bs.tab",data=new Tab(this));if(typeof option=="string")data[option]()})};$.fn.tab.Constructor=
Tab;$.fn.tab.noConflict=function(){$.fn.tab=old;return this};$(document).on("click.bs.tab.data-api",'[data-toggle\x3d"tab"], [data-toggle\x3d"pill"]',function(e){e.preventDefault();$(this).tab("show")})}(jQuery));
JSCOMPILER_PRESERVE(+function($){var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options);this.$window=$(window).on("scroll.bs.affix.data-api",$.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",$.proxy(this.checkPositionWithEventLoop,this));this.$element=$(element);this.affixed=this.unpin=null;this.checkPosition()};Affix.RESET="affix affix-top affix-bottom";Affix.DEFAULTS={offset:0};Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,
this),1)};Affix.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var scrollHeight=$(document).height();var scrollTop=this.$window.scrollTop();var position=this.$element.offset();var offset=this.options.offset;var offsetTop=offset.top;var offsetBottom=offset.bottom;if(typeof offset!="object")offsetBottom=offsetTop=offset;if(typeof offsetTop=="function")offsetTop=offset.top();if(typeof offsetBottom=="function")offsetBottom=offset.bottom();var affix=this.unpin!=null&&scrollTop+
this.unpin<=position.top?false:offsetBottom!=null&&position.top+this.$element.height()>=scrollHeight-offsetBottom?"bottom":offsetTop!=null&&scrollTop<=offsetTop?"top":false;if(this.affixed===affix)return;if(this.unpin)this.$element.css("top","");this.affixed=affix;this.unpin=affix=="bottom"?position.top-scrollTop:null;this.$element.removeClass(Affix.RESET).addClass("affix"+(affix?"-"+affix:""));if(affix=="bottom")this.$element.offset({top:document.body.offsetHeight-offsetBottom-this.$element.height()})};
var old=$.fn.affix;$.fn.affix=function(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.affix");var options=typeof option=="object"&&option;if(!data)$this.data("bs.affix",data=new Affix(this,options));if(typeof option=="string")data[option]()})};$.fn.affix.Constructor=Affix;$.fn.affix.noConflict=function(){$.fn.affix=old;return this};$(window).on("load",function(){$('[data-spy\x3d"affix"]').each(function(){var $spy=$(this);var data=$spy.data();data.offset=data.offset||
{};if(data.offsetBottom)data.offset.bottom=data.offsetBottom;if(data.offsetTop)data.offset.top=data.offsetTop;$spy.affix(data)})})}(jQuery));(function($){var Color=function(val){this.value={h:0,s:0,b:0,a:1};this.origFormat=null;if(val)if(val.toLowerCase!==undefined)this.setColor(val);else if(val.h!==undefined)this.value=val};Color.prototype={constructor:Color,_sanitizeNumber:function(val){if(typeof val==="number")return val;if(isNaN(val)||(val===null||(val===""||val===undefined)))return 1;if(val.toLowerCase!==undefined)return parseFloat(val);return 1},setColor:function(strVal){strVal=strVal.toLowerCase();this.value=this.stringToHSB(strVal)||
{h:0,s:0,b:0,a:1}},stringToHSB:function(strVal){strVal=strVal.toLowerCase();var that=this,result=false;$.each(this.stringParsers,function(i,parser){var match=parser.re.exec(strVal),values=match&&parser.parse.apply(that,[match]),format=parser.format||"rgba";if(values){if(format.match(/hsla?/))result=that.RGBtoHSB.apply(that,that.HSLtoRGB.apply(that,values));else result=that.RGBtoHSB.apply(that,values);that.origFormat=format;return false}return true});return result},setHue:function(h){this.value.h=
1-h},setSaturation:function(s){this.value.s=s},setBrightness:function(b){this.value.b=1-b},setAlpha:function(a){this.value.a=parseInt((1-a)*100,10)/100},toRGB:function(h,s,v,a){h=h||this.value.h;s=s||this.value.s;v=v||this.value.b;a=a||this.value.a;var r,g,b,i,f,p,q,t;if(h&&(s===undefined&&v===undefined))s=h.s,v=h.v,h=h.h;i=Math.floor(h*6);f=h*6-i;p=v*(1-s);q=v*(1-f*s);t=v*(1-(1-f)*s);switch(i%6){case 0:r=v,g=t,b=p;break;case 1:r=q,g=v,b=p;break;case 2:r=p,g=v,b=t;break;case 3:r=p,g=q,b=v;break;case 4:r=
t,g=p,b=v;break;case 5:r=v,g=p,b=q;break}return{r:Math.floor(r*255),g:Math.floor(g*255),b:Math.floor(b*255),a:a}},toHex:function(h,s,b,a){var rgb=this.toRGB(h,s,b,a);return"#"+(1<<24|parseInt(rgb.r)<<16|parseInt(rgb.g)<<8|parseInt(rgb.b)).toString(16).substr(1)},toHSL:function(h,s,b,a){h=h||this.value.h;s=s||this.value.s;b=b||this.value.b;a=a||this.value.a;var H=h,L=(2-s)*b,S=s*b;if(L>0&&L<=1)S/=L;else S/=2-L;L/=2;if(S>1)S=1;return{h:isNaN(H)?0:H,s:isNaN(S)?0:S,l:isNaN(L)?0:L,a:isNaN(a)?0:a}},RGBtoHSB:function(r,
g,b,a){r/=255;g/=255;b/=255;var H,S,V,C;V=Math.max(r,g,b);C=V-Math.min(r,g,b);H=C===0?null:V===r?(g-b)/C:V===g?(b-r)/C+2:(r-g)/C+4;H=(H+360)%6*60/360;S=C===0?0:C/V;return{h:this._sanitizeNumber(H),s:S,b:V,a:this._sanitizeNumber(a)}},HueToRGB:function(p,q,h){if(h<0)h+=1;else if(h>1)h-=1;if(h*6<1)return p+(q-p)*h*6;else if(h*2<1)return q;else if(h*3<2)return p+(q-p)*(2/3-h)*6;else return p},HSLtoRGB:function(h,s,l,a){if(s<0)s=0;var q;if(l<=0.5)q=l*(1+s);else q=l+s-l*s;var p=2*l-q;var tr=h+1/3;var tg=
h;var tb=h-1/3;var r=Math.round(this.HueToRGB(p,q,tr)*255);var g=Math.round(this.HueToRGB(p,q,tg)*255);var b=Math.round(this.HueToRGB(p,q,tb)*255);return[r,g,b,this._sanitizeNumber(a)]},toString:function(format){format=format||"rgba";switch(format){case "rgb":var rgb=this.toRGB();return"rgb("+rgb.r+","+rgb.g+","+rgb.b+")";break;case "rgba":var rgb=this.toRGB();return"rgba("+rgb.r+","+rgb.g+","+rgb.b+","+rgb.a+")";break;case "hsl":var hsl=this.toHSL();return"hsl("+Math.round(hsl.h*360)+","+Math.round(hsl.s*
100)+"%,"+Math.round(hsl.l*100)+"%)";break;case "hsla":var hsl=this.toHSL();return"hsla("+Math.round(hsl.h*360)+","+Math.round(hsl.s*100)+"%,"+Math.round(hsl.l*100)+"%,"+hsl.a+")";break;case "hex":return this.toHex();break;default:return false;break}},stringParsers:[{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,format:"hex",parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16),1]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,
format:"hex",parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16),1]}},{re:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*?\)/,format:"rgb",parse:function(execResult){return[execResult[1],execResult[2],execResult[3],1]}},{re:/rgb\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,format:"rgb",parse:function(execResult){return[2.55*execResult[1],2.55*execResult[2],
2.55*execResult[3],1]}},{re:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]]}},{re:/rgba\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"rgba",parse:function(execResult){return[2.55*execResult[1],2.55*execResult[2],2.55*execResult[3],execResult[4]]}},{re:/hsl\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*?\)/,
format:"hsl",parse:function(execResult){return[execResult[1]/360,execResult[2]/100,execResult[3]/100,execResult[4]]}},{re:/hsla\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,format:"hsla",parse:function(execResult){return[execResult[1]/360,execResult[2]/100,execResult[3]/100,execResult[4]]}},{re:/^([a-z]{3,})$/,format:"alias",parse:function(execResult){var hexval=this.colorNameToHex(execResult[0])||"#000000";var match=this.stringParsers[0].re.exec(hexval),
values=match&&this.stringParsers[0].parse.apply(this,[match]);return values}}],colorNameToHex:function(name){var colors={"aliceblue":"#f0f8ff","antiquewhite":"#faebd7","aqua":"#00ffff","aquamarine":"#7fffd4","azure":"#f0ffff","beige":"#f5f5dc","bisque":"#ffe4c4","black":"#000000","blanchedalmond":"#ffebcd","blue":"#0000ff","blueviolet":"#8a2be2","brown":"#a52a2a","burlywood":"#deb887","cadetblue":"#5f9ea0","chartreuse":"#7fff00","chocolate":"#d2691e","coral":"#ff7f50","cornflowerblue":"#6495ed","cornsilk":"#fff8dc",
"crimson":"#dc143c","cyan":"#00ffff","darkblue":"#00008b","darkcyan":"#008b8b","darkgoldenrod":"#b8860b","darkgray":"#a9a9a9","darkgreen":"#006400","darkkhaki":"#bdb76b","darkmagenta":"#8b008b","darkolivegreen":"#556b2f","darkorange":"#ff8c00","darkorchid":"#9932cc","darkred":"#8b0000","darksalmon":"#e9967a","darkseagreen":"#8fbc8f","darkslateblue":"#483d8b","darkslategray":"#2f4f4f","darkturquoise":"#00ced1","darkviolet":"#9400d3","deeppink":"#ff1493","deepskyblue":"#00bfff","dimgray":"#696969",
"dodgerblue":"#1e90ff","firebrick":"#b22222","floralwhite":"#fffaf0","forestgreen":"#228b22","fuchsia":"#ff00ff","gainsboro":"#dcdcdc","ghostwhite":"#f8f8ff","gold":"#ffd700","goldenrod":"#daa520","gray":"#808080","green":"#008000","greenyellow":"#adff2f","honeydew":"#f0fff0","hotpink":"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082","ivory":"#fffff0","khaki":"#f0e68c","lavender":"#e6e6fa","lavenderblush":"#fff0f5","lawngreen":"#7cfc00","lemonchiffon":"#fffacd","lightblue":"#add8e6","lightcoral":"#f08080",
"lightcyan":"#e0ffff","lightgoldenrodyellow":"#fafad2","lightgrey":"#d3d3d3","lightgreen":"#90ee90","lightpink":"#ffb6c1","lightsalmon":"#ffa07a","lightseagreen":"#20b2aa","lightskyblue":"#87cefa","lightslategray":"#778899","lightsteelblue":"#b0c4de","lightyellow":"#ffffe0","lime":"#00ff00","limegreen":"#32cd32","linen":"#faf0e6","magenta":"#ff00ff","maroon":"#800000","mediumaquamarine":"#66cdaa","mediumblue":"#0000cd","mediumorchid":"#ba55d3","mediumpurple":"#9370d8","mediumseagreen":"#3cb371","mediumslateblue":"#7b68ee",
"mediumspringgreen":"#00fa9a","mediumturquoise":"#48d1cc","mediumvioletred":"#c71585","midnightblue":"#191970","mintcream":"#f5fffa","mistyrose":"#ffe4e1","moccasin":"#ffe4b5","navajowhite":"#ffdead","navy":"#000080","oldlace":"#fdf5e6","olive":"#808000","olivedrab":"#6b8e23","orange":"#ffa500","orangered":"#ff4500","orchid":"#da70d6","palegoldenrod":"#eee8aa","palegreen":"#98fb98","paleturquoise":"#afeeee","palevioletred":"#d87093","papayawhip":"#ffefd5","peachpuff":"#ffdab9","peru":"#cd853f","pink":"#ffc0cb",
"plum":"#dda0dd","powderblue":"#b0e0e6","purple":"#800080","red":"#ff0000","rosybrown":"#bc8f8f","royalblue":"#4169e1","saddlebrown":"#8b4513","salmon":"#fa8072","sandybrown":"#f4a460","seagreen":"#2e8b57","seashell":"#fff5ee","sienna":"#a0522d","silver":"#c0c0c0","skyblue":"#87ceeb","slateblue":"#6a5acd","slategray":"#708090","snow":"#fffafa","springgreen":"#00ff7f","steelblue":"#4682b4","tan":"#d2b48c","teal":"#008080","thistle":"#d8bfd8","tomato":"#ff6347","turquoise":"#40e0d0","violet":"#ee82ee",
"wheat":"#f5deb3","white":"#ffffff","whitesmoke":"#f5f5f5","yellow":"#ffff00","yellowgreen":"#9acd32"};if(typeof colors[name.toLowerCase()]!=="undefined")return colors[name.toLowerCase()];return false}};var defaults={horizontal:false,inline:false,color:false,format:false,input:"input",container:false,component:".add-on, .input-group-addon",sliders:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:0,maxTop:100,callLeft:false,callTop:"setHue"},alpha:{maxLeft:0,
maxTop:100,callLeft:false,callTop:"setAlpha"}},slidersHorz:{saturation:{maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setBrightness"},hue:{maxLeft:100,maxTop:0,callLeft:"setHue",callTop:false},alpha:{maxLeft:100,maxTop:0,callLeft:"setAlpha",callTop:false}},template:'\x3cdiv class\x3d"colorpicker dropdown-menu"\x3e'+'\x3cdiv class\x3d"colorpicker-saturation"\x3e\x3ci\x3e\x3cb\x3e\x3c/b\x3e\x3c/i\x3e\x3c/div\x3e'+'\x3cdiv class\x3d"colorpicker-hue"\x3e\x3ci\x3e\x3c/i\x3e\x3c/div\x3e'+'\x3cdiv class\x3d"colorpicker-alpha"\x3e\x3ci\x3e\x3c/i\x3e\x3c/div\x3e'+
'\x3cdiv class\x3d"colorpicker-color"\x3e\x3cdiv /\x3e\x3c/div\x3e'+"\x3c/div\x3e"};var Colorpicker=function(element,options){this.element=$(element).addClass("colorpicker-element");this.options=$.extend({},defaults,this.element.data(),options);this.component=this.options.component;this.component=this.component!==false?this.element.find(this.component):false;if(this.component&&this.component.length===0)this.component=false;this.container=this.options.container===true?this.element:this.options.container;
this.container=this.container!==false?$(this.container):false;this.input=this.element.is("input")?this.element:this.options.input?this.element.find(this.options.input):false;if(this.input&&this.input.length===0)this.input=false;this.color=new Color(this.options.color!==false?this.options.color:this.getValue());this.format=this.options.format!==false?this.options.format:this.color.origFormat;this.picker=$(this.options.template);if(this.options.inline)this.picker.addClass("colorpicker-inline colorpicker-visible");
else this.picker.addClass("colorpicker-hidden");if(this.options.horizontal)this.picker.addClass("colorpicker-horizontal");if(this.format==="rgba"||this.format==="hsla")this.picker.addClass("colorpicker-with-alpha");this.picker.on("mousedown.colorpicker",$.proxy(this.mousedown,this));this.picker.appendTo(this.container?this.container:$("body"));if(this.input!==false){this.input.on({"keyup.colorpicker":$.proxy(this.keyup,this)});if(this.component===false)this.element.on({"focus.colorpicker":$.proxy(this.show,
this)});if(this.options.inline===false)this.element.on({"focusout.colorpicker":$.proxy(this.hide,this)})}if(this.component!==false)this.component.on({"click.colorpicker":$.proxy(this.show,this)});if(this.input===false&&this.component===false)this.element.on({"click.colorpicker":$.proxy(this.show,this)});this.update();$($.proxy(function(){this.element.trigger("create")},this))};Colorpicker.version="2.0.0-beta";Colorpicker.Color=Color;Colorpicker.prototype={constructor:Colorpicker,destroy:function(){this.picker.remove();
this.element.removeData("colorpicker").off(".colorpicker");if(this.input!==false)this.input.off(".colorpicker");if(this.component!==false)this.component.off(".colorpicker");this.element.removeClass("colorpicker-element");this.element.trigger({type:"destroy"})},reposition:function(){if(this.options.inline!==false)return false;var offset=this.component?this.component.offset():this.element.offset();this.picker.css({top:offset.top+(this.component?this.component.outerHeight():this.element.outerHeight()),
left:offset.left})},show:function(e){if(this.isDisabled())return false;this.picker.addClass("colorpicker-visible").removeClass("colorpicker-hidden");this.reposition();$(window).on("resize.colorpicker",$.proxy(this.reposition,this));if(!this.hasInput()&&e)if(e.stopPropagation&&e.preventDefault){e.stopPropagation();e.preventDefault()}if(this.options.inline===false)$(window.document).on({"mousedown.colorpicker":$.proxy(this.hide,this)});this.element.trigger({type:"showPicker",color:this.color})},hide:function(){this.picker.addClass("colorpicker-hidden").removeClass("colorpicker-visible");
$(window).off("resize.colorpicker",this.reposition);$(document).off({"mousedown.colorpicker":this.hide});this.update();this.element.trigger({type:"hidePicker",color:this.color})},updateData:function(val){val=val||this.color.toString(this.format);this.element.data("color",val);return val},updateInput:function(val){val=val||this.color.toString(this.format);if(this.input!==false)this.input.prop("value",val);return val},updatePicker:function(val){if(val!==undefined)this.color=new Color(val);var sl=this.options.horizontal===
false?this.options.sliders:this.options.slidersHorz;var icns=this.picker.find("i");if(icns.length===0)return;if(this.options.horizontal===false){sl=this.options.sliders;icns.eq(1).css("top",sl.hue.maxTop*(1-this.color.value.h)).end().eq(2).css("top",sl.alpha.maxTop*(1-this.color.value.a))}else{sl=this.options.slidersHorz;icns.eq(1).css("left",sl.hue.maxLeft*(1-this.color.value.h)).end().eq(2).css("left",sl.alpha.maxLeft*(1-this.color.value.a))}icns.eq(0).css({"top":sl.saturation.maxTop-this.color.value.b*
sl.saturation.maxTop,"left":this.color.value.s*sl.saturation.maxLeft});this.picker.find(".colorpicker-saturation").css("backgroundColor",this.color.toHex(this.color.value.h,1,1,1));this.picker.find(".colorpicker-alpha").css("backgroundColor",this.color.toHex());this.picker.find(".colorpicker-color, .colorpicker-color div").css("backgroundColor",this.color.toString(this.format));return val},updateComponent:function(val){val=val||this.color.toString(this.format);if(this.component!==false){var icn=this.component.find("i").eq(0);
if(icn.length>0)icn.css({"backgroundColor":val});else this.component.css({"backgroundColor":val})}return val},update:function(force){var val=this.updateComponent();if(this.getValue(false)!==false||force===true){this.updateInput(val);this.updateData(val)}this.updatePicker();return val},setValue:function(val){this.color=new Color(val);this.update();this.element.trigger({type:"changeColor",color:this.color,value:val})},getValue:function(defaultValue){defaultValue=defaultValue===undefined?"#000000":defaultValue;
var val;if(this.hasInput())val=this.input.val();else val=this.element.data("color");if(val===undefined||(val===""||val===null))val=defaultValue;return val},hasInput:function(){return this.input!==false},isDisabled:function(){if(this.hasInput())return this.input.prop("disabled")===true;return false},disable:function(){if(this.hasInput()){this.input.prop("disabled",true);return true}return false},enable:function(){if(this.hasInput()){this.input.prop("disabled",false);return true}return false},currentSlider:null,
mousePointer:{left:0,top:0},mousedown:function(e){e.stopPropagation();e.preventDefault();var target=$(e.target);var zone=target.closest("div");var sl=this.options.horizontal?this.options.slidersHorz:this.options.sliders;if(!zone.is(".colorpicker")){if(zone.is(".colorpicker-saturation"))this.currentSlider=$.extend({},sl.saturation);else if(zone.is(".colorpicker-hue"))this.currentSlider=$.extend({},sl.hue);else if(zone.is(".colorpicker-alpha"))this.currentSlider=$.extend({},sl.alpha);else return false;
var offset=zone.offset();this.currentSlider.guide=zone.find("i")[0].style;this.currentSlider.left=e.pageX-offset.left;this.currentSlider.top=e.pageY-offset.top;this.mousePointer={left:e.pageX,top:e.pageY};$(document).on({"mousemove.colorpicker":$.proxy(this.mousemove,this),"mouseup.colorpicker":$.proxy(this.mouseup,this)}).trigger("mousemove")}return false},mousemove:function(e){e.stopPropagation();e.preventDefault();var left=Math.max(0,Math.min(this.currentSlider.maxLeft,this.currentSlider.left+
((e.pageX||this.mousePointer.left)-this.mousePointer.left)));var top=Math.max(0,Math.min(this.currentSlider.maxTop,this.currentSlider.top+((e.pageY||this.mousePointer.top)-this.mousePointer.top)));this.currentSlider.guide.left=left+"px";this.currentSlider.guide.top=top+"px";if(this.currentSlider.callLeft)this.color[this.currentSlider.callLeft].call(this.color,left/100);if(this.currentSlider.callTop)this.color[this.currentSlider.callTop].call(this.color,top/100);this.update(true);this.element.trigger({type:"changeColor",
color:this.color});return false},mouseup:function(e){e.stopPropagation();e.preventDefault();$(document).off({"mousemove.colorpicker":this.mousemove,"mouseup.colorpicker":this.mouseup});return false},keyup:function(e){if(e.keyCode===38){if(this.color.value.a<1)this.color.value.a=Math.round((this.color.value.a+0.01)*100)/100;this.update(true)}else if(e.keyCode===40){if(this.color.value.a>0)this.color.value.a=Math.round((this.color.value.a-0.01)*100)/100;this.update(true)}else{var val=this.input.val();
this.color=new Color(val);if(this.getValue(false)!==false){this.updateData();this.updateComponent();this.updatePicker()}}this.element.trigger({type:"changeColor",color:this.color,value:val})}};$.colorpicker=Colorpicker;$.fn.colorpicker=function(option){var pickerArgs=arguments;return this.each(function(){var $this=$(this),inst=$this.data("colorpicker"),options=typeof option==="object"?option:{};if(!inst&&typeof option!=="string")$this.data("colorpicker",new Colorpicker(this,options));else if(typeof option===
"string")inst[option].apply(inst,Array.prototype.slice.call(pickerArgs,1))})};$.fn.colorpicker.constructor=Colorpicker})(window.jQuery);var PassPhraseGenerator={seeds:0,seedLimit:512,push:function(seed){Math.seedrandom(seed,true);this.seeds++},isDone:function(){if(this.seeds==this.seedLimit)return true;return false},percentage:function(){return Math.round(this.seeds/this.seedLimit*100)},passPhrase:"",wordCount:1626,words:["like","just","love","know","never","want","time","out","there","make","look","eye","down","only","think","heart","back","then","into","about","more","away","still","them","take","thing","even","through","long",
"always","world","too","friend","tell","try","hand","thought","over","here","other","need","smile","again","much","cry","been","night","ever","little","said","end","some","those","around","mind","people","girl","leave","dream","left","turn","myself","give","nothing","really","off","before","something","find","walk","wish","good","once","place","ask","stop","keep","watch","seem","everything","wait","got","yet","made","remember","start","alone","run","hope","maybe","believe","body","hate","after","close",
"talk","stand","own","each","hurt","help","home","god","soul","new","many","two","inside","should","true","first","fear","mean","better","play","another","gone","change","use","wonder","someone","hair","cold","open","best","any","behind","happen","water","dark","laugh","stay","forever","name","work","show","sky","break","came","deep","door","put","black","together","upon","happy","such","great","white","matter","fill","past","please","burn","cause","enough","touch","moment","soon","voice","scream",
"anything","stare","sound","red","everyone","hide","kiss","truth","death","beautiful","mine","blood","broken","very","pass","next","forget","tree","wrong","air","mother","understand","lip","hit","wall","memory","sleep","free","high","realize","school","might","skin","sweet","perfect","blue","kill","breath","dance","against","fly","between","grow","strong","under","listen","bring","sometimes","speak","pull","person","become","family","begin","ground","real","small","father","sure","feet","rest","young",
"finally","land","across","today","different","guy","line","fire","reason","reach","second","slowly","write","eat","smell","mouth","step","learn","three","floor","promise","breathe","darkness","push","earth","guess","save","song","above","along","both","color","house","almost","sorry","anymore","brother","okay","dear","game","fade","already","apart","warm","beauty","heard","notice","question","shine","began","piece","whole","shadow","secret","street","within","finger","point","morning","whisper",
"child","moon","green","story","glass","kid","silence","since","soft","yourself","empty","shall","angel","answer","baby","bright","dad","path","worry","hour","drop","follow","power","war","half","flow","heaven","act","chance","fact","least","tired","children","near","quite","afraid","rise","sea","taste","window","cover","nice","trust","lot","sad","cool","force","peace","return","blind","easy","ready","roll","rose","drive","held","music","beneath","hang","mom","paint","emotion","quiet","clear","cloud",
"few","pretty","bird","outside","paper","picture","front","rock","simple","anyone","meant","reality","road","sense","waste","bit","leaf","thank","happiness","meet","men","smoke","truly","decide","self","age","book","form","alive","carry","escape","damn","instead","able","ice","minute","throw","catch","leg","ring","course","goodbye","lead","poem","sick","corner","desire","known","problem","remind","shoulder","suppose","toward","wave","drink","jump","woman","pretend","sister","week","human","joy","crack",
"grey","pray","surprise","dry","knee","less","search","bleed","caught","clean","embrace","future","king","son","sorrow","chest","hug","remain","sat","worth","blow","daddy","final","parent","tight","also","create","lonely","safe","cross","dress","evil","silent","bone","fate","perhaps","anger","class","scar","snow","tiny","tonight","continue","control","dog","edge","mirror","month","suddenly","comfort","given","loud","quickly","gaze","plan","rush","stone","town","battle","ignore","spirit","stood","stupid",
"yours","brown","build","dust","hey","kept","pay","phone","twist","although","ball","beyond","hidden","nose","taken","fail","float","pure","somehow","wash","wrap","angry","cheek","creature","forgotten","heat","rip","single","space","special","weak","whatever","yell","anyway","blame","job","choose","country","curse","drift","echo","figure","grew","laughter","neck","suffer","worse","yeah","disappear","foot","forward","knife","mess","somewhere","stomach","storm","beg","idea","lift","offer","breeze",
"field","five","often","simply","stuck","win","allow","confuse","enjoy","except","flower","seek","strength","calm","grin","gun","heavy","hill","large","ocean","shoe","sigh","straight","summer","tongue","accept","crazy","everyday","exist","grass","mistake","sent","shut","surround","table","ache","brain","destroy","heal","nature","shout","sign","stain","choice","doubt","glance","glow","mountain","queen","stranger","throat","tomorrow","city","either","fish","flame","rather","shape","spin","spread","ash",
"distance","finish","image","imagine","important","nobody","shatter","warmth","became","feed","flesh","funny","lust","shirt","trouble","yellow","attention","bare","bite","money","protect","amaze","appear","born","choke","completely","daughter","fresh","friendship","gentle","probably","six","deserve","expect","grab","middle","nightmare","river","thousand","weight","worst","wound","barely","bottle","cream","regret","relationship","stick","test","crush","endless","fault","itself","rule","spill","art",
"circle","join","kick","mask","master","passion","quick","raise","smooth","unless","wander","actually","broke","chair","deal","favorite","gift","note","number","sweat","box","chill","clothes","lady","mark","park","poor","sadness","tie","animal","belong","brush","consume","dawn","forest","innocent","pen","pride","stream","thick","clay","complete","count","draw","faith","press","silver","struggle","surface","taught","teach","wet","bless","chase","climb","enter","letter","melt","metal","movie","stretch",
"swing","vision","wife","beside","crash","forgot","guide","haunt","joke","knock","plant","pour","prove","reveal","steal","stuff","trip","wood","wrist","bother","bottom","crawl","crowd","fix","forgive","frown","grace","loose","lucky","party","release","surely","survive","teacher","gently","grip","speed","suicide","travel","treat","vein","written","cage","chain","conversation","date","enemy","however","interest","million","page","pink","proud","sway","themselves","winter","church","cruel","cup","demon",
"experience","freedom","pair","pop","purpose","respect","shoot","softly","state","strange","bar","birth","curl","dirt","excuse","lord","lovely","monster","order","pack","pants","pool","scene","seven","shame","slide","ugly","among","blade","blonde","closet","creek","deny","drug","eternity","gain","grade","handle","key","linger","pale","prepare","swallow","swim","tremble","wheel","won","cast","cigarette","claim","college","direction","dirty","gather","ghost","hundred","loss","lung","orange","present",
"swear","swirl","twice","wild","bitter","blanket","doctor","everywhere","flash","grown","knowledge","numb","pressure","radio","repeat","ruin","spend","unknown","buy","clock","devil","early","false","fantasy","pound","precious","refuse","sheet","teeth","welcome","add","ahead","block","bury","caress","content","depth","despite","distant","marry","purple","threw","whenever","bomb","dull","easily","grasp","hospital","innocence","normal","receive","reply","rhyme","shade","someday","sword","toe","visit",
"asleep","bought","center","consider","flat","hero","history","ink","insane","muscle","mystery","pocket","reflection","shove","silently","smart","soldier","spot","stress","train","type","view","whether","bus","energy","explain","holy","hunger","inch","magic","mix","noise","nowhere","prayer","presence","shock","snap","spider","study","thunder","trail","admit","agree","bag","bang","bound","butterfly","cute","exactly","explode","familiar","fold","further","pierce","reflect","scent","selfish","sharp",
"sink","spring","stumble","universe","weep","women","wonderful","action","ancient","attempt","avoid","birthday","branch","chocolate","core","depress","drunk","especially","focus","fruit","honest","match","palm","perfectly","pillow","pity","poison","roar","shift","slightly","thump","truck","tune","twenty","unable","wipe","wrote","coat","constant","dinner","drove","egg","eternal","flight","flood","frame","freak","gasp","glad","hollow","motion","peer","plastic","root","screen","season","sting","strike",
"team","unlike","victim","volume","warn","weird","attack","await","awake","built","charm","crave","despair","fought","grant","grief","horse","limit","message","ripple","sanity","scatter","serve","split","string","trick","annoy","blur","boat","brave","clearly","cling","connect","fist","forth","imagination","iron","jock","judge","lesson","milk","misery","nail","naked","ourselves","poet","possible","princess","sail","size","snake","society","stroke","torture","toss","trace","wise","bloom","bullet","cell",
"check","cost","darling","during","footstep","fragile","hallway","hardly","horizon","invisible","journey","midnight","mud","nod","pause","relax","shiver","sudden","value","youth","abuse","admire","blink","breast","bruise","constantly","couple","creep","curve","difference","dumb","emptiness","gotta","honor","plain","planet","recall","rub","ship","slam","soar","somebody","tightly","weather","adore","approach","bond","bread","burst","candle","coffee","cousin","crime","desert","flutter","frozen","grand",
"heel","hello","language","level","movement","pleasure","powerful","random","rhythm","settle","silly","slap","sort","spoken","steel","threaten","tumble","upset","aside","awkward","bee","blank","board","button","card","carefully","complain","crap","deeply","discover","drag","dread","effort","entire","fairy","giant","gotten","greet","illusion","jeans","leap","liquid","march","mend","nervous","nine","replace","rope","spine","stole","terror","accident","apple","balance","boom","childhood","collect","demand",
"depression","eventually","faint","glare","goal","group","honey","kitchen","laid","limb","machine","mere","mold","murder","nerve","painful","poetry","prince","rabbit","shelter","shore","shower","soothe","stair","steady","sunlight","tangle","tease","treasure","uncle","begun","bliss","canvas","cheer","claw","clutch","commit","crimson","crystal","delight","doll","existence","express","fog","football","gay","goose","guard","hatred","illuminate","mass","math","mourn","rich","rough","skip","stir","student",
"style","support","thorn","tough","yard","yearn","yesterday","advice","appreciate","autumn","bank","beam","bowl","capture","carve","collapse","confusion","creation","dove","feather","girlfriend","glory","government","harsh","hop","inner","loser","moonlight","neighbor","neither","peach","pig","praise","screw","shield","shimmer","sneak","stab","subject","throughout","thrown","tower","twirl","wow","army","arrive","bathroom","bump","cease","cookie","couch","courage","dim","guilt","howl","hum","husband",
"insult","led","lunch","mock","mostly","natural","nearly","needle","nerd","peaceful","perfection","pile","price","remove","roam","sanctuary","serious","shiny","shook","sob","stolen","tap","vain","void","warrior","wrinkle","affection","apologize","blossom","bounce","bridge","cheap","crumble","decision","descend","desperately","dig","dot","flip","frighten","heartbeat","huge","lazy","lick","odd","opinion","process","puzzle","quietly","retreat","score","sentence","separate","situation","skill","soak",
"square","stray","taint","task","tide","underneath","veil","whistle","anywhere","bedroom","bid","bloody","burden","careful","compare","concern","curtain","decay","defeat","describe","double","dreamer","driver","dwell","evening","flare","flicker","grandma","guitar","harm","horrible","hungry","indeed","lace","melody","monkey","nation","object","obviously","rainbow","salt","scratch","shown","shy","stage","stun","third","tickle","useless","weakness","worship","worthless","afternoon","beard","boyfriend",
"bubble","busy","certain","chin","concrete","desk","diamond","doom","drawn","due","felicity","freeze","frost","garden","glide","harmony","hopefully","hunt","jealous","lightning","mama","mercy","peel","physical","position","pulse","punch","quit","rant","respond","salty","sane","satisfy","savior","sheep","slept","social","sport","tuck","utter","valley","wolf","aim","alas","alter","arrow","awaken","beaten","belief","brand","ceiling","cheese","clue","confidence","connection","daily","disguise","eager",
"erase","essence","everytime","expression","fan","flag","flirt","foul","fur","giggle","glorious","ignorance","law","lifeless","measure","mighty","muse","north","opposite","paradise","patience","patient","pencil","petal","plate","ponder","possibly","practice","slice","spell","stock","strife","strip","suffocate","suit","tender","tool","trade","velvet","verse","waist","witch","aunt","bench","bold","cap","certainly","click","companion","creator","dart","delicate","determine","dish","dragon","drama","drum",
"dude","everybody","feast","forehead","former","fright","fully","gas","hook","hurl","invite","juice","manage","moral","possess","raw","rebel","royal","scale","scary","several","slight","stubborn","swell","talent","tea","terrible","thread","torment","trickle","usually","vast","violence","weave","acid","agony","ashamed","awe","belly","blend","blush","character","cheat","common","company","coward","creak","danger","deadly","defense","define","depend","desperate","destination","dew","duck","dusty","embarrass",
"engine","example","explore","foe","freely","frustrate","generation","glove","guilty","health","hurry","idiot","impossible","inhale","jaw","kingdom","mention","mist","moan","mumble","mutter","observe","ode","pathetic","pattern","pie","prefer","puff","rape","rare","revenge","rude","scrape","spiral","squeeze","strain","sunset","suspend","sympathy","thigh","throne","total","unseen","weapon","weary"],generatePassPhrase:function(container){var $container=$(container);$container.find(".account_phrase_generator_steps").hide();
$container.find("textarea").val("");var crypto=window.crypto||window.msCrypto;if(crypto){$container.find(".step_2").show();$("#account_phrase_generator_start").show();$("#account_phrase_generator_stop").hide();bits=128;var random=new Uint32Array(bits/32);crypto.getRandomValues(random);var i=0,l=random.length,n=this.wordCount,words=[],x,w1,w2,w3;for(;i<l;i++){x=random[i];w1=x%n;w2=((x/n>>0)+w1)%n;w3=(((x/n>>0)/n>>0)+w2)%n;words.push(this.words[w1]);words.push(this.words[w2]);words.push(this.words[w3])}this.passPhrase=
words.join(" ");crypto.getRandomValues(random);$container.find(".step_2 textarea").val(this.passPhrase).prop("readonly",true);setTimeout(function(){$("#account_phrase_generator_start").hide();$("#account_phrase_generator_stop").fadeIn("slow");$("#custom_passphrase_link").show()},1500)}else{$container.find(".progress-bar").css("width","0%");$container.find(".progess-bar span").text("0% seeded");$container.find(".step_1").show();Math.seedrandom();$("html").on("mousemove",function(e){var seed=[e.pageX,
e.pageY,+new Date];PassPhraseGenerator.push(seed);var percentage=PassPhraseGenerator.percentage()+"%";$container.find(".progress-bar").css("width",percentage);$container.find(".progress-bar span").text(percentage+" seeded");if(PassPhraseGenerator.isDone()){$container.find(".progress-bar").css("width","100%");$("html").unbind("mousemove");$container.find(".step_1").hide();$container.find(".step_2").show();$("#account_phrase_generator_start").hide();$("#account_phrase_generator_stop").show();$("#custom_passphrase_link").show();
var words=[];for(var i=0;i<12;i++){var number=Math.floor(Math.random()*PassPhraseGenerator.wordCount+1);words.push(PassPhraseGenerator.words[number])}Math.seedrandom();PassPhraseGenerator.passPhrase=words.join(" ");$container.find(".step_2 textarea").val(PassPhraseGenerator.passPhrase).prop("readonly",true)}})}},reset:function(){this.passPhrase="";this.seeds=0}};var dbits;var canary=0xdeadbeefcafe;var j_lm=(canary&16777215)==15715070;function BigInteger(a,b,c){if(a!=null)if("number"==typeof a)this.fromNumber(a,b,c);else if(b==null&&"string"!=typeof a)this.fromString(a,256);else this.fromString(a,b)}function nbi(){return new BigInteger(null)}function am1(i,x,w,j,c,n){while(--n>=0){var v=x*this[i++]+w[j]+c;c=Math.floor(v/67108864);w[j++]=v&67108863}return c}
function am2(i,x,w,j,c,n){var xl=x&32767,xh=x>>15;while(--n>=0){var l=this[i]&32767;var h=this[i++]>>15;var m=xh*l+h*xl;l=xl*l+((m&32767)<<15)+w[j]+(c&1073741823);c=(l>>>30)+(m>>>15)+xh*h+(c>>>30);w[j++]=l&1073741823}return c}function am3(i,x,w,j,c,n){var xl=x&16383,xh=x>>14;while(--n>=0){var l=this[i]&16383;var h=this[i++]>>14;var m=xh*l+h*xl;l=xl*l+((m&16383)<<14)+w[j]+c;c=(l>>28)+(m>>14)+xh*h;w[j++]=l&268435455}return c}
if(j_lm&&navigator.appName=="Microsoft Internet Explorer"){BigInteger.prototype.am=am2;dbits=30}else if(j_lm&&navigator.appName!="Netscape"){BigInteger.prototype.am=am1;dbits=26}else{BigInteger.prototype.am=am3;dbits=28}BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=(1<<dbits)-1;BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";
var BI_RC=new Array;var rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(n){return BI_RM.charAt(n)}function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return c==null?-1:c}function bnpCopyTo(r){for(var i=this.t-1;i>=0;--i)r[i]=this[i];r.t=this.t;r.s=this.s}
function bnpFromInt(x){this.t=1;this.s=x<0?-1:0;if(x>0)this[0]=x;else if(x<-1)this[0]=x+this.DV;else this.t=0}function nbv(i){var r=nbi();r.fromInt(i);return r}
function bnpFromString(s,b){var k;if(b==16)k=4;else if(b==8)k=3;else if(b==256)k=8;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else{this.fromRadix(s,b);return}this.t=0;this.s=0;var i=s.length,mi=false,sh=0;while(--i>=0){var x=k==8?s[i]&255:intAt(s,i);if(x<0){if(s.charAt(i)=="-")mi=true;continue}mi=false;if(sh==0)this[this.t++]=x;else if(sh+k>this.DB){this[this.t-1]|=(x&(1<<this.DB-sh)-1)<<sh;this[this.t++]=x>>this.DB-sh}else this[this.t-1]|=x<<sh;sh+=k;if(sh>=this.DB)sh-=this.DB}if(k==8&&
(s[0]&128)!=0){this.s=-1;if(sh>0)this[this.t-1]|=(1<<this.DB-sh)-1<<sh}this.clamp();if(mi)BigInteger.ZERO.subTo(this,this)}function bnpClamp(){var c=this.s&this.DM;while(this.t>0&&this[this.t-1]==c)--this.t}
function bnToString(b){if(this.s<0)return"-"+this.negate().toString(b);var k;if(b==16)k=4;else if(b==8)k=3;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else return this.toRadix(b);var km=(1<<k)-1,d,m=false,r="",i=this.t;var p=this.DB-i*this.DB%k;if(i-- >0){if(p<this.DB&&(d=this[i]>>p)>0){m=true;r=int2char(d)}while(i>=0){if(p<k){d=(this[i]&(1<<p)-1)<<k-p;d|=this[--i]>>(p+=this.DB-k)}else{d=this[i]>>(p-=k)&km;if(p<=0){p+=this.DB;--i}}if(d>0)m=true;if(m)r+=int2char(d)}}return m?r:"0"}
function bnNegate(){var r=nbi();BigInteger.ZERO.subTo(this,r);return r}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(a){var r=this.s-a.s;if(r!=0)return r;var i=this.t;r=i-a.t;if(r!=0)return this.s<0?-r:r;while(--i>=0)if((r=this[i]-a[i])!=0)return r;return 0}function nbits(x){var r=1,t;if((t=x>>>16)!=0){x=t;r+=16}if((t=x>>8)!=0){x=t;r+=8}if((t=x>>4)!=0){x=t;r+=4}if((t=x>>2)!=0){x=t;r+=2}if((t=x>>1)!=0){x=t;r+=1}return r}
function bnBitLength(){if(this.t<=0)return 0;return this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(n,r){var i;for(i=this.t-1;i>=0;--i)r[i+n]=this[i];for(i=n-1;i>=0;--i)r[i]=0;r.t=this.t+n;r.s=this.s}function bnpDRShiftTo(n,r){for(var i=n;i<this.t;++i)r[i-n]=this[i];r.t=Math.max(this.t-n,0);r.s=this.s}
function bnpLShiftTo(n,r){var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<cbs)-1;var ds=Math.floor(n/this.DB),c=this.s<<bs&this.DM,i;for(i=this.t-1;i>=0;--i){r[i+ds+1]=this[i]>>cbs|c;c=(this[i]&bm)<<bs}for(i=ds-1;i>=0;--i)r[i]=0;r[ds]=c;r.t=this.t+ds+1;r.s=this.s;r.clamp()}
function bnpRShiftTo(n,r){r.s=this.s;var ds=Math.floor(n/this.DB);if(ds>=this.t){r.t=0;return}var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<bs)-1;r[0]=this[ds]>>bs;for(var i=ds+1;i<this.t;++i){r[i-ds-1]|=(this[i]&bm)<<cbs;r[i-ds]=this[i]>>bs}if(bs>0)r[this.t-ds-1]|=(this.s&bm)<<cbs;r.t=this.t-ds;r.clamp()}
function bnpSubTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]-a[i];r[i++]=c&this.DM;c>>=this.DB}if(a.t<this.t){c-=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB}c+=this.s}else{c+=this.s;while(i<a.t){c-=a[i];r[i++]=c&this.DM;c>>=this.DB}c-=a.s}r.s=c<0?-1:0;if(c<-1)r[i++]=this.DV+c;else if(c>0)r[i++]=c;r.t=i;r.clamp()}
function bnpMultiplyTo(a,r){var x=this.abs(),y=a.abs();var i=x.t;r.t=i+y.t;while(--i>=0)r[i]=0;for(i=0;i<y.t;++i)r[i+x.t]=x.am(0,y[i],r,i,0,x.t);r.s=0;r.clamp();if(this.s!=a.s)BigInteger.ZERO.subTo(r,r)}function bnpSquareTo(r){var x=this.abs();var i=r.t=2*x.t;while(--i>=0)r[i]=0;for(i=0;i<x.t-1;++i){var c=x.am(i,x[i],r,2*i,0,1);if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x.DV){r[i+x.t]-=x.DV;r[i+x.t+1]=1}}if(r.t>0)r[r.t-1]+=x.am(i,x[i],r,2*i,0,1);r.s=0;r.clamp()}
function bnpDivRemTo(m,q,r){var pm=m.abs();if(pm.t<=0)return;var pt=this.abs();if(pt.t<pm.t){if(q!=null)q.fromInt(0);if(r!=null)this.copyTo(r);return}if(r==null)r=nbi();var y=nbi(),ts=this.s,ms=m.s;var nsh=this.DB-nbits(pm[pm.t-1]);if(nsh>0){pm.lShiftTo(nsh,y);pt.lShiftTo(nsh,r)}else{pm.copyTo(y);pt.copyTo(r)}var ys=y.t;var y0=y[ys-1];if(y0==0)return;var yt=y0*(1<<this.F1)+(ys>1?y[ys-2]>>this.F2:0);var d1=this.FV/yt,d2=(1<<this.F1)/yt,e=1<<this.F2;var i=r.t,j=i-ys,t=q==null?nbi():q;y.dlShiftTo(j,
t);if(r.compareTo(t)>=0){r[r.t++]=1;r.subTo(t,r)}BigInteger.ONE.dlShiftTo(ys,t);t.subTo(y,y);while(y.t<ys)y[y.t++]=0;while(--j>=0){var qd=r[--i]==y0?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);if((r[i]+=y.am(0,qd,r,j,0,ys))<qd){y.dlShiftTo(j,t);r.subTo(t,r);while(r[i]<--qd)r.subTo(t,r)}}if(q!=null){r.drShiftTo(ys,q);if(ts!=ms)BigInteger.ZERO.subTo(q,q)}r.t=ys;r.clamp();if(nsh>0)r.rShiftTo(nsh,r);if(ts<0)BigInteger.ZERO.subTo(r,r)}
function bnMod(a){var r=nbi();this.abs().divRemTo(a,null,r);if(this.s<0&&r.compareTo(BigInteger.ZERO)>0)a.subTo(r,r);return r}function Classic(m){this.m=m}function cConvert(x){if(x.s<0||x.compareTo(this.m)>=0)return x.mod(this.m);else return x}function cRevert(x){return x}function cReduce(x){x.divRemTo(this.m,null,x)}function cMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}function cSqrTo(x,r){x.squareTo(r);this.reduce(r)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;
Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var x=this[0];if((x&1)==0)return 0;var y=x&3;y=y*(2-(x&15)*y)&15;y=y*(2-(x&255)*y)&255;y=y*(2-((x&65535)*y&65535))&65535;y=y*(2-x*y%this.DV)%this.DV;return y>0?this.DV-y:-y}function Montgomery(m){this.m=m;this.mp=m.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<m.DB-15)-1;this.mt2=2*m.t}
function montConvert(x){var r=nbi();x.abs().dlShiftTo(this.m.t,r);r.divRemTo(this.m,null,r);if(x.s<0&&r.compareTo(BigInteger.ZERO)>0)this.m.subTo(r,r);return r}function montRevert(x){var r=nbi();x.copyTo(r);this.reduce(r);return r}
function montReduce(x){while(x.t<=this.mt2)x[x.t++]=0;for(var i=0;i<this.m.t;++i){var j=x[i]&32767;var u0=j*this.mpl+((j*this.mph+(x[i]>>15)*this.mpl&this.um)<<15)&x.DM;j=i+this.m.t;x[j]+=this.m.am(0,u0,x,i,0,this.m.t);while(x[j]>=x.DV){x[j]-=x.DV;x[++j]++}}x.clamp();x.drShiftTo(this.m.t,x);if(x.compareTo(this.m)>=0)x.subTo(this.m,x)}function montSqrTo(x,r){x.squareTo(r);this.reduce(r)}function montMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}Montgomery.prototype.convert=montConvert;
Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0}function bnpExp(e,z){if(e>4294967295||e<1)return BigInteger.ONE;var r=nbi(),r2=nbi(),g=z.convert(this),i=nbits(e)-1;g.copyTo(r);while(--i>=0){z.sqrTo(r,r2);if((e&1<<i)>0)z.mulTo(r2,g,r);else{var t=r;r=r2;r2=t}}return z.revert(r)}
function bnModPowInt(e,m){var z;if(e<256||m.isEven())z=new Classic(m);else z=new Montgomery(m);return this.exp(e,z)}BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;
BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.isEven=bnpIsEven;BigInteger.prototype.exp=bnpExp;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.modPowInt=bnModPowInt;
BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function bnClone(){var r=nbi();this.copyTo(r);return r}function bnIntValue(){if(this.s<0)if(this.t==1)return this[0]-this.DV;else{if(this.t==0)return-1}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return this.t==0?this.s:this[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this[0]<<16>>16}function bnpChunkSize(r){return Math.floor(Math.LN2*this.DB/Math.log(r))}
function bnSigNum(){if(this.s<0)return-1;else if(this.t<=0||this.t==1&&this[0]<=0)return 0;else return 1}function bnpToRadix(b){if(b==null)b=10;if(this.signum()==0||(b<2||b>36))return"0";var cs=this.chunkSize(b);var a=Math.pow(b,cs);var d=nbv(a),y=nbi(),z=nbi(),r="";this.divRemTo(d,y,z);while(y.signum()>0){r=(a+z.intValue()).toString(b).substr(1)+r;y.divRemTo(d,y,z)}return z.intValue().toString(b)+r}
function bnpFromRadix(s,b){this.fromInt(0);if(b==null)b=10;var cs=this.chunkSize(b);var d=Math.pow(b,cs),mi=false,j=0,w=0;for(var i=0;i<s.length;++i){var x=intAt(s,i);if(x<0){if(s.charAt(i)=="-"&&this.signum()==0)mi=true;continue}w=b*w+x;if(++j>=cs){this.dMultiply(d);this.dAddOffset(w,0);j=0;w=0}}if(j>0){this.dMultiply(Math.pow(b,j));this.dAddOffset(w,0)}if(mi)BigInteger.ZERO.subTo(this,this)}
function bnpFromNumber(a,b,c){if("number"==typeof b)if(a<2)this.fromInt(1);else{this.fromNumber(a,c);if(!this.testBit(a-1))this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this);if(this.isEven())this.dAddOffset(1,0);while(!this.isProbablePrime(b)){this.dAddOffset(2,0);if(this.bitLength()>a)this.subTo(BigInteger.ONE.shiftLeft(a-1),this)}}else{var x=new Array,t=a&7;x.length=(a>>3)+1;b.nextBytes(x);if(t>0)x[0]&=(1<<t)-1;else x[0]=0;this.fromString(x,256)}}
function bnToByteArray(){var i=this.t,r=new Array;r[0]=this.s;var p=this.DB-i*this.DB%8,d,k=0;if(i-- >0){if(p<this.DB&&(d=this[i]>>p)!=(this.s&this.DM)>>p)r[k++]=d|this.s<<this.DB-p;while(i>=0){if(p<8){d=(this[i]&(1<<p)-1)<<8-p;d|=this[--i]>>(p+=this.DB-8)}else{d=this[i]>>(p-=8)&255;if(p<=0){p+=this.DB;--i}}if((d&128)!=0)d|=-256;if(k==0&&(this.s&128)!=(d&128))++k;if(k>0||d!=this.s)r[k++]=d}}return r}function bnEquals(a){return this.compareTo(a)==0}
function bnMin(a){return this.compareTo(a)<0?this:a}function bnMax(a){return this.compareTo(a)>0?this:a}function bnpBitwiseTo(a,op,r){var i,f,m=Math.min(a.t,this.t);for(i=0;i<m;++i)r[i]=op(this[i],a[i]);if(a.t<this.t){f=a.s&this.DM;for(i=m;i<this.t;++i)r[i]=op(this[i],f);r.t=this.t}else{f=this.s&this.DM;for(i=m;i<a.t;++i)r[i]=op(f,a[i]);r.t=a.t}r.s=op(this.s,a.s);r.clamp()}function op_and(x,y){return x&y}function bnAnd(a){var r=nbi();this.bitwiseTo(a,op_and,r);return r}
function op_or(x,y){return x|y}function bnOr(a){var r=nbi();this.bitwiseTo(a,op_or,r);return r}function op_xor(x,y){return x^y}function bnXor(a){var r=nbi();this.bitwiseTo(a,op_xor,r);return r}function op_andnot(x,y){return x&~y}function bnAndNot(a){var r=nbi();this.bitwiseTo(a,op_andnot,r);return r}function bnNot(){var r=nbi();for(var i=0;i<this.t;++i)r[i]=this.DM&~this[i];r.t=this.t;r.s=~this.s;return r}
function bnShiftLeft(n){var r=nbi();if(n<0)this.rShiftTo(-n,r);else this.lShiftTo(n,r);return r}function bnShiftRight(n){var r=nbi();if(n<0)this.lShiftTo(-n,r);else this.rShiftTo(n,r);return r}function lbit(x){if(x==0)return-1;var r=0;if((x&65535)==0){x>>=16;r+=16}if((x&255)==0){x>>=8;r+=8}if((x&15)==0){x>>=4;r+=4}if((x&3)==0){x>>=2;r+=2}if((x&1)==0)++r;return r}
function bnGetLowestSetBit(){for(var i=0;i<this.t;++i)if(this[i]!=0)return i*this.DB+lbit(this[i]);if(this.s<0)return this.t*this.DB;return-1}function cbit(x){var r=0;while(x!=0){x&=x-1;++r}return r}function bnBitCount(){var r=0,x=this.s&this.DM;for(var i=0;i<this.t;++i)r+=cbit(this[i]^x);return r}function bnTestBit(n){var j=Math.floor(n/this.DB);if(j>=this.t)return this.s!=0;return(this[j]&1<<n%this.DB)!=0}
function bnpChangeBit(n,op){var r=BigInteger.ONE.shiftLeft(n);this.bitwiseTo(r,op,r);return r}function bnSetBit(n){return this.changeBit(n,op_or)}function bnClearBit(n){return this.changeBit(n,op_andnot)}function bnFlipBit(n){return this.changeBit(n,op_xor)}
function bnpAddTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]+a[i];r[i++]=c&this.DM;c>>=this.DB}if(a.t<this.t){c+=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB}c+=this.s}else{c+=this.s;while(i<a.t){c+=a[i];r[i++]=c&this.DM;c>>=this.DB}c+=a.s}r.s=c<0?-1:0;if(c>0)r[i++]=c;else if(c<-1)r[i++]=this.DV+c;r.t=i;r.clamp()}function bnAdd(a){var r=nbi();this.addTo(a,r);return r}function bnSubtract(a){var r=nbi();this.subTo(a,r);return r}
function bnMultiply(a){var r=nbi();this.multiplyTo(a,r);return r}function bnSquare(){var r=nbi();this.squareTo(r);return r}function bnDivide(a){var r=nbi();this.divRemTo(a,r,null);return r}function bnRemainder(a){var r=nbi();this.divRemTo(a,null,r);return r}function bnDivideAndRemainder(a){var q=nbi(),r=nbi();this.divRemTo(a,q,r);return new Array(q,r)}function bnpDMultiply(n){this[this.t]=this.am(0,n-1,this,0,0,this.t);++this.t;this.clamp()}
function bnpDAddOffset(n,w){if(n==0)return;while(this.t<=w)this[this.t++]=0;this[w]+=n;while(this[w]>=this.DV){this[w]-=this.DV;if(++w>=this.t)this[this.t++]=0;++this[w]}}function NullExp(){}function nNop(x){return x}function nMulTo(x,y,r){x.multiplyTo(y,r)}function nSqrTo(x,r){x.squareTo(r)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(e){return this.exp(e,new NullExp)}
function bnpMultiplyLowerTo(a,n,r){var i=Math.min(this.t+a.t,n);r.s=0;r.t=i;while(i>0)r[--i]=0;var j;for(j=r.t-this.t;i<j;++i)r[i+this.t]=this.am(0,a[i],r,i,0,this.t);for(j=Math.min(a.t,n);i<j;++i)this.am(0,a[i],r,i,0,n-i);r.clamp()}function bnpMultiplyUpperTo(a,n,r){--n;var i=r.t=this.t+a.t-n;r.s=0;while(--i>=0)r[i]=0;for(i=Math.max(n-this.t,0);i<a.t;++i)r[this.t+i-n]=this.am(n-i,a[i],r,0,0,this.t+i-n);r.clamp();r.drShiftTo(1,r)}
function Barrett(m){this.r2=nbi();this.q3=nbi();BigInteger.ONE.dlShiftTo(2*m.t,this.r2);this.mu=this.r2.divide(m);this.m=m}function barrettConvert(x){if(x.s<0||x.t>2*this.m.t)return x.mod(this.m);else if(x.compareTo(this.m)<0)return x;else{var r=nbi();x.copyTo(r);this.reduce(r);return r}}function barrettRevert(x){return x}
function barrettReduce(x){x.drShiftTo(this.m.t-1,this.r2);if(x.t>this.m.t+1){x.t=this.m.t+1;x.clamp()}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(x.compareTo(this.r2)<0)x.dAddOffset(1,this.m.t+1);x.subTo(this.r2,x);while(x.compareTo(this.m)>=0)x.subTo(this.m,x)}function barrettSqrTo(x,r){x.squareTo(r);this.reduce(r)}function barrettMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}Barrett.prototype.convert=barrettConvert;
Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;
function bnModPow(e,m){var i=e.bitLength(),k,r=nbv(1),z;if(i<=0)return r;else if(i<18)k=1;else if(i<48)k=3;else if(i<144)k=4;else if(i<768)k=5;else k=6;if(i<8)z=new Classic(m);else if(m.isEven())z=new Barrett(m);else z=new Montgomery(m);var g=new Array,n=3,k1=k-1,km=(1<<k)-1;g[1]=z.convert(this);if(k>1){var g2=nbi();z.sqrTo(g[1],g2);while(n<=km){g[n]=nbi();z.mulTo(g2,g[n-2],g[n]);n+=2}}var j=e.t-1,w,is1=true,r2=nbi(),t;i=nbits(e[j])-1;while(j>=0){if(i>=k1)w=e[j]>>i-k1&km;else{w=(e[j]&(1<<i+1)-1)<<
k1-i;if(j>0)w|=e[j-1]>>this.DB+i-k1}n=k;while((w&1)==0){w>>=1;--n}if((i-=n)<0){i+=this.DB;--j}if(is1){g[w].copyTo(r);is1=false}else{while(n>1){z.sqrTo(r,r2);z.sqrTo(r2,r);n-=2}if(n>0)z.sqrTo(r,r2);else{t=r;r=r2;r2=t}z.mulTo(r2,g[w],r)}while(j>=0&&(e[j]&1<<i)==0){z.sqrTo(r,r2);t=r;r=r2;r2=t;if(--i<0){i=this.DB-1;--j}}}return z.revert(r)}
function bnGCD(a){var x=this.s<0?this.negate():this.clone();var y=a.s<0?a.negate():a.clone();if(x.compareTo(y)<0){var t=x;x=y;y=t}var i=x.getLowestSetBit(),g=y.getLowestSetBit();if(g<0)return x;if(i<g)g=i;if(g>0){x.rShiftTo(g,x);y.rShiftTo(g,y)}while(x.signum()>0){if((i=x.getLowestSetBit())>0)x.rShiftTo(i,x);if((i=y.getLowestSetBit())>0)y.rShiftTo(i,y);if(x.compareTo(y)>=0){x.subTo(y,x);x.rShiftTo(1,x)}else{y.subTo(x,y);y.rShiftTo(1,y)}}if(g>0)y.lShiftTo(g,y);return y}
function bnpModInt(n){if(n<=0)return 0;var d=this.DV%n,r=this.s<0?n-1:0;if(this.t>0)if(d==0)r=this[0]%n;else for(var i=this.t-1;i>=0;--i)r=(d*r+this[i])%n;return r}
function bnModInverse(m){var ac=m.isEven();if(this.isEven()&&ac||m.signum()==0)return BigInteger.ZERO;var u=m.clone(),v=this.clone();var a=nbv(1),b=nbv(0),c=nbv(0),d=nbv(1);while(u.signum()!=0){while(u.isEven()){u.rShiftTo(1,u);if(ac){if(!a.isEven()||!b.isEven()){a.addTo(this,a);b.subTo(m,b)}a.rShiftTo(1,a)}else if(!b.isEven())b.subTo(m,b);b.rShiftTo(1,b)}while(v.isEven()){v.rShiftTo(1,v);if(ac){if(!c.isEven()||!d.isEven()){c.addTo(this,c);d.subTo(m,d)}c.rShiftTo(1,c)}else if(!d.isEven())d.subTo(m,
d);d.rShiftTo(1,d)}if(u.compareTo(v)>=0){u.subTo(v,u);if(ac)a.subTo(c,a);b.subTo(d,b)}else{v.subTo(u,v);if(ac)c.subTo(a,c);d.subTo(b,d)}}if(v.compareTo(BigInteger.ONE)!=0)return BigInteger.ZERO;if(d.compareTo(m)>=0)return d.subtract(m);if(d.signum()<0)d.addTo(m,d);else return d;if(d.signum()<0)return d.add(m);else return d}
var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,
733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];var lplim=(1<<26)/lowprimes[lowprimes.length-1];
function bnIsProbablePrime(t){var i,x=this.abs();if(x.t==1&&x[0]<=lowprimes[lowprimes.length-1]){for(i=0;i<lowprimes.length;++i)if(x[0]==lowprimes[i])return true;return false}if(x.isEven())return false;i=1;while(i<lowprimes.length){var m=lowprimes[i],j=i+1;while(j<lowprimes.length&&m<lplim)m*=lowprimes[j++];m=x.modInt(m);while(i<j)if(m%lowprimes[i++]==0)return false}return x.millerRabin(t)}
function bnpMillerRabin(t){var n1=this.subtract(BigInteger.ONE);var k=n1.getLowestSetBit();if(k<=0)return false;var r=n1.shiftRight(k);t=t+1>>1;if(t>lowprimes.length)t=lowprimes.length;var a=nbi();for(var i=0;i<t;++i){a.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var y=a.modPow(r,this);if(y.compareTo(BigInteger.ONE)!=0&&y.compareTo(n1)!=0){var j=1;while(j++<k&&y.compareTo(n1)!=0){y=y.modPowInt(2,this);if(y.compareTo(BigInteger.ONE)==0)return false}if(y.compareTo(n1)!=0)return false}}return true}
BigInteger.prototype.chunkSize=bnpChunkSize;BigInteger.prototype.toRadix=bnpToRadix;BigInteger.prototype.fromRadix=bnpFromRadix;BigInteger.prototype.fromNumber=bnpFromNumber;BigInteger.prototype.bitwiseTo=bnpBitwiseTo;BigInteger.prototype.changeBit=bnpChangeBit;BigInteger.prototype.addTo=bnpAddTo;BigInteger.prototype.dMultiply=bnpDMultiply;BigInteger.prototype.dAddOffset=bnpDAddOffset;BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo;
BigInteger.prototype.modInt=bnpModInt;BigInteger.prototype.millerRabin=bnpMillerRabin;BigInteger.prototype.clone=bnClone;BigInteger.prototype.intValue=bnIntValue;BigInteger.prototype.byteValue=bnByteValue;BigInteger.prototype.shortValue=bnShortValue;BigInteger.prototype.signum=bnSigNum;BigInteger.prototype.toByteArray=bnToByteArray;BigInteger.prototype.equals=bnEquals;BigInteger.prototype.min=bnMin;BigInteger.prototype.max=bnMax;BigInteger.prototype.and=bnAnd;BigInteger.prototype.or=bnOr;
BigInteger.prototype.xor=bnXor;BigInteger.prototype.andNot=bnAndNot;BigInteger.prototype.not=bnNot;BigInteger.prototype.shiftLeft=bnShiftLeft;BigInteger.prototype.shiftRight=bnShiftRight;BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger.prototype.bitCount=bnBitCount;BigInteger.prototype.testBit=bnTestBit;BigInteger.prototype.setBit=bnSetBit;BigInteger.prototype.clearBit=bnClearBit;BigInteger.prototype.flipBit=bnFlipBit;BigInteger.prototype.add=bnAdd;BigInteger.prototype.subtract=bnSubtract;
BigInteger.prototype.multiply=bnMultiply;BigInteger.prototype.divide=bnDivide;BigInteger.prototype.remainder=bnRemainder;BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger.prototype.modPow=bnModPow;BigInteger.prototype.modInverse=bnModInverse;BigInteger.prototype.pow=bnPow;BigInteger.prototype.gcd=bnGCD;BigInteger.prototype.isProbablePrime=bnIsProbablePrime;BigInteger.prototype.square=bnSquare;JSCOMPILER_PRESERVE(!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.pako=e()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'");}var f=
n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){var assign=_dereq_("./lib/utils/common").assign;var deflate=_dereq_("./lib/deflate");var inflate=_dereq_("./lib/inflate");var constants=_dereq_("./lib/zlib/constants");var pako={};assign(pako,deflate,inflate,constants);module.exports=pako},{"./lib/deflate":2,
"./lib/inflate":3,"./lib/utils/common":4,"./lib/zlib/constants":7}],2:[function(_dereq_,module,exports){var zlib_deflate=_dereq_("./zlib/deflate.js");var utils=_dereq_("./utils/common");var strings=_dereq_("./utils/strings");var msg=_dereq_("./zlib/messages");var zstream=_dereq_("./zlib/zstream");var Z_NO_FLUSH=0;var Z_FINISH=4;var Z_OK=0;var Z_STREAM_END=1;var Z_DEFAULT_COMPRESSION=-1;var Z_DEFAULT_STRATEGY=0;var Z_DEFLATED=8;var Deflate=function(options){this.options=utils.assign({level:Z_DEFAULT_COMPRESSION,
method:Z_DEFLATED,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY,to:""},options||{});var opt=this.options;if(opt.raw&&opt.windowBits>0)opt.windowBits=-opt.windowBits;else if(opt.gzip&&(opt.windowBits>0&&opt.windowBits<16))opt.windowBits+=16;this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new zstream;this.strm.avail_out=0;var status=zlib_deflate.deflateInit2(this.strm,opt.level,opt.method,opt.windowBits,opt.memLevel,opt.strategy);if(status!==Z_OK)throw new Error(msg[status]);
if(opt.header)zlib_deflate.deflateSetHeader(this.strm,opt.header)};Deflate.prototype.push=function(data,mode){var strm=this.strm;var chunkSize=this.options.chunkSize;var status,_mode;if(this.ended)return false;_mode=mode===~~mode?mode:mode===true?Z_FINISH:Z_NO_FLUSH;if(typeof data==="string")strm.input=strings.string2buf(data);else strm.input=data;strm.next_in=0;strm.avail_in=strm.input.length;do{if(strm.avail_out===0){strm.output=new utils.Buf8(chunkSize);strm.next_out=0;strm.avail_out=chunkSize}status=
zlib_deflate.deflate(strm,_mode);if(status!==Z_STREAM_END&&status!==Z_OK){this.onEnd(status);this.ended=true;return false}if(strm.avail_out===0||strm.avail_in===0&&_mode===Z_FINISH)if(this.options.to==="string")this.onData(strings.buf2binstring(utils.shrinkBuf(strm.output,strm.next_out)));else this.onData(utils.shrinkBuf(strm.output,strm.next_out))}while((strm.avail_in>0||strm.avail_out===0)&&status!==Z_STREAM_END);if(_mode===Z_FINISH){status=zlib_deflate.deflateEnd(this.strm);this.onEnd(status);
this.ended=true;return status===Z_OK}return true};Deflate.prototype.onData=function(chunk){this.chunks.push(chunk)};Deflate.prototype.onEnd=function(status){if(status===Z_OK)if(this.options.to==="string")this.result=this.chunks.join("");else this.result=utils.flattenChunks(this.chunks);this.chunks=[];this.err=status;this.msg=this.strm.msg};function deflate(input,options){var deflator=new Deflate(options);deflator.push(input,true);if(deflator.err)throw deflator.msg;return deflator.result}function deflateRaw(input,
options){options=options||{};options.raw=true;return deflate(input,options)}function gzip(input,options){options=options||{};options.gzip=true;return deflate(input,options)}exports.Deflate=Deflate;exports.deflate=deflate;exports.deflateRaw=deflateRaw;exports.gzip=gzip},{"./utils/common":4,"./utils/strings":5,"./zlib/deflate.js":9,"./zlib/messages":14,"./zlib/zstream":16}],3:[function(_dereq_,module,exports){var zlib_inflate=_dereq_("./zlib/inflate.js");var utils=_dereq_("./utils/common");var strings=
_dereq_("./utils/strings");var c=_dereq_("./zlib/constants");var msg=_dereq_("./zlib/messages");var zstream=_dereq_("./zlib/zstream");var gzheader=_dereq_("./zlib/gzheader");var Inflate=function(options){this.options=utils.assign({chunkSize:16384,windowBits:0,to:""},options||{});var opt=this.options;if(opt.raw&&(opt.windowBits>=0&&opt.windowBits<16)){opt.windowBits=-opt.windowBits;if(opt.windowBits===0)opt.windowBits=-15}if(opt.windowBits>=0&&(opt.windowBits<16&&!(options&&options.windowBits)))opt.windowBits+=
32;if(opt.windowBits>15&&opt.windowBits<48)if((opt.windowBits&15)===0)opt.windowBits|=15;this.err=0;this.msg="";this.ended=false;this.chunks=[];this.strm=new zstream;this.strm.avail_out=0;var status=zlib_inflate.inflateInit2(this.strm,opt.windowBits);if(status!==c.Z_OK)throw new Error(msg[status]);this.header=new gzheader;zlib_inflate.inflateGetHeader(this.strm,this.header)};Inflate.prototype.push=function(data,mode){var strm=this.strm;var chunkSize=this.options.chunkSize;var status,_mode;var next_out_utf8,
tail,utf8str;if(this.ended)return false;_mode=mode===~~mode?mode:mode===true?c.Z_FINISH:c.Z_NO_FLUSH;if(typeof data==="string")strm.input=strings.binstring2buf(data);else strm.input=data;strm.next_in=0;strm.avail_in=strm.input.length;do{if(strm.avail_out===0){strm.output=new utils.Buf8(chunkSize);strm.next_out=0;strm.avail_out=chunkSize}status=zlib_inflate.inflate(strm,c.Z_NO_FLUSH);if(status!==c.Z_STREAM_END&&status!==c.Z_OK){this.onEnd(status);this.ended=true;return false}if(strm.next_out)if(strm.avail_out===
0||(status===c.Z_STREAM_END||strm.avail_in===0&&_mode===c.Z_FINISH))if(this.options.to==="string"){next_out_utf8=strings.utf8border(strm.output,strm.next_out);tail=strm.next_out-next_out_utf8;utf8str=strings.buf2string(strm.output,next_out_utf8);strm.next_out=tail;strm.avail_out=chunkSize-tail;if(tail)utils.arraySet(strm.output,strm.output,next_out_utf8,tail,0);this.onData(utf8str)}else this.onData(utils.shrinkBuf(strm.output,strm.next_out))}while((strm.avail_in>0||strm.avail_out===0)&&status!==c.Z_STREAM_END);
if(status===c.Z_STREAM_END)_mode=c.Z_FINISH;if(_mode===c.Z_FINISH){status=zlib_inflate.inflateEnd(this.strm);this.onEnd(status);this.ended=true;return status===c.Z_OK}return true};Inflate.prototype.onData=function(chunk){this.chunks.push(chunk)};Inflate.prototype.onEnd=function(status){if(status===c.Z_OK)if(this.options.to==="string")this.result=this.chunks.join("");else this.result=utils.flattenChunks(this.chunks);this.chunks=[];this.err=status;this.msg=this.strm.msg};function inflate(input,options){var inflator=
new Inflate(options);inflator.push(input,true);if(inflator.err)throw inflator.msg;return inflator.result}function inflateRaw(input,options){options=options||{};options.raw=true;return inflate(input,options)}exports.Inflate=Inflate;exports.inflate=inflate;exports.inflateRaw=inflateRaw;exports.ungzip=inflate},{"./utils/common":4,"./utils/strings":5,"./zlib/constants":7,"./zlib/gzheader":10,"./zlib/inflate.js":12,"./zlib/messages":14,"./zlib/zstream":16}],4:[function(_dereq_,module,exports){var TYPED_OK=
typeof Uint8Array!=="undefined"&&(typeof Uint16Array!=="undefined"&&typeof Int32Array!=="undefined");exports.assign=function(obj){var sources=Array.prototype.slice.call(arguments,1);while(sources.length){var source=sources.shift();if(!source)continue;if(typeof source!=="object")throw new TypeError(source+"must be non-object");for(var p in source)if(source.hasOwnProperty(p))obj[p]=source[p]}return obj};exports.shrinkBuf=function(buf,size){if(buf.length===size)return buf;if(buf.subarray)return buf.subarray(0,
size);buf.length=size;return buf};var fnTyped={arraySet:function(dest,src,src_offs,len,dest_offs){if(src.subarray&&dest.subarray){dest.set(src.subarray(src_offs,src_offs+len),dest_offs);return}for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},flattenChunks:function(chunks){var i,l,len,pos,chunk,result;len=0;for(i=0,l=chunks.length;i<l;i++)len+=chunks[i].length;result=new Uint8Array(len);pos=0;for(i=0,l=chunks.length;i<l;i++){chunk=chunks[i];result.set(chunk,pos);pos+=chunk.length}return result}};
var fnUntyped={arraySet:function(dest,src,src_offs,len,dest_offs){for(var i=0;i<len;i++)dest[dest_offs+i]=src[src_offs+i]},flattenChunks:function(chunks){return[].concat.apply([],chunks)}};exports.setTyped=function(on){if(on){exports.Buf8=Uint8Array;exports.Buf16=Uint16Array;exports.Buf32=Int32Array;exports.assign(exports,fnTyped)}else{exports.Buf8=Array;exports.Buf16=Array;exports.Buf32=Array;exports.assign(exports,fnUntyped)}};exports.setTyped(TYPED_OK)},{}],5:[function(_dereq_,module,exports){var utils=
_dereq_("./common");var STR_APPLY_OK=true;try{String.fromCharCode.apply(null,[0])}catch(__){STR_APPLY_OK=false}var _utf8len=new utils.Buf8(256);for(var i=0;i<256;i++)_utf8len[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;_utf8len[254]=_utf8len[254]=1;exports.string2buf=function(str){var buf,c,c2,m_pos,i,str_len=str.length,buf_len=0;for(m_pos=0;m_pos<str_len;m_pos++){c=str.charCodeAt(m_pos);if((c&64512)===55296&&m_pos+1<str_len){c2=str.charCodeAt(m_pos+1);if((c2&64512)===56320){c=65536+(c-55296<<
10)+(c2-56320);m_pos++}}buf_len+=c<128?1:c<2048?2:c<65536?3:4}buf=new utils.Buf8(buf_len);for(i=0,m_pos=0;i<buf_len;m_pos++){c=str.charCodeAt(m_pos);if((c&64512)===55296&&m_pos+1<str_len){c2=str.charCodeAt(m_pos+1);if((c2&64512)===56320){c=65536+(c-55296<<10)+(c2-56320);m_pos++}}if(c<128)buf[i++]=c;else if(c<2048){buf[i++]=192|c>>>6;buf[i++]=128|c&63}else if(c<65536){buf[i++]=224|c>>>12;buf[i++]=128|c>>>6&63;buf[i++]=128|c&63}else{buf[i++]=240|c>>>18;buf[i++]=128|c>>>12&63;buf[i++]=128|c>>>6&63;buf[i++]=
128|c&63}}return buf};exports.buf2binstring=function(buf){if(STR_APPLY_OK&&buf.length<65537)return String.fromCharCode.apply(null,buf);var result="";for(var i=0,len=buf.length;i<len;i++)result+=String.fromCharCode(buf[i]);return result};exports.binstring2buf=function(str){var buf=new utils.Buf8(str.length);for(var i=0,len=buf.length;i<len;i++)buf[i]=str.charCodeAt(i);return buf};exports.buf2string=function(buf,max){var str,i,out,c,c_len;var len=max||buf.length;var utf16buf=new Array(len*2);for(out=
0,i=0;i<len;){c=buf[i++];if(c<128){utf16buf[out++]=c;continue}c_len=_utf8len[c];if(c_len>4){utf16buf[out++]=65533;i+=c_len-1;continue}c&=c_len===2?31:c_len===3?15:7;while(c_len>1&&i<len){c=c<<6|buf[i++]&63;c_len--}if(c_len>1){utf16buf[out++]=65533;continue}if(c<65536)utf16buf[out++]=c;else{c-=65536;utf16buf[out++]=55296|c>>10&1023;utf16buf[out++]=56320|c&1023}}if(STR_APPLY_OK)return String.fromCharCode.apply(null,utils.shrinkBuf(utf16buf,out));str="";for(i=0,len=out;i<len;i++)str+=String.fromCharCode(utf16buf[i]);
return str};exports.utf8border=function(buf,max){var pos;max=max||buf.length;if(max>buf.length)max=buf.length;pos=max-1;while(pos>=0&&(buf[pos]&192)===128)pos--;if(pos<0)return max;if(pos===0)return max;return pos+_utf8len[buf[pos]]>max?pos:max}},{"./common":4}],6:[function(_dereq_,module,exports){function adler32(adler,buf,len,pos){var s1=adler&65535|0,s2=adler>>>16&65535|0,n=0;while(len!==0){n=len>2E3?2E3:len;len-=n;do{s1=s1+buf[pos++]|0;s2=s2+s1|0}while(--n);s1%=65521;s2%=65521}return s1|s2<<16|
0}module.exports=adler32},{}],7:[function(_dereq_,module,exports){module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],8:[function(_dereq_,module,exports){function makeTable(){var c,
table=[];for(var n=0;n<256;n++){c=n;for(var k=0;k<8;k++)c=c&1?3988292384^c>>>1:c>>>1;table[n]=c}return table}var crcTable=makeTable();function crc32(crc,buf,len,pos){var t=crcTable,end=pos+len;crc=crc^-1;for(var i=pos;i<end;i++)crc=crc>>>8^t[(crc^buf[i])&255];return crc^-1}module.exports=crc32},{}],9:[function(_dereq_,module,exports){var utils=_dereq_("../utils/common");var trees=_dereq_("./trees");var adler32=_dereq_("./adler32");var crc32=_dereq_("./crc32");var msg=_dereq_("./messages");var Z_NO_FLUSH=
0;var Z_PARTIAL_FLUSH=1;var Z_FULL_FLUSH=3;var Z_FINISH=4;var Z_BLOCK=5;var Z_OK=0;var Z_STREAM_END=1;var Z_STREAM_ERROR=-2;var Z_DATA_ERROR=-3;var Z_BUF_ERROR=-5;var Z_DEFAULT_COMPRESSION=-1;var Z_FILTERED=1;var Z_HUFFMAN_ONLY=2;var Z_RLE=3;var Z_FIXED=4;var Z_DEFAULT_STRATEGY=0;var Z_UNKNOWN=2;var Z_DEFLATED=8;var MAX_MEM_LEVEL=9;var MAX_WBITS=15;var DEF_MEM_LEVEL=8;var LENGTH_CODES=29;var LITERALS=256;var L_CODES=LITERALS+1+LENGTH_CODES;var D_CODES=30;var BL_CODES=19;var HEAP_SIZE=2*L_CODES+1;
var MAX_BITS=15;var MIN_MATCH=3;var MAX_MATCH=258;var MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1;var PRESET_DICT=32;var INIT_STATE=42;var EXTRA_STATE=69;var NAME_STATE=73;var COMMENT_STATE=91;var HCRC_STATE=103;var BUSY_STATE=113;var FINISH_STATE=666;var BS_NEED_MORE=1;var BS_BLOCK_DONE=2;var BS_FINISH_STARTED=3;var BS_FINISH_DONE=4;var OS_CODE=3;function err(strm,errorCode){strm.msg=msg[errorCode];return errorCode}function rank(f){return(f<<1)-(f>4?9:0)}function zero(buf){var len=buf.length;while(--len>=
0)buf[len]=0}function flush_pending(strm){var s=strm.state;var len=s.pending;if(len>strm.avail_out)len=strm.avail_out;if(len===0)return;utils.arraySet(strm.output,s.pending_buf,s.pending_out,len,strm.next_out);strm.next_out+=len;s.pending_out+=len;strm.total_out+=len;strm.avail_out-=len;s.pending-=len;if(s.pending===0)s.pending_out=0}function flush_block_only(s,last){trees._tr_flush_block(s,s.block_start>=0?s.block_start:-1,s.strstart-s.block_start,last);s.block_start=s.strstart;flush_pending(s.strm)}
function put_byte(s,b){s.pending_buf[s.pending++]=b}function putShortMSB(s,b){s.pending_buf[s.pending++]=b>>>8&255;s.pending_buf[s.pending++]=b&255}function read_buf(strm,buf,start,size){var len=strm.avail_in;if(len>size)len=size;if(len===0)return 0;strm.avail_in-=len;utils.arraySet(buf,strm.input,strm.next_in,len,start);if(strm.state.wrap===1)strm.adler=adler32(strm.adler,buf,len,start);else if(strm.state.wrap===2)strm.adler=crc32(strm.adler,buf,len,start);strm.next_in+=len;strm.total_in+=len;return len}
function longest_match(s,cur_match){var chain_length=s.max_chain_length;var scan=s.strstart;var match;var len;var best_len=s.prev_length;var nice_match=s.nice_match;var limit=s.strstart>s.w_size-MIN_LOOKAHEAD?s.strstart-(s.w_size-MIN_LOOKAHEAD):0;var _win=s.window;var wmask=s.w_mask;var prev=s.prev;var strend=s.strstart+MAX_MATCH;var scan_end1=_win[scan+best_len-1];var scan_end=_win[scan+best_len];if(s.prev_length>=s.good_match)chain_length>>=2;if(nice_match>s.lookahead)nice_match=s.lookahead;do{match=
cur_match;if(_win[match+best_len]!==scan_end||(_win[match+best_len-1]!==scan_end1||(_win[match]!==_win[scan]||_win[++match]!==_win[scan+1])))continue;scan+=2;match++;do;while(_win[++scan]===_win[++match]&&(_win[++scan]===_win[++match]&&(_win[++scan]===_win[++match]&&(_win[++scan]===_win[++match]&&(_win[++scan]===_win[++match]&&(_win[++scan]===_win[++match]&&(_win[++scan]===_win[++match]&&(_win[++scan]===_win[++match]&&scan<strend))))))));len=MAX_MATCH-(strend-scan);scan=strend-MAX_MATCH;if(len>best_len){s.match_start=
cur_match;best_len=len;if(len>=nice_match)break;scan_end1=_win[scan+best_len-1];scan_end=_win[scan+best_len]}}while((cur_match=prev[cur_match&wmask])>limit&&--chain_length!==0);if(best_len<=s.lookahead)return best_len;return s.lookahead}function fill_window(s){var _w_size=s.w_size;var p,n,m,more,str;do{more=s.window_size-s.lookahead-s.strstart;if(s.strstart>=_w_size+(_w_size-MIN_LOOKAHEAD)){utils.arraySet(s.window,s.window,_w_size,_w_size,0);s.match_start-=_w_size;s.strstart-=_w_size;s.block_start-=
_w_size;n=s.hash_size;p=n;do{m=s.head[--p];s.head[p]=m>=_w_size?m-_w_size:0}while(--n);n=_w_size;p=n;do{m=s.prev[--p];s.prev[p]=m>=_w_size?m-_w_size:0}while(--n);more+=_w_size}if(s.strm.avail_in===0)break;n=read_buf(s.strm,s.window,s.strstart+s.lookahead,more);s.lookahead+=n;if(s.lookahead+s.insert>=MIN_MATCH){str=s.strstart-s.insert;s.ins_h=s.window[str];s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+1])&s.hash_mask;while(s.insert){s.ins_h=(s.ins_h<<s.hash_shift^s.window[str+MIN_MATCH-1])&s.hash_mask;
s.prev[str&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=str;str++;s.insert--;if(s.lookahead+s.insert<MIN_MATCH)break}}}while(s.lookahead<MIN_LOOKAHEAD&&s.strm.avail_in!==0)}function deflate_stored(s,flush){var max_block_size=65535;if(max_block_size>s.pending_buf_size-5)max_block_size=s.pending_buf_size-5;for(;;){if(s.lookahead<=1){fill_window(s);if(s.lookahead===0&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(s.lookahead===0)break}s.strstart+=s.lookahead;s.lookahead=0;var max_start=s.block_start+max_block_size;
if(s.strstart===0||s.strstart>=max_start){s.lookahead=s.strstart-max_start;s.strstart=max_start;flush_block_only(s,false);if(s.strm.avail_out===0)return BS_NEED_MORE}if(s.strstart-s.block_start>=s.w_size-MIN_LOOKAHEAD){flush_block_only(s,false);if(s.strm.avail_out===0)return BS_NEED_MORE}}s.insert=0;if(flush===Z_FINISH){flush_block_only(s,true);if(s.strm.avail_out===0)return BS_FINISH_STARTED;return BS_FINISH_DONE}if(s.strstart>s.block_start){flush_block_only(s,false);if(s.strm.avail_out===0)return BS_NEED_MORE}return BS_NEED_MORE}
function deflate_fast(s,flush){var hash_head;var bflush;for(;;){if(s.lookahead<MIN_LOOKAHEAD){fill_window(s);if(s.lookahead<MIN_LOOKAHEAD&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(s.lookahead===0)break}hash_head=0;if(s.lookahead>=MIN_MATCH){s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask;hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=s.strstart}if(hash_head!==0&&s.strstart-hash_head<=s.w_size-MIN_LOOKAHEAD)s.match_length=longest_match(s,hash_head);
if(s.match_length>=MIN_MATCH){bflush=trees._tr_tally(s,s.strstart-s.match_start,s.match_length-MIN_MATCH);s.lookahead-=s.match_length;if(s.match_length<=s.max_lazy_match&&s.lookahead>=MIN_MATCH){s.match_length--;do{s.strstart++;s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask;hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=s.strstart}while(--s.match_length!==0);s.strstart++}else{s.strstart+=s.match_length;s.match_length=0;s.ins_h=s.window[s.strstart];
s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+1])&s.hash_mask}}else{bflush=trees._tr_tally(s,0,s.window[s.strstart]);s.lookahead--;s.strstart++}if(bflush){flush_block_only(s,false);if(s.strm.avail_out===0)return BS_NEED_MORE}}s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1;if(flush===Z_FINISH){flush_block_only(s,true);if(s.strm.avail_out===0)return BS_FINISH_STARTED;return BS_FINISH_DONE}if(s.last_lit){flush_block_only(s,false);if(s.strm.avail_out===0)return BS_NEED_MORE}return BS_BLOCK_DONE}
function deflate_slow(s,flush){var hash_head;var bflush;var max_insert;for(;;){if(s.lookahead<MIN_LOOKAHEAD){fill_window(s);if(s.lookahead<MIN_LOOKAHEAD&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(s.lookahead===0)break}hash_head=0;if(s.lookahead>=MIN_MATCH){s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask;hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=s.strstart}s.prev_length=s.match_length;s.prev_match=s.match_start;s.match_length=MIN_MATCH-1;if(hash_head!==
0&&(s.prev_length<s.max_lazy_match&&s.strstart-hash_head<=s.w_size-MIN_LOOKAHEAD)){s.match_length=longest_match(s,hash_head);if(s.match_length<=5&&(s.strategy===Z_FILTERED||s.match_length===MIN_MATCH&&s.strstart-s.match_start>4096))s.match_length=MIN_MATCH-1}if(s.prev_length>=MIN_MATCH&&s.match_length<=s.prev_length){max_insert=s.strstart+s.lookahead-MIN_MATCH;bflush=trees._tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-MIN_MATCH);s.lookahead-=s.prev_length-1;s.prev_length-=2;do if(++s.strstart<=
max_insert){s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+MIN_MATCH-1])&s.hash_mask;hash_head=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h];s.head[s.ins_h]=s.strstart}while(--s.prev_length!==0);s.match_available=0;s.match_length=MIN_MATCH-1;s.strstart++;if(bflush){flush_block_only(s,false);if(s.strm.avail_out===0)return BS_NEED_MORE}}else if(s.match_available){bflush=trees._tr_tally(s,0,s.window[s.strstart-1]);if(bflush)flush_block_only(s,false);s.strstart++;s.lookahead--;if(s.strm.avail_out===
0)return BS_NEED_MORE}else{s.match_available=1;s.strstart++;s.lookahead--}}if(s.match_available){bflush=trees._tr_tally(s,0,s.window[s.strstart-1]);s.match_available=0}s.insert=s.strstart<MIN_MATCH-1?s.strstart:MIN_MATCH-1;if(flush===Z_FINISH){flush_block_only(s,true);if(s.strm.avail_out===0)return BS_FINISH_STARTED;return BS_FINISH_DONE}if(s.last_lit){flush_block_only(s,false);if(s.strm.avail_out===0)return BS_NEED_MORE}return BS_BLOCK_DONE}function deflate_rle(s,flush){var bflush;var prev;var scan,
strend;var _win=s.window;for(;;){if(s.lookahead<=MAX_MATCH){fill_window(s);if(s.lookahead<=MAX_MATCH&&flush===Z_NO_FLUSH)return BS_NEED_MORE;if(s.lookahead===0)break}s.match_length=0;if(s.lookahead>=MIN_MATCH&&s.strstart>0){scan=s.strstart-1;prev=_win[scan];if(prev===_win[++scan]&&(prev===_win[++scan]&&prev===_win[++scan])){strend=s.strstart+MAX_MATCH;do;while(prev===_win[++scan]&&(prev===_win[++scan]&&(prev===_win[++scan]&&(prev===_win[++scan]&&(prev===_win[++scan]&&(prev===_win[++scan]&&(prev===
_win[++scan]&&(prev===_win[++scan]&&scan<strend))))))));s.match_length=MAX_MATCH-(strend-scan);if(s.match_length>s.lookahead)s.match_length=s.lookahead}}if(s.match_length>=MIN_MATCH){bflush=trees._tr_tally(s,1,s.match_length-MIN_MATCH);s.lookahead-=s.match_length;s.strstart+=s.match_length;s.match_length=0}else{bflush=trees._tr_tally(s,0,s.window[s.strstart]);s.lookahead--;s.strstart++}if(bflush){flush_block_only(s,false);if(s.strm.avail_out===0)return BS_NEED_MORE}}s.insert=0;if(flush===Z_FINISH){flush_block_only(s,
true);if(s.strm.avail_out===0)return BS_FINISH_STARTED;return BS_FINISH_DONE}if(s.last_lit){flush_block_only(s,false);if(s.strm.avail_out===0)return BS_NEED_MORE}return BS_BLOCK_DONE}function deflate_huff(s,flush){var bflush;for(;;){if(s.lookahead===0){fill_window(s);if(s.lookahead===0){if(flush===Z_NO_FLUSH)return BS_NEED_MORE;break}}s.match_length=0;bflush=trees._tr_tally(s,0,s.window[s.strstart]);s.lookahead--;s.strstart++;if(bflush){flush_block_only(s,false);if(s.strm.avail_out===0)return BS_NEED_MORE}}s.insert=
0;if(flush===Z_FINISH){flush_block_only(s,true);if(s.strm.avail_out===0)return BS_FINISH_STARTED;return BS_FINISH_DONE}if(s.last_lit){flush_block_only(s,false);if(s.strm.avail_out===0)return BS_NEED_MORE}return BS_BLOCK_DONE}var Config=function(good_length,max_lazy,nice_length,max_chain,func){this.good_length=good_length;this.max_lazy=max_lazy;this.nice_length=nice_length;this.max_chain=max_chain;this.func=func};var configuration_table;configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,
4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)];function lm_init(s){s.window_size=2*s.w_size;zero(s.head);s.max_lazy_match=configuration_table[s.level].max_lazy;s.good_match=configuration_table[s.level].good_length;s.nice_match=configuration_table[s.level].nice_length;
s.max_chain_length=configuration_table[s.level].max_chain;s.strstart=0;s.block_start=0;s.lookahead=0;s.insert=0;s.match_length=s.prev_length=MIN_MATCH-1;s.match_available=0;s.ins_h=0}function DeflateState(){this.strm=null;this.status=0;this.pending_buf=null;this.pending_buf_size=0;this.pending_out=0;this.pending=0;this.wrap=0;this.gzhead=null;this.gzindex=0;this.method=Z_DEFLATED;this.last_flush=-1;this.w_size=0;this.w_bits=0;this.w_mask=0;this.window=null;this.window_size=0;this.prev=null;this.head=
null;this.ins_h=0;this.hash_size=0;this.hash_bits=0;this.hash_mask=0;this.hash_shift=0;this.block_start=0;this.match_length=0;this.prev_match=0;this.match_available=0;this.strstart=0;this.match_start=0;this.lookahead=0;this.prev_length=0;this.max_chain_length=0;this.max_lazy_match=0;this.level=0;this.strategy=0;this.good_match=0;this.nice_match=0;this.dyn_ltree=new utils.Buf16(HEAP_SIZE*2);this.dyn_dtree=new utils.Buf16((2*D_CODES+1)*2);this.bl_tree=new utils.Buf16((2*BL_CODES+1)*2);zero(this.dyn_ltree);
zero(this.dyn_dtree);zero(this.bl_tree);this.l_desc=null;this.d_desc=null;this.bl_desc=null;this.bl_count=new utils.Buf16(MAX_BITS+1);this.heap=new utils.Buf16(2*L_CODES+1);zero(this.heap);this.heap_len=0;this.heap_max=0;this.depth=new utils.Buf16(2*L_CODES+1);zero(this.depth);this.l_buf=0;this.lit_bufsize=0;this.last_lit=0;this.d_buf=0;this.opt_len=0;this.static_len=0;this.matches=0;this.insert=0;this.bi_buf=0;this.bi_valid=0}function deflateResetKeep(strm){var s;if(!strm||!strm.state)return err(strm,
Z_STREAM_ERROR);strm.total_in=strm.total_out=0;strm.data_type=Z_UNKNOWN;s=strm.state;s.pending=0;s.pending_out=0;if(s.wrap<0)s.wrap=-s.wrap;s.status=s.wrap?INIT_STATE:BUSY_STATE;strm.adler=s.wrap===2?0:1;s.last_flush=Z_NO_FLUSH;trees._tr_init(s);return Z_OK}function deflateReset(strm){var ret=deflateResetKeep(strm);if(ret===Z_OK)lm_init(strm.state);return ret}function deflateSetHeader(strm,head){if(!strm||!strm.state)return Z_STREAM_ERROR;if(strm.state.wrap!==2)return Z_STREAM_ERROR;strm.state.gzhead=
head;return Z_OK}function deflateInit2(strm,level,method,windowBits,memLevel,strategy){if(!strm)return Z_STREAM_ERROR;var wrap=1;if(level===Z_DEFAULT_COMPRESSION)level=6;if(windowBits<0){wrap=0;windowBits=-windowBits}else if(windowBits>15){wrap=2;windowBits-=16}if(memLevel<1||(memLevel>MAX_MEM_LEVEL||(method!==Z_DEFLATED||(windowBits<8||(windowBits>15||(level<0||(level>9||(strategy<0||strategy>Z_FIXED))))))))return err(strm,Z_STREAM_ERROR);if(windowBits===8)windowBits=9;var s=new DeflateState;strm.state=
s;s.strm=strm;s.wrap=wrap;s.gzhead=null;s.w_bits=windowBits;s.w_size=1<<s.w_bits;s.w_mask=s.w_size-1;s.hash_bits=memLevel+7;s.hash_size=1<<s.hash_bits;s.hash_mask=s.hash_size-1;s.hash_shift=~~((s.hash_bits+MIN_MATCH-1)/MIN_MATCH);s.window=new utils.Buf8(s.w_size*2);s.head=new utils.Buf16(s.hash_size);s.prev=new utils.Buf16(s.w_size);s.lit_bufsize=1<<memLevel+6;s.pending_buf_size=s.lit_bufsize*4;s.pending_buf=new utils.Buf8(s.pending_buf_size);s.d_buf=s.lit_bufsize>>1;s.l_buf=(1+2)*s.lit_bufsize;s.level=
level;s.strategy=strategy;s.method=method;return deflateReset(strm)}function deflateInit(strm,level){return deflateInit2(strm,level,Z_DEFLATED,MAX_WBITS,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY)}function deflate(strm,flush){var old_flush,s;var beg,val;if(!strm||(!strm.state||(flush>Z_BLOCK||flush<0)))return strm?err(strm,Z_STREAM_ERROR):Z_STREAM_ERROR;s=strm.state;if(!strm.output||(!strm.input&&strm.avail_in!==0||s.status===FINISH_STATE&&flush!==Z_FINISH))return err(strm,strm.avail_out===0?Z_BUF_ERROR:Z_STREAM_ERROR);
s.strm=strm;old_flush=s.last_flush;s.last_flush=flush;if(s.status===INIT_STATE)if(s.wrap===2){strm.adler=0;put_byte(s,31);put_byte(s,139);put_byte(s,8);if(!s.gzhead){put_byte(s,0);put_byte(s,0);put_byte(s,0);put_byte(s,0);put_byte(s,0);put_byte(s,s.level===9?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0);put_byte(s,OS_CODE);s.status=BUSY_STATE}else{put_byte(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(!s.gzhead.extra?0:4)+(!s.gzhead.name?0:8)+(!s.gzhead.comment?0:16));put_byte(s,s.gzhead.time&255);put_byte(s,
s.gzhead.time>>8&255);put_byte(s,s.gzhead.time>>16&255);put_byte(s,s.gzhead.time>>24&255);put_byte(s,s.level===9?2:s.strategy>=Z_HUFFMAN_ONLY||s.level<2?4:0);put_byte(s,s.gzhead.os&255);if(s.gzhead.extra&&s.gzhead.extra.length){put_byte(s,s.gzhead.extra.length&255);put_byte(s,s.gzhead.extra.length>>8&255)}if(s.gzhead.hcrc)strm.adler=crc32(strm.adler,s.pending_buf,s.pending,0);s.gzindex=0;s.status=EXTRA_STATE}}else{var header=Z_DEFLATED+(s.w_bits-8<<4)<<8;var level_flags=-1;if(s.strategy>=Z_HUFFMAN_ONLY||
s.level<2)level_flags=0;else if(s.level<6)level_flags=1;else if(s.level===6)level_flags=2;else level_flags=3;header|=level_flags<<6;if(s.strstart!==0)header|=PRESET_DICT;header+=31-header%31;s.status=BUSY_STATE;putShortMSB(s,header);if(s.strstart!==0){putShortMSB(s,strm.adler>>>16);putShortMSB(s,strm.adler&65535)}strm.adler=1}if(s.status===EXTRA_STATE)if(s.gzhead.extra){beg=s.pending;while(s.gzindex<(s.gzhead.extra.length&65535)){if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>beg)strm.adler=
crc32(strm.adler,s.pending_buf,s.pending-beg,beg);flush_pending(strm);beg=s.pending;if(s.pending===s.pending_buf_size)break}put_byte(s,s.gzhead.extra[s.gzindex]&255);s.gzindex++}if(s.gzhead.hcrc&&s.pending>beg)strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg);if(s.gzindex===s.gzhead.extra.length){s.gzindex=0;s.status=NAME_STATE}}else s.status=NAME_STATE;if(s.status===NAME_STATE)if(s.gzhead.name){beg=s.pending;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>beg)strm.adler=
crc32(strm.adler,s.pending_buf,s.pending-beg,beg);flush_pending(strm);beg=s.pending;if(s.pending===s.pending_buf_size){val=1;break}}if(s.gzindex<s.gzhead.name.length)val=s.gzhead.name.charCodeAt(s.gzindex++)&255;else val=0;put_byte(s,val)}while(val!==0);if(s.gzhead.hcrc&&s.pending>beg)strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg);if(val===0){s.gzindex=0;s.status=COMMENT_STATE}}else s.status=COMMENT_STATE;if(s.status===COMMENT_STATE)if(s.gzhead.comment){beg=s.pending;do{if(s.pending===
s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>beg)strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg);flush_pending(strm);beg=s.pending;if(s.pending===s.pending_buf_size){val=1;break}}if(s.gzindex<s.gzhead.comment.length)val=s.gzhead.comment.charCodeAt(s.gzindex++)&255;else val=0;put_byte(s,val)}while(val!==0);if(s.gzhead.hcrc&&s.pending>beg)strm.adler=crc32(strm.adler,s.pending_buf,s.pending-beg,beg);if(val===0)s.status=HCRC_STATE}else s.status=HCRC_STATE;if(s.status===HCRC_STATE)if(s.gzhead.hcrc){if(s.pending+
2>s.pending_buf_size)flush_pending(strm);if(s.pending+2<=s.pending_buf_size){put_byte(s,strm.adler&255);put_byte(s,strm.adler>>8&255);strm.adler=0;s.status=BUSY_STATE}}else s.status=BUSY_STATE;if(s.pending!==0){flush_pending(strm);if(strm.avail_out===0){s.last_flush=-1;return Z_OK}}else if(strm.avail_in===0&&(rank(flush)<=rank(old_flush)&&flush!==Z_FINISH))return err(strm,Z_BUF_ERROR);if(s.status===FINISH_STATE&&strm.avail_in!==0)return err(strm,Z_BUF_ERROR);if(strm.avail_in!==0||(s.lookahead!==0||
flush!==Z_NO_FLUSH&&s.status!==FINISH_STATE)){var bstate=s.strategy===Z_HUFFMAN_ONLY?deflate_huff(s,flush):s.strategy===Z_RLE?deflate_rle(s,flush):configuration_table[s.level].func(s,flush);if(bstate===BS_FINISH_STARTED||bstate===BS_FINISH_DONE)s.status=FINISH_STATE;if(bstate===BS_NEED_MORE||bstate===BS_FINISH_STARTED){if(strm.avail_out===0)s.last_flush=-1;return Z_OK}if(bstate===BS_BLOCK_DONE){if(flush===Z_PARTIAL_FLUSH)trees._tr_align(s);else if(flush!==Z_BLOCK){trees._tr_stored_block(s,0,0,false);
if(flush===Z_FULL_FLUSH){zero(s.head);if(s.lookahead===0){s.strstart=0;s.block_start=0;s.insert=0}}}flush_pending(strm);if(strm.avail_out===0){s.last_flush=-1;return Z_OK}}}if(flush!==Z_FINISH)return Z_OK;if(s.wrap<=0)return Z_STREAM_END;if(s.wrap===2){put_byte(s,strm.adler&255);put_byte(s,strm.adler>>8&255);put_byte(s,strm.adler>>16&255);put_byte(s,strm.adler>>24&255);put_byte(s,strm.total_in&255);put_byte(s,strm.total_in>>8&255);put_byte(s,strm.total_in>>16&255);put_byte(s,strm.total_in>>24&255)}else{putShortMSB(s,
strm.adler>>>16);putShortMSB(s,strm.adler&65535)}flush_pending(strm);if(s.wrap>0)s.wrap=-s.wrap;return s.pending!==0?Z_OK:Z_STREAM_END}function deflateEnd(strm){var status;if(!strm||!strm.state)return Z_STREAM_ERROR;status=strm.state.status;if(status!==INIT_STATE&&(status!==EXTRA_STATE&&(status!==NAME_STATE&&(status!==COMMENT_STATE&&(status!==HCRC_STATE&&(status!==BUSY_STATE&&status!==FINISH_STATE))))))return err(strm,Z_STREAM_ERROR);strm.state=null;return status===BUSY_STATE?err(strm,Z_DATA_ERROR):
Z_OK}exports.deflateInit=deflateInit;exports.deflateInit2=deflateInit2;exports.deflateReset=deflateReset;exports.deflateResetKeep=deflateResetKeep;exports.deflateSetHeader=deflateSetHeader;exports.deflate=deflate;exports.deflateEnd=deflateEnd;exports.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":4,"./adler32":6,"./crc32":8,"./messages":14,"./trees":15}],10:[function(_dereq_,module,exports){function GZheader(){this.text=0;this.time=0;this.xflags=0;this.os=0;this.extra=null;this.extra_len=
0;this.name="";this.comment="";this.hcrc=0;this.done=false}module.exports=GZheader},{}],11:[function(_dereq_,module,exports){var BAD=30;var TYPE=12;module.exports=function inflate_fast(strm,start){var state;var _in;var last;var _out;var beg;var end;var dmax;var wsize;var whave;var wnext;var window;var hold;var bits;var lcode;var dcode;var lmask;var dmask;var here;var op;var len;var dist;var from;var from_source;var input,output;state=strm.state;_in=strm.next_in;input=strm.input;last=_in+(strm.avail_in-
5);_out=strm.next_out;output=strm.output;beg=_out-(start-strm.avail_out);end=_out+(strm.avail_out-257);dmax=state.dmax;wsize=state.wsize;whave=state.whave;wnext=state.wnext;window=state.window;hold=state.hold;bits=state.bits;lcode=state.lencode;dcode=state.distcode;lmask=(1<<state.lenbits)-1;dmask=(1<<state.distbits)-1;top:do{if(bits<15){hold+=input[_in++]<<bits;bits+=8;hold+=input[_in++]<<bits;bits+=8}here=lcode[hold&lmask];dolen:for(;;){op=here>>>24;hold>>>=op;bits-=op;op=here>>>16&255;if(op===
0)output[_out++]=here&65535;else if(op&16){len=here&65535;op&=15;if(op){if(bits<op){hold+=input[_in++]<<bits;bits+=8}len+=hold&(1<<op)-1;hold>>>=op;bits-=op}if(bits<15){hold+=input[_in++]<<bits;bits+=8;hold+=input[_in++]<<bits;bits+=8}here=dcode[hold&dmask];dodist:for(;;){op=here>>>24;hold>>>=op;bits-=op;op=here>>>16&255;if(op&16){dist=here&65535;op&=15;if(bits<op){hold+=input[_in++]<<bits;bits+=8;if(bits<op){hold+=input[_in++]<<bits;bits+=8}}dist+=hold&(1<<op)-1;if(dist>dmax){strm.msg="invalid distance too far back";
state.mode=BAD;break top}hold>>>=op;bits-=op;op=_out-beg;if(dist>op){op=dist-op;if(op>whave)if(state.sane){strm.msg="invalid distance too far back";state.mode=BAD;break top}from=0;from_source=window;if(wnext===0){from+=wsize-op;if(op<len){len-=op;do output[_out++]=window[from++];while(--op);from=_out-dist;from_source=output}}else if(wnext<op){from+=wsize+wnext-op;op-=wnext;if(op<len){len-=op;do output[_out++]=window[from++];while(--op);from=0;if(wnext<len){op=wnext;len-=op;do output[_out++]=window[from++];
while(--op);from=_out-dist;from_source=output}}}else{from+=wnext-op;if(op<len){len-=op;do output[_out++]=window[from++];while(--op);from=_out-dist;from_source=output}}while(len>2){output[_out++]=from_source[from++];output[_out++]=from_source[from++];output[_out++]=from_source[from++];len-=3}if(len){output[_out++]=from_source[from++];if(len>1)output[_out++]=from_source[from++]}}else{from=_out-dist;do{output[_out++]=output[from++];output[_out++]=output[from++];output[_out++]=output[from++];len-=3}while(len>
2);if(len){output[_out++]=output[from++];if(len>1)output[_out++]=output[from++]}}}else if((op&64)===0){here=dcode[(here&65535)+(hold&(1<<op)-1)];continue dodist}else{strm.msg="invalid distance code";state.mode=BAD;break top}break}}else if((op&64)===0){here=lcode[(here&65535)+(hold&(1<<op)-1)];continue dolen}else if(op&32){state.mode=TYPE;break top}else{strm.msg="invalid literal/length code";state.mode=BAD;break top}break}}while(_in<last&&_out<end);len=bits>>3;_in-=len;bits-=len<<3;hold&=(1<<bits)-
1;strm.next_in=_in;strm.next_out=_out;strm.avail_in=_in<last?5+(last-_in):5-(_in-last);strm.avail_out=_out<end?257+(end-_out):257-(_out-end);state.hold=hold;state.bits=bits;return}},{}],12:[function(_dereq_,module,exports){var utils=_dereq_("../utils/common");var adler32=_dereq_("./adler32");var crc32=_dereq_("./crc32");var inflate_fast=_dereq_("./inffast");var inflate_table=_dereq_("./inftrees");var CODES=0;var LENS=1;var DISTS=2;var Z_FINISH=4;var Z_BLOCK=5;var Z_TREES=6;var Z_OK=0;var Z_STREAM_END=
1;var Z_NEED_DICT=2;var Z_STREAM_ERROR=-2;var Z_DATA_ERROR=-3;var Z_MEM_ERROR=-4;var Z_BUF_ERROR=-5;var Z_DEFLATED=8;var HEAD=1;var FLAGS=2;var TIME=3;var OS=4;var EXLEN=5;var EXTRA=6;var NAME=7;var COMMENT=8;var HCRC=9;var DICTID=10;var DICT=11;var TYPE=12;var TYPEDO=13;var STORED=14;var COPY_=15;var COPY=16;var TABLE=17;var LENLENS=18;var CODELENS=19;var LEN_=20;var LEN=21;var LENEXT=22;var DIST=23;var DISTEXT=24;var MATCH=25;var LIT=26;var CHECK=27;var LENGTH=28;var DONE=29;var BAD=30;var MEM=
31;var SYNC=32;var ENOUGH_LENS=852;var ENOUGH_DISTS=592;var MAX_WBITS=15;var DEF_WBITS=MAX_WBITS;function ZSWAP32(q){return(q>>>24&255)+(q>>>8&65280)+((q&65280)<<8)+((q&255)<<24)}function InflateState(){this.mode=0;this.last=false;this.wrap=0;this.havedict=false;this.flags=0;this.dmax=0;this.check=0;this.total=0;this.head=null;this.wbits=0;this.wsize=0;this.whave=0;this.wnext=0;this.window=null;this.hold=0;this.bits=0;this.length=0;this.offset=0;this.extra=0;this.lencode=null;this.distcode=null;this.lenbits=
0;this.distbits=0;this.ncode=0;this.nlen=0;this.ndist=0;this.have=0;this.next=null;this.lens=new utils.Buf16(320);this.work=new utils.Buf16(288);this.lendyn=null;this.distdyn=null;this.sane=0;this.back=0;this.was=0}function inflateResetKeep(strm){var state;if(!strm||!strm.state)return Z_STREAM_ERROR;state=strm.state;strm.total_in=strm.total_out=state.total=0;strm.msg="";if(state.wrap)strm.adler=state.wrap&1;state.mode=HEAD;state.last=0;state.havedict=0;state.dmax=32768;state.head=null;state.hold=
0;state.bits=0;state.lencode=state.lendyn=new utils.Buf32(ENOUGH_LENS);state.distcode=state.distdyn=new utils.Buf32(ENOUGH_DISTS);state.sane=1;state.back=-1;return Z_OK}function inflateReset(strm){var state;if(!strm||!strm.state)return Z_STREAM_ERROR;state=strm.state;state.wsize=0;state.whave=0;state.wnext=0;return inflateResetKeep(strm)}function inflateReset2(strm,windowBits){var wrap;var state;if(!strm||!strm.state)return Z_STREAM_ERROR;state=strm.state;if(windowBits<0){wrap=0;windowBits=-windowBits}else{wrap=
(windowBits>>4)+1;if(windowBits<48)windowBits&=15}if(windowBits&&(windowBits<8||windowBits>15))return Z_STREAM_ERROR;if(state.window!==null&&state.wbits!==windowBits)state.window=null;state.wrap=wrap;state.wbits=windowBits;return inflateReset(strm)}function inflateInit2(strm,windowBits){var ret;var state;if(!strm)return Z_STREAM_ERROR;state=new InflateState;strm.state=state;state.window=null;ret=inflateReset2(strm,windowBits);if(ret!==Z_OK)strm.state=null;return ret}function inflateInit(strm){return inflateInit2(strm,
DEF_WBITS)}var virgin=true;var lenfix,distfix;function fixedtables(state){if(virgin){var sym;lenfix=new utils.Buf32(512);distfix=new utils.Buf32(32);sym=0;while(sym<144)state.lens[sym++]=8;while(sym<256)state.lens[sym++]=9;while(sym<280)state.lens[sym++]=7;while(sym<288)state.lens[sym++]=8;inflate_table(LENS,state.lens,0,288,lenfix,0,state.work,{bits:9});sym=0;while(sym<32)state.lens[sym++]=5;inflate_table(DISTS,state.lens,0,32,distfix,0,state.work,{bits:5});virgin=false}state.lencode=lenfix;state.lenbits=
9;state.distcode=distfix;state.distbits=5}function updatewindow(strm,src,end,copy){var dist;var state=strm.state;if(state.window===null){state.wsize=1<<state.wbits;state.wnext=0;state.whave=0;state.window=new utils.Buf8(state.wsize)}if(copy>=state.wsize){utils.arraySet(state.window,src,end-state.wsize,state.wsize,0);state.wnext=0;state.whave=state.wsize}else{dist=state.wsize-state.wnext;if(dist>copy)dist=copy;utils.arraySet(state.window,src,end-copy,dist,state.wnext);copy-=dist;if(copy){utils.arraySet(state.window,
src,end-copy,copy,0);state.wnext=copy;state.whave=state.wsize}else{state.wnext+=dist;if(state.wnext===state.wsize)state.wnext=0;if(state.whave<state.wsize)state.whave+=dist}}return 0}function inflate(strm,flush){var state;var input,output;var next;var put;var have,left;var hold;var bits;var _in,_out;var copy;var from;var from_source;var here=0;var here_bits,here_op,here_val;var last_bits,last_op,last_val;var len;var ret;var hbuf=new utils.Buf8(4);var opts;var n;var order=[16,17,18,0,8,7,9,6,10,5,
11,4,12,3,13,2,14,1,15];if(!strm||(!strm.state||(!strm.output||!strm.input&&strm.avail_in!==0)))return Z_STREAM_ERROR;state=strm.state;if(state.mode===TYPE)state.mode=TYPEDO;put=strm.next_out;output=strm.output;left=strm.avail_out;next=strm.next_in;input=strm.input;have=strm.avail_in;hold=state.hold;bits=state.bits;_in=have;_out=left;ret=Z_OK;inf_leave:for(;;)switch(state.mode){case HEAD:if(state.wrap===0){state.mode=TYPEDO;break}while(bits<16){if(have===0)break inf_leave;have--;hold+=input[next++]<<
bits;bits+=8}if(state.wrap&2&&hold===35615){state.check=0;hbuf[0]=hold&255;hbuf[1]=hold>>>8&255;state.check=crc32(state.check,hbuf,2,0);hold=0;bits=0;state.mode=FLAGS;break}state.flags=0;if(state.head)state.head.done=false;if(!(state.wrap&1)||(((hold&255)<<8)+(hold>>8))%31){strm.msg="incorrect header check";state.mode=BAD;break}if((hold&15)!==Z_DEFLATED){strm.msg="unknown compression method";state.mode=BAD;break}hold>>>=4;bits-=4;len=(hold&15)+8;if(state.wbits===0)state.wbits=len;else if(len>state.wbits){strm.msg=
"invalid window size";state.mode=BAD;break}state.dmax=1<<len;strm.adler=state.check=1;state.mode=hold&512?DICTID:TYPE;hold=0;bits=0;break;case FLAGS:while(bits<16){if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}state.flags=hold;if((state.flags&255)!==Z_DEFLATED){strm.msg="unknown compression method";state.mode=BAD;break}if(state.flags&57344){strm.msg="unknown header flags set";state.mode=BAD;break}if(state.head)state.head.text=hold>>8&1;if(state.flags&512){hbuf[0]=hold&255;hbuf[1]=
hold>>>8&255;state.check=crc32(state.check,hbuf,2,0)}hold=0;bits=0;state.mode=TIME;case TIME:while(bits<32){if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}if(state.head)state.head.time=hold;if(state.flags&512){hbuf[0]=hold&255;hbuf[1]=hold>>>8&255;hbuf[2]=hold>>>16&255;hbuf[3]=hold>>>24&255;state.check=crc32(state.check,hbuf,4,0)}hold=0;bits=0;state.mode=OS;case OS:while(bits<16){if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}if(state.head){state.head.xflags=
hold&255;state.head.os=hold>>8}if(state.flags&512){hbuf[0]=hold&255;hbuf[1]=hold>>>8&255;state.check=crc32(state.check,hbuf,2,0)}hold=0;bits=0;state.mode=EXLEN;case EXLEN:if(state.flags&1024){while(bits<16){if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}state.length=hold;if(state.head)state.head.extra_len=hold;if(state.flags&512){hbuf[0]=hold&255;hbuf[1]=hold>>>8&255;state.check=crc32(state.check,hbuf,2,0)}hold=0;bits=0}else if(state.head)state.head.extra=null;state.mode=EXTRA;
case EXTRA:if(state.flags&1024){copy=state.length;if(copy>have)copy=have;if(copy){if(state.head){len=state.head.extra_len-state.length;if(!state.head.extra)state.head.extra=new Array(state.head.extra_len);utils.arraySet(state.head.extra,input,next,copy,len)}if(state.flags&512)state.check=crc32(state.check,input,copy,next);have-=copy;next+=copy;state.length-=copy}if(state.length)break inf_leave}state.length=0;state.mode=NAME;case NAME:if(state.flags&2048){if(have===0)break inf_leave;copy=0;do{len=
input[next+copy++];if(state.head&&(len&&state.length<65536))state.head.name+=String.fromCharCode(len)}while(len&&copy<have);if(state.flags&512)state.check=crc32(state.check,input,copy,next);have-=copy;next+=copy;if(len)break inf_leave}else if(state.head)state.head.name=null;state.length=0;state.mode=COMMENT;case COMMENT:if(state.flags&4096){if(have===0)break inf_leave;copy=0;do{len=input[next+copy++];if(state.head&&(len&&state.length<65536))state.head.comment+=String.fromCharCode(len)}while(len&&
copy<have);if(state.flags&512)state.check=crc32(state.check,input,copy,next);have-=copy;next+=copy;if(len)break inf_leave}else if(state.head)state.head.comment=null;state.mode=HCRC;case HCRC:if(state.flags&512){while(bits<16){if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}if(hold!==(state.check&65535)){strm.msg="header crc mismatch";state.mode=BAD;break}hold=0;bits=0}if(state.head){state.head.hcrc=state.flags>>9&1;state.head.done=true}strm.adler=state.check=0;state.mode=TYPE;
break;case DICTID:while(bits<32){if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}strm.adler=state.check=ZSWAP32(hold);hold=0;bits=0;state.mode=DICT;case DICT:if(state.havedict===0){strm.next_out=put;strm.avail_out=left;strm.next_in=next;strm.avail_in=have;state.hold=hold;state.bits=bits;return Z_NEED_DICT}strm.adler=state.check=1;state.mode=TYPE;case TYPE:if(flush===Z_BLOCK||flush===Z_TREES)break inf_leave;case TYPEDO:if(state.last){hold>>>=bits&7;bits-=bits&7;state.mode=CHECK;
break}while(bits<3){if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}state.last=hold&1;hold>>>=1;bits-=1;switch(hold&3){case 0:state.mode=STORED;break;case 1:fixedtables(state);state.mode=LEN_;if(flush===Z_TREES){hold>>>=2;bits-=2;break inf_leave}break;case 2:state.mode=TABLE;break;case 3:strm.msg="invalid block type";state.mode=BAD}hold>>>=2;bits-=2;break;case STORED:hold>>>=bits&7;bits-=bits&7;while(bits<32){if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=
8}if((hold&65535)!==(hold>>>16^65535)){strm.msg="invalid stored block lengths";state.mode=BAD;break}state.length=hold&65535;hold=0;bits=0;state.mode=COPY_;if(flush===Z_TREES)break inf_leave;case COPY_:state.mode=COPY;case COPY:copy=state.length;if(copy){if(copy>have)copy=have;if(copy>left)copy=left;if(copy===0)break inf_leave;utils.arraySet(output,input,next,copy,put);have-=copy;next+=copy;left-=copy;put+=copy;state.length-=copy;break}state.mode=TYPE;break;case TABLE:while(bits<14){if(have===0)break inf_leave;
have--;hold+=input[next++]<<bits;bits+=8}state.nlen=(hold&31)+257;hold>>>=5;bits-=5;state.ndist=(hold&31)+1;hold>>>=5;bits-=5;state.ncode=(hold&15)+4;hold>>>=4;bits-=4;if(state.nlen>286||state.ndist>30){strm.msg="too many length or distance symbols";state.mode=BAD;break}state.have=0;state.mode=LENLENS;case LENLENS:while(state.have<state.ncode){while(bits<3){if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}state.lens[order[state.have++]]=hold&7;hold>>>=3;bits-=3}while(state.have<
19)state.lens[order[state.have++]]=0;state.lencode=state.lendyn;state.lenbits=7;opts={bits:state.lenbits};ret=inflate_table(CODES,state.lens,0,19,state.lencode,0,state.work,opts);state.lenbits=opts.bits;if(ret){strm.msg="invalid code lengths set";state.mode=BAD;break}state.have=0;state.mode=CODELENS;case CODELENS:while(state.have<state.nlen+state.ndist){for(;;){here=state.lencode[hold&(1<<state.lenbits)-1];here_bits=here>>>24;here_op=here>>>16&255;here_val=here&65535;if(here_bits<=bits)break;if(have===
0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}if(here_val<16){hold>>>=here_bits;bits-=here_bits;state.lens[state.have++]=here_val}else{if(here_val===16){n=here_bits+2;while(bits<n){if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}hold>>>=here_bits;bits-=here_bits;if(state.have===0){strm.msg="invalid bit length repeat";state.mode=BAD;break}len=state.lens[state.have-1];copy=3+(hold&3);hold>>>=2;bits-=2}else if(here_val===17){n=here_bits+3;while(bits<n){if(have===0)break inf_leave;
have--;hold+=input[next++]<<bits;bits+=8}hold>>>=here_bits;bits-=here_bits;len=0;copy=3+(hold&7);hold>>>=3;bits-=3}else{n=here_bits+7;while(bits<n){if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}hold>>>=here_bits;bits-=here_bits;len=0;copy=11+(hold&127);hold>>>=7;bits-=7}if(state.have+copy>state.nlen+state.ndist){strm.msg="invalid bit length repeat";state.mode=BAD;break}while(copy--)state.lens[state.have++]=len}}if(state.mode===BAD)break;if(state.lens[256]===0){strm.msg="invalid code -- missing end-of-block";
state.mode=BAD;break}state.lenbits=9;opts={bits:state.lenbits};ret=inflate_table(LENS,state.lens,0,state.nlen,state.lencode,0,state.work,opts);state.lenbits=opts.bits;if(ret){strm.msg="invalid literal/lengths set";state.mode=BAD;break}state.distbits=6;state.distcode=state.distdyn;opts={bits:state.distbits};ret=inflate_table(DISTS,state.lens,state.nlen,state.ndist,state.distcode,0,state.work,opts);state.distbits=opts.bits;if(ret){strm.msg="invalid distances set";state.mode=BAD;break}state.mode=LEN_;
if(flush===Z_TREES)break inf_leave;case LEN_:state.mode=LEN;case LEN:if(have>=6&&left>=258){strm.next_out=put;strm.avail_out=left;strm.next_in=next;strm.avail_in=have;state.hold=hold;state.bits=bits;inflate_fast(strm,_out);put=strm.next_out;output=strm.output;left=strm.avail_out;next=strm.next_in;input=strm.input;have=strm.avail_in;hold=state.hold;bits=state.bits;if(state.mode===TYPE)state.back=-1;break}state.back=0;for(;;){here=state.lencode[hold&(1<<state.lenbits)-1];here_bits=here>>>24;here_op=
here>>>16&255;here_val=here&65535;if(here_bits<=bits)break;if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}if(here_op&&(here_op&240)===0){last_bits=here_bits;last_op=here_op;last_val=here_val;for(;;){here=state.lencode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)];here_bits=here>>>24;here_op=here>>>16&255;here_val=here&65535;if(last_bits+here_bits<=bits)break;if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}hold>>>=last_bits;bits-=last_bits;state.back+=
last_bits}hold>>>=here_bits;bits-=here_bits;state.back+=here_bits;state.length=here_val;if(here_op===0){state.mode=LIT;break}if(here_op&32){state.back=-1;state.mode=TYPE;break}if(here_op&64){strm.msg="invalid literal/length code";state.mode=BAD;break}state.extra=here_op&15;state.mode=LENEXT;case LENEXT:if(state.extra){n=state.extra;while(bits<n){if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}state.length+=hold&(1<<state.extra)-1;hold>>>=state.extra;bits-=state.extra;state.back+=
state.extra}state.was=state.length;state.mode=DIST;case DIST:for(;;){here=state.distcode[hold&(1<<state.distbits)-1];here_bits=here>>>24;here_op=here>>>16&255;here_val=here&65535;if(here_bits<=bits)break;if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}if((here_op&240)===0){last_bits=here_bits;last_op=here_op;last_val=here_val;for(;;){here=state.distcode[last_val+((hold&(1<<last_bits+last_op)-1)>>last_bits)];here_bits=here>>>24;here_op=here>>>16&255;here_val=here&65535;if(last_bits+
here_bits<=bits)break;if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}hold>>>=last_bits;bits-=last_bits;state.back+=last_bits}hold>>>=here_bits;bits-=here_bits;state.back+=here_bits;if(here_op&64){strm.msg="invalid distance code";state.mode=BAD;break}state.offset=here_val;state.extra=here_op&15;state.mode=DISTEXT;case DISTEXT:if(state.extra){n=state.extra;while(bits<n){if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}state.offset+=hold&(1<<state.extra)-1;hold>>>=
state.extra;bits-=state.extra;state.back+=state.extra}if(state.offset>state.dmax){strm.msg="invalid distance too far back";state.mode=BAD;break}state.mode=MATCH;case MATCH:if(left===0)break inf_leave;copy=_out-left;if(state.offset>copy){copy=state.offset-copy;if(copy>state.whave)if(state.sane){strm.msg="invalid distance too far back";state.mode=BAD;break}if(copy>state.wnext){copy-=state.wnext;from=state.wsize-copy}else from=state.wnext-copy;if(copy>state.length)copy=state.length;from_source=state.window}else{from_source=
output;from=put-state.offset;copy=state.length}if(copy>left)copy=left;left-=copy;state.length-=copy;do output[put++]=from_source[from++];while(--copy);if(state.length===0)state.mode=LEN;break;case LIT:if(left===0)break inf_leave;output[put++]=state.length;left--;state.mode=LEN;break;case CHECK:if(state.wrap){while(bits<32){if(have===0)break inf_leave;have--;hold|=input[next++]<<bits;bits+=8}_out-=left;strm.total_out+=_out;state.total+=_out;if(_out)strm.adler=state.check=state.flags?crc32(state.check,
output,_out,put-_out):adler32(state.check,output,_out,put-_out);_out=left;if((state.flags?hold:ZSWAP32(hold))!==state.check){strm.msg="incorrect data check";state.mode=BAD;break}hold=0;bits=0}state.mode=LENGTH;case LENGTH:if(state.wrap&&state.flags){while(bits<32){if(have===0)break inf_leave;have--;hold+=input[next++]<<bits;bits+=8}if(hold!==(state.total&4294967295)){strm.msg="incorrect length check";state.mode=BAD;break}hold=0;bits=0}state.mode=DONE;case DONE:ret=Z_STREAM_END;break inf_leave;case BAD:ret=
Z_DATA_ERROR;break inf_leave;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR}strm.next_out=put;strm.avail_out=left;strm.next_in=next;strm.avail_in=have;state.hold=hold;state.bits=bits;if(state.wsize||_out!==strm.avail_out&&(state.mode<BAD&&(state.mode<CHECK||flush!==Z_FINISH)))if(updatewindow(strm,strm.output,strm.next_out,_out-strm.avail_out)){state.mode=MEM;return Z_MEM_ERROR}_in-=strm.avail_in;_out-=strm.avail_out;strm.total_in+=_in;strm.total_out+=_out;state.total+=_out;if(state.wrap&&
_out)strm.adler=state.check=state.flags?crc32(state.check,output,_out,strm.next_out-_out):adler32(state.check,output,_out,strm.next_out-_out);strm.data_type=state.bits+(state.last?64:0)+(state.mode===TYPE?128:0)+(state.mode===LEN_||state.mode===COPY_?256:0);if((_in===0&&_out===0||flush===Z_FINISH)&&ret===Z_OK)ret=Z_BUF_ERROR;return ret}function inflateEnd(strm){if(!strm||!strm.state)return Z_STREAM_ERROR;var state=strm.state;if(state.window)state.window=null;strm.state=null;return Z_OK}function inflateGetHeader(strm,
head){var state;if(!strm||!strm.state)return Z_STREAM_ERROR;state=strm.state;if((state.wrap&2)===0)return Z_STREAM_ERROR;state.head=head;head.done=false;return Z_OK}exports.inflateReset=inflateReset;exports.inflateReset2=inflateReset2;exports.inflateResetKeep=inflateResetKeep;exports.inflateInit=inflateInit;exports.inflateInit2=inflateInit2;exports.inflate=inflate;exports.inflateEnd=inflateEnd;exports.inflateGetHeader=inflateGetHeader;exports.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":4,
"./adler32":6,"./crc32":8,"./inffast":11,"./inftrees":13}],13:[function(_dereq_,module,exports){var utils=_dereq_("../utils/common");var MAXBITS=15;var ENOUGH_LENS=852;var ENOUGH_DISTS=592;var CODES=0;var LENS=1;var DISTS=2;var lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78];var dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,
1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0];var dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function inflate_table(type,lens,lens_index,codes,table,table_index,work,opts){var bits=opts.bits;var len=0;var sym=0;var min=0,max=0;var root=0;var curr=0;var drop=0;var left=0;var used=0;var huff=0;var incr;var fill;var low;var mask;var next;var base=null;var base_index=0;var end;var count=new utils.Buf16(MAXBITS+1);var offs=
new utils.Buf16(MAXBITS+1);var extra=null;var extra_index=0;var here_bits,here_op,here_val;for(len=0;len<=MAXBITS;len++)count[len]=0;for(sym=0;sym<codes;sym++)count[lens[lens_index+sym]]++;root=bits;for(max=MAXBITS;max>=1;max--)if(count[max]!==0)break;if(root>max)root=max;if(max===0){table[table_index++]=1<<24|64<<16|0;table[table_index++]=1<<24|64<<16|0;opts.bits=1;return 0}for(min=1;min<max;min++)if(count[min]!==0)break;if(root<min)root=min;left=1;for(len=1;len<=MAXBITS;len++){left<<=1;left-=count[len];
if(left<0)return-1}if(left>0&&(type===CODES||max!==1))return-1;offs[1]=0;for(len=1;len<MAXBITS;len++)offs[len+1]=offs[len]+count[len];for(sym=0;sym<codes;sym++)if(lens[lens_index+sym]!==0)work[offs[lens[lens_index+sym]]++]=sym;switch(type){case CODES:base=extra=work;end=19;break;case LENS:base=lbase;base_index-=257;extra=lext;extra_index-=257;end=256;break;default:base=dbase;extra=dext;end=-1}huff=0;sym=0;len=min;next=table_index;curr=root;drop=0;low=-1;used=1<<root;mask=used-1;if(type===LENS&&used>
ENOUGH_LENS||type===DISTS&&used>ENOUGH_DISTS)return 1;var i=0;for(;;){i++;here_bits=len-drop;if(work[sym]<end){here_op=0;here_val=work[sym]}else if(work[sym]>end){here_op=extra[extra_index+work[sym]];here_val=base[base_index+work[sym]]}else{here_op=32+64;here_val=0}incr=1<<len-drop;fill=1<<curr;min=fill;do{fill-=incr;table[next+(huff>>drop)+fill]=here_bits<<24|here_op<<16|here_val|0}while(fill!==0);incr=1<<len-1;while(huff&incr)incr>>=1;if(incr!==0){huff&=incr-1;huff+=incr}else huff=0;sym++;if(--count[len]===
0){if(len===max)break;len=lens[lens_index+work[sym]]}if(len>root&&(huff&mask)!==low){if(drop===0)drop=root;next+=min;curr=len-drop;left=1<<curr;while(curr+drop<max){left-=count[curr+drop];if(left<=0)break;curr++;left<<=1}used+=1<<curr;if(type===LENS&&used>ENOUGH_LENS||type===DISTS&&used>ENOUGH_DISTS)return 1;low=huff&mask;table[low]=root<<24|curr<<16|next-table_index|0}}if(huff!==0)table[next+huff]=len-drop<<24|64<<16|0;opts.bits=root;return 0}},{"../utils/common":4}],14:[function(_dereq_,module,
exports){module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],15:[function(_dereq_,module,exports){var utils=_dereq_("../utils/common");var Z_FIXED=4;var Z_BINARY=0;var Z_TEXT=1;var Z_UNKNOWN=2;function zero(buf){var len=buf.length;while(--len>=0)buf[len]=0}var STORED_BLOCK=0;var STATIC_TREES=1;var DYN_TREES=2;var MIN_MATCH=3;var MAX_MATCH=258;var LENGTH_CODES=
29;var LITERALS=256;var L_CODES=LITERALS+1+LENGTH_CODES;var D_CODES=30;var BL_CODES=19;var HEAP_SIZE=2*L_CODES+1;var MAX_BITS=15;var Buf_size=16;var MAX_BL_BITS=7;var END_BLOCK=256;var REP_3_6=16;var REPZ_3_10=17;var REPZ_11_138=18;var extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];var extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];var bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,
2,14,1,15];var DIST_CODE_LEN=512;var static_ltree=new Array((L_CODES+2)*2);zero(static_ltree);var static_dtree=new Array(D_CODES*2);zero(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero(_dist_code);var _length_code=new Array(MAX_MATCH-MIN_MATCH+1);zero(_length_code);var base_length=new Array(LENGTH_CODES);zero(base_length);var base_dist=new Array(D_CODES);zero(base_dist);var StaticTreeDesc=function(static_tree,extra_bits,extra_base,elems,max_length){this.static_tree=static_tree;this.extra_bits=
extra_bits;this.extra_base=extra_base;this.elems=elems;this.max_length=max_length;this.has_stree=static_tree&&static_tree.length};var static_l_desc;var static_d_desc;var static_bl_desc;var TreeDesc=function(dyn_tree,stat_desc){this.dyn_tree=dyn_tree;this.max_code=0;this.stat_desc=stat_desc};function d_code(dist){return dist<256?_dist_code[dist]:_dist_code[256+(dist>>>7)]}function put_short(s,w){s.pending_buf[s.pending++]=w&255;s.pending_buf[s.pending++]=w>>>8&255}function send_bits(s,value,length){if(s.bi_valid>
Buf_size-length){s.bi_buf|=value<<s.bi_valid&65535;put_short(s,s.bi_buf);s.bi_buf=value>>Buf_size-s.bi_valid;s.bi_valid+=length-Buf_size}else{s.bi_buf|=value<<s.bi_valid&65535;s.bi_valid+=length}}function send_code(s,c,tree){send_bits(s,tree[c*2],tree[c*2+1])}function bi_reverse(code,len){var res=0;do{res|=code&1;code>>>=1;res<<=1}while(--len>0);return res>>>1}function bi_flush(s){if(s.bi_valid===16){put_short(s,s.bi_buf);s.bi_buf=0;s.bi_valid=0}else if(s.bi_valid>=8){s.pending_buf[s.pending++]=s.bi_buf&
255;s.bi_buf>>=8;s.bi_valid-=8}}function gen_bitlen(s,desc){var tree=desc.dyn_tree;var max_code=desc.max_code;var stree=desc.stat_desc.static_tree;var has_stree=desc.stat_desc.has_stree;var extra=desc.stat_desc.extra_bits;var base=desc.stat_desc.extra_base;var max_length=desc.stat_desc.max_length;var h;var n,m;var bits;var xbits;var f;var overflow=0;for(bits=0;bits<=MAX_BITS;bits++)s.bl_count[bits]=0;tree[s.heap[s.heap_max]*2+1]=0;for(h=s.heap_max+1;h<HEAP_SIZE;h++){n=s.heap[h];bits=tree[tree[n*2+
1]*2+1]+1;if(bits>max_length){bits=max_length;overflow++}tree[n*2+1]=bits;if(n>max_code)continue;s.bl_count[bits]++;xbits=0;if(n>=base)xbits=extra[n-base];f=tree[n*2];s.opt_len+=f*(bits+xbits);if(has_stree)s.static_len+=f*(stree[n*2+1]+xbits)}if(overflow===0)return;do{bits=max_length-1;while(s.bl_count[bits]===0)bits--;s.bl_count[bits]--;s.bl_count[bits+1]+=2;s.bl_count[max_length]--;overflow-=2}while(overflow>0);for(bits=max_length;bits!==0;bits--){n=s.bl_count[bits];while(n!==0){m=s.heap[--h];if(m>
max_code)continue;if(tree[m*2+1]!==bits){s.opt_len+=(bits-tree[m*2+1])*tree[m*2];tree[m*2+1]=bits}n--}}}function gen_codes(tree,max_code,bl_count){var next_code=new Array(MAX_BITS+1);var code=0;var bits;var n;for(bits=1;bits<=MAX_BITS;bits++)next_code[bits]=code=code+bl_count[bits-1]<<1;for(n=0;n<=max_code;n++){var len=tree[n*2+1];if(len===0)continue;tree[n*2]=bi_reverse(next_code[len]++,len)}}function tr_static_init(){var n;var bits;var length;var code;var dist;var bl_count=new Array(MAX_BITS+1);
length=0;for(code=0;code<LENGTH_CODES-1;code++){base_length[code]=length;for(n=0;n<1<<extra_lbits[code];n++)_length_code[length++]=code}_length_code[length-1]=code;dist=0;for(code=0;code<16;code++){base_dist[code]=dist;for(n=0;n<1<<extra_dbits[code];n++)_dist_code[dist++]=code}dist>>=7;for(;code<D_CODES;code++){base_dist[code]=dist<<7;for(n=0;n<1<<extra_dbits[code]-7;n++)_dist_code[256+dist++]=code}for(bits=0;bits<=MAX_BITS;bits++)bl_count[bits]=0;n=0;while(n<=143){static_ltree[n*2+1]=8;n++;bl_count[8]++}while(n<=
255){static_ltree[n*2+1]=9;n++;bl_count[9]++}while(n<=279){static_ltree[n*2+1]=7;n++;bl_count[7]++}while(n<=287){static_ltree[n*2+1]=8;n++;bl_count[8]++}gen_codes(static_ltree,L_CODES+1,bl_count);for(n=0;n<D_CODES;n++){static_dtree[n*2+1]=5;static_dtree[n*2]=bi_reverse(n,5)}static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS+1,L_CODES,MAX_BITS);static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES,MAX_BITS);static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,
BL_CODES,MAX_BL_BITS)}function init_block(s){var n;for(n=0;n<L_CODES;n++)s.dyn_ltree[n*2]=0;for(n=0;n<D_CODES;n++)s.dyn_dtree[n*2]=0;for(n=0;n<BL_CODES;n++)s.bl_tree[n*2]=0;s.dyn_ltree[END_BLOCK*2]=1;s.opt_len=s.static_len=0;s.last_lit=s.matches=0}function bi_windup(s){if(s.bi_valid>8)put_short(s,s.bi_buf);else if(s.bi_valid>0)s.pending_buf[s.pending++]=s.bi_buf;s.bi_buf=0;s.bi_valid=0}function copy_block(s,buf,len,header){bi_windup(s);if(header){put_short(s,len);put_short(s,~len)}utils.arraySet(s.pending_buf,
s.window,buf,len,s.pending);s.pending+=len}function smaller(tree,n,m,depth){var _n2=n*2;var _m2=m*2;return tree[_n2]<tree[_m2]||tree[_n2]===tree[_m2]&&depth[n]<=depth[m]}function pqdownheap(s,tree,k){var v=s.heap[k];var j=k<<1;while(j<=s.heap_len){if(j<s.heap_len&&smaller(tree,s.heap[j+1],s.heap[j],s.depth))j++;if(smaller(tree,v,s.heap[j],s.depth))break;s.heap[k]=s.heap[j];k=j;j<<=1}s.heap[k]=v}function compress_block(s,ltree,dtree){var dist;var lc;var lx=0;var code;var extra;if(s.last_lit!==0){do{dist=
s.pending_buf[s.d_buf+lx*2]<<8|s.pending_buf[s.d_buf+lx*2+1];lc=s.pending_buf[s.l_buf+lx];lx++;if(dist===0)send_code(s,lc,ltree);else{code=_length_code[lc];send_code(s,code+LITERALS+1,ltree);extra=extra_lbits[code];if(extra!==0){lc-=base_length[code];send_bits(s,lc,extra)}dist--;code=d_code(dist);send_code(s,code,dtree);extra=extra_dbits[code];if(extra!==0){dist-=base_dist[code];send_bits(s,dist,extra)}}}while(lx<s.last_lit)}send_code(s,END_BLOCK,ltree)}function build_tree(s,desc){var tree=desc.dyn_tree;
var stree=desc.stat_desc.static_tree;var has_stree=desc.stat_desc.has_stree;var elems=desc.stat_desc.elems;var n,m;var max_code=-1;var node;s.heap_len=0;s.heap_max=HEAP_SIZE;for(n=0;n<elems;n++)if(tree[n*2]!==0){s.heap[++s.heap_len]=max_code=n;s.depth[n]=0}else tree[n*2+1]=0;while(s.heap_len<2){node=s.heap[++s.heap_len]=max_code<2?++max_code:0;tree[node*2]=1;s.depth[node]=0;s.opt_len--;if(has_stree)s.static_len-=stree[node*2+1]}desc.max_code=max_code;for(n=s.heap_len>>1;n>=1;n--)pqdownheap(s,tree,
n);node=elems;do{n=s.heap[1];s.heap[1]=s.heap[s.heap_len--];pqdownheap(s,tree,1);m=s.heap[1];s.heap[--s.heap_max]=n;s.heap[--s.heap_max]=m;tree[node*2]=tree[n*2]+tree[m*2];s.depth[node]=(s.depth[n]>=s.depth[m]?s.depth[n]:s.depth[m])+1;tree[n*2+1]=tree[m*2+1]=node;s.heap[1]=node++;pqdownheap(s,tree,1)}while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1];gen_bitlen(s,desc);gen_codes(tree,max_code,s.bl_count)}function scan_tree(s,tree,max_code){var n;var prevlen=-1;var curlen;var nextlen=tree[0*2+1];
var count=0;var max_count=7;var min_count=4;if(nextlen===0){max_count=138;min_count=3}tree[(max_code+1)*2+1]=65535;for(n=0;n<=max_code;n++){curlen=nextlen;nextlen=tree[(n+1)*2+1];if(++count<max_count&&curlen===nextlen)continue;else if(count<min_count)s.bl_tree[curlen*2]+=count;else if(curlen!==0){if(curlen!==prevlen)s.bl_tree[curlen*2]++;s.bl_tree[REP_3_6*2]++}else if(count<=10)s.bl_tree[REPZ_3_10*2]++;else s.bl_tree[REPZ_11_138*2]++;count=0;prevlen=curlen;if(nextlen===0){max_count=138;min_count=
3}else if(curlen===nextlen){max_count=6;min_count=3}else{max_count=7;min_count=4}}}function send_tree(s,tree,max_code){var n;var prevlen=-1;var curlen;var nextlen=tree[0*2+1];var count=0;var max_count=7;var min_count=4;if(nextlen===0){max_count=138;min_count=3}for(n=0;n<=max_code;n++){curlen=nextlen;nextlen=tree[(n+1)*2+1];if(++count<max_count&&curlen===nextlen)continue;else if(count<min_count){do send_code(s,curlen,s.bl_tree);while(--count!==0)}else if(curlen!==0){if(curlen!==prevlen){send_code(s,
curlen,s.bl_tree);count--}send_code(s,REP_3_6,s.bl_tree);send_bits(s,count-3,2)}else if(count<=10){send_code(s,REPZ_3_10,s.bl_tree);send_bits(s,count-3,3)}else{send_code(s,REPZ_11_138,s.bl_tree);send_bits(s,count-11,7)}count=0;prevlen=curlen;if(nextlen===0){max_count=138;min_count=3}else if(curlen===nextlen){max_count=6;min_count=3}else{max_count=7;min_count=4}}}function build_bl_tree(s){var max_blindex;scan_tree(s,s.dyn_ltree,s.l_desc.max_code);scan_tree(s,s.dyn_dtree,s.d_desc.max_code);build_tree(s,
s.bl_desc);for(max_blindex=BL_CODES-1;max_blindex>=3;max_blindex--)if(s.bl_tree[bl_order[max_blindex]*2+1]!==0)break;s.opt_len+=3*(max_blindex+1)+5+5+4;return max_blindex}function send_all_trees(s,lcodes,dcodes,blcodes){var rank;send_bits(s,lcodes-257,5);send_bits(s,dcodes-1,5);send_bits(s,blcodes-4,4);for(rank=0;rank<blcodes;rank++)send_bits(s,s.bl_tree[bl_order[rank]*2+1],3);send_tree(s,s.dyn_ltree,lcodes-1);send_tree(s,s.dyn_dtree,dcodes-1)}function detect_data_type(s){var black_mask=4093624447;
var n;for(n=0;n<=31;n++,black_mask>>>=1)if(black_mask&1&&s.dyn_ltree[n*2]!==0)return Z_BINARY;if(s.dyn_ltree[9*2]!==0||(s.dyn_ltree[10*2]!==0||s.dyn_ltree[13*2]!==0))return Z_TEXT;for(n=32;n<LITERALS;n++)if(s.dyn_ltree[n*2]!==0)return Z_TEXT;return Z_BINARY}var static_init_done=false;function _tr_init(s){if(!static_init_done){tr_static_init();static_init_done=true}s.l_desc=new TreeDesc(s.dyn_ltree,static_l_desc);s.d_desc=new TreeDesc(s.dyn_dtree,static_d_desc);s.bl_desc=new TreeDesc(s.bl_tree,static_bl_desc);
s.bi_buf=0;s.bi_valid=0;init_block(s)}function _tr_stored_block(s,buf,stored_len,last){send_bits(s,(STORED_BLOCK<<1)+(last?1:0),3);copy_block(s,buf,stored_len,true)}function _tr_align(s){send_bits(s,STATIC_TREES<<1,3);send_code(s,END_BLOCK,static_ltree);bi_flush(s)}function _tr_flush_block(s,buf,stored_len,last){var opt_lenb,static_lenb;var max_blindex=0;if(s.level>0){if(s.strm.data_type===Z_UNKNOWN)s.strm.data_type=detect_data_type(s);build_tree(s,s.l_desc);build_tree(s,s.d_desc);max_blindex=build_bl_tree(s);
opt_lenb=s.opt_len+3+7>>>3;static_lenb=s.static_len+3+7>>>3;if(static_lenb<=opt_lenb)opt_lenb=static_lenb}else opt_lenb=static_lenb=stored_len+5;if(stored_len+4<=opt_lenb&&buf!==-1)_tr_stored_block(s,buf,stored_len,last);else if(s.strategy===Z_FIXED||static_lenb===opt_lenb){send_bits(s,(STATIC_TREES<<1)+(last?1:0),3);compress_block(s,static_ltree,static_dtree)}else{send_bits(s,(DYN_TREES<<1)+(last?1:0),3);send_all_trees(s,s.l_desc.max_code+1,s.d_desc.max_code+1,max_blindex+1);compress_block(s,s.dyn_ltree,
s.dyn_dtree)}init_block(s);if(last)bi_windup(s)}function _tr_tally(s,dist,lc){s.pending_buf[s.d_buf+s.last_lit*2]=dist>>>8&255;s.pending_buf[s.d_buf+s.last_lit*2+1]=dist&255;s.pending_buf[s.l_buf+s.last_lit]=lc&255;s.last_lit++;if(dist===0)s.dyn_ltree[lc*2]++;else{s.matches++;dist--;s.dyn_ltree[(_length_code[lc]+LITERALS+1)*2]++;s.dyn_dtree[d_code(dist)*2]++}return s.last_lit===s.lit_bufsize-1}exports._tr_init=_tr_init;exports._tr_stored_block=_tr_stored_block;exports._tr_flush_block=_tr_flush_block;
exports._tr_tally=_tr_tally;exports._tr_align=_tr_align},{"../utils/common":4}],16:[function(_dereq_,module,exports){function ZStream(){this.input=null;this.next_in=0;this.avail_in=0;this.total_in=0;this.output=null;this.next_out=0;this.avail_out=0;this.total_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}module.exports=ZStream},{}]},{},[1])(1)}));(function(){var WebDB,indexedDB,webDB,webSQL,_mix,_typeOf,_hasLocalStorage;window.indexedDB=window.indexedDB||(window.webkitIndexedDB||window.mozIndexedDB);webDB=function(){webDB.prototype.db=null;function webDB(name,schema,version,size,callback){var manager;this.name=name;this.schema=schema;this.version=version;this.size=size!=null?size:5242880;try{JSCOMPILER_PRESERVE(window.localStorage);_hasLocalStorage=true}catch(err){_hasLocalStorage=false}if(!_hasLocalStorage)throw"Local storage not supported";
else if(window.indexedDB&&!navigator.userAgent.match(/Version\/8\.0 Safari/i))manager=new WebDB.indexedDB(this.name,this.schema,this.version,callback);else if(window.openDatabase)manager=new WebDB.webSQL(this.name,this.schema,this.version,this.size,callback);if(!window.openDatabase&&!window.indexedDB){this.select=function(table,query,callback){if(callback!=null)return callback.call(callback,"HTML5 Databases not supported",null)};this.insert=function(table,data,callback){if(callback!=null)return callback.call(callback,
"HTML5 Databases not supported",null)};this.update=function(table,data,query,callback){if(query==null)query=[];if(callback!=null)return callback.call(callback,"HTML5 Databases not supported",null)};this["delete"]=function(table,query,callback){if(callback!=null)return callback.call(callback,"HTML5 Databases not supported",null)};this.drop=function(table,callback){if(callback!=null)return callback.call(callback,"HTML5 Databases not supported",null)};this.execute=function(sql,callback){if(callback!=
null)return callback.call(callback,"HTML5 Databases not supported",null)}}else{this.db=manager.db;this.select=function(){return manager.select.apply(manager,arguments)};this.insert=function(){return manager.insert.apply(manager,arguments)};this.update=function(){return manager.update.apply(manager,arguments)};this["delete"]=function(){return manager["delete"].apply(manager,arguments)};this.drop=function(){return manager.drop.apply(manager,arguments)};this.execute=function(){return manager.execute.apply(manager,
arguments)}}}return webDB}();WebDB=window.WebDB=webDB;_mix=function(receiver,emitter){var key,_results;_results=[];for(key in emitter)_results.push(receiver[key]=emitter[key]);return _results};_typeOf=function(obj){return Object.prototype.toString.call(obj).match(/[a-zA-Z] ([a-zA-Z]+)/)[1].toLowerCase()};indexedDB=function(){var SCHEMA_KEY,VERSION_KEY,_check,_queryOp,_write;indexedDB.prototype.db=null;indexedDB.prototype.version=0;indexedDB.prototype.schema="";indexedDB.prototype.name="";VERSION_KEY=
"indexedDB_version";SCHEMA_KEY="indexedDB_schema";function indexedDB(name,schema,version,callback){VERSION_KEY+="_"+name;SCHEMA_KEY+="_"+name;var openRequest,_schema;if(version==null)version=1;if(!window.indexedDB&&callback!=null)callback.call(callback,"IndexedDB not supported",null);this.version=parseInt(localStorage[VERSION_KEY]);if(this.version==null||(this.version<version||isNaN(this.version)))localStorage[VERSION_KEY]=this.version=parseInt(version);this.schema=localStorage[SCHEMA_KEY];_schema=
JSON.stringify(schema);if(this.schema!=null&&this.schema!==_schema){localStorage[SCHEMA_KEY]=this.schema=_schema;localStorage[VERSION_KEY]=this.version+=1}else localStorage[SCHEMA_KEY]=this.schema=_schema;this.name=name;openRequest=window.indexedDB.open(name,this.version);openRequest.onsuccess=function(_this){return function(e){_this.db=e.target.result;if(callback!=null)return callback.call(callback,null,_this.db)}}(this);openRequest.onerror=function(error){if(callback!=null)return callback.call(callback,
error,null)};openRequest.onupgradeneeded=function(_this){return function(e){var column,options,table,_results;_this.db=e.target.result;_results=[];for(table in schema){options={};for(column in schema[table])if(_typeOf(schema[table][column])==="object"){if(schema[table][column]["primary"])options["keyPath"]=column;if(schema[table][column]["autoincrement"])options["autoIncrement"]=true}if(options.keyPath==null)options={keyPath:"__key",autoIncrement:true};if(!_this.db.objectStoreNames.contains(table))_results.push(_this.db.createObjectStore(table,
options));else _results.push(void 0)}return _results}}(this);openRequest.onversionchange=function(e){return console.log(e)}}indexedDB.prototype.select=function(table,query,callback){if(query==null)query=[];return _queryOp(this.db,table,null,query,callback)};indexedDB.prototype.insert=function(table,data,callback){var len,row,_error,_i,_len,_result,_results;if(_typeOf(data)==="object")return _write(this,table,data,callback);else{len=data.length;_result=0;_error=[];_results=[];for(_i=0,_len=data.length;_i<
_len;_i++){row=data[_i];_results.push(_write(this,table,row,function(error,result){if(error==null)_result++;if(error!=null)_error.push(error);len--;if(len===0&&callback!=null){if(_error.length===0)_error=null;return callback.call(callback,_error,_result)}}))}return _results}};indexedDB.prototype.update=function(table,data,query,callback){if(query==null)query=[];return _queryOp(this.db,table,data,query,function(error,result){if(callback!=null)return callback.call(callback,error,result.length)})};indexedDB.prototype["delete"]=
function(table,query,callback){var exception,result,store,transaction;if(query==null)query=[];try{result=0;store=this.db.transaction([table],"readwrite").objectStore(table);transaction=store.openCursor();transaction.onsuccess=function(e){var cursor,element;cursor=e.target.result;if(cursor){element=cursor.value;if(_check(element,query)){result++;store["delete"](cursor.primaryKey)}return cursor["continue"]()}else if(callback!=null)return callback.call(callback,null,result)};return transaction.onerror=
function(error){if(callback!=null)return callback.call(callback,error,null)}}catch(_error){exception=_error;if(callback!=null)return callback.call(callback,exception,null)}};indexedDB.prototype.drop=function(table,callback){var exception,openRequest;try{this.db.close();this.version+=1;localStorage[VERSION_KEY]=this.version;openRequest=window.indexedDB.open(this.name,this.version);openRequest.onsuccess=function(_this){return function(e){return _this.db=e.target.result}}(this);openRequest.onupgradeneeded=
function(_this){return function(e){var _schema;_this.db=e.target.result;_this.db.deleteObjectStore(table);_schema=JSON.parse(_this.schema);delete _schema[table];_this.schema=localStorage[SCHEMA_KEY]=JSON.stringify(_schema);if(callback!=null)return callback.call(callback,null)}}(this);return openRequest.onerror=function(error){if(callback!=null)return callback.call(callback,error)}}catch(_error){exception=_error;if(callback!=null)return callback.call(callback,exception)}};indexedDB.prototype.execute=
function(sql,callback){if(callback!=null)return callback.call(callback,"Execute not supported")};_write=function(_this,table,data,callback){var request,store;store=_this.db.transaction([table],"readwrite").objectStore(table);request=store.add(data);request.onerror=function(error){if(callback!=null)return callback.call(callback,error,null)};return request.onsuccess=function(result){if(callback!=null)return callback.call(callback,null,1)}};_check=function(element,query){var key,result,stmt,_i,_len;
if(query==null)query=[];if(query.length===0)return true;for(_i=0,_len=query.length;_i<_len;_i++){stmt=query[_i];result=true;for(key in stmt)if(element[key]!==stmt[key]){result=false;break}if(result===true)return true}return false};_queryOp=function(db,table,data,query,callback){var op,result,transaction;if(query==null)query=[];result=[];op=data!=null?"readwrite":"readonly";transaction=db.transaction([table],op).objectStore(table).openCursor();transaction.onsuccess=function(e){var cursor,element;cursor=
e.target.result;if(cursor){element=cursor.value;if(_check(element,query)){if(data!=null){_mix(element,data);_mix(cursor.value,data);cursor.update(cursor.value)}result.push(element)}return cursor["continue"]()}else if(callback!=null)return callback.call(callback,null,result)};return transaction.onerror=function(error){if(callback!=null)return callback.call(callback,error,null)}};return indexedDB}();WebDB.indexedDB=indexedDB;webSQL=function(){var _insert,_queryToSQL,_schema,_setValue,_this;webSQL.prototype.db=
null;_schema={};_this=null;function webSQL(name,schema,version,size,callback){var column,sql,table,_tables;if(size==null)size=5;if(callback!=null&&!window.openDatabase)return callback.call(callback,"WebSQL not supported",null);size=size*1024*1024;this.db=window.openDatabase(name,1,"",size);_tables=0;for(table in schema){_schema[table]={};sql="CREATE TABLE IF NOT EXISTS "+table+" (";for(column in schema[table])if(_typeOf(schema[table][column])==="object"){if(schema[table][column]["autoincrement"])sql+=
"'"+column+"' INTEGER";else sql+="'"+column+"' "+schema[table][column]["type"];if(schema[table][column]["primary"])sql+=" PRIMARY KEY";if(schema[table][column]["autoincrement"])sql+=" AUTOINCREMENT";sql+=",";_schema[table][column]=schema[table][column]["type"]}else{sql+="'"+column+"' "+schema[table][column]+",";_schema[table][column]=schema[table][column]}sql=sql.substring(0,sql.length-1)+")";_tables++;_this=this;this.execute(sql,function(_this){return function(error,result){_tables--;if(_tables===
0&&callback!=null)return callback.call(callback,error,_this.db)}}(this))}}webSQL.prototype.select=function(table,query,callback){var exception,sql;if(query==null)query=[];try{sql="SELECT * FROM "+table+_queryToSQL(table,query);return this.execute(sql,callback)}catch(_error){exception=_error;if(callback!=null)return callback.call(callback,exception,null)}};webSQL.prototype.insert=function(table,data,callback){var len,result,row,_error,_i,_len,_results;if(_typeOf(data)==="object")return _insert(table,
data,callback);else{len=data.length;result=0;_error=[];_results=[];for(_i=0,_len=data.length;_i<_len;_i++){row=data[_i];_results.push(_insert(table,row,function(error,row){if(error!=null)_error.push(error);len--;if(error==null)result++;if(len===0&&callback!=null){if(_error.length===0)_error=null;return callback.call(callback,_error,result)}}))}return _results}};webSQL.prototype.update=function(table,data,query,callback){var exception,key,sql;if(query==null)query=[];try{sql="UPDATE "+table+" SET ";
for(key in data)sql+=""+key+" \x3d "+_setValue(table,key,data[key])+", ";sql=sql.substring(0,sql.length-2)+_queryToSQL(table,query);return this.execute(sql,callback)}catch(_error){exception=_error;if(callback!=null)return callback.call(callback,exception,null)}};webSQL.prototype["delete"]=function(table,query,callback){var exception,sql;if(query==null)query=[];try{sql="DELETE FROM "+table+" "+_queryToSQL(table,query);return this.execute(sql,callback)}catch(_error){exception=_error;if(callback!=null)return callback.call(callback,
exception,null)}};webSQL.prototype.drop=function(table,callback){return this.execute("DROP TABLE IF EXISTS "+table,function(error,result){if(callback!=null)return callback.call(callback,error)})};webSQL.prototype.execute=function(sql,callback){if(!this.db&&callback!=null)return callback.call(callback,"Database not initializated",null);else return this.db.transaction(function(tx){return tx.executeSql(sql,[],function(transaction,resultset){var i,result;result=[];if(sql.indexOf("SELECT")!==-1){result=
function(){var _i,_ref,_results;_results=[];for(i=_i=0,_ref=resultset.rows.length;0<=_ref?_i<_ref:_i>_ref;i=0<=_ref?++_i:--_i)_results.push(resultset.rows.item(i));return _results}();if(callback!=null)return callback.call(callback,null,result)}else if(callback!=null)return callback.call(callback,null,resultset.rowsAffected)},function(){if(callback!=null)return callback.call(callback,arguments[1],null)})})};_insert=function(table,row,callback){var data,exception,key,sql;try{sql="INSERT INTO "+table+
" (";data="(";for(key in row){sql+=""+key+", ";data+=""+_setValue(table,key,row[key])+", "}sql=sql.substring(0,sql.length-2)+") ";data=data.substring(0,data.length-2)+") ";sql+=" VALUES "+data;return _this.execute(sql,callback)}catch(_error){exception=_error;if(callback!=null)return callback.call(callback,exception,null)}};_queryToSQL=function(table,query){var elem,or_stmt,sql,value,_i,_len;if(query.length>0){sql=" WHERE (";for(_i=0,_len=query.length;_i<_len;_i++){elem=query[_i];for(or_stmt in elem){value=
elem[or_stmt];sql+=""+or_stmt+" \x3d "+_setValue(table,or_stmt,value)+" AND "}sql=sql.substring(0,sql.length-5)+") OR ("}return sql.substring(0,sql.length-5)}else return""};_setValue=function(table,column,value){if(_schema[table][column]==="NUMBER"&&/^\d+$/.test(value))return value;else return"'"+String(value).replace(/'/g,"''")+"'"};return webSQL}();WebDB.webSQL=webSQL}).call(this);(function(){var currentElement;var flashState={bridge:null,version:"0.0.0",disabled:null,outdated:null,ready:null};var _clipData={};var clientIdCounter=0;var _clientMeta={};var elementIdCounter=0;var _elementMeta={};var _amdModuleId=null;var _cjsModuleId=null;var _swfPath=function(){var i,jsDir,tmpJsPath,jsPath,swfPath="ZeroClipboard.swf";if(document.currentScript&&(jsPath=document.currentScript.src));else{var scripts=document.getElementsByTagName("script");if("readyState"in scripts[0])for(i=scripts.length;i--;){if(scripts[i].readyState===
"interactive"&&(jsPath=scripts[i].src))break}else if(document.readyState==="loading")jsPath=scripts[scripts.length-1].src;else{for(i=scripts.length;i--;){tmpJsPath=scripts[i].src;if(!tmpJsPath){jsDir=null;break}tmpJsPath=tmpJsPath.split("#")[0].split("?")[0];tmpJsPath=tmpJsPath.slice(0,tmpJsPath.lastIndexOf("/")+1);if(jsDir==null)jsDir=tmpJsPath;else if(jsDir!==tmpJsPath){jsDir=null;break}}if(jsDir!==null)jsPath=jsDir}}if(jsPath){jsPath=jsPath.split("#")[0].split("?")[0];swfPath=jsPath.slice(0,jsPath.lastIndexOf("/")+
1)+swfPath}return swfPath}();var _camelizeCssPropName=function(){var matcherRegex=/\-([a-z])/g,replacerFn=function(match,group){return group.toUpperCase()};return function(prop){return prop.replace(matcherRegex,replacerFn)}}();var _getStyle=function(el,prop){var value,camelProp,tagName,possiblePointers,i,len;if(window.getComputedStyle)value=window.getComputedStyle(el,null).getPropertyValue(prop);else{camelProp=_camelizeCssPropName(prop);if(el.currentStyle)value=el.currentStyle[camelProp];else value=
el.style[camelProp]}if(prop==="cursor")if(!value||value==="auto"){tagName=el.tagName.toLowerCase();if(tagName==="a")return"pointer"}return value};var _elementMouseOver=function(event){if(!event)event=window.event;var target;if(this!==window)target=this;else if(event.target)target=event.target;else if(event.srcElement)target=event.srcElement;ZeroClipboard.activate(target)};var _addEventHandler=function(element,method,func){if(!element||element.nodeType!==1)return;if(element.addEventListener)element.addEventListener(method,
func,false);else if(element.attachEvent)element.attachEvent("on"+method,func)};var _removeEventHandler=function(element,method,func){if(!element||element.nodeType!==1)return;if(element.removeEventListener)element.removeEventListener(method,func,false);else if(element.detachEvent)element.detachEvent("on"+method,func)};var _addClass=function(element,value){if(!element||element.nodeType!==1)return element;if(element.classList){if(!element.classList.contains(value))element.classList.add(value);return element}if(value&&
typeof value==="string"){var classNames=(value||"").split(/\s+/);if(element.nodeType===1)if(!element.className)element.className=value;else{var className=" "+element.className+" ",setClass=element.className;for(var c=0,cl=classNames.length;c<cl;c++)if(className.indexOf(" "+classNames[c]+" ")<0)setClass+=" "+classNames[c];element.className=setClass.replace(/^\s+|\s+$/g,"")}}return element};var _removeClass=function(element,value){if(!element||element.nodeType!==1)return element;if(element.classList){if(element.classList.contains(value))element.classList.remove(value);
return element}if(value&&typeof value==="string"||value===undefined){var classNames=(value||"").split(/\s+/);if(element.nodeType===1&&element.className)if(value){var className=(" "+element.className+" ").replace(/[\n\t]/g," ");for(var c=0,cl=classNames.length;c<cl;c++)className=className.replace(" "+classNames[c]+" "," ");element.className=className.replace(/^\s+|\s+$/g,"")}else element.className=""}return element};var _getZoomFactor=function(){var rect,physicalWidth,logicalWidth,zoomFactor=1;if(typeof document.body.getBoundingClientRect===
"function"){rect=document.body.getBoundingClientRect();physicalWidth=rect.right-rect.left;logicalWidth=document.body.offsetWidth;zoomFactor=Math.round(physicalWidth/logicalWidth*100)/100}return zoomFactor};var _getDOMObjectPosition=function(obj,defaultZIndex){var info={left:0,top:0,width:0,height:0,zIndex:_getSafeZIndex(defaultZIndex)-1};if(obj.getBoundingClientRect){var rect=obj.getBoundingClientRect();var pageXOffset,pageYOffset,zoomFactor;if("pageXOffset"in window&&"pageYOffset"in window){pageXOffset=
window.pageXOffset;pageYOffset=window.pageYOffset}else{zoomFactor=_getZoomFactor();pageXOffset=Math.round(document.documentElement.scrollLeft/zoomFactor);pageYOffset=Math.round(document.documentElement.scrollTop/zoomFactor)}var leftBorderWidth=document.documentElement.clientLeft||0;var topBorderWidth=document.documentElement.clientTop||0;info.left=rect.left+pageXOffset-leftBorderWidth;info.top=rect.top+pageYOffset-topBorderWidth;info.width="width"in rect?rect.width:rect.right-rect.left;info.height=
"height"in rect?rect.height:rect.bottom-rect.top}return info};var _cacheBust=function(path,options){var cacheBust=options==null||options&&(options.cacheBust===true&&options.useNoCache===true);if(cacheBust)return(path.indexOf("?")===-1?"?":"\x26")+"noCache\x3d"+(new Date).getTime();else return""};var _vars=function(options){var i,len,domain,str=[],domains=[],trustedOriginsExpanded=[];if(options.trustedOrigins)if(typeof options.trustedOrigins==="string")domains.push(options.trustedOrigins);else if(typeof options.trustedOrigins===
"object"&&"length"in options.trustedOrigins)domains=domains.concat(options.trustedOrigins);if(options.trustedDomains)if(typeof options.trustedDomains==="string")domains.push(options.trustedDomains);else if(typeof options.trustedDomains==="object"&&"length"in options.trustedDomains)domains=domains.concat(options.trustedDomains);if(domains.length)for(i=0,len=domains.length;i<len;i++)if(domains.hasOwnProperty(i)&&(domains[i]&&typeof domains[i]==="string")){domain=_extractDomain(domains[i]);_log("Trusted domain: "+
domain,options.debug);if(!domain)continue;if(domain==="*"){trustedOriginsExpanded=[domain];break}trustedOriginsExpanded.push.apply(trustedOriginsExpanded,[domain,"//"+domain,window.location.protocol+"//"+domain])}if(trustedOriginsExpanded.length)str.push("trustedOrigins\x3d"+encodeURIComponent(trustedOriginsExpanded.join(",")));if(typeof options.jsModuleId==="string"&&options.jsModuleId)str.push("jsModuleId\x3d"+encodeURIComponent(options.jsModuleId));return str.join("\x26")};var _inArray=function(elem,
array,fromIndex){if(typeof array.indexOf==="function")return array.indexOf(elem,fromIndex);var i,len=array.length;if(typeof fromIndex==="undefined")fromIndex=0;else if(fromIndex<0)fromIndex=len+fromIndex;for(i=fromIndex;i<len;i++)if(array.hasOwnProperty(i)&&array[i]===elem)return i;return-1};var _prepClip=function(elements){if(typeof elements==="string")throw new TypeError("ZeroClipboard doesn't accept query strings.");if(!elements.length)return[elements];return elements};var _dispatchCallback=function(func,
context,args,async){if(async)window.setTimeout(function(){func.apply(context,args)},0);else func.apply(context,args)};var _getSafeZIndex=function(val){var zIndex,tmp;if(val)if(typeof val==="number"&&val>0)zIndex=val;else if(typeof val==="string"&&((tmp=parseInt(val,10))&&(!isNaN(tmp)&&tmp>0)))zIndex=tmp;if(!zIndex)if(typeof _globalConfig.zIndex==="number"&&_globalConfig.zIndex>0)zIndex=_globalConfig.zIndex;else if(typeof _globalConfig.zIndex==="string"&&((tmp=parseInt(_globalConfig.zIndex,10))&&(!isNaN(tmp)&&
tmp>0)))zIndex=tmp;return zIndex||0};var _deprecationWarning=function(deprecatedApiName,debugEnabled){if(deprecatedApiName){var deprecationWarning="`"+deprecatedApiName+"` is deprecated. See docs for more info:\n"+"    https://github.com/zeroclipboard/zeroclipboard/blob/master/docs/instructions.md#deprecations";_log(deprecationWarning,debugEnabled)}};var _log=function(message,debugEnabled){if(message&&(debugEnabled!==false&&(typeof console!=="undefined"&&(console&&(console.warn||console.log)))))if(console.warn)console.warn(message);
else console.log(message)};var _extend=function(){var i,len,arg,prop,src,copy,target=arguments[0]||{};for(i=1,len=arguments.length;i<len;i++)if((arg=arguments[i])!=null)for(prop in arg)if(arg.hasOwnProperty(prop)){src=target[prop];copy=arg[prop];if(target===copy)continue;if(copy!==undefined)target[prop]=copy}return target};var _extractDomain=function(originOrUrl){if(originOrUrl==null||originOrUrl==="")return null;originOrUrl=originOrUrl.replace(/^\s+|\s+$/g,"");if(originOrUrl==="")return null;var protocolIndex=
originOrUrl.indexOf("//");originOrUrl=protocolIndex===-1?originOrUrl:originOrUrl.slice(protocolIndex+2);var pathIndex=originOrUrl.indexOf("/");originOrUrl=pathIndex===-1?originOrUrl:protocolIndex===-1||pathIndex===0?null:originOrUrl.slice(0,pathIndex);if(originOrUrl&&originOrUrl.slice(-4).toLowerCase()===".swf")return null;return originOrUrl||null};var _determineScriptAccess=function(){var _extractAllDomains=function(origins,resultsArray){var i,len,tmp;if(origins!=null&&resultsArray[0]!=="*"){if(typeof origins===
"string")origins=[origins];if(typeof origins==="object"&&"length"in origins)for(i=0,len=origins.length;i<len;i++)if(origins.hasOwnProperty(i)){tmp=_extractDomain(origins[i]);if(tmp){if(tmp==="*"){resultsArray.length=0;resultsArray.push("*");break}if(_inArray(tmp,resultsArray)===-1)resultsArray.push(tmp)}}}};var _accessLevelLookup={always:"always",samedomain:"sameDomain",never:"never"};return function(currentDomain,configOptions){var asaLower,allowScriptAccess=configOptions.allowScriptAccess;if(typeof allowScriptAccess===
"string"&&((asaLower=allowScriptAccess.toLowerCase())&&/^always|samedomain|never$/.test(asaLower)))return _accessLevelLookup[asaLower];var swfDomain=_extractDomain(configOptions.moviePath);if(swfDomain===null)swfDomain=currentDomain;var trustedDomains=[];_extractAllDomains(configOptions.trustedOrigins,trustedDomains);_extractAllDomains(configOptions.trustedDomains,trustedDomains);var len=trustedDomains.length;if(len>0){if(len===1&&trustedDomains[0]==="*")return"always";if(_inArray(currentDomain,trustedDomains)!==
-1){if(len===1&&currentDomain===swfDomain)return"sameDomain";return"always"}}return"never"}}();var _objectKeys=function(obj){if(obj==null)return[];if(Object.keys)return Object.keys(obj);var keys=[];for(var prop in obj)if(obj.hasOwnProperty(prop))keys.push(prop);return keys};var _deleteOwnProperties=function(obj){if(obj)for(var prop in obj)if(obj.hasOwnProperty(prop))delete obj[prop];return obj};var _detectFlashSupport=function(){var hasFlash=false;if(typeof flashState.disabled==="boolean")hasFlash=
flashState.disabled===false;else{if(typeof ActiveXObject==="function")try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))hasFlash=true}catch(error){}if(!hasFlash&&navigator.mimeTypes["application/x-shockwave-flash"])hasFlash=true}return hasFlash};function _parseFlashVersion(flashVersion){return flashVersion.replace(/,/g,".").replace(/[^0-9\.]/g,"")}function _isFlashVersionSupported(flashVersion){return parseFloat(_parseFlashVersion(flashVersion))>=10}var ZeroClipboard=function(elements,options){if(!(this instanceof
ZeroClipboard))return new ZeroClipboard(elements,options);this.id=""+clientIdCounter++;_clientMeta[this.id]={instance:this,elements:[],handlers:{}};if(elements)this.clip(elements);if(typeof options!=="undefined"){_deprecationWarning("new ZeroClipboard(elements, options)",_globalConfig.debug);ZeroClipboard.config(options)}this.options=ZeroClipboard.config();if(typeof flashState.disabled!=="boolean")flashState.disabled=!_detectFlashSupport();if(flashState.disabled===false&&flashState.outdated!==true)if(flashState.bridge===
null){flashState.outdated=false;flashState.ready=false;_bridge()}};ZeroClipboard.prototype.setText=function(newText){if(newText&&newText!==""){_clipData["text/plain"]=newText;if(flashState.ready===true&&flashState.bridge)flashState.bridge.setText(newText);else;}return this};ZeroClipboard.prototype.setSize=function(width,height){if(flashState.ready===true&&flashState.bridge)flashState.bridge.setSize(width,height);else;return this};var _setHandCursor=function(enabled){if(flashState.ready===true&&flashState.bridge)flashState.bridge.setHandCursor(enabled);
else;};ZeroClipboard.prototype.destroy=function(){this.unclip();this.off();delete _clientMeta[this.id]};var _getAllClients=function(){var i,len,client,clients=[],clientIds=_objectKeys(_clientMeta);for(i=0,len=clientIds.length;i<len;i++){client=_clientMeta[clientIds[i]].instance;if(client&&client instanceof ZeroClipboard)clients.push(client)}return clients};ZeroClipboard.version="2.0.0-alpha.1";var _globalConfig={swfPath:_swfPath,trustedDomains:window.location.host?[window.location.host]:[],cacheBust:true,
forceHandCursor:false,zIndex:999999999,debug:false,title:null,autoActivate:true};ZeroClipboard.config=function(options){if(typeof options==="object"&&options!==null)_extend(_globalConfig,options);if(typeof options==="string"&&options){if(_globalConfig.hasOwnProperty(options))return _globalConfig[options];return}var copy={};for(var prop in _globalConfig)if(_globalConfig.hasOwnProperty(prop))if(typeof _globalConfig[prop]==="object"&&_globalConfig[prop]!==null)if("length"in _globalConfig[prop])copy[prop]=
_globalConfig[prop].slice(0);else copy[prop]=_extend({},_globalConfig[prop]);else copy[prop]=_globalConfig[prop];return copy};ZeroClipboard.destroy=function(){ZeroClipboard.deactivate();for(var clientId in _clientMeta)if(_clientMeta.hasOwnProperty(clientId)&&_clientMeta[clientId]){var client=_clientMeta[clientId].instance;if(client&&typeof client.destroy==="function")client.destroy()}var htmlBridge=_getHtmlBridge(flashState.bridge);if(htmlBridge&&htmlBridge.parentNode){htmlBridge.parentNode.removeChild(htmlBridge);
flashState.ready=null;flashState.bridge=null}};ZeroClipboard.activate=function(element){if(currentElement){_removeClass(currentElement,_globalConfig.hoverClass);_removeClass(currentElement,_globalConfig.activeClass)}currentElement=element;_addClass(element,_globalConfig.hoverClass);_reposition();var newTitle=_globalConfig.title||element.getAttribute("title");if(newTitle){var htmlBridge=_getHtmlBridge(flashState.bridge);if(htmlBridge)htmlBridge.setAttribute("title",newTitle)}var useHandCursor=_globalConfig.forceHandCursor===
true||_getStyle(element,"cursor")==="pointer";_setHandCursor(useHandCursor)};ZeroClipboard.deactivate=function(){var htmlBridge=_getHtmlBridge(flashState.bridge);if(htmlBridge){htmlBridge.style.left="0px";htmlBridge.style.top="-9999px";htmlBridge.removeAttribute("title")}if(currentElement){_removeClass(currentElement,_globalConfig.hoverClass);_removeClass(currentElement,_globalConfig.activeClass);currentElement=null}};var _bridge=function(){var flashBridge,len;var container=document.getElementById("global-zeroclipboard-html-bridge");
if(!container){var opts=ZeroClipboard.config();opts.jsModuleId=typeof _amdModuleId==="string"&&_amdModuleId||(typeof _cjsModuleId==="string"&&_cjsModuleId||null);var allowScriptAccess=_determineScriptAccess(window.location.host,_globalConfig);var flashvars=_vars(opts);var swfUrl=_globalConfig.moviePath+_cacheBust(_globalConfig.moviePath,_globalConfig);var html='      \x3cobject classid\x3d"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id\x3d"global-zeroclipboard-flash-bridge" width\x3d"100%" height\x3d"100%"\x3e         \x3cparam name\x3d"movie" value\x3d"'+
swfUrl+'"/\x3e         \x3cparam name\x3d"allowScriptAccess" value\x3d"'+allowScriptAccess+'"/\x3e         \x3cparam name\x3d"scale" value\x3d"exactfit"/\x3e         \x3cparam name\x3d"loop" value\x3d"false"/\x3e         \x3cparam name\x3d"menu" value\x3d"false"/\x3e         \x3cparam name\x3d"quality" value\x3d"best" /\x3e         \x3cparam name\x3d"bgcolor" value\x3d"#ffffff"/\x3e         \x3cparam name\x3d"wmode" value\x3d"transparent"/\x3e         \x3cparam name\x3d"flashvars" value\x3d"'+flashvars+
'"/\x3e         \x3cembed src\x3d"'+swfUrl+'"           loop\x3d"false" menu\x3d"false"           quality\x3d"best" bgcolor\x3d"#ffffff"           width\x3d"100%" height\x3d"100%"           name\x3d"global-zeroclipboard-flash-bridge"           allowScriptAccess\x3d"'+allowScriptAccess+'"           allowFullScreen\x3d"false"           type\x3d"application/x-shockwave-flash"           wmode\x3d"transparent"           pluginspage\x3d"http://www.macromedia.com/go/getflashplayer"           flashvars\x3d"'+
flashvars+'"           scale\x3d"exactfit"\x3e         \x3c/embed\x3e       \x3c/object\x3e';container=document.createElement("div");container.id="global-zeroclipboard-html-bridge";container.setAttribute("class","global-zeroclipboard-container");container.style.position="absolute";container.style.left="0px";container.style.top="-9999px";container.style.width="15px";container.style.height="15px";container.style.zIndex=""+_getSafeZIndex(_globalConfig.zIndex);document.body.appendChild(container);container.innerHTML=
html}flashBridge=document["global-zeroclipboard-flash-bridge"];if(flashBridge&&(len=flashBridge.length))flashBridge=flashBridge[len-1];flashState.bridge=flashBridge||container.children[0].lastElementChild};var _getHtmlBridge=function(flashBridge){var isFlashElement=/^OBJECT|EMBED$/;var htmlBridge=flashBridge&&flashBridge.parentNode;while(htmlBridge&&(isFlashElement.test(htmlBridge.nodeName)&&htmlBridge.parentNode))htmlBridge=htmlBridge.parentNode;return htmlBridge||null};var _reposition=function(){if(currentElement){var pos=
_getDOMObjectPosition(currentElement,_globalConfig.zIndex);var htmlBridge=_getHtmlBridge(flashState.bridge);if(htmlBridge){htmlBridge.style.top=pos.top+"px";htmlBridge.style.left=pos.left+"px";htmlBridge.style.width=pos.width+"px";htmlBridge.style.height=pos.height+"px";htmlBridge.style.zIndex=pos.zIndex+1}if(flashState.ready===true&&flashState.bridge)flashState.bridge.setSize(pos.width,pos.height)}return this};ZeroClipboard.prototype.on=function(eventName,func){var i,len,events,added={},handlers=
_clientMeta[this.id]&&_clientMeta[this.id].handlers;if(typeof eventName==="string"&&eventName)events=eventName.toLowerCase().split(/\s+/);else if(typeof eventName==="object"&&(eventName&&typeof func==="undefined"))for(i in eventName)if(eventName.hasOwnProperty(i)&&(typeof i==="string"&&(i&&typeof eventName[i]==="function")))this.on(i,eventName[i]);if(events&&events.length){for(i=0,len=events.length;i<len;i++){eventName=events[i].replace(/^on/,"");added[eventName]=true;if(!handlers[eventName])handlers[eventName]=
[];handlers[eventName].push(func)}if(added.noflash&&flashState.disabled)_receiveEvent.call(this,"noflash",{});if(added.wrongflash&&flashState.outdated)_receiveEvent.call(this,"wrongflash",{flashVersion:flashState.version});if(added.load&&flashState.ready)_receiveEvent.call(this,"load",{flashVersion:flashState.version})}return this};ZeroClipboard.prototype.off=function(eventName,func){var i,len,foundIndex,events,perEventHandlers,handlers=_clientMeta[this.id]&&_clientMeta[this.id].handlers;if(arguments.length===
0)events=_objectKeys(handlers);else if(typeof eventName==="string"&&eventName)events=eventName.split(/\s+/);else if(typeof eventName==="object"&&(eventName&&typeof func==="undefined"))for(i in eventName)if(eventName.hasOwnProperty(i)&&(typeof i==="string"&&(i&&typeof eventName[i]==="function")))this.off(i,eventName[i]);if(events&&events.length)for(i=0,len=events.length;i<len;i++){eventName=events[i].toLowerCase().replace(/^on/,"");perEventHandlers=handlers[eventName];if(perEventHandlers&&perEventHandlers.length)if(func){foundIndex=
_inArray(func,perEventHandlers);while(foundIndex!==-1){perEventHandlers.splice(foundIndex,1);foundIndex=_inArray(func,perEventHandlers,foundIndex)}}else handlers[eventName].length=0}return this};ZeroClipboard.prototype.handlers=function(eventName){var prop,copy=null,handlers=_clientMeta[this.id]&&_clientMeta[this.id].handlers;if(handlers){if(typeof eventName==="string"&&eventName)return handlers[eventName]?handlers[eventName].slice(0):null;copy={};for(prop in handlers)if(handlers.hasOwnProperty(prop)&&
handlers[prop])copy[prop]=handlers[prop].slice(0)}return copy};var _dispatchClientCallbacks=function(eventName,context,args,async){var handlers=_clientMeta[this.id]&&_clientMeta[this.id].handlers[eventName];if(handlers&&handlers.length){var i,len,func,originalContext=context||this;for(i=0,len=handlers.length;i<len;i++){func=handlers[i];context=originalContext;if(typeof func==="string"&&typeof window[func]==="function")func=window[func];if(typeof func==="object"&&(func&&typeof func.handleEvent==="function")){context=
func;func=func.handleEvent}if(typeof func==="function")_dispatchCallback(func,context,args,async)}}return this};ZeroClipboard.prototype.clip=function(elements){elements=_prepClip(elements);for(var i=0;i<elements.length;i++)if(elements.hasOwnProperty(i)&&(elements[i]&&elements[i].nodeType===1)){if(!elements[i].zcClippingId){elements[i].zcClippingId="zcClippingId_"+elementIdCounter++;_elementMeta[elements[i].zcClippingId]=[this.id];if(_globalConfig.autoActivate===true)_addEventHandler(elements[i],"mouseover",
_elementMouseOver)}else if(_inArray(this.id,_elementMeta[elements[i].zcClippingId])===-1)_elementMeta[elements[i].zcClippingId].push(this.id);var clippedElements=_clientMeta[this.id].elements;if(_inArray(elements[i],clippedElements)===-1)clippedElements.push(elements[i])}return this};ZeroClipboard.prototype.unclip=function(elements){var meta=_clientMeta[this.id];if(meta){var clippedElements=meta.elements;var arrayIndex;if(typeof elements==="undefined")elements=clippedElements.slice(0);else elements=
_prepClip(elements);for(var i=elements.length;i--;)if(elements.hasOwnProperty(i)&&(elements[i]&&elements[i].nodeType===1)){arrayIndex=0;while((arrayIndex=_inArray(elements[i],clippedElements,arrayIndex))!==-1)clippedElements.splice(arrayIndex,1);var clientIds=_elementMeta[elements[i].zcClippingId];if(clientIds){arrayIndex=0;while((arrayIndex=_inArray(this.id,clientIds,arrayIndex))!==-1)clientIds.splice(arrayIndex,1);if(clientIds.length===0){if(_globalConfig.autoActivate===true)_removeEventHandler(elements[i],
"mouseover",_elementMouseOver);delete elements[i].zcClippingId}}}}return this};ZeroClipboard.prototype.elements=function(){var meta=_clientMeta[this.id];return meta&&meta.elements?meta.elements.slice(0):[]};var _getAllClientsClippedToElement=function(element){var elementMetaId,clientIds,i,len,client,clients=[];if(element&&(element.nodeType===1&&((elementMetaId=element.zcClippingId)&&_elementMeta.hasOwnProperty(elementMetaId)))){clientIds=_elementMeta[elementMetaId];if(clientIds&&clientIds.length)for(i=
0,len=clientIds.length;i<len;i++){client=_clientMeta[clientIds[i]].instance;if(client&&client instanceof ZeroClipboard)clients.push(client)}}return clients};_globalConfig.hoverClass="zeroclipboard-is-hover";_globalConfig.activeClass="zeroclipboard-is-active";_globalConfig.trustedOrigins=null;_globalConfig.allowScriptAccess=null;_globalConfig.useNoCache=true;_globalConfig.moviePath="ZeroClipboard.swf";ZeroClipboard.detectFlashSupport=function(){_deprecationWarning("ZeroClipboard.detectFlashSupport",
_globalConfig.debug);return _detectFlashSupport()};ZeroClipboard.dispatch=function(eventName,args){if(typeof eventName==="string"&&eventName){var cleanEventName=eventName.toLowerCase().replace(/^on/,"");if(cleanEventName){var clients=currentElement?_getAllClientsClippedToElement(currentElement):_getAllClients();for(var i=0,len=clients.length;i<len;i++)_receiveEvent.call(clients[i],cleanEventName,args)}}};ZeroClipboard.prototype.setHandCursor=function(enabled){_deprecationWarning("ZeroClipboard.prototype.setHandCursor",
_globalConfig.debug);enabled=typeof enabled==="boolean"?enabled:!!enabled;_setHandCursor(enabled);_globalConfig.forceHandCursor=enabled;return this};ZeroClipboard.prototype.reposition=function(){_deprecationWarning("ZeroClipboard.prototype.reposition",_globalConfig.debug);return _reposition()};ZeroClipboard.prototype.receiveEvent=function(eventName,args){_deprecationWarning("ZeroClipboard.prototype.receiveEvent",_globalConfig.debug);if(typeof eventName==="string"&&eventName){var cleanEventName=eventName.toLowerCase().replace(/^on/,
"");if(cleanEventName)_receiveEvent.call(this,cleanEventName,args)}};ZeroClipboard.prototype.setCurrent=function(element){_deprecationWarning("ZeroClipboard.prototype.setCurrent",_globalConfig.debug);ZeroClipboard.activate(element);return this};ZeroClipboard.prototype.resetBridge=function(){_deprecationWarning("ZeroClipboard.prototype.resetBridge",_globalConfig.debug);ZeroClipboard.deactivate();return this};ZeroClipboard.prototype.setTitle=function(newTitle){_deprecationWarning("ZeroClipboard.prototype.setTitle",
_globalConfig.debug);newTitle=newTitle||(_globalConfig.title||currentElement&&currentElement.getAttribute("title"));if(newTitle){var htmlBridge=_getHtmlBridge(flashState.bridge);if(htmlBridge)htmlBridge.setAttribute("title",newTitle)}return this};ZeroClipboard.setDefaults=function(options){_deprecationWarning("ZeroClipboard.setDefaults",_globalConfig.debug);ZeroClipboard.config(options)};ZeroClipboard.prototype.addEventListener=function(eventName,func){_deprecationWarning("ZeroClipboard.prototype.addEventListener",
_globalConfig.debug);return this.on(eventName,func)};ZeroClipboard.prototype.removeEventListener=function(eventName,func){_deprecationWarning("ZeroClipboard.prototype.removeEventListener",_globalConfig.debug);return this.off(eventName,func)};ZeroClipboard.prototype.ready=function(){_deprecationWarning("ZeroClipboard.prototype.ready",_globalConfig.debug);return flashState.ready===true};var _receiveEvent=function(eventName,args){eventName=eventName.toLowerCase().replace(/^on/,"");var cleanVersion=args&&
(args.flashVersion&&_parseFlashVersion(args.flashVersion))||null;var element=currentElement;var performCallbackAsync=true;switch(eventName){case "load":if(cleanVersion){if(!_isFlashVersionSupported(cleanVersion)){_receiveEvent.call(this,"onWrongFlash",{flashVersion:cleanVersion});return}flashState.outdated=false;flashState.ready=true;flashState.version=cleanVersion}break;case "wrongflash":if(cleanVersion&&!_isFlashVersionSupported(cleanVersion)){flashState.outdated=true;flashState.ready=false;flashState.version=
cleanVersion}break;case "mouseover":_addClass(element,_globalConfig.hoverClass);break;case "mouseout":if(_globalConfig.autoActivate===true)ZeroClipboard.deactivate();break;case "mousedown":_addClass(element,_globalConfig.activeClass);break;case "mouseup":_removeClass(element,_globalConfig.activeClass);break;case "datarequested":var targetId=element.getAttribute("data-clipboard-target"),targetEl=!targetId?null:document.getElementById(targetId);if(targetEl){var textContent=targetEl.value||(targetEl.textContent||
targetEl.innerText);if(textContent)this.setText(textContent)}else{var defaultText=element.getAttribute("data-clipboard-text");if(defaultText)this.setText(defaultText)}performCallbackAsync=false;break;case "complete":_deleteOwnProperties(_clipData);break}var context=element;var eventArgs=[this,args];return _dispatchClientCallbacks.call(this,eventName,context,eventArgs,performCallbackAsync)};if(typeof define==="function"&&define.amd)define(["require","exports","module"],function(require,exports,module){_amdModuleId=
module&&module.id||null;return ZeroClipboard});else if(typeof module==="object"&&(module&&(typeof module.exports==="object"&&module.exports))){_cjsModuleId=module.id||null;module.exports=ZeroClipboard}else window.ZeroClipboard=ZeroClipboard})();var CryptoJS=CryptoJS||function(u,p){var d={},l=d.lib={},s=function(){},t=l.Base={extend:function(a){s.prototype=this;var c=new s;a&&c.mixIn(a);c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},
r=l.WordArray=t.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=p?c:4*a.length},toString:function(a){return(a||v).stringify(this)},concat:function(a){var c=this.words,e=a.words,j=this.sigBytes;a=a.sigBytes;this.clamp();if(j%4)for(var k=0;k<a;k++)c[j+k>>>2]|=(e[k>>>2]>>>24-8*(k%4)&255)<<24-8*((j+k)%4);else if(65535<e.length)for(k=0;k<a;k+=4)c[j+k>>>2]=e[k>>>2];else c.push.apply(c,e);this.sigBytes+=a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<
32-8*(c%4);a.length=u.ceil(c/4)},clone:function(){var a=t.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var c=[],e=0;e<a;e+=4)c.push(4294967296*u.random()|0);return new r.init(c,a)}}),w=d.enc={},v=w.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var e=[],j=0;j<a;j++){var k=c[j>>>2]>>>24-8*(j%4)&255;e.push((k>>>4).toString(16));e.push((k&15).toString(16))}return e.join("")},parse:function(a){for(var c=a.length,e=[],j=0;j<c;j+=2)e[j>>>3]|=parseInt(a.substr(j,
2),16)<<24-4*(j%8);return new r.init(e,c/2)}},b=w.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var e=[],j=0;j<a;j++)e.push(String.fromCharCode(c[j>>>2]>>>24-8*(j%4)&255));return e.join("")},parse:function(a){for(var c=a.length,e=[],j=0;j<c;j++)e[j>>>2]|=(a.charCodeAt(j)&255)<<24-8*(j%4);return new r.init(e,c)}},x=w.Utf8={stringify:function(a){try{return decodeURIComponent(escape(b.stringify(a)))}catch(c){throw Error("Malformed UTF-8 data");}},parse:function(a){return b.parse(unescape(encodeURIComponent(a)))}},
q=l.BufferedBlockAlgorithm=t.extend({reset:function(){this._data=new r.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=x.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,e=c.words,j=c.sigBytes,k=this.blockSize,b=j/(4*k),b=a?u.ceil(b):u.max((b|0)-this._minBufferSize,0);a=b*k;j=u.min(4*a,j);if(a){for(var q=0;q<a;q+=k)this._doProcessBlock(e,q);q=e.splice(0,a);c.sigBytes-=j}return new r.init(q,j)},clone:function(){var a=t.clone.call(this);
a._data=this._data.clone();return a},_minBufferSize:0});l.Hasher=q.extend({cfg:t.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){q.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,e){return(new a.init(e)).finalize(b)}},_createHmacHelper:function(a){return function(b,e){return(new n.HMAC.init(a,
e)).finalize(b)}}});var n=d.algo={};return d}(Math);
(function(){var u=CryptoJS,p=u.lib.WordArray;u.enc.Base64={stringify:function(d){var l=d.words,p=d.sigBytes,t=this._map;d.clamp();d=[];for(var r=0;r<p;r+=3)for(var w=(l[r>>>2]>>>24-8*(r%4)&255)<<16|(l[r+1>>>2]>>>24-8*((r+1)%4)&255)<<8|l[r+2>>>2]>>>24-8*((r+2)%4)&255,v=0;4>v&&r+0.75*v<p;v++)d.push(t.charAt(w>>>6*(3-v)&63));if(l=t.charAt(64))for(;d.length%4;)d.push(l);return d.join("")},parse:function(d){var l=d.length,s=this._map,t=s.charAt(64);t&&(t=d.indexOf(t),-1!=t&&(l=t));for(var t=[],r=0,w=0;w<
l;w++)if(w%4){var v=s.indexOf(d.charAt(w-1))<<2*(w%4),b=s.indexOf(d.charAt(w))>>>6-2*(w%4);t[r>>>2]|=(v|b)<<24-8*(r%4);r++}return p.create(t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d"}})();
(function(u){function p(b,n,a,c,e,j,k){b=b+(n&a|~n&c)+e+k;return(b<<j|b>>>32-j)+n}function d(b,n,a,c,e,j,k){b=b+(n&c|a&~c)+e+k;return(b<<j|b>>>32-j)+n}function l(b,n,a,c,e,j,k){b=b+(n^a^c)+e+k;return(b<<j|b>>>32-j)+n}function s(b,n,a,c,e,j,k){b=b+(a^(n|~c))+e+k;return(b<<j|b>>>32-j)+n}for(var t=CryptoJS,r=t.lib,w=r.WordArray,v=r.Hasher,r=t.algo,b=[],x=0;64>x;x++)b[x]=4294967296*u.abs(u.sin(x+1))|0;r=r.MD5=v.extend({_doReset:function(){this._hash=new w.init([1732584193,4023233417,2562383102,271733878])},
_doProcessBlock:function(q,n){for(var a=0;16>a;a++){var c=n+a,e=q[c];q[c]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360}var a=this._hash.words,c=q[n+0],e=q[n+1],j=q[n+2],k=q[n+3],z=q[n+4],r=q[n+5],t=q[n+6],w=q[n+7],v=q[n+8],A=q[n+9],B=q[n+10],C=q[n+11],u=q[n+12],D=q[n+13],E=q[n+14],x=q[n+15],f=a[0],m=a[1],g=a[2],h=a[3],f=p(f,m,g,h,c,7,b[0]),h=p(h,f,m,g,e,12,b[1]),g=p(g,h,f,m,j,17,b[2]),m=p(m,g,h,f,k,22,b[3]),f=p(f,m,g,h,z,7,b[4]),h=p(h,f,m,g,r,12,b[5]),g=p(g,h,f,m,t,17,b[6]),m=p(m,g,h,f,w,22,b[7]),
f=p(f,m,g,h,v,7,b[8]),h=p(h,f,m,g,A,12,b[9]),g=p(g,h,f,m,B,17,b[10]),m=p(m,g,h,f,C,22,b[11]),f=p(f,m,g,h,u,7,b[12]),h=p(h,f,m,g,D,12,b[13]),g=p(g,h,f,m,E,17,b[14]),m=p(m,g,h,f,x,22,b[15]),f=d(f,m,g,h,e,5,b[16]),h=d(h,f,m,g,t,9,b[17]),g=d(g,h,f,m,C,14,b[18]),m=d(m,g,h,f,c,20,b[19]),f=d(f,m,g,h,r,5,b[20]),h=d(h,f,m,g,B,9,b[21]),g=d(g,h,f,m,x,14,b[22]),m=d(m,g,h,f,z,20,b[23]),f=d(f,m,g,h,A,5,b[24]),h=d(h,f,m,g,E,9,b[25]),g=d(g,h,f,m,k,14,b[26]),m=d(m,g,h,f,v,20,b[27]),f=d(f,m,g,h,D,5,b[28]),h=d(h,f,
m,g,j,9,b[29]),g=d(g,h,f,m,w,14,b[30]),m=d(m,g,h,f,u,20,b[31]),f=l(f,m,g,h,r,4,b[32]),h=l(h,f,m,g,v,11,b[33]),g=l(g,h,f,m,C,16,b[34]),m=l(m,g,h,f,E,23,b[35]),f=l(f,m,g,h,e,4,b[36]),h=l(h,f,m,g,z,11,b[37]),g=l(g,h,f,m,w,16,b[38]),m=l(m,g,h,f,B,23,b[39]),f=l(f,m,g,h,D,4,b[40]),h=l(h,f,m,g,c,11,b[41]),g=l(g,h,f,m,k,16,b[42]),m=l(m,g,h,f,t,23,b[43]),f=l(f,m,g,h,A,4,b[44]),h=l(h,f,m,g,u,11,b[45]),g=l(g,h,f,m,x,16,b[46]),m=l(m,g,h,f,j,23,b[47]),f=s(f,m,g,h,c,6,b[48]),h=s(h,f,m,g,w,10,b[49]),g=s(g,h,f,m,
E,15,b[50]),m=s(m,g,h,f,r,21,b[51]),f=s(f,m,g,h,u,6,b[52]),h=s(h,f,m,g,k,10,b[53]),g=s(g,h,f,m,B,15,b[54]),m=s(m,g,h,f,e,21,b[55]),f=s(f,m,g,h,v,6,b[56]),h=s(h,f,m,g,x,10,b[57]),g=s(g,h,f,m,t,15,b[58]),m=s(m,g,h,f,D,21,b[59]),f=s(f,m,g,h,z,6,b[60]),h=s(h,f,m,g,C,10,b[61]),g=s(g,h,f,m,j,15,b[62]),m=s(m,g,h,f,A,21,b[63]);a[0]=a[0]+f|0;a[1]=a[1]+m|0;a[2]=a[2]+g|0;a[3]=a[3]+h|0},_doFinalize:function(){var b=this._data,n=b.words,a=8*this._nDataBytes,c=8*b.sigBytes;n[c>>>5]|=128<<24-c%32;var e=u.floor(a/
4294967296);n[(c+64>>>9<<4)+15]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360;n[(c+64>>>9<<4)+14]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;b.sigBytes=4*(n.length+1);this._process();b=this._hash;n=b.words;for(a=0;4>a;a++)c=n[a],n[a]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360;return b},clone:function(){var b=v.clone.call(this);b._hash=this._hash.clone();return b}});t.MD5=v._createHelper(r);t.HmacMD5=v._createHmacHelper(r)})(Math);
(function(){var u=CryptoJS,p=u.lib,d=p.Base,l=p.WordArray,p=u.algo,s=p.EvpKDF=d.extend({cfg:d.extend({keySize:4,hasher:p.MD5,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,r){for(var p=this.cfg,s=p.hasher.create(),b=l.create(),u=b.words,q=p.keySize,p=p.iterations;u.length<q;){n&&s.update(n);var n=s.update(d).finalize(r);s.reset();for(var a=1;a<p;a++)n=s.finalize(n),s.reset();b.concat(n)}b.sigBytes=4*q;return b}});u.EvpKDF=function(d,l,p){return s.create(p).compute(d,
l)}})();
CryptoJS.lib.Cipher||function(u){var p=CryptoJS,d=p.lib,l=d.Base,s=d.WordArray,t=d.BufferedBlockAlgorithm,r=p.enc.Base64,w=p.algo.EvpKDF,v=d.Cipher=t.extend({cfg:l.extend(),createEncryptor:function(e,a){return this.create(this._ENC_XFORM_MODE,e,a)},createDecryptor:function(e,a){return this.create(this._DEC_XFORM_MODE,e,a)},init:function(e,a,b){this.cfg=this.cfg.extend(b);this._xformMode=e;this._key=a;this.reset()},reset:function(){t.reset.call(this);this._doReset()},process:function(e){this._append(e);return this._process()},
finalize:function(e){e&&this._append(e);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(b,k,d){return("string"==typeof k?c:a).encrypt(e,b,k,d)},decrypt:function(b,k,d){return("string"==typeof k?c:a).decrypt(e,b,k,d)}}}});d.StreamCipher=v.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var b=p.mode={},x=function(e,a,b){var c=this._iv;c?this._iv=u:c=this._prevBlock;for(var d=0;d<b;d++)e[a+d]^=
c[d]},q=(d.BlockCipherMode=l.extend({createEncryptor:function(e,a){return this.Encryptor.create(e,a)},createDecryptor:function(e,a){return this.Decryptor.create(e,a)},init:function(e,a){this._cipher=e;this._iv=a}})).extend();q.Encryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize;x.call(this,e,a,c);b.encryptBlock(e,a);this._prevBlock=e.slice(a,a+c)}});q.Decryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize,d=e.slice(a,a+c);b.decryptBlock(e,a);x.call(this,
e,a,c);this._prevBlock=d}});b=b.CBC=q;q=(p.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,l=[],n=0;n<c;n+=4)l.push(d);c=s.create(l,c);a.concat(c)},unpad:function(a){a.sigBytes-=a.words[a.sigBytes-1>>>2]&255}};d.BlockCipher=v.extend({cfg:v.cfg.extend({mode:b,padding:q}),reset:function(){v.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,
this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var n=d.CipherParams=l.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),b=(p.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;a=a.salt;return(a?s.create([1398893684,
1701076831]).concat(a).concat(b):b).toString(r)},parse:function(a){a=r.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=s.create(b.slice(2,4));b.splice(0,4);a.sigBytes-=16}return n.create({ciphertext:a,salt:c})}},a=d.SerializableCipher=l.extend({cfg:l.extend({format:b}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var l=a.createEncryptor(c,d);b=l.finalize(b);l=l.cfg;return n.create({ciphertext:b,key:c,iv:l.iv,algorithm:a,mode:l.mode,padding:l.padding,blockSize:a.blockSize,formatter:d.format})},
decrypt:function(a,b,c,d){d=this.cfg.extend(d);b=this._parse(b,d.format);return a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),p=(p.kdf={}).OpenSSL={execute:function(a,b,c,d){d||(d=s.random(8));a=w.create({keySize:b+c}).compute(a,d);c=s.create(a.words.slice(b),4*c);a.sigBytes=4*b;return n.create({key:a,iv:c,salt:d})}},c=d.PasswordBasedCipher=a.extend({cfg:a.cfg.extend({kdf:p}),encrypt:function(b,c,d,l){l=this.cfg.extend(l);d=l.kdf.execute(d,
b.keySize,b.ivSize);l.iv=d.iv;b=a.encrypt.call(this,b,c,d.key,l);b.mixIn(d);return b},decrypt:function(b,c,d,l){l=this.cfg.extend(l);c=this._parse(c,l.format);d=l.kdf.execute(d,b.keySize,b.ivSize,c.salt);l.iv=d.iv;return a.decrypt.call(this,b,c,d.key,l)}})}();
(function(){for(var u=CryptoJS,p=u.lib.BlockCipher,d=u.algo,l=[],s=[],t=[],r=[],w=[],v=[],b=[],x=[],q=[],n=[],a=[],c=0;256>c;c++)a[c]=128>c?c<<1:c<<1^283;for(var e=0,j=0,c=0;256>c;c++){var k=j^j<<1^j<<2^j<<3^j<<4,k=k>>>8^k&255^99;l[e]=k;s[k]=e;var z=a[e],F=a[z],G=a[F],y=257*a[k]^16843008*k;t[e]=y<<24|y>>>8;r[e]=y<<16|y>>>16;w[e]=y<<8|y>>>24;v[e]=y;y=16843009*G^65537*F^257*z^16843008*e;b[k]=y<<24|y>>>8;x[k]=y<<16|y>>>16;q[k]=y<<8|y>>>24;n[k]=y;e?(e=z^a[a[a[G^z]]],j^=a[a[j]]):e=j=1}var H=[0,1,2,4,8,
16,32,64,128,27,54],d=d.AES=p.extend({_doReset:function(){for(var a=this._key,c=a.words,d=a.sigBytes/4,a=4*((this._nRounds=d+6)+1),e=this._keySchedule=[],j=0;j<a;j++)if(j<d)e[j]=c[j];else{var k=e[j-1];j%d?6<d&&(4==j%d&&(k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255])):(k=k<<8|k>>>24,k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255],k^=H[j/d|0]<<24);e[j]=e[j-d]^k}c=this._invKeySchedule=[];for(d=0;d<a;d++)j=a-d,k=d%4?e[j]:e[j-4],c[d]=4>d||4>=j?k:b[l[k>>>24]]^x[l[k>>>16&255]]^q[l[k>>>
8&255]]^n[l[k&255]]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,t,r,w,v,l)},decryptBlock:function(a,c){var d=a[c+1];a[c+1]=a[c+3];a[c+3]=d;this._doCryptBlock(a,c,this._invKeySchedule,b,x,q,n,s);d=a[c+1];a[c+1]=a[c+3];a[c+3]=d},_doCryptBlock:function(a,b,c,d,e,j,l,f){for(var m=this._nRounds,g=a[b]^c[0],h=a[b+1]^c[1],k=a[b+2]^c[2],n=a[b+3]^c[3],p=4,r=1;r<m;r++)var q=d[g>>>24]^e[h>>>16&255]^j[k>>>8&255]^l[n&255]^c[p++],s=d[h>>>24]^e[k>>>16&255]^j[n>>>8&255]^l[g&255]^c[p++],t=
d[k>>>24]^e[n>>>16&255]^j[g>>>8&255]^l[h&255]^c[p++],n=d[n>>>24]^e[g>>>16&255]^j[h>>>8&255]^l[k&255]^c[p++],g=q,h=s,k=t;q=(f[g>>>24]<<24|f[h>>>16&255]<<16|f[k>>>8&255]<<8|f[n&255])^c[p++];s=(f[h>>>24]<<24|f[k>>>16&255]<<16|f[n>>>8&255]<<8|f[g&255])^c[p++];t=(f[k>>>24]<<24|f[n>>>16&255]<<16|f[g>>>8&255]<<8|f[h&255])^c[p++];n=(f[n>>>24]<<24|f[g>>>16&255]<<16|f[h>>>8&255]<<8|f[k&255])^c[p++];a[b]=q;a[b+1]=s;a[b+2]=t;a[b+3]=n},keySize:8});u.AES=p._createHelper(d)})();var CryptoJS=CryptoJS||function(h,s){var f={},t=f.lib={},g=function(){},j=t.Base={extend:function(a){g.prototype=this;var c=new g;a&&c.mixIn(a);c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},
q=t.WordArray=j.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=s?c:4*a.length},toString:function(a){return(a||u).stringify(this)},concat:function(a){var c=this.words,d=a.words,b=this.sigBytes;a=a.sigBytes;this.clamp();if(b%4)for(var e=0;e<a;e++)c[b+e>>>2]|=(d[e>>>2]>>>24-8*(e%4)&255)<<24-8*((b+e)%4);else if(65535<d.length)for(e=0;e<a;e+=4)c[b+e>>>2]=d[e>>>2];else c.push.apply(c,d);this.sigBytes+=a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<
32-8*(c%4);a.length=h.ceil(c/4)},clone:function(){var a=j.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var c=[],d=0;d<a;d+=4)c.push(4294967296*h.random()|0);return new q.init(c,a)}}),v=f.enc={},u=v.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var d=[],b=0;b<a;b++){var e=c[b>>>2]>>>24-8*(b%4)&255;d.push((e>>>4).toString(16));d.push((e&15).toString(16))}return d.join("")},parse:function(a){for(var c=a.length,d=[],b=0;b<c;b+=2)d[b>>>3]|=parseInt(a.substr(b,
2),16)<<24-4*(b%8);return new q.init(d,c/2)}},k=v.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var d=[],b=0;b<a;b++)d.push(String.fromCharCode(c[b>>>2]>>>24-8*(b%4)&255));return d.join("")},parse:function(a){for(var c=a.length,d=[],b=0;b<c;b++)d[b>>>2]|=(a.charCodeAt(b)&255)<<24-8*(b%4);return new q.init(d,c)}},l=v.Utf8={stringify:function(a){try{return decodeURIComponent(escape(k.stringify(a)))}catch(c){throw Error("Malformed UTF-8 data");}},parse:function(a){return k.parse(unescape(encodeURIComponent(a)))}},
x=t.BufferedBlockAlgorithm=j.extend({reset:function(){this._data=new q.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=l.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,d=c.words,b=c.sigBytes,e=this.blockSize,f=b/(4*e),f=a?h.ceil(f):h.max((f|0)-this._minBufferSize,0);a=f*e;b=h.min(4*a,b);if(a){for(var m=0;m<a;m+=e)this._doProcessBlock(d,m);m=d.splice(0,a);c.sigBytes-=b}return new q.init(m,b)},clone:function(){var a=j.clone.call(this);
a._data=this._data.clone();return a},_minBufferSize:0});t.Hasher=x.extend({cfg:j.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){x.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(c,d){return(new a.init(d)).finalize(c)}},_createHmacHelper:function(a){return function(c,d){return(new w.HMAC.init(a,
d)).finalize(c)}}});var w=f.algo={};return f}(Math);
(function(h){for(var s=CryptoJS,f=s.lib,t=f.WordArray,g=f.Hasher,f=s.algo,j=[],q=[],v=function(a){return 4294967296*(a-(a|0))|0},u=2,k=0;64>k;){var l;a:{l=u;for(var x=h.sqrt(l),w=2;w<=x;w++)if(!(l%w)){l=!1;break a}l=!0}l&&(8>k&&(j[k]=v(h.pow(u,0.5))),q[k]=v(h.pow(u,1/3)),k++);u++}var a=[],f=f.SHA256=g.extend({_doReset:function(){this._hash=new t.init(j.slice(0))},_doProcessBlock:function(c,d){for(var b=this._hash.words,e=b[0],f=b[1],m=b[2],h=b[3],p=b[4],j=b[5],k=b[6],l=b[7],n=0;64>n;n++){if(16>n)a[n]=
c[d+n]|0;else{var r=a[n-15],g=a[n-2];a[n]=((r<<25|r>>>7)^(r<<14|r>>>18)^r>>>3)+a[n-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+a[n-16]}r=l+((p<<26|p>>>6)^(p<<21|p>>>11)^(p<<7|p>>>25))+(p&j^~p&k)+q[n]+a[n];g=((e<<30|e>>>2)^(e<<19|e>>>13)^(e<<10|e>>>22))+(e&f^e&m^f&m);l=k;k=j;j=p;p=h+r|0;h=m;m=f;f=e;e=r+g|0}b[0]=b[0]+e|0;b[1]=b[1]+f|0;b[2]=b[2]+m|0;b[3]=b[3]+h|0;b[4]=b[4]+p|0;b[5]=b[5]+j|0;b[6]=b[6]+k|0;b[7]=b[7]+l|0},_doFinalize:function(){var a=this._data,d=a.words,b=8*this._nDataBytes,e=8*a.sigBytes;
d[e>>>5]|=128<<24-e%32;d[(e+64>>>9<<4)+14]=h.floor(b/4294967296);d[(e+64>>>9<<4)+15]=b;a.sigBytes=4*d.length;this._process();return this._hash},clone:function(){var a=g.clone.call(this);a._hash=this._hash.clone();return a}});s.SHA256=g._createHelper(f);s.HmacSHA256=g._createHmacHelper(f)})(Math);function string_to_array(str){var len=str.length;var res=new Array(len);for(var i=0;i<len;i++)res[i]=str.charCodeAt(i);return res}function array_to_hex_string(ary){var res="";for(var i=0;i<ary.length;i++)res+=SHA256_hexchars[ary[i]>>4]+SHA256_hexchars[ary[i]&15];return res}var SHA256_buf=new Array;var SHA256_len=0;var SHA256_H=new Array;
function SHA256_init(){SHA256_H=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225);SHA256_buf=new Array;SHA256_len=0}function SHA256_write(msg){if(typeof msg=="string")SHA256_buf=SHA256_buf.concat(string_to_array(msg));else SHA256_buf=SHA256_buf.concat(msg);for(var i=0;i+64<=SHA256_buf.length;i+=64)SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf.slice(i,i+64));SHA256_buf=SHA256_buf.slice(i);SHA256_len+=msg.length}
function SHA256_finalize(){SHA256_buf[SHA256_buf.length]=128;if(SHA256_buf.length>64-8){for(var i=SHA256_buf.length;i<64;i++)SHA256_buf[i]=0;SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf);SHA256_buf.length=0}for(var i=SHA256_buf.length;i<64-5;i++)SHA256_buf[i]=0;SHA256_buf[59]=SHA256_len>>>29&255;SHA256_buf[60]=SHA256_len>>>21&255;SHA256_buf[61]=SHA256_len>>>13&255;SHA256_buf[62]=SHA256_len>>>5&255;SHA256_buf[63]=SHA256_len<<3&255;SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf);var res=new Array(32);for(var i=
0;i<8;i++){res[4*i+0]=SHA256_H[i]>>>24;res[4*i+1]=SHA256_H[i]>>16&255;res[4*i+2]=SHA256_H[i]>>8&255;res[4*i+3]=SHA256_H[i]&255}delete SHA256_H;delete SHA256_buf;delete SHA256_len;return res}function SHA256_hash(msg,no_hex){var res;SHA256_init();SHA256_write(msg);res=SHA256_finalize();if(no_hex)return res;return array_to_hex_string(res)}
function HMAC_SHA256_init(key){if(typeof key=="string")HMAC_SHA256_key=string_to_array(key);else HMAC_SHA256_key=(new Array).concat(key);if(HMAC_SHA256_key.length>64){SHA256_init();SHA256_write(HMAC_SHA256_key);HMAC_SHA256_key=SHA256_finalize()}for(var i=HMAC_SHA256_key.length;i<64;i++)HMAC_SHA256_key[i]=0;for(var i=0;i<64;i++)HMAC_SHA256_key[i]^=54;SHA256_init();SHA256_write(HMAC_SHA256_key)}function HMAC_SHA256_write(msg){SHA256_write(msg)}
function HMAC_SHA256_finalize(){var md=SHA256_finalize();for(var i=0;i<64;i++)HMAC_SHA256_key[i]^=54^92;SHA256_init();SHA256_write(HMAC_SHA256_key);SHA256_write(md);for(var i=0;i<64;i++)HMAC_SHA256_key[i]=0;delete HMAC_SHA256_key;return SHA256_finalize()}function HMAC_SHA256_MAC(key,msg){var res;HMAC_SHA256_init(key);HMAC_SHA256_write(msg);res=HMAC_SHA256_finalize();return array_to_hex_string(res)}SHA256_hexchars=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f");
SHA256_K=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,
3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298);function SHA256_sigma0(x){return(x>>>7|x<<25)^(x>>>18|x<<14)^x>>>3}function SHA256_sigma1(x){return(x>>>17|x<<15)^(x>>>19|x<<13)^x>>>10}function SHA256_Sigma0(x){return(x>>>2|x<<30)^(x>>>13|x<<19)^(x>>>22|x<<10)}function SHA256_Sigma1(x){return(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7)}
function SHA256_Ch(x,y,z){return z^x&(y^z)}function SHA256_Maj(x,y,z){return x&y^z&(x^y)}
function SHA256_Hash_Word_Block(H,W){for(var i=16;i<64;i++)W[i]=SHA256_sigma1(W[i-2])+W[i-7]+SHA256_sigma0(W[i-15])+W[i-16]&4294967295;var state=(new Array).concat(H);for(var i=0;i<64;i++){var T1=state[7]+SHA256_Sigma1(state[4])+SHA256_Ch(state[4],state[5],state[6])+SHA256_K[i]+W[i];var T2=SHA256_Sigma0(state[0])+SHA256_Maj(state[0],state[1],state[2]);state.pop();state.unshift(T1+T2&4294967295);state[4]=state[4]+T1&4294967295}for(var i=0;i<8;i++)H[i]=H[i]+state[i]&4294967295}
function SHA256_Hash_Byte_Block(H,w){var W=new Array(16);for(var i=0;i<16;i++)W[i]=w[4*i+0]<<24|w[4*i+1]<<16|w[4*i+2]<<8|w[4*i+3];SHA256_Hash_Word_Block(H,W)};(function(global,pool,math,width,chunks,digits,module,define,rngname){var startdenom=math.pow(width,chunks),significance=math.pow(2,digits),overflow=significance*2,mask=width-1,impl=math["seed"+rngname]=function(seed,use_entropy,callback){var key=[];var shortseed=mixkey(flatten(use_entropy?[seed,tostring(pool)]:seed==null?autoseed():seed,3),key);var arc4=new ARC4(key);mixkey(tostring(arc4.S),pool);return(callback||function(prng,seed,is_math_call){if(is_math_call){math[rngname]=prng;return seed}else return prng})(function(){var n=
arc4.g(chunks),d=startdenom,x=0;while(n<significance){n=(n+x)*width;d*=width;x=arc4.g(1)}while(n>=overflow){n/=2;d/=2;x>>>=1}return(n+x)/d},shortseed,this==math)};function ARC4(key){var t,keylen=key.length,me=this,i=0,j=me.i=me.j=0,s=me.S=[];if(!keylen)key=[keylen++];while(i<width)s[i]=i++;for(i=0;i<width;i++){s[i]=s[j=mask&j+key[i%keylen]+(t=s[i])];s[j]=t}(me.g=function(count){var t,r=0,i=me.i,j=me.j,s=me.S;while(count--){t=s[i=mask&i+1];r=r*width+s[mask&(s[i]=s[j=mask&j+t])+(s[j]=t)]}me.i=i;me.j=
j;return r})(width)}function flatten(obj,depth){var result=[],typ=typeof obj,prop;if(depth&&typ=="object")for(prop in obj)try{result.push(flatten(obj[prop],depth-1))}catch(e){}return result.length?result:typ=="string"?obj:obj+"\x00"}function mixkey(seed,key){var stringseed=seed+"",smear,j=0;while(j<stringseed.length)key[mask&j]=mask&(smear^=key[mask&j]*19)+stringseed.charCodeAt(j++);return tostring(key)}function autoseed(seed){try{global.crypto.getRandomValues(seed=new Uint8Array(width));return tostring(seed)}catch(e){return[+new Date,
global,(seed=global.navigator)&&seed.plugins,global.screen,tostring(pool)]}}function tostring(a){return String.fromCharCode.apply(0,a)}mixkey(math[rngname](),pool);if(module&&module.exports)module.exports=impl;else if(define&&define.amd)define(function(){return impl})})(this,[],Math,256,6,52,typeof module=="object"&&module,typeof define=="function"&&define,"random");var hash={init:SHA256_init,update:SHA256_write,getBytes:SHA256_finalize};
var nxtCrypto=function(curve25519,hash,converters){function simpleHash(message){hash.init();hash.update(message);return hash.getBytes()}function areByteArraysEqual(bytes1,bytes2){if(bytes1.length!==bytes2.length)return false;for(var i=0;i<bytes1.length;++i)if(bytes1[i]!==bytes2[i])return false;return true}function getPublicKey(secretPhrase,isAccountNumber){if(isAccountNumber){var accountNumber=secretPhrase;var publicKey="";NRS.sendRequest("getAccountPublicKey",{"account":accountNumber},function(response){if(!response.publicKey)throw"Account does not have a public key.";
else publicKey=response.publicKey},false);return publicKey}else{var secretPhraseBytes=converters.hexStringToByteArray(secretPhrase);var digest=simpleHash(secretPhraseBytes);return converters.byteArrayToHexString(curve25519.keygen(digest).p)}}function getPrivateKey(secretPhrase){SHA256_init();SHA256_write(converters.stringToByteArray(secretPhrase));return converters.shortArrayToHexString(curve25519_clamp(converters.byteArrayToShortArray(SHA256_finalize())))}function curve25519_clamp(curve){curve[0]&=
65528;curve[15]&=32767;curve[15]|=16384;return curve}function getAccountId(secretPhrase){var publicKey=getPublicKey(converters.stringToHexString(secretPhrase));var hex=converters.hexStringToByteArray(publicKey);hash.init();hash.update(hex);var account=hash.getBytes();account=converters.byteArrayToHexString(account);var slice=converters.hexStringToByteArray(account).slice(0,8);return byteArrayToBigInteger(slice).toString()}function byteArrayToBigInteger(byteArray,startIndex){var value=new BigInteger("0",
10);var temp1,temp2;for(var i=byteArray.length-1;i>=0;i--){temp1=value.multiply(new BigInteger("256",10));temp2=temp1.add(new BigInteger(byteArray[i].toString(10),10));value=temp2}return value}function encryptData(plaintext,options){if(!options.sharedKey)options.sharedKey=getSharedKey(options.privateKey,options.publicKey);var compressedPlaintext=pako.gzip(new Uint8Array(plaintext));options.nonce=new Uint8Array(32);window.crypto.getRandomValues(options.nonce);var data=aesEncrypt(compressedPlaintext,
options);return{"nonce":options.nonce,"data":data}}function decryptData(data,options){if(!options.sharedKey)options.sharedKey=getSharedKey(options.privateKey,options.publicKey);var compressedPlaintext=aesDecrypt(data,options);var binData=new Uint8Array(compressedPlaintext);var data=pako.inflate(binData);return converters.byteArrayToString(data)}function aesEncrypt(plaintext,options){var text=converters.byteArrayToWordArray(plaintext);if(!options.sharedKey)var sharedKey=getSharedKey(options.privateKey,
options.publicKey);else var sharedKey=options.sharedKey.slice(0);for(var i=0;i<32;i++)sharedKey[i]^=options.nonce[i];var key=CryptoJS.SHA256(converters.byteArrayToWordArray(sharedKey));var tmp=new Uint8Array(16);window.crypto.getRandomValues(tmp);var iv=converters.byteArrayToWordArray(tmp);var encrypted=CryptoJS.AES.encrypt(text,key,{iv:iv});var ivOut=converters.wordArrayToByteArray(encrypted.iv);var ciphertextOut=converters.wordArrayToByteArray(encrypted.ciphertext);return ivOut.concat(ciphertextOut)}
function aesDecrypt(ivCiphertext,options){if(ivCiphertext.length<16||ivCiphertext.length%16!=0)throw{name:"invalid ciphertext"};var iv=converters.byteArrayToWordArray(ivCiphertext.slice(0,16));var ciphertext=converters.byteArrayToWordArray(ivCiphertext.slice(16));if(!options.sharedKey)var sharedKey=getSharedKey(options.privateKey,options.publicKey);else var sharedKey=options.sharedKey.slice(0);for(var i=0;i<32;i++)sharedKey[i]^=options.nonce[i];var key=CryptoJS.SHA256(converters.byteArrayToWordArray(sharedKey));
var encrypted=CryptoJS.lib.CipherParams.create({ciphertext:ciphertext,iv:iv,key:key});var decrypted=CryptoJS.AES.decrypt(encrypted,key,{iv:iv});var plaintext=converters.wordArrayToByteArray(decrypted);return plaintext}function getSharedKeyWithAccount(account,secretPhrase){try{if(!secretPhrase)if(NRS.rememberPassword)secretPhrase=NRS.password;else throw{"message":"Your password required to encrypt this message.","errorCode":3};var privateKey=converters.hexStringToByteArray(nxtCrypto.getPrivateKey(secretPhrase));
var publicKey=converters.hexStringToByteArray(nxtCrypto.getPublicKey(account,true));return getSharedKey(privateKey,publicKey)}catch(err){throw err;}}function getSharedKey(key1,key2){return converters.shortArrayToByteArray(curve25519_(converters.byteArrayToShortArray(key1),converters.byteArrayToShortArray(key2),null))}function sign(message,secretPhrase){var messageBytes=converters.hexStringToByteArray(message);var secretPhraseBytes=converters.hexStringToByteArray(secretPhrase);var digest=simpleHash(secretPhraseBytes);
var s=curve25519.keygen(digest).s;var m=simpleHash(messageBytes);hash.init();hash.update(m);hash.update(s);var x=hash.getBytes();var y=curve25519.keygen(x).p;hash.init();hash.update(m);hash.update(y);var h=hash.getBytes();var v=curve25519.sign(h,x,s);return converters.byteArrayToHexString(v.concat(h))}function verify(signature,message,publicKey){var signatureBytes=converters.hexStringToByteArray(signature);var messageBytes=converters.hexStringToByteArray(message);var publicKeyBytes=converters.hexStringToByteArray(publicKey);
var v=signatureBytes.slice(0,32);var h=signatureBytes.slice(32);var y=curve25519.verify(v,h,publicKeyBytes);var m=simpleHash(messageBytes);hash.init();hash.update(m);hash.update(y);var h2=hash.getBytes();return areByteArraysEqual(h,h2)}return{getPublicKey:getPublicKey,getPrivateKey:getPrivateKey,getSharedKeyWithAccount:getSharedKeyWithAccount,encryptData:encryptData,decryptData:decryptData,getAccountId:getAccountId,sign:sign,verify:verify}}(curve25519,hash,converters);var curve25519=function(){var KEY_SIZE=32;var UNPACKED_SIZE=16;var ORDER=[237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16];var ORDER_TIMES_8=[104,159,174,231,210,24,147,192,178,230,188,23,245,206,247,166,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128];var BASE_2Y=[22587,610,29883,44076,15515,9479,25859,56197,23910,4462,17831,16322,62102,36542,52412,16035];var BASE_R2Y=[5744,16384,61977,54121,8776,18501,26522,34893,23833,5823,55924,58749,24147,14085,13606,6080];var C1=
[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var C9=[9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var C486671=[27919,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var C39420360=[33224,601,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var P25=33554431;var P26=67108863;function clamp(k){k[31]&=127;k[31]|=64;k[0]&=248}function cpy32(d,s){for(var i=0;i<32;i++)d[i]=s[i]}function mula_small(p,q,m,x,n,z){m=m|0;n=n|0;z=z|0;var v=0;for(var i=0;i<n;++i){v+=(q[i+m]&255)+z*(x[i]&255);p[i+m]=v&255;v>>=8}return v}function mula32(p,x,y,t,z){t=t|0;z=z|0;var n=31;var w=
0;var i=0;for(;i<t;i++){var zy=z*(y[i]&255);w+=mula_small(p,p,i,x,n,zy)+(p[i+n]&255)+zy*(x[n]&255);p[i+n]=w&255;w>>=8}p[i+n]=w+(p[i+n]&255)&255;return w>>8}function divmod(q,r,n,d,t){n=n|0;t=t|0;var rn=0;var dt=(d[t-1]&255)<<8;if(t>1)dt|=d[t-2]&255;while(n-- >=t){var z=rn<<16|(r[n]&255)<<8;if(n>0)z|=r[n-1]&255;var i=n-t+1;z/=dt;rn+=mula_small(r,r,i,d,t,-z);q[i]=z+rn&255;mula_small(r,r,i,d,t,-rn);rn=r[n]&255;r[n]=0}r[t-1]=rn&255}function numsize(x,n){while(n--!==0&&x[n]===0);return n+1}function egcd32(x,
y,a,b){var an,bn=32,qn,i;for(i=0;i<32;i++)x[i]=y[i]=0;x[0]=1;an=numsize(a,32);if(an===0)return y;var temp=new Array(32);while(true){qn=bn-an+1;divmod(temp,b,bn,a,an);bn=numsize(b,bn);if(bn===0)return x;mula32(y,x,temp,qn,-1);qn=an-bn+1;divmod(temp,a,an,b,bn);an=numsize(a,an);if(an===0)return y;mula32(x,y,temp,qn,-1)}}function unpack(x,m){for(var i=0;i<KEY_SIZE;i+=2)x[i/2]=m[i]&255|(m[i+1]&255)<<8}function is_overflow(x){return x[0]>P26-19&&((x[1]&x[3]&x[5]&x[7]&x[9])===P25&&(x[2]&x[4]&x[6]&x[8])===
P26)||x[9]>P25}function pack(x,m){for(var i=0;i<UNPACKED_SIZE;++i){m[2*i]=x[i]&255;m[2*i+1]=(x[i]&65280)>>8}}function createUnpackedArray(){return new Uint16Array(UNPACKED_SIZE)}function cpy(d,s){for(var i=0;i<UNPACKED_SIZE;++i)d[i]=s[i]}function set(d,s){d[0]=s;for(var i=1;i<UNPACKED_SIZE;++i)d[i]=0}var add=c255laddmodp;var sub=c255lsubmodp;var mul_small=c255lmulasmall;var mul=c255lmulmodp;var sqr=c255lsqrmodp;function recip(y,x,sqrtassist){var t0=createUnpackedArray();var t1=createUnpackedArray();
var t2=createUnpackedArray();var t3=createUnpackedArray();var t4=createUnpackedArray();var i;sqr(t1,x);sqr(t2,t1);sqr(t0,t2);mul(t2,t0,x);mul(t0,t2,t1);sqr(t1,t0);mul(t3,t1,t2);sqr(t1,t3);sqr(t2,t1);sqr(t1,t2);sqr(t2,t1);sqr(t1,t2);mul(t2,t1,t3);sqr(t1,t2);sqr(t3,t1);for(i=1;i<5;i++){sqr(t1,t3);sqr(t3,t1)}mul(t1,t3,t2);sqr(t3,t1);sqr(t4,t3);for(i=1;i<10;i++){sqr(t3,t4);sqr(t4,t3)}mul(t3,t4,t1);for(i=0;i<5;i++){sqr(t1,t3);sqr(t3,t1)}mul(t1,t3,t2);sqr(t2,t1);sqr(t3,t2);for(i=1;i<25;i++){sqr(t2,t3);
sqr(t3,t2)}mul(t2,t3,t1);sqr(t3,t2);sqr(t4,t3);for(i=1;i<50;i++){sqr(t3,t4);sqr(t4,t3)}mul(t3,t4,t2);for(i=0;i<25;i++){sqr(t4,t3);sqr(t3,t4)}mul(t2,t3,t1);sqr(t1,t2);sqr(t2,t1);if(sqrtassist!==0)mul(y,x,t2);else{sqr(t1,t2);sqr(t2,t1);sqr(t1,t2);mul(y,t1,t0)}}function is_negative(x){var isOverflowOrNegative=is_overflow(x)||x[9]<0;var leastSignificantBit=x[0]&1;return((isOverflowOrNegative?1:0)^leastSignificantBit)&4294967295}function sqrt(x,u){var v=createUnpackedArray();var t1=createUnpackedArray();
var t2=createUnpackedArray();add(t1,u,u);recip(v,t1,1);sqr(x,v);mul(t2,t1,x);sub(t2,t2,C1);mul(t1,v,t2);mul(x,u,t1)}function c255lsqr8h(a7,a6,a5,a4,a3,a2,a1,a0){var r=[];var v;r[0]=(v=a0*a0)&65535;r[1]=(v=(v/65536|0)+2*a0*a1)&65535;r[2]=(v=(v/65536|0)+2*a0*a2+a1*a1)&65535;r[3]=(v=(v/65536|0)+2*a0*a3+2*a1*a2)&65535;r[4]=(v=(v/65536|0)+2*a0*a4+2*a1*a3+a2*a2)&65535;r[5]=(v=(v/65536|0)+2*a0*a5+2*a1*a4+2*a2*a3)&65535;r[6]=(v=(v/65536|0)+2*a0*a6+2*a1*a5+2*a2*a4+a3*a3)&65535;r[7]=(v=(v/65536|0)+2*a0*a7+
2*a1*a6+2*a2*a5+2*a3*a4)&65535;r[8]=(v=(v/65536|0)+2*a1*a7+2*a2*a6+2*a3*a5+a4*a4)&65535;r[9]=(v=(v/65536|0)+2*a2*a7+2*a3*a6+2*a4*a5)&65535;r[10]=(v=(v/65536|0)+2*a3*a7+2*a4*a6+a5*a5)&65535;r[11]=(v=(v/65536|0)+2*a4*a7+2*a5*a6)&65535;r[12]=(v=(v/65536|0)+2*a5*a7+a6*a6)&65535;r[13]=(v=(v/65536|0)+2*a6*a7)&65535;r[14]=(v=(v/65536|0)+a7*a7)&65535;r[15]=v/65536|0;return r}function c255lsqrmodp(r,a){var x=c255lsqr8h(a[15],a[14],a[13],a[12],a[11],a[10],a[9],a[8]);var z=c255lsqr8h(a[7],a[6],a[5],a[4],a[3],
a[2],a[1],a[0]);var y=c255lsqr8h(a[15]+a[7],a[14]+a[6],a[13]+a[5],a[12]+a[4],a[11]+a[3],a[10]+a[2],a[9]+a[1],a[8]+a[0]);var v;r[0]=(v=8388608+z[0]+(y[8]-x[8]-z[8]+x[0]-128)*38)&65535;r[1]=(v=8388480+(v/65536|0)+z[1]+(y[9]-x[9]-z[9]+x[1])*38)&65535;r[2]=(v=8388480+(v/65536|0)+z[2]+(y[10]-x[10]-z[10]+x[2])*38)&65535;r[3]=(v=8388480+(v/65536|0)+z[3]+(y[11]-x[11]-z[11]+x[3])*38)&65535;r[4]=(v=8388480+(v/65536|0)+z[4]+(y[12]-x[12]-z[12]+x[4])*38)&65535;r[5]=(v=8388480+(v/65536|0)+z[5]+(y[13]-x[13]-z[13]+
x[5])*38)&65535;r[6]=(v=8388480+(v/65536|0)+z[6]+(y[14]-x[14]-z[14]+x[6])*38)&65535;r[7]=(v=8388480+(v/65536|0)+z[7]+(y[15]-x[15]-z[15]+x[7])*38)&65535;r[8]=(v=8388480+(v/65536|0)+z[8]+y[0]-x[0]-z[0]+x[8]*38)&65535;r[9]=(v=8388480+(v/65536|0)+z[9]+y[1]-x[1]-z[1]+x[9]*38)&65535;r[10]=(v=8388480+(v/65536|0)+z[10]+y[2]-x[2]-z[2]+x[10]*38)&65535;r[11]=(v=8388480+(v/65536|0)+z[11]+y[3]-x[3]-z[3]+x[11]*38)&65535;r[12]=(v=8388480+(v/65536|0)+z[12]+y[4]-x[4]-z[4]+x[12]*38)&65535;r[13]=(v=8388480+(v/65536|
0)+z[13]+y[5]-x[5]-z[5]+x[13]*38)&65535;r[14]=(v=8388480+(v/65536|0)+z[14]+y[6]-x[6]-z[6]+x[14]*38)&65535;var r15=8388480+(v/65536|0)+z[15]+y[7]-x[7]-z[7]+x[15]*38;c255lreduce(r,r15)}function c255lmul8h(a7,a6,a5,a4,a3,a2,a1,a0,b7,b6,b5,b4,b3,b2,b1,b0){var r=[];var v;r[0]=(v=a0*b0)&65535;r[1]=(v=(v/65536|0)+a0*b1+a1*b0)&65535;r[2]=(v=(v/65536|0)+a0*b2+a1*b1+a2*b0)&65535;r[3]=(v=(v/65536|0)+a0*b3+a1*b2+a2*b1+a3*b0)&65535;r[4]=(v=(v/65536|0)+a0*b4+a1*b3+a2*b2+a3*b1+a4*b0)&65535;r[5]=(v=(v/65536|0)+a0*
b5+a1*b4+a2*b3+a3*b2+a4*b1+a5*b0)&65535;r[6]=(v=(v/65536|0)+a0*b6+a1*b5+a2*b4+a3*b3+a4*b2+a5*b1+a6*b0)&65535;r[7]=(v=(v/65536|0)+a0*b7+a1*b6+a2*b5+a3*b4+a4*b3+a5*b2+a6*b1+a7*b0)&65535;r[8]=(v=(v/65536|0)+a1*b7+a2*b6+a3*b5+a4*b4+a5*b3+a6*b2+a7*b1)&65535;r[9]=(v=(v/65536|0)+a2*b7+a3*b6+a4*b5+a5*b4+a6*b3+a7*b2)&65535;r[10]=(v=(v/65536|0)+a3*b7+a4*b6+a5*b5+a6*b4+a7*b3)&65535;r[11]=(v=(v/65536|0)+a4*b7+a5*b6+a6*b5+a7*b4)&65535;r[12]=(v=(v/65536|0)+a5*b7+a6*b6+a7*b5)&65535;r[13]=(v=(v/65536|0)+a6*b7+a7*
b6)&65535;r[14]=(v=(v/65536|0)+a7*b7)&65535;r[15]=v/65536|0;return r}function c255lmulmodp(r,a,b){var x=c255lmul8h(a[15],a[14],a[13],a[12],a[11],a[10],a[9],a[8],b[15],b[14],b[13],b[12],b[11],b[10],b[9],b[8]);var z=c255lmul8h(a[7],a[6],a[5],a[4],a[3],a[2],a[1],a[0],b[7],b[6],b[5],b[4],b[3],b[2],b[1],b[0]);var y=c255lmul8h(a[15]+a[7],a[14]+a[6],a[13]+a[5],a[12]+a[4],a[11]+a[3],a[10]+a[2],a[9]+a[1],a[8]+a[0],b[15]+b[7],b[14]+b[6],b[13]+b[5],b[12]+b[4],b[11]+b[3],b[10]+b[2],b[9]+b[1],b[8]+b[0]);var v;
r[0]=(v=8388608+z[0]+(y[8]-x[8]-z[8]+x[0]-128)*38)&65535;r[1]=(v=8388480+(v/65536|0)+z[1]+(y[9]-x[9]-z[9]+x[1])*38)&65535;r[2]=(v=8388480+(v/65536|0)+z[2]+(y[10]-x[10]-z[10]+x[2])*38)&65535;r[3]=(v=8388480+(v/65536|0)+z[3]+(y[11]-x[11]-z[11]+x[3])*38)&65535;r[4]=(v=8388480+(v/65536|0)+z[4]+(y[12]-x[12]-z[12]+x[4])*38)&65535;r[5]=(v=8388480+(v/65536|0)+z[5]+(y[13]-x[13]-z[13]+x[5])*38)&65535;r[6]=(v=8388480+(v/65536|0)+z[6]+(y[14]-x[14]-z[14]+x[6])*38)&65535;r[7]=(v=8388480+(v/65536|0)+z[7]+(y[15]-
x[15]-z[15]+x[7])*38)&65535;r[8]=(v=8388480+(v/65536|0)+z[8]+y[0]-x[0]-z[0]+x[8]*38)&65535;r[9]=(v=8388480+(v/65536|0)+z[9]+y[1]-x[1]-z[1]+x[9]*38)&65535;r[10]=(v=8388480+(v/65536|0)+z[10]+y[2]-x[2]-z[2]+x[10]*38)&65535;r[11]=(v=8388480+(v/65536|0)+z[11]+y[3]-x[3]-z[3]+x[11]*38)&65535;r[12]=(v=8388480+(v/65536|0)+z[12]+y[4]-x[4]-z[4]+x[12]*38)&65535;r[13]=(v=8388480+(v/65536|0)+z[13]+y[5]-x[5]-z[5]+x[13]*38)&65535;r[14]=(v=8388480+(v/65536|0)+z[14]+y[6]-x[6]-z[6]+x[14]*38)&65535;var r15=8388480+(v/
65536|0)+z[15]+y[7]-x[7]-z[7]+x[15]*38;c255lreduce(r,r15)}function c255lreduce(a,a15){var v=a15;a[15]=v&32767;v=(v/32768|0)*19;for(var i=0;i<=14;++i){a[i]=(v+=a[i])&65535;v=v/65536|0}a[15]+=v}function c255laddmodp(r,a,b){var v;r[0]=(v=((a[15]/32768|0)+(b[15]/32768|0))*19+a[0]+b[0])&65535;for(var i=1;i<=14;++i)r[i]=(v=(v/65536|0)+a[i]+b[i])&65535;r[15]=(v/65536|0)+(a[15]&32767)+(b[15]&32767)}function c255lsubmodp(r,a,b){var v;r[0]=(v=524288+((a[15]/32768|0)-(b[15]/32768|0)-1)*19+a[0]-b[0])&65535;for(var i=
1;i<=14;++i)r[i]=(v=(v/65536|0)+524280+a[i]-b[i])&65535;r[15]=(v/65536|0)+32760+(a[15]&32767)-(b[15]&32767)}function c255lmulasmall(r,a,m){var v;r[0]=(v=a[0]*m)&65535;for(var i=1;i<=14;++i)r[i]=(v=(v/65536|0)+a[i]*m)&65535;var r15=(v/65536|0)+a[15]*m;c255lreduce(r,r15)}function mont_prep(t1,t2,ax,az){add(t1,ax,az);sub(t2,ax,az)}function mont_add(t1,t2,t3,t4,ax,az,dx){mul(ax,t2,t3);mul(az,t1,t4);add(t1,ax,az);sub(t2,ax,az);sqr(ax,t1);sqr(t1,t2);mul(az,t1,dx)}function mont_dbl(t1,t2,t3,t4,bx,bz){sqr(t1,
t3);sqr(t2,t4);mul(bx,t1,t2);sub(t2,t1,t2);mul_small(bz,t2,121665);add(t1,t1,bz);mul(bz,t1,t2)}function x_to_y2(t,y2,x){sqr(t,x);mul_small(y2,x,486662);add(t,t,y2);add(t,t,C1);mul(y2,t,x)}function core(Px,s,k,Gx){var dx=createUnpackedArray();var t1=createUnpackedArray();var t2=createUnpackedArray();var t3=createUnpackedArray();var t4=createUnpackedArray();var x=[createUnpackedArray(),createUnpackedArray()];var z=[createUnpackedArray(),createUnpackedArray()];var i,j;if(Gx!==null)unpack(dx,Gx);else set(dx,
9);set(x[0],1);set(z[0],0);cpy(x[1],dx);set(z[1],1);for(i=32;i--!==0;)for(j=8;j--!==0;){var bit1=(k[i]&255)>>j&1;var bit0=~(k[i]&255)>>j&1;var ax=x[bit0];var az=z[bit0];var bx=x[bit1];var bz=z[bit1];mont_prep(t1,t2,ax,az);mont_prep(t3,t4,bx,bz);mont_add(t1,t2,t3,t4,ax,az,dx);mont_dbl(t1,t2,t3,t4,bx,bz)}recip(t1,z[0],0);mul(dx,x[0],t1);pack(dx,Px);if(s!==null){x_to_y2(t2,t1,dx);recip(t3,z[1],0);mul(t2,x[1],t3);add(t2,t2,dx);add(t2,t2,C486671);sub(dx,dx,C9);sqr(t3,dx);mul(dx,t2,t3);sub(dx,dx,t1);sub(dx,
dx,C39420360);mul(t1,dx,BASE_R2Y);if(is_negative(t1)!==0)cpy32(s,k);else mula_small(s,ORDER_TIMES_8,0,k,32,-1);var temp1=new Array(32);var temp2=new Array(64);var temp3=new Array(64);cpy32(temp1,ORDER);cpy32(s,egcd32(temp2,temp3,s,temp1));if((s[31]&128)!==0)mula_small(s,s,0,ORDER,32,1)}}function sign(h,x,s){var w,i;var h1=new Array(32);var x1=new Array(32);var tmp1=new Array(64);var tmp2=new Array(64);cpy32(h1,h);cpy32(x1,x);var tmp3=new Array(32);divmod(tmp3,h1,32,ORDER,32);divmod(tmp3,x1,32,ORDER,
32);var v=new Array(32);mula_small(v,x1,0,h1,32,-1);mula_small(v,v,0,ORDER,32,1);mula32(tmp1,v,s,32,1);divmod(tmp2,tmp1,64,ORDER,32);for(w=0,i=0;i<32;i++)w|=v[i]=tmp1[i];return w!==0?v:undefined}function verify(v,h,P){var d=new Array(32);var p=[createUnpackedArray(),createUnpackedArray()];var s=[createUnpackedArray(),createUnpackedArray()];var yx=[createUnpackedArray(),createUnpackedArray(),createUnpackedArray()];var yz=[createUnpackedArray(),createUnpackedArray(),createUnpackedArray()];var t1=[createUnpackedArray(),
createUnpackedArray(),createUnpackedArray()];var t2=[createUnpackedArray(),createUnpackedArray(),createUnpackedArray()];var vi=0,hi=0,di=0,nvh=0,i,j,k;set(p[0],9);unpack(p[1],P);x_to_y2(t1[0],t2[0],p[1]);sqrt(t1[0],t2[0]);j=is_negative(t1[0]);add(t2[0],t2[0],C39420360);mul(t2[1],BASE_2Y,t1[0]);sub(t1[j],t2[0],t2[1]);add(t1[1-j],t2[0],t2[1]);cpy(t2[0],p[1]);sub(t2[0],t2[0],C9);sqr(t2[1],t2[0]);recip(t2[0],t2[1],0);mul(s[0],t1[0],t2[0]);sub(s[0],s[0],p[1]);sub(s[0],s[0],C486671);mul(s[1],t1[1],t2[0]);
sub(s[1],s[1],p[1]);sub(s[1],s[1],C486671);mul_small(s[0],s[0],1);mul_small(s[1],s[1],1);for(i=0;i<32;i++){vi=vi>>8^v[i]&255^(v[i]&255)<<1;hi=hi>>8^h[i]&255^(h[i]&255)<<1;nvh=~(vi^hi);di=nvh&(di&128)>>7^vi;di^=nvh&(di&1)<<1;di^=nvh&(di&2)<<1;di^=nvh&(di&4)<<1;di^=nvh&(di&8)<<1;di^=nvh&(di&16)<<1;di^=nvh&(di&32)<<1;di^=nvh&(di&64)<<1;d[i]=di&255}di=(nvh&(di&128)<<1^vi)>>8;set(yx[0],1);cpy(yx[1],p[di]);cpy(yx[2],s[0]);set(yz[0],0);set(yz[1],1);set(yz[2],1);vi=0;hi=0;for(i=32;i--!==0;){vi=vi<<8|v[i]&
255;hi=hi<<8|h[i]&255;di=di<<8|d[i]&255;for(j=8;j--!==0;){mont_prep(t1[0],t2[0],yx[0],yz[0]);mont_prep(t1[1],t2[1],yx[1],yz[1]);mont_prep(t1[2],t2[2],yx[2],yz[2]);k=((vi^vi>>1)>>j&1)+((hi^hi>>1)>>j&1);mont_dbl(yx[2],yz[2],t1[k],t2[k],yx[0],yz[0]);k=di>>j&2^(di>>j&1)<<1;mont_add(t1[1],t2[1],t1[k],t2[k],yx[1],yz[1],p[di>>j&1]);mont_add(t1[2],t2[2],t1[0],t2[0],yx[2],yz[2],s[((vi^hi)>>j&2)>>1])}}k=(vi&1)+(hi&1);recip(t1[0],yz[k],0);mul(t1[1],yx[k],t1[0]);var Y=[];pack(t1[1],Y);return Y}function keygen(k){var P=
[];var s=[];k=k||[];clamp(k);core(P,s,k,null);return{p:P,s:s,k:k}}return{sign:sign,verify:verify,keygen:keygen}}();curve25519_zero=function(){return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};curve25519_one=function(){return[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};curve25519_two=function(){return[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};curve25519_nine=function(){return[9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};curve25519_486671=function(){return[27919,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};curve25519_39420360=function(){return[33224,601,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};
curve25519_r2y=function(){return[5744,16384,61977,54121,8776,18501,26522,34893,23833,5823,55924,58749,24147,14085,13606,6080]};curve25519_2y=function(){return[22587,610,29883,44076,15515,9479,25859,56197,23910,4462,17831,16322,62102,36542,52412,16035]};curve25519_clamp=function(curve){curve[0]&=65528;curve[15]&=32767;curve[15]|=16384;return curve};curve25519_getbit=function(curve,c){return~~(curve[~~(c/16)]/Math.pow(2,c%16))%2};
curve25519_prime=[65535-18,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,32767];curve25519_order=[237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16];curve25519_order_times_8=[104,159,174,231,210,24,147,192,178,230,188,23,245,206,247,166,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128];curve25519_convertToByteArray=function(a){var b=new Int8Array(32);var i;for(i=0;i<16;i++){b[2*i]=a[i]&255;b[2*i+1]=a[i]>>8}return b};
curve25519_convertToShortArray=function(a){var b=new Array(16);var i,val1,val2;for(i=0;i<16;i++){val1=a[i*2];if(val1<0)val1+=256;val2=a[i*2+1];if(val2<0)val2+=256;b[i]=val1+val2*256}return b};curve25519_fillShortArray=function(src,dest){var i;for(i=0;i<16;i++)dest[i]=src[i]};curve25519_fillByteArray=function(src,dest){var i;for(i=0;i<32;i++)dest[i]=src[i]};curve25519_log16=function(text,a){var b=shortArray_to_hex_string(a);addText(text+b)};
curve25519_log32=function(text,a){var b=byteArray_to_hex_string(a);addText(text+b)};curve25519_cpy32=function(a){var b=new Int8Array(32);for(i=0;i<32;i++)b[i]=a[i];return b};curve25519_mula_small=function(p,q,m,x,n,z){var v=0;for(j=0;j<n;++j){v+=(q[j+m]&255)+z*(x[j]&255);p[j+m]=v&255;v>>=8}return v};
curve25519_mula32=function(p,x,y,t,z){var n=31;var w=0;for(i=0;i<t;i++){zy=z*(y[i]&255);w+=curve25519_mula_small(p,p,i,x,n,zy)+(p[i+n]&255)+zy*(x[n]&255);p[i+n]=w&255;w>>=8}p[i+n]=w+(p[i+n]&255)&255;return w>>8};
curve25519_divmod=function(q,r,n,d,t){var rn=0,z=0;var dt=(d[t-1]&255)<<8;if(t>1)dt|=d[t-2]&255;while(n-- >=t){z=rn<<16|(r[n]&255)<<8;if(n>0)z|=r[n-1]&255;z=parseInt(z/dt);rn+=curve25519_mula_small(r,r,n-t+1,d,t,-z);q[n-t+1]=z+rn&255;curve25519_mula_small(r,r,n-t+1,d,t,-rn);rn=r[n]&255;r[n]=0}r[t-1]=rn&255};curve25519_numsize=function(x,n){while(n--!=0&&x[n]==0);return n+1};
curve25519_egcd32=function(x,y,a,b){var an=0,bn=32,qn=0,i=0;for(i=0;i<32;i++)x[i]=y[i]=0;x[0]=1;an=curve25519_numsize(a,32);if(an==0)return y;temp=new Int8Array(32);while(true){qn=bn-an+1;curve25519_divmod(temp,b,bn,a,an);bn=curve25519_numsize(b,bn);if(bn==0)return x;curve25519_mula32(y,x,temp,qn,-1);qn=an-bn+1;curve25519_divmod(temp,a,an,b,bn);an=curve25519_numsize(a,an);if(an==0)return y;curve25519_mula32(x,y,temp,qn,-1)}};
curve25519_compare=function(a,b){var c;for(c=15;c>=0;c--){var x=a[c];var y=b[c];if(x>y)return 1;if(x<y)return-1}return 0};curve25519_cpy16=function(a){var r=new Array(16);var i;for(i=0;i<16;i++)r[i]=a[i];return r};curve25519_isNegative=function(x){return x[0]&1};curve25519_isOverflow=function(x){if(x[15]>=32768)return 1;if(x[0]>=65536){var i;for(i=1;i<15;i++)if(x[i]<65535)return 0;return 1}else return 0};
curve25519_sqr8h=function(r,a7,a6,a5,a4,a3,a2,a1,a0){var v=0;r[0]=(v=a0*a0)&65535;r[1]=(v=~~(v/65536)+2*a0*a1)&65535;r[2]=(v=~~(v/65536)+2*a0*a2+a1*a1)&65535;r[3]=(v=~~(v/65536)+2*a0*a3+2*a1*a2)&65535;r[4]=(v=~~(v/65536)+2*a0*a4+2*a1*a3+a2*a2)&65535;r[5]=(v=~~(v/65536)+2*a0*a5+2*a1*a4+2*a2*a3)&65535;r[6]=(v=~~(v/65536)+2*a0*a6+2*a1*a5+2*a2*a4+a3*a3)&65535;r[7]=(v=~~(v/65536)+2*a0*a7+2*a1*a6+2*a2*a5+2*a3*a4)&65535;r[8]=(v=~~(v/65536)+2*a1*a7+2*a2*a6+2*a3*a5+a4*a4)&65535;r[9]=(v=~~(v/65536)+2*a2*a7+
2*a3*a6+2*a4*a5)&65535;r[10]=(v=~~(v/65536)+2*a3*a7+2*a4*a6+a5*a5)&65535;r[11]=(v=~~(v/65536)+2*a4*a7+2*a5*a6)&65535;r[12]=(v=~~(v/65536)+2*a5*a7+a6*a6)&65535;r[13]=(v=~~(v/65536)+2*a6*a7)&65535;r[14]=(v=~~(v/65536)+a7*a7)&65535;r[15]=~~(v/65536)};
curve25519_sqrmodp=function(r,a){var x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];curve25519_sqr8h(x,a[15],a[14],a[13],a[12],a[11],a[10],a[9],a[8]);curve25519_sqr8h(z,a[7],a[6],a[5],a[4],a[3],a[2],a[1],a[0]);curve25519_sqr8h(y,a[15]+a[7],a[14]+a[6],a[13]+a[5],a[12]+a[4],a[11]+a[3],a[10]+a[2],a[9]+a[1],a[8]+a[0]);var v=0;r[0]=(v=8388608+z[0]+(y[8]-x[8]-z[8]+x[0]-128)*38)&65535;r[1]=(v=8388480+~~(v/65536)+z[1]+(y[9]-x[9]-z[9]+x[1])*
38)&65535;r[2]=(v=8388480+~~(v/65536)+z[2]+(y[10]-x[10]-z[10]+x[2])*38)&65535;r[3]=(v=8388480+~~(v/65536)+z[3]+(y[11]-x[11]-z[11]+x[3])*38)&65535;r[4]=(v=8388480+~~(v/65536)+z[4]+(y[12]-x[12]-z[12]+x[4])*38)&65535;r[5]=(v=8388480+~~(v/65536)+z[5]+(y[13]-x[13]-z[13]+x[5])*38)&65535;r[6]=(v=8388480+~~(v/65536)+z[6]+(y[14]-x[14]-z[14]+x[6])*38)&65535;r[7]=(v=8388480+~~(v/65536)+z[7]+(y[15]-x[15]-z[15]+x[7])*38)&65535;r[8]=(v=8388480+~~(v/65536)+z[8]+y[0]-x[0]-z[0]+x[8]*38)&65535;r[9]=(v=8388480+~~(v/
65536)+z[9]+y[1]-x[1]-z[1]+x[9]*38)&65535;r[10]=(v=8388480+~~(v/65536)+z[10]+y[2]-x[2]-z[2]+x[10]*38)&65535;r[11]=(v=8388480+~~(v/65536)+z[11]+y[3]-x[3]-z[3]+x[11]*38)&65535;r[12]=(v=8388480+~~(v/65536)+z[12]+y[4]-x[4]-z[4]+x[12]*38)&65535;r[13]=(v=8388480+~~(v/65536)+z[13]+y[5]-x[5]-z[5]+x[13]*38)&65535;r[14]=(v=8388480+~~(v/65536)+z[14]+y[6]-x[6]-z[6]+x[14]*38)&65535;r[15]=8388480+~~(v/65536)+z[15]+y[7]-x[7]-z[7]+x[15]*38;curve25519_reduce(r)};
curve25519_mul8h=function(r,a7,a6,a5,a4,a3,a2,a1,a0,b7,b6,b5,b4,b3,b2,b1,b0){var v=0;r[0]=(v=a0*b0)&65535;r[1]=(v=~~(v/65536)+a0*b1+a1*b0)&65535;r[2]=(v=~~(v/65536)+a0*b2+a1*b1+a2*b0)&65535;r[3]=(v=~~(v/65536)+a0*b3+a1*b2+a2*b1+a3*b0)&65535;r[4]=(v=~~(v/65536)+a0*b4+a1*b3+a2*b2+a3*b1+a4*b0)&65535;r[5]=(v=~~(v/65536)+a0*b5+a1*b4+a2*b3+a3*b2+a4*b1+a5*b0)&65535;r[6]=(v=~~(v/65536)+a0*b6+a1*b5+a2*b4+a3*b3+a4*b2+a5*b1+a6*b0)&65535;r[7]=(v=~~(v/65536)+a0*b7+a1*b6+a2*b5+a3*b4+a4*b3+a5*b2+a6*b1+a7*b0)&65535;
r[8]=(v=~~(v/65536)+a1*b7+a2*b6+a3*b5+a4*b4+a5*b3+a6*b2+a7*b1)&65535;r[9]=(v=~~(v/65536)+a2*b7+a3*b6+a4*b5+a5*b4+a6*b3+a7*b2)&65535;r[10]=(v=~~(v/65536)+a3*b7+a4*b6+a5*b5+a6*b4+a7*b3)&65535;r[11]=(v=~~(v/65536)+a4*b7+a5*b6+a6*b5+a7*b4)&65535;r[12]=(v=~~(v/65536)+a5*b7+a6*b6+a7*b5)&65535;r[13]=(v=~~(v/65536)+a6*b7+a7*b6)&65535;r[14]=(v=~~(v/65536)+a7*b7)&65535;r[15]=~~(v/65536)};
curve25519_mulmodp=function(r,a,b){var x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];curve25519_mul8h(x,a[15],a[14],a[13],a[12],a[11],a[10],a[9],a[8],b[15],b[14],b[13],b[12],b[11],b[10],b[9],b[8]);curve25519_mul8h(z,a[7],a[6],a[5],a[4],a[3],a[2],a[1],a[0],b[7],b[6],b[5],b[4],b[3],b[2],b[1],b[0]);curve25519_mul8h(y,a[15]+a[7],a[14]+a[6],a[13]+a[5],a[12]+a[4],a[11]+a[3],a[10]+a[2],a[9]+a[1],a[8]+a[0],b[15]+b[7],b[14]+b[6],b[13]+b[5],
b[12]+b[4],b[11]+b[3],b[10]+b[2],b[9]+b[1],b[8]+b[0]);var v=0;r[0]=(v=8388608+z[0]+(y[8]-x[8]-z[8]+x[0]-128)*38)&65535;r[1]=(v=8388480+~~(v/65536)+z[1]+(y[9]-x[9]-z[9]+x[1])*38)&65535;r[2]=(v=8388480+~~(v/65536)+z[2]+(y[10]-x[10]-z[10]+x[2])*38)&65535;r[3]=(v=8388480+~~(v/65536)+z[3]+(y[11]-x[11]-z[11]+x[3])*38)&65535;r[4]=(v=8388480+~~(v/65536)+z[4]+(y[12]-x[12]-z[12]+x[4])*38)&65535;r[5]=(v=8388480+~~(v/65536)+z[5]+(y[13]-x[13]-z[13]+x[5])*38)&65535;r[6]=(v=8388480+~~(v/65536)+z[6]+(y[14]-x[14]-
z[14]+x[6])*38)&65535;r[7]=(v=8388480+~~(v/65536)+z[7]+(y[15]-x[15]-z[15]+x[7])*38)&65535;r[8]=(v=8388480+~~(v/65536)+z[8]+y[0]-x[0]-z[0]+x[8]*38)&65535;r[9]=(v=8388480+~~(v/65536)+z[9]+y[1]-x[1]-z[1]+x[9]*38)&65535;r[10]=(v=8388480+~~(v/65536)+z[10]+y[2]-x[2]-z[2]+x[10]*38)&65535;r[11]=(v=8388480+~~(v/65536)+z[11]+y[3]-x[3]-z[3]+x[11]*38)&65535;r[12]=(v=8388480+~~(v/65536)+z[12]+y[4]-x[4]-z[4]+x[12]*38)&65535;r[13]=(v=8388480+~~(v/65536)+z[13]+y[5]-x[5]-z[5]+x[13]*38)&65535;r[14]=(v=8388480+~~(v/
65536)+z[14]+y[6]-x[6]-z[6]+x[14]*38)&65535;r[15]=8388480+~~(v/65536)+z[15]+y[7]-x[7]-z[7]+x[15]*38;curve25519_reduce(r)};
curve25519_mulasmall=function(r,a,m){var v=0;r[0]=(v=a[0]*m)&65535;r[1]=(v=~~(v/65536)+a[1]*m)&65535;r[2]=(v=~~(v/65536)+a[2]*m)&65535;r[3]=(v=~~(v/65536)+a[3]*m)&65535;r[4]=(v=~~(v/65536)+a[4]*m)&65535;r[5]=(v=~~(v/65536)+a[5]*m)&65535;r[6]=(v=~~(v/65536)+a[6]*m)&65535;r[7]=(v=~~(v/65536)+a[7]*m)&65535;r[8]=(v=~~(v/65536)+a[8]*m)&65535;r[9]=(v=~~(v/65536)+a[9]*m)&65535;r[10]=(v=~~(v/65536)+a[10]*m)&65535;r[11]=(v=~~(v/65536)+a[11]*m)&65535;r[12]=(v=~~(v/65536)+a[12]*m)&65535;r[13]=(v=~~(v/65536)+
a[13]*m)&65535;r[14]=(v=~~(v/65536)+a[14]*m)&65535;r[15]=~~(v/65536)+a[15]*m;curve25519_reduce(r)};
curve25519_addmodp=function(r,a,b){var v=0;r[0]=(v=(~~(a[15]/32768)+~~(b[15]/32768))*19+a[0]+b[0])&65535;r[1]=(v=~~(v/65536)+a[1]+b[1])&65535;r[2]=(v=~~(v/65536)+a[2]+b[2])&65535;r[3]=(v=~~(v/65536)+a[3]+b[3])&65535;r[4]=(v=~~(v/65536)+a[4]+b[4])&65535;r[5]=(v=~~(v/65536)+a[5]+b[5])&65535;r[6]=(v=~~(v/65536)+a[6]+b[6])&65535;r[7]=(v=~~(v/65536)+a[7]+b[7])&65535;r[8]=(v=~~(v/65536)+a[8]+b[8])&65535;r[9]=(v=~~(v/65536)+a[9]+b[9])&65535;r[10]=(v=~~(v/65536)+a[10]+b[10])&65535;r[11]=(v=~~(v/65536)+a[11]+
b[11])&65535;r[12]=(v=~~(v/65536)+a[12]+b[12])&65535;r[13]=(v=~~(v/65536)+a[13]+b[13])&65535;r[14]=(v=~~(v/65536)+a[14]+b[14])&65535;r[15]=~~(v/65536)+a[15]%32768+b[15]%32768};
curve25519_submodp=function(r,a,b){var v=0;r[0]=(v=524288+(~~(a[15]/32768)-~~(b[15]/32768)-1)*19+a[0]-b[0])&65535;r[1]=(v=~~(v/65536)+524280+a[1]-b[1])&65535;r[2]=(v=~~(v/65536)+524280+a[2]-b[2])&65535;r[3]=(v=~~(v/65536)+524280+a[3]-b[3])&65535;r[4]=(v=~~(v/65536)+524280+a[4]-b[4])&65535;r[5]=(v=~~(v/65536)+524280+a[5]-b[5])&65535;r[6]=(v=~~(v/65536)+524280+a[6]-b[6])&65535;r[7]=(v=~~(v/65536)+524280+a[7]-b[7])&65535;r[8]=(v=~~(v/65536)+524280+a[8]-b[8])&65535;r[9]=(v=~~(v/65536)+524280+a[9]-b[9])&
65535;r[10]=(v=~~(v/65536)+524280+a[10]-b[10])&65535;r[11]=(v=~~(v/65536)+524280+a[11]-b[11])&65535;r[12]=(v=~~(v/65536)+524280+a[12]-b[12])&65535;r[13]=(v=~~(v/65536)+524280+a[13]-b[13])&65535;r[14]=(v=~~(v/65536)+524280+a[14]-b[14])&65535;r[15]=~~(v/65536)+32760+a[15]%32768-b[15]%32768};
curve25519_invmodp=function(r,a,sqrtassist){var r1=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var r2=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var r3=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var r4=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var r5=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var i=0;curve25519_sqrmodp(r2,a);curve25519_sqrmodp(r3,r2);curve25519_sqrmodp(r1,r3);curve25519_mulmodp(r3,r1,a);curve25519_mulmodp(r1,r3,r2);curve25519_sqrmodp(r2,r1);curve25519_mulmodp(r4,r2,r3);curve25519_sqrmodp(r2,r4);curve25519_sqrmodp(r3,r2);curve25519_sqrmodp(r2,
r3);curve25519_sqrmodp(r3,r2);curve25519_sqrmodp(r2,r3);curve25519_mulmodp(r3,r2,r4);curve25519_sqrmodp(r2,r3);curve25519_sqrmodp(r4,r2);for(i=1;i<5;i++){curve25519_sqrmodp(r2,r4);curve25519_sqrmodp(r4,r2)}curve25519_mulmodp(r2,r4,r3);curve25519_sqrmodp(r4,r2);curve25519_sqrmodp(r5,r4);for(i=1;i<10;i++){curve25519_sqrmodp(r4,r5);curve25519_sqrmodp(r5,r4)}curve25519_mulmodp(r4,r5,r2);for(i=0;i<5;i++){curve25519_sqrmodp(r2,r4);curve25519_sqrmodp(r4,r2)}curve25519_mulmodp(r2,r4,r3);curve25519_sqrmodp(r3,
r2);curve25519_sqrmodp(r4,r3);for(i=1;i<25;i++){curve25519_sqrmodp(r3,r4);curve25519_sqrmodp(r4,r3)}curve25519_mulmodp(r3,r4,r2);curve25519_sqrmodp(r4,r3);curve25519_sqrmodp(r5,r4);for(i=1;i<50;i++){curve25519_sqrmodp(r4,r5);curve25519_sqrmodp(r5,r4)}curve25519_mulmodp(r4,r5,r3);for(i=0;i<25;i++){curve25519_sqrmodp(r5,r4);curve25519_sqrmodp(r4,r5)}curve25519_mulmodp(r3,r4,r2);curve25519_sqrmodp(r2,r3);curve25519_sqrmodp(r3,r2);if(sqrtassist==1)curve25519_mulmodp(r,a,r3);else{curve25519_sqrmodp(r2,
r3);curve25519_sqrmodp(r3,r2);curve25519_sqrmodp(r2,r3);curve25519_mulmodp(r,r2,r1)}};curve25519_sqrtmodp=function(r,x){var r1=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var r2=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var r3=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var r4=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];curve25519_addmodp(r1,x,x);curve25519_invmodp(r2,r1,1);curve25519_sqrmodp(r3,r2);curve25519_mulmodp(r4,r1,r3);curve25519_submodp(r,r4,curve25519_one());curve25519_mulmodp(r1,r2,r);curve25519_mulmodp(r,x,r1)};
curve25519_reduce=function(a){curve25519_reduce2(a);if(a[15]!=32767||(a[14]!=65535||(a[13]!=65535||(a[12]!=65535||(a[11]!=65535||(a[10]!=65535||(a[9]!=65535||(a[8]!=65535||(a[7]!=65535||(a[6]!=65535||(a[5]!=65535||(a[4]!=65535||(a[3]!=65535||(a[2]!=65535||(a[1]!=65535||a[0]<65517)))))))))))))))return;var i;for(i=1;i<16;i++)a[i]=0;a[0]=a[0]-65517};
curve25519_reduce2=function(a){var v=a[15];if(v<32768)return;a[15]=v%32768;v=~~(v/32768)*19;a[0]=(v+=a[0])&65535;if((v=~~(v/65536))<1)return;a[1]=(v+=a[1])&65535;if((v=~~(v/65536))<1)return;a[2]=(v+=a[2])&65535;if((v=~~(v/65536))<1)return;a[3]=(v+=a[3])&65535;if((v=~~(v/65536))<1)return;a[4]=(v+=a[4])&65535;if((v=~~(v/65536))<1)return;a[5]=(v+=a[5])&65535;if((v=~~(v/65536))<1)return;a[6]=(v+=a[6])&65535;if((v=~~(v/65536))<1)return;a[7]=(v+=a[7])&65535;if((v=~~(v/65536))<1)return;a[8]=(v+=a[8])&65535;
if((v=~~(v/65536))<1)return;a[9]=(v+=a[9])&65535;if((v=~~(v/65536))<1)return;a[10]=(v+=a[10])&65535;if((v=~~(v/65536))<1)return;a[11]=(v+=a[11])&65535;if((v=~~(v/65536))<1)return;a[12]=(v+=a[12])&65535;if((v=~~(v/65536))<1)return;a[13]=(v+=a[13])&65535;if((v=~~(v/65536))<1)return;a[14]=(v+=a[14])&65535;if((v=~~(v/65536))<1)return;a[15]+=v};
curve25519_x_to_y2=function(r,x){var r1=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var r2=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];curve25519_sqrmodp(r1,x);curve25519_mulasmall(r2,x,486662);curve25519_addmodp(r,r1,r2);curve25519_addmodp(r1,r,curve25519_one());curve25519_mulmodp(r,r1,x)};curve25519_prep=function(r,s,a,b){curve25519_addmodp(r,a,b);curve25519_submodp(s,a,b)};
curve25519_dbl=function(r,s,t1,t2){var r1=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var r2=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var r3=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var r4=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];curve25519_sqrmodp(r1,t1);curve25519_sqrmodp(r2,t2);curve25519_submodp(r3,r1,r2);curve25519_mulmodp(r,r2,r1);curve25519_mulasmall(r2,r3,121665);curve25519_addmodp(r4,r2,r1);curve25519_mulmodp(s,r4,r3)};
function curve25519_sum(r,s,t1,t2,t3,t4,x_1){var r1=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var r2=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var r3=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var r4=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];curve25519_mulmodp(r1,t2,t3);curve25519_mulmodp(r2,t1,t4);curve25519_addmodp(r3,r1,r2);curve25519_submodp(r4,r1,r2);curve25519_sqrmodp(r,r3);curve25519_sqrmodp(r1,r4);curve25519_mulmodp(s,r1,x_1)}
function curve25519_(f,c,s){var j,a,x_1,q,fb,counter=0;var t=new Array(16),t1=new Array(16),t2=new Array(16),t3=new Array(16),t4=new Array(16);var sb=new Int8Array(32);var temp1=new Int8Array(32);var temp2=new Int8Array(64);var temp3=new Int8Array(64);x_1=c;q=[curve25519_one(),curve25519_zero()];a=[x_1,curve25519_one()];var n=255;var r0=new Array(new Array(16),new Array(16));var r1=new Array(new Array(16),new Array(16));var t1=new Array(16),t2=new Array(16);var t3=new Array(16),t4=new Array(16);var fi;
while(n>=0){fi=curve25519_getbit(f,n);if(fi==0){curve25519_prep(t1,t2,a[0],a[1]);curve25519_prep(t3,t4,q[0],q[1]);curve25519_sum(r1[0],r1[1],t1,t2,t3,t4,x_1);curve25519_dbl(r0[0],r0[1],t3,t4)}else{curve25519_prep(t1,t2,q[0],q[1]);curve25519_prep(t3,t4,a[0],a[1]);curve25519_sum(r0[0],r0[1],t1,t2,t3,t4,x_1);curve25519_dbl(r1[0],r1[1],t3,t4)}q=r0;a=r1;n--}curve25519_invmodp(t,q[1],0);curve25519_mulmodp(t1,q[0],t);q[0]=curve25519_cpy16(t1);if(s!=null){t=curve25519_cpy16(q[0]);curve25519_x_to_y2(t1,t);
curve25519_invmodp(t3,a[1],0);curve25519_mulmodp(t2,a[0],t3);curve25519_addmodp(t4,t2,t);curve25519_addmodp(t2,t4,curve25519_486671());curve25519_submodp(t4,t,curve25519_nine());curve25519_sqrmodp(t3,t4);curve25519_mulmodp(t4,t2,t3);curve25519_submodp(t,t4,t1);curve25519_submodp(t4,t,curve25519_39420360());curve25519_mulmodp(t1,t4,curve25519_r2y());fb=curve25519_convertToByteArray(f);j=curve25519_isNegative(t1);if(j!=0)sb=curve25519_cpy32(fb);else curve25519_mula_small(sb,curve25519_order_times_8,
0,fb,32,-1);temp1=curve25519_cpy32(curve25519_order);temp1=curve25519_egcd32(temp2,temp3,sb,temp1);sb=curve25519_cpy32(temp1);if((sb[31]&128)!=0)curve25519_mula_small(sb,sb,0,curve25519_order,32,1);var stmp=curve25519_convertToShortArray(sb);curve25519_fillShortArray(stmp,s)}return q[0]}curve25519_keygen=function(s,curve){curve25519_clamp(curve);return curve25519_(curve,curve25519_nine(),s)};
curve25519_sign=function(v,h,x,s){tmp1=new Int8Array(65);tmp2=new Int8Array(33);for(i=0;i<32;i++)v[i]=0;curve25519_mula_small(v,x,0,h,32,-1);curve25519_mula_small(v,v,0,curve25519_order,32,parseInt((15-v[31])/16));curve25519_mula32(tmp1,v,s,32,1);curve25519_divmod(tmp2,tmp1,64,curve25519_order,32);w=0;for(k=0;k<32;k++){v[k]=tmp1[k];w|=v[k]}return w!=0};
curve25519_verify=function(Y,v,h,P){d=new Int8Array(32);yx=new Array(new Array(16),new Array(16),new Array(16));yz=new Array(new Array(16),new Array(16),new Array(16));var s=new Array(new Array(16),new Array(16));var q=new Array(new Array(16),new Array(16));var t1=new Array(new Array(16),new Array(16),new Array(16));var t2=new Array(new Array(16),new Array(16),new Array(16));var vi=0,hi=0,di=0,nvh=0,i=0,j=0,k=0,counter=1;var p=[curve25519_nine(),curve25519_convertToShortArray(P)];curve25519_x_to_y2(q[0],
p[1]);curve25519_sqrtmodp(t1[0],q[0]);j=curve25519_isNegative(t1[0]);curve25519_addmodp(t2[0],q[0],curve25519_39420360());curve25519_mulmodp(t2[1],curve25519_2y(),t1[0]);curve25519_submodp(t1[j],t2[0],t2[1]);curve25519_addmodp(t1[1-j],t2[0],t2[1]);q[0]=curve25519_cpy16(p[1]);curve25519_submodp(t2[0],q[0],curve25519_nine());curve25519_sqrmodp(t2[1],t2[0]);curve25519_invmodp(t2[0],t2[1],0);curve25519_mulmodp(q[0],t1[0],t2[0]);curve25519_submodp(q[1],q[0],p[1]);curve25519_submodp(s[0],q[1],curve25519_486671());
curve25519_mulmodp(q[0],t1[1],t2[0]);curve25519_submodp(q[1],q[0],p[1]);curve25519_submodp(s[1],q[1],curve25519_486671());for(i=0;i<32;i++){vi=vi>>8^v[i]&255^(v[i]&255)<<1;hi=hi>>8^h[i]&255^(h[i]&255)<<1;nvh=~(vi^hi);di=nvh&(di&128)>>7^vi;di^=nvh&(di&1)<<1;di^=nvh&(di&2)<<1;di^=nvh&(di&4)<<1;di^=nvh&(di&8)<<1;di^=nvh&(di&16)<<1;di^=nvh&(di&32)<<1;di^=nvh&(di&64)<<1;d[i]=di&255}di=(nvh&(di&128)<<1^vi)>>8;yx[0]=curve25519_cpy16(curve25519_one());yx[1]=curve25519_cpy16(p[di]);yx[2]=curve25519_cpy16(s[0]);
yz[0]=curve25519_cpy16(curve25519_zero());yz[1]=curve25519_cpy16(curve25519_one());yz[2]=curve25519_cpy16(curve25519_one());vi=0;hi=0;for(i=32;i--!=0;i=i){vi=vi<<8|v[i]&255;hi=hi<<8|h[i]&255;di=di<<8|d[i]&255;for(j=8;j--!=0;j=j){k=((vi^vi>>1)>>j&1)+((hi^hi>>1)>>j&1);curve25519_prep(t1[0],t2[0],yx[0],yz[0]);curve25519_prep(t1[1],t2[1],yx[1],yz[1]);curve25519_prep(t1[2],t2[2],yx[2],yz[2]);curve25519_dbl(yx[0],yz[0],t1[k],t2[k]);k=di>>j&2^(di>>j&1)<<1;curve25519_sum(yx[1],yz[1],t1[1],t2[1],t1[k],t2[k],
p[di>>j&1]);curve25519_sum(yx[2],yz[2],t1[2],t2[2],t1[0],t2[0],s[((vi^hi)>>j&2)>>1])}}k=(vi&1)+(hi&1);curve25519_invmodp(t1[0],yz[k],0);curve25519_mulmodp(t1[1],yx[k],t1[0]);var YY=curve25519_convertToByteArray(t1[1]);curve25519_fillByteArray(YY,Y)};function fileSlice(file,start,length){var end=length+start;if(file.slice)return file.slice(start,end);else if(file.mozSlice)return file.mozSlice(start,end);else if(file.webkitSlice)return file.webkitSlice(start,end)}
self.onmessage=function(event){var file=event.data.file;var reader=new FileReaderSync;var offset=0;sha256_init();while(offset<file.size){var data=reader.readAsBinaryString(fileSlice(file,offset,1024*1024));sha256_update(data,data.length);offset+=1024*1024;self.postMessage({progress:Math.round(offset/file.size*100)})}sha256_final();self.postMessage({sha256:sha256_encode_hex()});self.close()};function rotateRight(n,x){return x>>>n|x<<32-n}function choice(x,y,z){return x&y^~x&z}
function majority(x,y,z){return x&y^x&z^y&z}function sha256_Sigma0(x){return rotateRight(2,x)^rotateRight(13,x)^rotateRight(22,x)}function sha256_Sigma1(x){return rotateRight(6,x)^rotateRight(11,x)^rotateRight(25,x)}function sha256_sigma0(x){return rotateRight(7,x)^rotateRight(18,x)^x>>>3}function sha256_sigma1(x){return rotateRight(17,x)^rotateRight(19,x)^x>>>10}function sha256_expand(W,j){return W[j&15]+=sha256_sigma1(W[j+14&15])+W[j+9&15]+sha256_sigma0(W[j+1&15])}
var K256=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,
3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298);var ihash,count,buffer;var sha256_hex_digits="0123456789abcdef";function safe_add(x,y){var lsw=(x&65535)+(y&65535);var msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}
function sha256_init(){ihash=new Array(8);count=new Array(2);buffer=new Array(64);count[0]=count[1]=0;ihash[0]=1779033703;ihash[1]=3144134277;ihash[2]=1013904242;ihash[3]=2773480762;ihash[4]=1359893119;ihash[5]=2600822924;ihash[6]=528734635;ihash[7]=1541459225}
function sha256_transform(){var a,b,c,d,e,f,g,h,T1,T2;var W=new Array(16);a=ihash[0];b=ihash[1];c=ihash[2];d=ihash[3];e=ihash[4];f=ihash[5];g=ihash[6];h=ihash[7];for(var i=0;i<16;i++)W[i]=buffer[(i<<2)+3]|buffer[(i<<2)+2]<<8|buffer[(i<<2)+1]<<16|buffer[i<<2]<<24;for(var j=0;j<64;j++){T1=h+sha256_Sigma1(e)+choice(e,f,g)+K256[j];if(j<16)T1+=W[j];else T1+=sha256_expand(W,j);T2=sha256_Sigma0(a)+majority(a,b,c);h=g;g=f;f=e;e=safe_add(d,T1);d=c;c=b;b=a;a=safe_add(T1,T2)}ihash[0]+=a;ihash[1]+=b;ihash[2]+=
c;ihash[3]+=d;ihash[4]+=e;ihash[5]+=f;ihash[6]+=g;ihash[7]+=h}function sha256_update(data,inputLen){var i,index,curpos=0;index=count[0]>>3&63;var remainder=inputLen&63;if((count[0]+=inputLen<<3)<inputLen<<3)count[1]++;count[1]+=inputLen>>29;for(i=0;i+63<inputLen;i+=64){for(var j=index;j<64;j++)buffer[j]=data.charCodeAt(curpos++);sha256_transform();index=0}for(var j=0;j<remainder;j++)buffer[j]=data.charCodeAt(curpos++)}
function sha256_final(){var index=count[0]>>3&63;buffer[index++]=128;if(index<=56)for(var i=index;i<56;i++)buffer[i]=0;else{for(var i=index;i<64;i++)buffer[i]=0;sha256_transform();for(var i=0;i<56;i++)buffer[i]=0}buffer[56]=count[1]>>>24&255;buffer[57]=count[1]>>>16&255;buffer[58]=count[1]>>>8&255;buffer[59]=count[1]&255;buffer[60]=count[0]>>>24&255;buffer[61]=count[0]>>>16&255;buffer[62]=count[0]>>>8&255;buffer[63]=count[0]&255;sha256_transform()}
function sha256_encode_bytes(){var j=0;var output=new Array(32);for(var i=0;i<8;i++){output[j++]=ihash[i]>>>24&255;output[j++]=ihash[i]>>>16&255;output[j++]=ihash[i]>>>8&255;output[j++]=ihash[i]&255}return output}function sha256_encode_hex(){var output=new String;for(var i=0;i<8;i++)for(var j=28;j>=0;j-=4)output+=sha256_hex_digits.charAt(ihash[i]>>>j&15);return output}function sha256_digest(data){sha256_init();sha256_update(data,data.length);sha256_final();return sha256_encode_hex()};var converters=function(){var charToNibble={};var nibbleToChar=[];var i;for(i=0;i<=9;++i){var character=i.toString();charToNibble[character]=i;nibbleToChar.push(character)}for(i=10;i<=15;++i){var lowerChar=String.fromCharCode("a".charCodeAt(0)+i-10);var upperChar=String.fromCharCode("A".charCodeAt(0)+i-10);charToNibble[lowerChar]=i;charToNibble[upperChar]=i;nibbleToChar.push(lowerChar)}return{byteArrayToHexString:function(bytes){var str="";for(var i=0;i<bytes.length;++i){if(bytes[i]<0)bytes[i]+=256;
str+=nibbleToChar[bytes[i]>>4]+nibbleToChar[bytes[i]&15]}return str},stringToByteArray:function(str){str=unescape(encodeURIComponent(str));var bytes=new Array(str.length);for(var i=0;i<str.length;++i)bytes[i]=str.charCodeAt(i);return bytes},hexStringToByteArray:function(str){var bytes=[];var i=0;if(0!==str.length%2){bytes.push(charToNibble[str.charAt(0)]);++i}for(;i<str.length-1;i+=2)bytes.push((charToNibble[str.charAt(i)]<<4)+charToNibble[str.charAt(i+1)]);return bytes},stringToHexString:function(str){return this.byteArrayToHexString(this.stringToByteArray(str))},
hexStringToString:function(hex){return this.byteArrayToString(this.hexStringToByteArray(hex))},checkBytesToIntInput:function(bytes,numBytes,opt_startIndex){var startIndex=opt_startIndex||0;if(startIndex<0)throw new Error("Start index should not be negative");if(bytes.length<startIndex+numBytes)throw new Error("Need at least "+numBytes+" bytes to convert to an integer");return startIndex},byteArrayToSignedShort:function(bytes,opt_startIndex){var index=this.checkBytesToIntInput(bytes,2,opt_startIndex);
var value=bytes[index];value+=bytes[index+1]<<8;return value},byteArrayToSignedInt32:function(bytes,opt_startIndex){var index=this.checkBytesToIntInput(bytes,4,opt_startIndex);value=bytes[index];value+=bytes[index+1]<<8;value+=bytes[index+2]<<16;value+=bytes[index+3]<<24;return value},byteArrayToBigInteger:function(bytes,opt_startIndex){var index=this.checkBytesToIntInput(bytes,8,opt_startIndex);var value=new BigInteger("0",10);var temp1,temp2;for(var i=7;i>=0;i--){temp1=value.multiply(new BigInteger("256",
10));temp2=temp1.add(new BigInteger(bytes[opt_startIndex+i].toString(10),10));value=temp2}return value},byteArrayToWordArray:function(byteArray){var i=0,offset=0,word=0,len=byteArray.length;var words=new Uint32Array((len/4|0)+(len%4==0?0:1));while(i<len-len%4)words[offset++]=byteArray[i++]<<24|byteArray[i++]<<16|byteArray[i++]<<8|byteArray[i++];if(len%4!=0){word=byteArray[i++]<<24;if(len%4>1)word=word|byteArray[i++]<<16;if(len%4>2)word=word|byteArray[i++]<<8;words[offset]=word}var wordArray=new Object;
wordArray.sigBytes=len;wordArray.words=words;return wordArray},wordArrayToByteArray:function(wordArray){var len=wordArray.words.length;if(len==0)return new Array(0);var byteArray=new Array(wordArray.sigBytes);var offset=0,word,i;for(i=0;i<len-1;i++){word=wordArray.words[i];byteArray[offset++]=word>>24;byteArray[offset++]=word>>16&255;byteArray[offset++]=word>>8&255;byteArray[offset++]=word&255}word=wordArray.words[len-1];byteArray[offset++]=word>>24;if(wordArray.sigBytes%4==0){byteArray[offset++]=
word>>16&255;byteArray[offset++]=word>>8&255;byteArray[offset++]=word&255}if(wordArray.sigBytes%4>1)byteArray[offset++]=word>>16&255;if(wordArray.sigBytes%4>2)byteArray[offset++]=word>>8&255;return byteArray},byteArrayToString:function(bytes,opt_startIndex,length){if(length==0)return"";if(opt_startIndex&&length){var index=this.checkBytesToIntInput(bytes,parseInt(length,10),parseInt(opt_startIndex,10));bytes=bytes.slice(opt_startIndex,opt_startIndex+length)}return decodeURIComponent(escape(String.fromCharCode.apply(null,
bytes)))},byteArrayToShortArray:function(byteArray){var shortArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var i;for(i=0;i<16;i++)shortArray[i]=byteArray[i*2]|byteArray[i*2+1]<<8;return shortArray},shortArrayToByteArray:function(shortArray){var byteArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var i;for(i=0;i<16;i++){byteArray[2*i]=shortArray[i]&255;byteArray[2*i+1]=shortArray[i]>>8}return byteArray},shortArrayToHexString:function(ary){var res="";for(var i=0;i<ary.length;i++)res+=
nibbleToChar[ary[i]>>4&15]+nibbleToChar[ary[i]&15]+nibbleToChar[ary[i]>>12&15]+nibbleToChar[ary[i]>>8&15];return res},intToBytes_:function(x,numBytes,unsignedMax,opt_bigEndian){var signedMax=Math.floor(unsignedMax/2);var negativeMax=(signedMax+1)*-1;if(x!=Math.floor(x)||(x<negativeMax||x>unsignedMax))throw new Error(x+" is not a "+numBytes*8+" bit integer");var bytes=[];var current;var numberType=x>=0&&x<=signedMax?0:x>signedMax&&x<=unsignedMax?1:2;if(numberType==2)x=x*-1-1;for(var i=0;i<numBytes;i++){if(numberType==
2)current=255-x%256;else current=x%256;if(opt_bigEndian)bytes.unshift(current);else bytes.push(current);if(numberType==1)x=Math.floor(x/256);else x=x>>8}return bytes},int32ToBytes:function(x,opt_bigEndian){return converters.intToBytes_(x,4,4294967295,opt_bigEndian)}}}();var __entityMap={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#39;","/":"\x26#x2F;"};String.prototype.escapeHTML=function(){return String(this).replace(/[&<>"'\/]/g,function(s){return __entityMap[s]})};String.prototype.unescapeHTML=function(){return String(this).replace("\x26amp;","\x26").replace("\x26lt;","\x3c").replace("\x26gt;","\x3e").replace("\x26quot;",'"').replace("\x26#39;","'").replace("\x26#x2F;","/")};
String.prototype.nl2br=function(){return String(this).replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1\x3cbr /\x3e$2")};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};Number.prototype.pad=function(size){var s=String(this);if(typeof size!=="number")size=2;while(s.length<size)s="0"+s;return s};
if(typeof Object.keys!=="function")(function(){Object.keys=Object_keys;function Object_keys(obj){var keys=[],name;for(name in obj)if(obj.hasOwnProperty(name))keys.push(name);return keys}})();$.fn.hasAttr=function(name){var attr=this.attr(name);return attr!==undefined&&attr!==false};
(function(){var autoLink,__slice=[].slice;autoLink=function(){var entityMap={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#39;"};var output=String(this).replace(/[&<>"']/g,function(s){return entityMap[s]});var k,linkAttributes,option,options,pattern,v;options=1<=arguments.length?__slice.call(arguments,0):[];pattern=/(^|\s)((?:https?|ftp):\/\/[\-A-Z0-9+\u0026\u2019@#\/%?=()~_|!:,.;]*[\-A-Z0-9+\u0026@#\/%=~()_|])/gi;return this.replace(pattern,"$1\x3ca href\x3d'$2' target\x3d'_blank'\x3e$2\x3c/a\x3e")};
String.prototype["autoLink"]=autoLink}).call(this);function NxtAddress(){var codeword=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var syndrome=[0,0,0,0,0];var gexp=[1,2,4,8,16,5,10,20,13,26,17,7,14,28,29,31,27,19,3,6,12,24,21,15,30,25,23,11,22,9,18,1];var glog=[0,0,1,18,2,5,19,11,3,29,6,27,20,8,12,23,4,10,30,17,7,22,28,26,21,25,9,16,13,14,24,15];var cwmap=[3,2,1,0,7,6,5,4,13,14,15,16,12,8,9,10,11];var alphabet="23456789ABCDEFGHJKLMNPQRSTUVWXYZ";this.guess=[];function ginv(a){return gexp[31-glog[a]]}function gmult(a,b){if(a==0||b==0)return 0;var idx=(glog[a]+
glog[b])%31;return gexp[idx]}function calc_discrepancy(lambda,r){var discr=0;for(var i=0;i<r;i++)discr^=gmult(lambda[i],syndrome[r-i]);return discr}function find_errors(lambda){var errloc=[];for(var i=1;i<=31;i++){var sum=0;for(var j=0;j<5;j++)sum^=gmult(gexp[j*i%31],lambda[j]);if(sum==0){var pos=31-i;if(pos>12&&pos<27)return[];errloc[errloc.length]=pos}}return errloc}function guess_errors(){var el=0,b=[0,0,0,0,0],t=[];var deg_lambda=0,lambda=[1,0,0,0,0];for(var r=0;r<4;r++){var discr=calc_discrepancy(lambda,
r+1);if(discr!=0){deg_lambda=0;for(var i=0;i<5;i++){t[i]=lambda[i]^gmult(discr,b[i]);if(t[i])deg_lambda=i}if(2*el<=r){el=r+1-el;for(i=0;i<5;i++)b[i]=gmult(lambda[i],ginv(discr))}lambda=t.slice()}b.unshift(0)}var errloc=find_errors(lambda);var errors=errloc.length;if(errors<1||errors>2)return false;if(deg_lambda!=errors)return false;var omega=[0,0,0,0,0];for(var i=0;i<4;i++){var t=0;for(var j=0;j<i;j++)t^=gmult(syndrome[i+1-j],lambda[j]);omega[i]=t}for(r=0;r<errors;r++){var t=0;var pos=errloc[r];var root=
31-pos;for(i=0;i<4;i++)t^=gmult(omega[i],gexp[root*i%31]);if(t){var denom=gmult(lambda[1],1)^gmult(lambda[3],gexp[root*2%31]);if(denom==0)return false;if(pos>12)pos-=14;codeword[pos]^=gmult(t,ginv(denom))}}return true}function encode(){var p=[0,0,0,0];for(var i=12;i>=0;i--){var fb=codeword[i]^p[3];p[3]=p[2]^gmult(30,fb);p[2]=p[1]^gmult(6,fb);p[1]=p[0]^gmult(9,fb);p[0]=gmult(17,fb)}codeword[13]=p[0];codeword[14]=p[1];codeword[15]=p[2];codeword[16]=p[3]}function reset(){for(var i=0;i<17;i++)codeword[i]=
1}function set_codeword(cw,len,skip){if(typeof len==="undefined")len=17;if(typeof skip==="undefined")skip=-1;for(var i=0,j=0;i<len;i++)if(i!=skip)codeword[cwmap[j++]]=cw[i]}this.add_guess=function(){var s=this.toString(),len=this.guess.length;if(len>2)return;for(var i=0;i<len;i++)if(this.guess[i]==s)return;this.guess[len]=s};this.ok=function(){var sum=0;for(var i=1;i<5;i++){for(var j=0,t=0;j<31;j++){if(j>12&&j<27)continue;var pos=j;if(j>26)pos-=14;t^=gmult(codeword[pos],gexp[i*j%31])}sum|=t;syndrome[i]=
t}return sum==0};function from_acc(acc){var inp=[],out=[],pos=0,len=acc.length;if(len==20&&acc.charAt(0)!="1")return false;for(var i=0;i<len;i++)inp[i]=acc.charCodeAt(i)-"0".charCodeAt(0);do{var divide=0,newlen=0;for(i=0;i<len;i++){divide=divide*10+inp[i];if(divide>=32){inp[newlen++]=divide>>5;divide&=31}else if(newlen>0)inp[newlen++]=0}len=newlen;out[pos++]=divide}while(newlen);for(i=0;i<13;i++)codeword[i]=--pos>=0?out[i]:0;encode();return true}this.toString=function(){var out="NXT-";for(var i=0;i<
17;i++){out+=alphabet[codeword[cwmap[i]]];if((i&3)==3&&i<13)out+="-"}return out};this.account_id=function(){var out="",inp=[],len=13;for(var i=0;i<13;i++)inp[i]=codeword[12-i];do{var divide=0,newlen=0;for(i=0;i<len;i++){divide=divide*32+inp[i];if(divide>=10){inp[newlen++]=Math.floor(divide/10);divide%=10}else if(newlen>0)inp[newlen++]=0}len=newlen;out+=String.fromCharCode(divide+"0".charCodeAt(0))}while(newlen);return out.split("").reverse().join("")};this.set=function(adr,allow_accounts){if(typeof allow_accounts===
"undefined")allow_accounts=true;var len=0;this.guess=[];reset();adr=String(adr);adr=adr.replace(/(^\s+)|(\s+$)/g,"").toUpperCase();if(adr.indexOf("NXT-")==0)adr=adr.substr(4);if(adr.match(/^\d{1,20}$/g)){if(allow_accounts)return from_acc(adr)}else{var clean=[];for(var i=0;i<adr.length;i++){var pos=alphabet.indexOf(adr[i]);if(pos>=0){clean[len++]=pos;if(len>18)return false}}}if(len==16)for(var i=16;i>=0;i--){for(var j=0;j<32;j++){clean[i]=j;set_codeword(clean);if(this.ok())this.add_guess()}if(i>0){var t=
clean[i-1];clean[i-1]=clean[i];clean[i]=t}}if(len==18)for(var i=0;i<18;i++){set_codeword(clean,18,i);if(this.ok())this.add_guess()}if(len==17){set_codeword(clean);if(this.ok())return true;if(guess_errors()&&this.ok())this.add_guess()}reset();return false};this.format_guess=function(s,org){var d="",list=[];s=s.toUpperCase();org=org.toUpperCase();for(var i=0;i<s.length;){var m=0;for(var j=1;j<s.length;j++){var pos=org.indexOf(s.substr(i,j));if(pos!=-1){if(Math.abs(pos-i)<3)m=j}else break}if(m){list[list.length]=
{"s":i,"e":i+m};i+=m}else i++}if(list.length==0)return s;for(var i=0,j=0;i<s.length;i++){if(i>=list[j].e){var start;while(j<list.length-1){start=list[j++].s;if(i<list[j].e||list[j].s>=start)break}}if(i>=list[j].s&&i<list[j].e)d+=s.charAt(i);else d+='\x3cb style\x3d"color:red"\x3e'+s.charAt(i)+"\x3c/b\x3e"}return d}};var NRS=function(NRS,$,undefined){NRS.server="";NRS.state={};NRS.blocks=[];NRS.genesis="1739068987193023818";NRS.account="";NRS.accountRS="";NRS.accountInfo={};NRS.database=null;NRS.databaseSupport=false;NRS.settings={};NRS.contacts={};NRS.isTestNet=false;NRS.isLocalHost=false;NRS.isForging=false;NRS.isLeased=false;NRS.lastBlockHeight=0;NRS.downloadingBlockchain=false;NRS.rememberPassword=false;NRS.selectedContext=null;NRS.currentPage="dashboard";NRS.currentSubPage="";NRS.pageNumber=1;NRS.itemsPerPage=
50;NRS.pages={};NRS.incoming={};NRS.hasLocalStorage=true;NRS.inApp=false;NRS.assetTableKeys=[];NRS.init=function(){if(window.location.port&&window.location.port!="6876")$(".testnet_only").hide();else{NRS.isTestNet=true;$(".testnet_only, #testnet_login, #testnet_warning").show()}if(!NRS.server){var hostName=window.location.hostname.toLowerCase();NRS.isLocalHost=hostName=="localhost"||(hostName=="127.0.0.1"||NRS.isPrivateIP(hostName))}if(!NRS.isLocalHost)$(".remote_warning").show();try{JSCOMPILER_PRESERVE(window.localStorage)}catch(err){NRS.hasLocalStorage=
false}NRS.createDatabase(function(){NRS.getSettings()});NRS.getState(function(){NRS.checkAliasVersions()});NRS.showLockscreen();if(window.parent&&window.location.href.indexOf("?app")!=-1){NRS.inApp=true;$("#show_console").hide();parent.postMessage("loaded","*");window.addEventListener("message",receiveMessage,false)}setInterval(function(){NRS.getState()},1E3*30);if(!NRS.isTestNet)setInterval(NRS.checkAliasVersions,1E3*60*60);NRS.allowLoginViaEnter();NRS.automaticallyCheckRecipient();$(".show_popover").popover({"trigger":"hover"});
$("#dashboard_transactions_table, #transactions_table").on("mouseenter","td.confirmations",function(){$(this).popover("show")}).on("mouseleave","td.confirmations",function(){$(this).popover("destroy");$(".popover").remove()});_fix();$(window).on("resize",function(){_fix();if(NRS.currentPage=="asset_exchange")NRS.positionAssetSidebar()});$("[data-toggle\x3d'tooltip']").tooltip();$(".sidebar .treeview").tree()};function _fix(){var height=$(window).height()-$("body \x3e .header").height();$(".wrapper").css("min-height",
height+"px");var content=$(".wrapper").height();$(".content.content-stretch:visible").width($(".page:visible").width());if(content>height)$(".left-side, html, body").css("min-height",content+"px");else $(".left-side, html, body").css("min-height",height+"px")}NRS.getState=function(callback){NRS.sendRequest("getBlockchainStatus",function(response){if(response.errorCode);else{if(!("lastBlock"in NRS.state)){NRS.state=response;$("#nrs_version").html(NRS.state.version).removeClass("loading_dots");NRS.getBlock(NRS.state.lastBlock,
NRS.handleInitialBlocks)}else if(NRS.state.isScanning){NRS.blocks=[];NRS.tempBlocks=[];NRS.getBlock(NRS.state.lastBlock,NRS.handleInitialBlocks);NRS.getInitialTransactions();if(NRS.account)NRS.getAccountInfo()}else if(NRS.state.lastBlock!=response.lastBlock){NRS.tempBlocks=[];NRS.state=response;if(NRS.account)NRS.getAccountInfo();NRS.getBlock(NRS.state.lastBlock,NRS.handleNewBlocks);if(NRS.account)NRS.getNewTransactions()}else if(NRS.account)NRS.getUnconfirmedTransactions(function(unconfirmedTransactions){NRS.handleIncomingTransactions(unconfirmedTransactions,
false)});if(callback)callback()}})};$("#logo, .sidebar-menu a").click(function(event,data){if($(this).hasClass("ignore")){$(this).removeClass("ignore");return}event.preventDefault();if($(this).data("toggle")=="modal")return;var page=$(this).data("page");if(page==NRS.currentPage){if(data&&data.callback)data.callback();return}$(".page").hide();$(document.documentElement).scrollTop(0);$("#"+page+"_page").show();$(".content-header h1").find(".loading_dots").remove();var changeActive=!$(this).closest("ul").hasClass("treeview-menu");
if(changeActive){var currentActive=$("ul.sidebar-menu \x3e li.active");if(currentActive.hasClass("treeview"))currentActive.children("a").first().addClass("ignore").click();else currentActive.removeClass("active");if($(this).attr("id")&&$(this).attr("id")=="logo")$("#dashboard_link").addClass("active");else $(this).parent().addClass("active")}if(NRS.currentPage!="messages")$("#inline_message_password").val("");NRS.currentPage=page;NRS.currentSubPage="";NRS.pageNumber=1;NRS.showPageNumbers=false;if(NRS.pages[page]){NRS.pageLoading();
if(data&&data.callback)NRS.pages[page](data.callback);else if(data)NRS.pages[page](data);else NRS.pages[page]()}});$("button.goto-page, a.goto-page").click(function(event){event.preventDefault();NRS.goToPage($(this).data("page"))});NRS.loadPage=function(page,callback){NRS.pageLoading();NRS.pages[page](callback)};NRS.goToPage=function(page){var $link=$("ul.sidebar-menu a[data-page\x3d"+page+"]");if($link.length)$link.trigger("click");else{NRS.currentPage=page;NRS.currentSubPage="";NRS.pageNumber=1;
NRS.showPageNumbers=false;$("ul.sidebar-menu a.active").removeClass("active");$(".page").hide();$("#"+page+"_page").show();if(NRS.pages[page]){NRS.pageLoading();NRS.pages[page]()}}};NRS.pageLoading=function(){NRS.hasMorePages=false;var $pageHeader=$("#"+NRS.currentPage+"_page .content-header h1");$pageHeader.find(".loading_dots").remove();$pageHeader.append("\x3cspan class\x3d'loading_dots'\x3e\x3cspan\x3e.\x3c/span\x3e\x3cspan\x3e.\x3c/span\x3e\x3cspan\x3e.\x3c/span\x3e\x3c/span\x3e")};NRS.pageLoaded=
function(callback){var $currentPage=$("#"+NRS.currentPage+"_page");$currentPage.find(".content-header h1 .loading_dots").remove();if($currentPage.hasClass("paginated"))NRS.addPagination();if(callback)callback()};NRS.addPagination=function(section){var output="";if(NRS.pageNumber==2)output+="\x3ca href\x3d'#' data-page\x3d'1'\x3e\x26laquo; Previous Page\x3c/a\x3e";else if(NRS.pageNumber>2)output+=" \x3ca href\x3d'#' data-page\x3d'"+(NRS.pageNumber-1)+"'\x3e\x26laquo; Previous Page\x3c/a\x3e";if(NRS.hasMorePages)output+=
" \x3ca href\x3d'#' data-page\x3d'"+(NRS.pageNumber+1)+"'\x3eNext Page \x26raquo;\x3c/a\x3e";var $paginationContainer=$("#"+NRS.currentPage+"_page .data-pagination");if($paginationContainer.length)$paginationContainer.html(output)};$(".data-pagination").on("click","a",function(e){e.preventDefault();NRS.goToPageNumber($(this).data("page"))});NRS.goToPageNumber=function(pageNumber){NRS.pageNumber=pageNumber;NRS.pageLoading();NRS.pages[NRS.currentPage]()};NRS.createDatabase=function(callback){var schema=
{contacts:{id:{"primary":true,"autoincrement":true,"type":"NUMBER"},name:"VARCHAR(100) COLLATE NOCASE",email:"VARCHAR(200)",account:"VARCHAR(25)",accountRS:"VARCHAR(25)",description:"TEXT"},assets:{account:"VARCHAR(25)",accountRS:"VARCHAR(25)",asset:{"primary":true,"type":"VARCHAR(25)"},description:"TEXT",name:"VARCHAR(10)",decimals:"NUMBER",quantityQNT:"VARCHAR(15)",groupName:"VARCHAR(30) COLLATE NOCASE"},data:{id:{"primary":true,"type":"VARCHAR(40)"},contents:"TEXT"}};NRS.assetTableKeys=["account",
"accountRS","asset","description","name","position","decimals","quantityQNT","groupName"];try{NRS.database=new WebDB("NRS_USER_DB",schema,2,4,function(error,db){if(!error){NRS.databaseSupport=true;NRS.loadContacts();NRS.database.select("data",[{"id":"asset_exchange_version"}],function(error,result){if(!result||!result.length)NRS.database.delete("assets",[],function(error,affected){if(!error)NRS.database.insert("data",{"id":"asset_exchange_version","contents":2})})});NRS.database.select("data",[{"id":"closed_groups"}],
function(error,result){if(result&&result.length)NRS.closedGroups=result[0].contents.split("#");else NRS.database.insert("data",{id:"closed_groups",contents:""})});if(callback)callback()}else if(callback)callback()})}catch(err){NRS.database=null;NRS.databaseSupport=false;if(callback)callback()}};NRS.getAccountInfo=function(firstRun,callback){NRS.sendRequest("getAccount",{"account":NRS.account},function(response){var previousAccountInfo=NRS.accountInfo;NRS.accountInfo=response;if(response.errorCode){$("#account_balance, #account_forged_balance").html("0");
$("#account_nr_assets").html("0");if(NRS.accountInfo.errorCode==5)if(NRS.downloadingBlockchain)$("#dashboard_message").addClass("alert-success").removeClass("alert-danger").html("The blockchain is currently downloading. Please wait until it is up to date."+(NRS.newlyCreatedAccount?" Your account ID is: \x3cstrong\x3e"+String(NRS.accountRS).escapeHTML()+"\x3c/strong\x3e":"")).show();else if(NRS.state&&NRS.state.isScanning)$("#dashboard_message").addClass("alert-danger").removeClass("alert-success").html("The blockchain is currently rescanning. Please wait until that has completed.").show();
else $("#dashboard_message").addClass("alert-success").removeClass("alert-danger").html("Welcome to your brand new account. You should fund it with some coins. Your account ID is: \x3cstrong\x3e"+String(NRS.accountRS).escapeHTML()+"\x3c/strong\x3e").show();else $("#dashboard_message").addClass("alert-danger").removeClass("alert-success").html(NRS.accountInfo.errorDescription?NRS.accountInfo.errorDescription.escapeHTML():"An unknown error occured.").show()}else{if(NRS.accountRS&&NRS.accountInfo.accountRS!=
NRS.accountRS){$.growl("Generated Reed Solomon address different from the one in the blockchain!",{"type":"danger"});NRS.accountRS=NRS.accountInfo.accountRS}if(NRS.downloadingBlockchain)$("#dashboard_message").addClass("alert-success").removeClass("alert-danger").html("The blockchain is currently downloading. Please wait until it is up to date."+(NRS.newlyCreatedAccount?" Your account ID is: \x3cstrong\x3e"+String(NRS.accountRS).escapeHTML()+"\x3c/strong\x3e":"")).show();else if(NRS.state&&NRS.state.isScanning)$("#dashboard_message").addClass("alert-danger").removeClass("alert-success").html("The blockchain is currently rescanning. Please wait until that has completed.").show();
else if(!NRS.accountInfo.publicKey)$("#dashboard_message").addClass("alert-danger").removeClass("alert-success").html("\x3cb\x3eWarning!\x3c/b\x3e: Your account does not have a public key! This means it's not as protected as other accounts. You must make an outgoing transaction to fix this issue. (\x3ca href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#send_message_modal'\x3esend a message\x3c/a\x3e, \x3ca href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#register_alias_modal'\x3ebuy an alias\x3c/a\x3e, \x3ca href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#send_money_modal'\x3esend Nxt\x3c/a\x3e, ...)").show();
else $("#dashboard_message").hide();var showAssetDifference=!NRS.downloadingBlockchain||NRS.blocks&&(NRS.blocks[0]&&(NRS.state&&NRS.state.time-NRS.blocks[0].timestamp<60*60*24*7));if(NRS.databaseSupport)NRS.database.select("data",[{"id":"asset_balances_"+NRS.account}],function(error,asset_balance){if(asset_balance&&asset_balance.length){var previous_balances=asset_balance[0].contents;if(!NRS.accountInfo.assetBalances)NRS.accountInfo.assetBalances=[];var current_balances=JSON.stringify(NRS.accountInfo.assetBalances);
if(previous_balances!=current_balances){if(previous_balances!="undefined"&&typeof previous_balances!="undefined")previous_balances=JSON.parse(previous_balances);else previous_balances=[];NRS.database.update("data",{contents:current_balances},[{id:"asset_balances_"+NRS.account}]);if(showAssetDifference)NRS.checkAssetDifferences(NRS.accountInfo.assetBalances,previous_balances)}}else NRS.database.insert("data",{id:"asset_balances_"+NRS.account,contents:JSON.stringify(NRS.accountInfo.assetBalances)})});
else if(showAssetDifference&&(previousAccountInfo&&previousAccountInfo.assetBalances)){var previousBalances=JSON.stringify(previousAccountInfo.assetBalances);var currentBalances=JSON.stringify(NRS.accountInfo.assetBalances);if(previousBalances!=currentBalances)NRS.checkAssetDifferences(NRS.accountInfo.assetBalances,previousAccountInfo.assetBalances)}$("#account_balance").html(NRS.formatStyledAmount(response.unconfirmedBalanceNQT));$("#account_forged_balance").html(NRS.formatStyledAmount(response.forgedBalanceNQT));
var nr_assets=0;if(response.assetBalances)for(var i=0;i<response.assetBalances.length;i++)if(response.assetBalances[i].balanceQNT!="0")nr_assets++;$("#account_nr_assets").html(nr_assets);if(NRS.lastBlockHeight){var isLeased=NRS.lastBlockHeight>=NRS.accountInfo.currentLeasingHeightFrom;if(isLeased!=NRS.IsLeased){var leasingChange=true;NRS.isLeased=isLeased}}else var leasingChange=false;if(leasingChange||(response.currentLeasingHeightFrom!=previousAccountInfo.currentLeasingHeightFrom||(response.lessors&&
!previousAccountInfo.lessors||(!response.lessors&&previousAccountInfo.lessors||response.lessors&&(previousAccountInfo.lessors&&response.lessors.sort().toString()!=previousAccountInfo.lessors.sort().toString())))))NRS.updateAccountLeasingStatus();if(response.name)$("#account_name").html(response.name.escapeHTML())}if(firstRun)$("#account_balance, #account_forged_balance, #account_nr_assets").removeClass("loading_dots");if(callback)callback()})};NRS.updateAccountLeasingStatus=function(){var accountLeasingLabel=
"";var accountLeasingStatus="";if(NRS.lastBlockHeight>=NRS.accountInfo.currentLeasingHeightFrom){accountLeasingLabel="Leased Out";accountLeasingStatus="Your account effective balance is leased out starting from block "+String(NRS.accountInfo.currentLeasingHeightFrom).escapeHTML()+" until block "+String(NRS.accountInfo.currentLeasingHeightTo).escapeHTML()+" to account \x3ca href\x3d'#' data-user\x3d'"+String(NRS.accountInfo.currentLessee).escapeHTML()+"' class\x3d'user_info'\x3e"+String(NRS.accountInfo.currentLessee).escapeHTML()+
"\x3c/a\x3e";$("#lease_balance_message").html("\x3cstrong\x3eRemember\x3c/strong\x3e: This lease will take effect after the current lease has ended.")}else if(NRS.lastBlockHeight<NRS.accountInfo.currentLeasingHeightTo){accountLeasingLabel="Leased Soon";accountLeasingStatus="Your account effective balance will be leased out starting from block "+String(NRS.accountInfo.currentLeasingHeightFrom).escapeHTML()+" until block "+String(NRS.accountInfo.currentLeasingHeightTo).escapeHTML()+" to account \x3ca href\x3d'#' data-user\x3d'"+
String(NRS.accountInfo.currentLessee).escapeHTML()+"' class\x3d'user_info'\x3e"+String(NRS.accountInfo.currentLessee).escapeHTML()+"\x3c/a\x3e";$("#lease_balance_message").html("\x3cstrong\x3eRemember\x3c/strong\x3e: This lease will take effect after the current lease has ended.")}else{accountLeasingStatus="Your account effective balance is not leased out.";$("#lease_balance_message").html("\x3cstrong\x3eRemember\x3c/strong\x3e: Once submitted the lease cannot be cancelled.")}if(NRS.accountInfo.effectiveBalanceNXT==
0){$("#forging_indicator").removeClass("forging");$("#forging_indicator span").html("Not Forging");$("#forging_indicator").show();NRS.isForging=false}if(NRS.accountInfo.lessors){if(accountLeasingLabel){accountLeasingLabel+=", ";accountLeasingStatus+="\x3cbr /\x3e\x3cbr /\x3e"}accountLeasingLabel+=NRS.accountInfo.lessors.length+(NRS.accountInfo.lessors.length==1?" lessor":"lessors");accountLeasingStatus+=NRS.accountInfo.lessors.length+" "+(NRS.accountInfo.lessors.length==1?"lessor has":"lessors have")+
" leased their effective balance to your account.";var rows="";for(var i=0;i<NRS.accountInfo.lessors.length;i++){var lessor=NRS.accountInfo.lessors[i];rows+="\x3ctr\x3e\x3ctd\x3e\x3ca href\x3d'#' data-user\x3d'"+String(lessor).escapeHTML()+"'\x3e"+NRS.getAccountTitle(lessor)+"\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e"}$("#account_lessor_table tbody").empty().append(rows);$("#account_lessor_container").show()}else{$("#account_lessor_table tbody").empty();$("#account_lessor_container").hide()}if(accountLeasingLabel)$("#account_leasing").html(accountLeasingLabel).show();
else $("#account_leasing").hide();if(accountLeasingStatus)$("#account_leasing_status").html(accountLeasingStatus).show();else $("#account_leasing_status").hide()};NRS.checkAssetDifferences=function(current_balances,previous_balances){var current_balances_={};var previous_balances_={};if(previous_balances.length)for(var k in previous_balances)previous_balances_[previous_balances[k].asset]=previous_balances[k].balanceQNT;if(current_balances.length)for(var k in current_balances)current_balances_[current_balances[k].asset]=
current_balances[k].balanceQNT;var diff={};for(var k in previous_balances_)if(!(k in current_balances_))diff[k]="-"+previous_balances_[k];else if(previous_balances_[k]!==current_balances_[k]){var change=(new BigInteger(current_balances_[k])).subtract(new BigInteger(previous_balances_[k])).toString();diff[k]=change}for(k in current_balances_)if(!(k in previous_balances_))diff[k]=current_balances_[k];var nr=Object.keys(diff).length;if(nr==0)return;else if(nr<=3)for(k in diff)NRS.sendRequest("getAsset",
{"asset":k,"_extra":{"asset":k,"difference":diff[k]}},function(asset,input){if(asset.errorCode)return;asset.difference=input["_extra"].difference;asset.asset=input["_extra"].asset;if(asset.difference.charAt(0)!="-"){var quantity=NRS.formatQuantity(asset.difference,asset.decimals);$.growl("You received \x3ca href\x3d'#' data-goto-asset\x3d'"+String(asset.asset).escapeHTML()+"'\x3e"+quantity+" "+String(asset.name).escapeHTML()+(quantity=="1"?" asset":" assets")+"\x3c/a\x3e.",{"type":"success"})}else{asset.difference=
asset.difference.substring(1);var quantity=NRS.formatQuantity(asset.difference,asset.decimals);$.growl("You sold or transferred \x3ca href\x3d'#' data-goto-asset\x3d'"+String(asset.asset).escapeHTML()+"'\x3e"+quantity+" "+String(asset.name).escapeHTML()+(quantity=="1"?" asset":" assets")+"\x3c/a\x3e.",{"type":"success"})}});else $.growl("Multiple different assets have been sold and/or bought.",{"type":"success"})};NRS.checkLocationHash=function(password){if(window.location.hash){var hash=window.location.hash.replace("#",
"").split(":");if(hash.length==2){if(hash[0]=="message")var $modal=$("#send_message_modal");else if(hash[0]=="send")var $modal=$("#send_money_modal");else if(hash[0]=="asset"){NRS.goToAsset(hash[1]);return}else var $modal="";if($modal){var account_id=String($.trim(hash[1]));if(!/^\d+$/.test(account_id)&&account_id.indexOf("@")!==0)account_id="@"+account_id;$modal.find("input[name\x3drecipient]").val(account_id.unescapeHTML()).trigger("blur");if(password&&typeof password=="string")$modal.find("input[name\x3dsecretPhrase]").val(password);
$modal.modal("show")}}window.location.hash="#"}};NRS.updateBlockchainDownloadProgress=function(){if(NRS.state.lastBlockchainFeederHeight&&NRS.state.numberOfBlocks<NRS.state.lastBlockchainFeederHeight)var percentage=parseInt(Math.round(NRS.state.numberOfBlocks/NRS.state.lastBlockchainFeederHeight*100),10);else var percentage=100;if(percentage==100)$("#downloading_blockchain .progress").hide();else{$("#downloading_blockchain .progress").show();$("#downloading_blockchain .progress-bar").css("width",
percentage+"%").prop("aria-valuenow",percentage);$("#downloading_blockchain .sr-only").html(percentage+"% Complete")}};NRS.checkIfOnAFork=function(){if(!NRS.downloadingBlockchain){var onAFork=true;if(NRS.blocks&&NRS.blocks.length>=10)for(var i=0;i<10;i++)if(NRS.blocks[i].generator!=NRS.account){onAFork=false;break}if(onAFork)$.growl("\x3cstrong\x3eWarning\x3c/strong\x3e: You are most likely on a fork (you have forged the last 10 blocks).",{"type":"danger"})}};$("#id_search").on("submit",function(e){e.preventDefault();
var id=$.trim($("#id_search input[name\x3dq]").val());if(/NXT\-/i.test(id))NRS.sendRequest("getAccount",{"account":id},function(response,input){if(!response.errorCode){response.account=input.account;NRS.showAccountModal(response)}else $.growl("Nothing found, please try another query.",{"type":"danger"})});else{if(!/^\d+$/.test(id)){$.growl("Invalid input. Search by ID or reed solomon account number.",{"type":"danger"});return}NRS.sendRequest("getTransaction",{"transaction":id},function(response,input){if(!response.errorCode){response.transaction=
input.transaction;NRS.showTransactionModal(response)}else NRS.sendRequest("getAccount",{"account":id},function(response,input){if(!response.errorCode){response.account=input.account;NRS.showAccountModal(response)}else NRS.sendRequest("getBlock",{"block":id},function(response,input){if(!response.errorCode){response.block=input.block;NRS.showBlockModal(response)}else $.growl("Nothing found, please try another query.",{"type":"danger"})})})})}});return NRS}(NRS||{},jQuery);$(document).ready(function(){NRS.init()});
function receiveMessage(event){if(event.origin!="file://")return};var NRS=function(NRS,$,undefined){NRS.loadContacts=function(){NRS.contacts={};NRS.database.select("contacts",null,function(error,contacts){if(contacts&&contacts.length)$.each(contacts,function(index,contact){NRS.contacts[contact.account]=contact})})};NRS.pages.contacts=function(){if(!NRS.databaseSupport){$("#contact_page_database_error").show();$("#contacts_table_container").hide();$("#add_contact_button").hide();NRS.pageLoaded();return}$("#contacts_table_container").show();$("#contact_page_database_error").hide();
NRS.database.select("contacts",null,function(error,contacts){var rows="";if(contacts&&contacts.length){contacts.sort(function(a,b){if(a.name.toLowerCase()>b.name.toLowerCase())return 1;else if(a.name.toLowerCase()<b.name.toLowerCase())return-1;else return 0});$.each(contacts,function(index,contact){var contactDescription=contact.description;if(contactDescription.length>100)contactDescription=contactDescription.substring(0,100)+"...";else if(!contactDescription)contactDescription="-";rows+="\x3ctr\x3e\x3ctd\x3e\x3ca href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#update_contact_modal' data-contact\x3d'"+
String(contact.id).escapeHTML()+"'\x3e"+contact.name.escapeHTML()+"\x3c/a\x3e\x3c/td\x3e\x3ctd\x3e\x3ca href\x3d'#' data-user\x3d'"+NRS.getAccountFormatted(contact,"account")+"' class\x3d'user_info'\x3e"+NRS.getAccountFormatted(contact,"account")+"\x3c/a\x3e\x3c/td\x3e\x3ctd\x3e"+(contact.email?contact.email.escapeHTML():"-")+"\x3c/td\x3e\x3ctd\x3e"+contactDescription.escapeHTML()+"\x3c/td\x3e\x3ctd style\x3d'white-space:nowrap'\x3e\x3ca class\x3d'btn btn-xs btn-default' href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#send_money_modal' data-contact\x3d'"+
String(contact.name).escapeHTML()+"'\x3eSend Nxt\x3c/a\x3e \x3ca class\x3d'btn btn-xs btn-default' href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#send_message_modal' data-contact\x3d'"+String(contact.name).escapeHTML()+"'\x3eMessage\x3c/a\x3e \x3ca class\x3d'btn btn-xs btn-default' href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#delete_contact_modal' data-contact\x3d'"+String(contact.id).escapeHTML()+"'\x3eDelete\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e"})}NRS.dataLoaded(rows)})};NRS.forms.addContact=
function($modal){var data=NRS.getFormData($modal.find("form:first"));data.account_id=String(data.account_id);if(!data.name)return{"error":"Contact name is a required field."};else if(!data.account_id)return{"error":"Account ID is a required field."};if(/^\d+$/.test(data.name)||/^NXT\-/i.test(data.name))return{"error":"Contact name must contain alphabetic characters."};if(data.email&&!/@/.test(data.email))return{"error":"Email address is incorrect."};if(data.account_id.charAt(0)=="@"){var convertedAccountId=
$modal.find("input[name\x3dconverted_account_id]").val();if(convertedAccountId)data.account_id=convertedAccountId;else return{"error":"Invalid account ID."}}if(/^NXT\-/i.test(data.account_id)){data.account_rs=data.account_id;var address=new NxtAddress;if(address.set(data.account_rs))data.account=address.account_id();else return{"error":"Invalid account ID."}}else{var address=new NxtAddress;if(address.set(data.account_id))data.account_rs=address.toString();else return{"error":"Invalid account ID."}}NRS.sendRequest("getAccount",
{"account":data.account_id},function(response){if(!response.errorCode)if(response.account!=data.account||response.accountRS!=data.account_rs)return{"error":"Invalid account ID."}},false);var $btn=$modal.find("button.btn-primary:not([data-dismiss\x3dmodal], .ignore)");NRS.database.select("contacts",[{"account":data.account_id},{"name":data.name}],function(error,contacts){if(contacts&&contacts.length){if(contacts[0].name==data.name)$modal.find(".error_message").html("A contact with this name already exists.").show();
else $modal.find(".error_message").html("A contact with this account ID already exists.").show();$btn.button("reset");$modal.modal("unlock")}else NRS.database.insert("contacts",{name:data.name,email:data.email,account:data.account_id,accountRS:data.account_rs,description:data.description},function(error){NRS.contacts[data.account_id]={name:data.name,email:data.email,account:data.account_id,accountRS:data.account_rs,description:data.description};setTimeout(function(){$btn.button("reset");$modal.modal("unlock");
$modal.modal("hide");$.growl("Contact added successfully.",{"type":"success"});if(NRS.currentPage=="contacts")NRS.loadPage("contacts");else if(NRS.currentPage=="messages"&&NRS.selectedContext){var heading=NRS.selectedContext.find("h4.list-group-item-heading");if(heading.length)heading.html(data.name.escapeHTML());NRS.selectedContext.data("context","messages_sidebar_update_context")}},50)})})};$("#update_contact_modal").on("show.bs.modal",function(e){var $invoker=$(e.relatedTarget);var contactId=parseInt($invoker.data("contact"),
10);if(!contactId&&NRS.selectedContext){var accountId=NRS.selectedContext.data("account");var dbKey=/^NXT\-/i.test(accountId)?"accountRS":"account";var dbQuery={};dbQuery[dbKey]=accountId;NRS.database.select("contacts",[dbQuery],function(error,contact){contact=contact[0];$("#update_contact_id").val(contact.id);$("#update_contact_name").val(contact.name);$("#update_contact_email").val(contact.email);$("#update_contact_account_id").val(contact.accountRS);$("#update_contact_description").val(contact.description)})}else{$("#update_contact_id").val(contactId);
NRS.database.select("contacts",[{"id":contactId}],function(error,contact){contact=contact[0];$("#update_contact_name").val(contact.name);$("#update_contact_email").val(contact.email);$("#update_contact_account_id").val(contact.accountRS);$("#update_contact_description").val(contact.description)})}});NRS.forms.updateContact=function($modal){var data=NRS.getFormData($modal.find("form:first"));data.account_id=String(data.account_id);if(!data.name)return{"error":"Contact name is a required field."};else if(!data.account_id)return{"error":"Account ID is a required field."};
if(data.account_id.charAt(0)=="@"){var convertedAccountId=$modal.find("input[name\x3dconverted_account_id]").val();if(convertedAccountId)data.account_id=convertedAccountId;else return{"error":"Invalid account ID."}}var contactId=parseInt($("#update_contact_id").val(),10);if(!contactId)return{"error":"Invalid contact."};if(/^NXT\-/i.test(data.account_id)){data.account_rs=data.account_id;var address=new NxtAddress;if(address.set(data.account_rs))data.account_id=address.account_id();else return{"error":"Invalid account ID."}}else{var address=
new NxtAddress;if(address.set(data.account_id))data.account_rs=address.toString();else return{"error":"Invalid account ID."}}NRS.sendRequest("getAccount",{"account":data.account_id},function(response){if(!response.errorCode)if(response.account!=data.account_id||response.accountRS!=data.account_rs)return{"error":"Invalid account ID."}},false);var $btn=$modal.find("button.btn-primary:not([data-dismiss\x3dmodal])");NRS.database.select("contacts",[{"account":data.account_id}],function(error,contacts){if(contacts&&
(contacts.length&&contacts[0].id!=contactId)){$modal.find(".error_message").html("A contact with this account ID already exists.").show();$btn.button("reset");$modal.modal("unlock")}else NRS.database.update("contacts",{name:data.name,email:data.email,account:data.account_id,accountRS:data.account_rs,description:data.description},[{"id":contactId}],function(error){if(contacts.length&&data.account_id!=contacts[0].accountId)delete NRS.contacts[contacts[0].accountId];NRS.contacts[data.account_id]={name:data.name,
email:data.email,account:data.account_id,accountRS:data.account_rs,description:data.description};setTimeout(function(){$btn.button("reset");$modal.modal("unlock");$modal.modal("hide");$.growl("Contact updated successfully.",{"type":"success"});if(NRS.currentPage=="contacts")NRS.loadPage("contacts");else if(NRS.currentPage=="messages"&&NRS.selectedContext){var heading=NRS.selectedContext.find("h4.list-group-item-heading");if(heading.length)heading.html(data.name.escapeHTML())}},50)})})};$("#delete_contact_modal").on("show.bs.modal",
function(e){var $invoker=$(e.relatedTarget);var contactId=$invoker.data("contact");$("#delete_contact_id").val(contactId);NRS.database.select("contacts",[{"id":contactId}],function(error,contact){contact=contact[0];$("#delete_contact_name").html(contact.name.escapeHTML());$("#delete_contact_account_id").val(NRS.getAccountFormatted(contact,"account"))})});NRS.forms.deleteContact=function($modal){var id=parseInt($("#delete_contact_id").val(),10);NRS.database.delete("contacts",[{"id":id}],function(){delete NRS.contacts[$("#delete_contact_account_id").val()];
setTimeout(function(){$.growl("Contact deleted successfully.",{"type":"success"});if(NRS.currentPage=="contacts")NRS.loadPage("contacts")},50)});return{"stop":true}};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){NRS.automaticallyCheckRecipient=function(){$("#send_money_recipient, #transfer_asset_recipient, #send_message_recipient, #add_contact_account_id, #update_contact_account_id, #lease_balance_recipient, #transfer_alias_recipient, #sell_alias_recipient").blur(function(){var value=$(this).val();var modal=$(this).closest(".modal");if(value)NRS.checkRecipient(value,modal);else modal.find(".account_info").hide()})};$("#send_message_modal, #send_money_modal, #add_contact_modal").on("show.bs.modal",
function(e){var $invoker=$(e.relatedTarget);var account=$invoker.data("account");if(!account)account=$invoker.data("contact");if(account)$(this).find("input[name\x3drecipient], input[name\x3daccount_id]").val(account).trigger("blur")});$("#send_money_amount").on("input",function(e){var amount=parseInt($(this).val(),10);$("#send_money_fee").val(isNaN(amount)?"1":amount<500?1:Math.round(amount/1E3))});$("span.recipient_selector button").on("click",function(e){if(!Object.keys(NRS.contacts).length){e.preventDefault();
e.stopPropagation();return}var $list=$(this).parent().find("ul");$list.empty();for(var accountId in NRS.contacts)$list.append("\x3cli\x3e\x3ca href\x3d'#' data-contact\x3d'"+String(NRS.contacts[accountId].name).escapeHTML()+"'\x3e"+String(NRS.contacts[accountId].name).escapeHTML()+"\x3c/a\x3e\x3c/li\x3e")});$("span.recipient_selector").on("click","ul li a",function(e){e.preventDefault();$(this).closest("form").find("input[name\x3dconverted_account_id]").val("");$(this).closest("form").find("input[name\x3drecipient],input[name\x3daccount_id]").val($(this).data("contact")).trigger("blur")});
NRS.forms.sendMoneyComplete=function(response,data){if(!(data["_extra"]&&data["_extra"].convertedAccount)&&!(data.recipient in NRS.contacts))$.growl("NXT has been sent! \x3ca href\x3d'#' data-account\x3d'"+NRS.getAccountFormatted(data,"recipient")+"' data-toggle\x3d'modal' data-target\x3d'#add_contact_modal' style\x3d'text-decoration:underline'\x3eAdd recipient to contacts?\x3c/a\x3e",{"type":"success"});else $.growl("NXT has been sent!",{"type":"success"})};NRS.sendMoneyShowAccountInformation=function(accountId){NRS.getAccountError(accountId,
function(response){if(response.type=="success")$("#send_money_account_info").hide();else $("#send_money_account_info").html(response.message).show()})};NRS.getAccountError=function(accountId,callback){NRS.sendRequest("getAccount",{"account":accountId},function(response){if(response.publicKey)callback({"type":"info","message":"The recipient account has a public key and a balance of "+NRS.formatAmount(response.unconfirmedBalanceNQT,false,true)+" NXT.","account":response});else if(response.errorCode)if(response.errorCode==
4)callback({"type":"danger","message":"The recipient account is malformed, please adjust."+(!/^(NXT\-)/i.test(accountId)?" If you want to type an alias, prepend it with the @ character.":""),"account":null});else if(response.errorCode==5)callback({"type":"warning","message":"The recipient account is an unknown account, meaning it has never had an incoming or outgoing transaction. Please double check your recipient address before submitting.","account":null});else callback({"type":"danger","message":"There is a problem with the recipient account: "+
String(response.errorDescription).escapeHTML(),"account":null});else callback({"type":"warning","message":"The recipient account does not have a public key, meaning it has never had an outgoing transaction. The account has a balance of "+NRS.formatAmount(response.unconfirmedBalanceNQT,false,true)+" NXT. Please double check your recipient address before submitting.","account":response})})};NRS.correctAddressMistake=function(el){$(el).closest(".modal-body").find("input[name\x3drecipient],input[name\x3daccount_id]").val($(el).data("address")).trigger("blur")};
NRS.checkRecipient=function(account,modal){var classes="callout-info callout-danger callout-warning";var callout=modal.find(".account_info").first();var accountInputField=modal.find("input[name\x3dconverted_account_id]");accountInputField.val("");account=$.trim(account);if(/^(NXT\-)?[A-Z0-9]+\-[A-Z0-9]+\-[A-Z0-9]+\-[A-Z0-9]+/i.test(account)){var address=new NxtAddress;if(address.set(account))NRS.getAccountError(account,function(response){var message=response.message.escapeHTML();callout.removeClass(classes).addClass("callout-"+
response.type).html(message).show()});else if(address.guess.length==1)callout.removeClass(classes).addClass("callout-danger").html("The recipient address is malformed, did you mean \x3cspan class\x3d'malformed_address' data-address\x3d'"+String(address.guess[0]).escapeHTML()+"' onclick\x3d'NRS.correctAddressMistake(this);'\x3e"+address.format_guess(address.guess[0],account)+"\x3c/span\x3e ?").show();else if(address.guess.length>1){var html="The recipient address is malformed, did you mean:\x3cul\x3e";
for(var i=0;i<address.guess.length;i++)html+="\x3cli\x3e\x3cspan clas\x3d'malformed_address' data-address\x3d'"+String(address.guess[i]).escapeHTML()+"' onclick\x3d'NRS.correctAddressMistake(this);'\x3e"+address.format_guess(address.guess[i],account)+"\x3c/span\x3e\x3c/li\x3e";callout.removeClass(classes).addClass("callout-danger").html(html).show()}else callout.removeClass(classes).addClass("callout-danger").html("The recipient address is malformed, please adjust.").show()}else if(!/^\d+$/.test(account))if(NRS.databaseSupport&&
account.charAt(0)!="@")NRS.database.select("contacts",[{"name":account}],function(error,contact){if(!error&&contact.length){contact=contact[0];NRS.getAccountError(contact.accountRS,function(response){callout.removeClass(classes).addClass("callout-"+response.type).html("The contact links to account \x3cstrong\x3e"+NRS.getAccountFormatted(contact,"account")+"\x3c/strong\x3e. "+response.message.escapeHTML()).show();if(response.type=="info"||response.type=="warning")accountInputField.val(contact.accountRS)})}else if(/^[a-z0-9]+$/i.test(account))NRS.checkRecipientAlias(account,
modal);else callout.removeClass(classes).addClass("callout-danger").html("The recipient account is malformed, please adjust.").show()});else if(/^[a-z0-9@]+$/i.test(account)){if(account.charAt(0)=="@"){account=account.substring(1);NRS.checkRecipientAlias(account,modal)}}else callout.removeClass(classes).addClass("callout-danger").html("The recipient account is malformed, please adjust.").show();else callout.removeClass(classes).addClass("callout-danger").html("Numeric account IDs are no longer allowed.").show()};
NRS.checkRecipientAlias=function(account,modal){var classes="callout-info callout-danger callout-warning";var callout=modal.find(".account_info").first();var accountInputField=modal.find("input[name\x3dconverted_account_id]");accountInputField.val("");NRS.sendRequest("getAlias",{"aliasName":account},function(response){if(response.errorCode)callout.removeClass(classes).addClass("callout-danger").html(response.errorDescription?"Error: "+String(response.errorDescription).escapeHTML():"The alias does not exist.").show();
else if(response.aliasURI){var alias=String(response.aliasURI);var timestamp=response.timestamp;var regex_1=/acct:(.*)@nxt/;var regex_2=/nacc:(.*)/;var match=alias.match(regex_1);if(!match)match=alias.match(regex_2);if(match&&match[1]){match[1]=String(match[1]).toUpperCase();if(/^\d+$/.test(match[1])){var address=new NxtAddress;if(address.set(match[1]))match[1]=address.toString();else{accountInputField.val("");callout.html("Invalid account alias.")}}NRS.getAccountError(match[1],function(response){accountInputField.val(match[1].escapeHTML());
callout.html("The alias links to account \x3cstrong\x3e"+String(match[1]).escapeHTML()+"\x3c/strong\x3e, "+response.message.replace("The recipient account","which")+" The alias was last adjusted on "+NRS.formatTimestamp(timestamp)+".").removeClass(classes).addClass("callout-"+response.type).show()})}else callout.removeClass(classes).addClass("callout-danger").html("The alias does not link to an account. "+(!alias?"The URI is empty.":"The URI is '"+alias.escapeHTML()+"'")).show()}else if(response.aliasName)callout.removeClass(classes).addClass("callout-danger").html("The alias links to an empty URI.").show();
else callout.removeClass(classes).addClass("callout-danger").html(response.errorDescription?"Error: "+String(response.errorDescription).escapeHTML():"The alias does not exist.").show()})};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){var _decryptionPassword;var _decryptedTransactions={};var _encryptedNote=null;var _sharedKeys={};var _hash={init:SHA256_init,update:SHA256_write,getBytes:SHA256_finalize};NRS.generatePublicKey=function(secretPhrase){return NRS.getPublicKey(converters.stringToHexString(secretPhrase))};NRS.getPublicKey=function(secretPhrase,isAccountNumber){if(isAccountNumber){var accountNumber=secretPhrase;var publicKey="";NRS.sendRequest("getAccountPublicKey",{"account":accountNumber},
function(response){if(!response.publicKey)throw"Account does not have a public key.";else publicKey=response.publicKey},false);return publicKey}else{var secretPhraseBytes=converters.hexStringToByteArray(secretPhrase);var digest=simpleHash(secretPhraseBytes);return converters.byteArrayToHexString(curve25519.keygen(digest).p)}};NRS.getPrivateKey=function(secretPhrase){SHA256_init();SHA256_write(converters.stringToByteArray(secretPhrase));return converters.shortArrayToHexString(curve25519_clamp(converters.byteArrayToShortArray(SHA256_finalize())))};
NRS.getAccountId=function(secretPhrase){var publicKey=NRS.getPublicKey(converters.stringToHexString(secretPhrase));var hex=converters.hexStringToByteArray(publicKey);_hash.init();_hash.update(hex);var account=_hash.getBytes();account=converters.byteArrayToHexString(account);var slice=converters.hexStringToByteArray(account).slice(0,8);return byteArrayToBigInteger(slice).toString()};NRS.encryptNote=function(message,options,secretPhrase){try{if(!options.sharedKey){if(!options.privateKey){if(!secretPhrase)if(NRS.rememberPassword)secretPhrase=
NRS.password;else throw{"message":"Your password is required to encrypt this message.","errorCode":1};options.privateKey=converters.hexStringToByteArray(NRS.getPrivateKey(secretPhrase))}if(!options.publicKey){if(!options.account)throw{"message":"Account ID not specified.","errorCode":2};options.publicKey=converters.hexStringToByteArray(NRS.getPublicKey(options.account,true))}}var encrypted=encryptData(converters.stringToByteArray(message),options);return{"message":converters.byteArrayToHexString(encrypted.data),
"nonce":converters.byteArrayToHexString(encrypted.nonce)}}catch(err){if(err.errorCode&&err.errorCode<3)throw err;else throw{"message":"The message could not be encrypted.","errorCode":3};}};NRS.decryptNote=function(message,options,secretPhrase){try{if(!options.sharedKey){if(!options.privateKey){if(!secretPhrase)if(NRS.rememberPassword)secretPhrase=NRS.password;else if(_decryptionPassword)secretPhrase=_decryptionPassword;else throw{"message":"Your password is required to decrypt this message.","errorCode":1};
options.privateKey=converters.hexStringToByteArray(NRS.getPrivateKey(secretPhrase))}if(!options.publicKey){if(!options.account)throw{"message":"Account ID not specified.","errorCode":2};options.publicKey=converters.hexStringToByteArray(NRS.getPublicKey(options.account,true))}}options.nonce=converters.hexStringToByteArray(options.nonce);return decryptData(converters.hexStringToByteArray(message),options)}catch(err){if(err.errorCode&&err.errorCode<3)throw err;else throw{"message":"The message could not be decrypted.",
"errorCode":3};}};NRS.getSharedKeyWithAccount=function(account){try{if(account in _sharedKeys)return _sharedKeys[account];var secretPhrase;if(NRS.rememberPassword)secretPhrase=NRS.password;else if(_decryptionPassword)secretPhrase=_decryptionPassword;else throw{"message":"Your password is required.","errorCode":3};var privateKey=converters.hexStringToByteArray(NRS.getPrivateKey(secretPhrase));var publicKey=converters.hexStringToByteArray(NRS.getPublicKey(account,true));var sharedKey=getSharedKey(privateKey,
publicKey);var sharedKeys=Object.keys(_sharedKeys);if(sharedKeys.length>50)delete _sharedKeys[sharedKeys[0]];_sharedKeys[account]=sharedKey}catch(err){throw err;}};NRS.signBytes=function(message,secretPhrase){var messageBytes=converters.hexStringToByteArray(message);var secretPhraseBytes=converters.hexStringToByteArray(secretPhrase);var digest=simpleHash(secretPhraseBytes);var s=curve25519.keygen(digest).s;var m=simpleHash(messageBytes);_hash.init();_hash.update(m);_hash.update(s);var x=_hash.getBytes();
var y=curve25519.keygen(x).p;_hash.init();_hash.update(m);_hash.update(y);var h=_hash.getBytes();var v=curve25519.sign(h,x,s);return converters.byteArrayToHexString(v.concat(h))};NRS.verifyBytes=function(signature,message,publicKey){var signatureBytes=converters.hexStringToByteArray(signature);var messageBytes=converters.hexStringToByteArray(message);var publicKeyBytes=converters.hexStringToByteArray(publicKey);var v=signatureBytes.slice(0,32);var h=signatureBytes.slice(32);var y=curve25519.verify(v,
h,publicKeyBytes);var m=simpleHash(messageBytes);_hash.init();_hash.update(m);_hash.update(y);var h2=_hash.getBytes();return areByteArraysEqual(h,h2)};NRS.setDecryptionPassword=function(password){_decryptionPassword=password};NRS.addDecryptedTransaction=function(identifier,content){if(!_decryptedTransactions[identifier])_decryptedTransactions[identifier]=content};NRS.tryToDecryptMessage=function(message){if(_decryptedTransactions&&_decryptedTransactions[message.transaction])return _decryptedTransactions[message.transaction].message;
try{var decoded=NRS.decryptNote(message.attachment.message,{"nonce":message.attachment.nonce,"account":message.recipient==NRS.account?message.sender:message.recipient});return decoded}catch(err){throw err;}};NRS.tryToDecrypt=function(transaction,fields,account,options){var showDecryptionForm=false;if(!options)options={};var nrFields=Object.keys(fields).length;var formEl=options.formEl?String(options.formEl).escapeHTML():"#transaction_info_output_bottom";var outputEl=options.outputEl?String(options.outputEl).escapeHTML():
"#transaction_info_output_bottom";var output="";var identifier=options.identifier?transaction[options.identifier]:transaction.transaction;if(_decryptedTransactions&&_decryptedTransactions[identifier]){var decryptedTransaction=_decryptedTransactions[identifier];$.each(fields,function(key,title){if(typeof title!="string")title=title.title;if(key in decryptedTransaction)output+="\x3cdiv"+(!options.noPadding?" style\x3d'padding-left:5px'":"")+"\x3e"+(title?"\x3clabel"+(nrFields>1?" style\x3d'margin-top:5px'":
"")+"\x3e"+String(title).toUpperCase().escapeHTML()+"\x3c/label\x3e":"")+"\x3cdiv\x3e"+String(decryptedTransaction[key]).escapeHTML().nl2br()+"\x3c/div\x3e\x3c/div\x3e";else{output="";delete _decryptedTransactions[identifier];return false}})}if(!output)$.each(fields,function(key,title){var data="";var inAttachment="attachment"in transaction;var toDecrypt=inAttachment?transaction.attachment[key]:transaction[key];if(toDecrypt){if(typeof title!="string"){var nonce=inAttachment?transaction.attachment[title.nonce]:
transaction[title.nonce];title=title.title}else var nonce=inAttachment?transaction.attachment[key+"Nonce"]:transaction[key+"Nonce"];try{data=NRS.decryptNote(toDecrypt,{"nonce":nonce,"account":account})}catch(err){var mesage=String(err.message?err.message:err);if(err.errorCode&&err.errorCode==1){showDecryptionForm=true;return false}else data="Could not decrypt "+String(title).escapeHTML().toLowerCase()+"."}output+="\x3cdiv"+(!options.noPadding?" style\x3d'padding-left:5px'":"")+"\x3e"+(title?"\x3clabel"+
(nrFields>1?" style\x3d'margin-top:5px'":"")+"\x3e"+String(title).toUpperCase().escapeHTML()+"\x3c/label\x3e":"")+"\x3cdiv\x3e"+String(data).escapeHTML().nl2br()+"\x3c/div\x3e\x3c/div\x3e"}});if(showDecryptionForm){_encryptedNote={"transaction":transaction,"fields":fields,"account":account,"options":options,"identifier":identifier};$("#decrypt_note_form_container").detach().appendTo(formEl);$("#decrypt_note_form_container, "+formEl).show()}else{NRS.removeDecryptionForm();$(outputEl).html(output).show()}};
NRS.removeDecryptionForm=function($modal){if($modal&&$modal.find("#decrypt_note_form_container").length||!$modal&&$("#decrypt_note_form_container").length){$("#decrypt_note_form_container input").val("");$("#decrypt_note_form_container").hide().detach().appendTo("body")}};$("#decrypt_note_form_container button.btn-primary").click(function(){$("#decrypt_note_form_container").trigger("submit")});$("#decrypt_note_form_container").on("submit",function(e){e.preventDefault();var $form=$(this);if(!_encryptedNote){$form.find(".callout").html("Encrypted note not found.").show();
return}var password=$form.find("input[name\x3dsecretPhrase]").val();if(!password)if(NRS.password)password=NRS.password;else if(_decryptionPassword)password=_decryptionPassword;else{$form.find(".callout").html("Secret phrase is a required field.").show();return}var accountId=NRS.getAccountId(password);if(accountId!=NRS.account){$form.find(".callout").html("Incorrect secret phrase.").show();return}var rememberPassword=$form.find("input[name\x3drememberPassword]").is(":checked");var otherAccount=_encryptedNote.account;
var output="";var decryptionError=false;var decryptedFields={};var inAttachment="attachment"in _encryptedNote.transaction;var nrFields=Object.keys(_encryptedNote.fields).length;$.each(_encryptedNote.fields,function(key,title){var note=inAttachment?_encryptedNote.transaction.attachment[key]:_encryptedNote.transaction[key];if(typeof title!="string"){var noteNonce=inAttachment?_encryptedNote.transaction.attachment[title.nonce]:_encryptedNote.transaction[title.nonce];title=title.title}else var noteNonce=
inAttachment?_encryptedNote.transaction.attachment[key+"Nonce"]:_encryptedNote.transaction[key+"Nonce"];try{var note=NRS.decryptNote(note,{"nonce":noteNonce,"account":otherAccount},password);decryptedFields[key]=note;output+="\x3cdiv"+(!_encryptedNote.options.noPadding?" style\x3d'padding-left:5px'":"")+"\x3e"+(title?"\x3clabel"+(nrFields>1?" style\x3d'margin-top:5px'":"")+"\x3e"+String(title).toUpperCase().escapeHTML()+"\x3c/label\x3e":"")+"\x3cdiv\x3e"+note.escapeHTML().nl2br()+"\x3c/div\x3e\x3c/div\x3e"}catch(err){decryptionError=
true;var message=String(err.message?err.message:err);$form.find(".callout").html(message.escapeHTML());return false}});if(decryptionError)return;_decryptedTransactions[_encryptedNote.identifier]=decryptedFields;var decryptionKeys=Object.keys(_decryptedTransactions);if(decryptionKeys.length>150)delete _decryptedTransactions[decryptionKeys[0]];NRS.removeDecryptionForm();var outputEl=_encryptedNote.options.outputEl?String(_encryptedNote.options.outputEl).escapeHTML():"#transaction_info_output_bottom";
$(outputEl).html(output).show();_encryptedNote=null;if(rememberPassword)_decryptionPassword=password});NRS.decryptAllMessages=function(messages,password){if(!password)throw{"message":"Secret phrase is a required field.","errorCode":1};else{var accountId=NRS.getAccountId(password);if(accountId!=NRS.account)throw{"message":"Incorrect secret phrase.","errorCode":2};}try{for(var otherUser in messages)for(var key in messages[otherUser]){var message=messages[otherUser][key];if(message.type=1&&message.subtype==
8)if(!_decryptedTransactions[message.transaction]){var decoded=NRS.decryptNote(message.attachment.message,{"nonce":message.attachment.nonce,"account":otherUser},password);_decryptedTransactions[message.transaction]={"message":decoded}}}}catch(err){throw err;}};function simpleHash(message){_hash.init();_hash.update(message);return _hash.getBytes()}function areByteArraysEqual(bytes1,bytes2){if(bytes1.length!==bytes2.length)return false;for(var i=0;i<bytes1.length;++i)if(bytes1[i]!==bytes2[i])return false;
return true}function curve25519_clamp(curve){curve[0]&=65528;curve[15]&=32767;curve[15]|=16384;return curve}function byteArrayToBigInteger(byteArray,startIndex){var value=new BigInteger("0",10);var temp1,temp2;for(var i=byteArray.length-1;i>=0;i--){temp1=value.multiply(new BigInteger("256",10));temp2=temp1.add(new BigInteger(byteArray[i].toString(10),10));value=temp2}return value}function aesEncrypt(plaintext,options){var text=converters.byteArrayToWordArray(plaintext);if(!options.sharedKey)var sharedKey=
getSharedKey(options.privateKey,options.publicKey);else var sharedKey=options.sharedKey.slice(0);for(var i=0;i<32;i++)sharedKey[i]^=options.nonce[i];var key=CryptoJS.SHA256(converters.byteArrayToWordArray(sharedKey));var tmp=new Uint8Array(16);window.crypto.getRandomValues(tmp);var iv=converters.byteArrayToWordArray(tmp);var encrypted=CryptoJS.AES.encrypt(text,key,{iv:iv});var ivOut=converters.wordArrayToByteArray(encrypted.iv);var ciphertextOut=converters.wordArrayToByteArray(encrypted.ciphertext);
return ivOut.concat(ciphertextOut)}function aesDecrypt(ivCiphertext,options){if(ivCiphertext.length<16||ivCiphertext.length%16!=0)throw{name:"invalid ciphertext"};var iv=converters.byteArrayToWordArray(ivCiphertext.slice(0,16));var ciphertext=converters.byteArrayToWordArray(ivCiphertext.slice(16));if(!options.sharedKey)var sharedKey=getSharedKey(options.privateKey,options.publicKey);else var sharedKey=options.sharedKey.slice(0);for(var i=0;i<32;i++)sharedKey[i]^=options.nonce[i];var key=CryptoJS.SHA256(converters.byteArrayToWordArray(sharedKey));
var encrypted=CryptoJS.lib.CipherParams.create({ciphertext:ciphertext,iv:iv,key:key});var decrypted=CryptoJS.AES.decrypt(encrypted,key,{iv:iv});var plaintext=converters.wordArrayToByteArray(decrypted);return plaintext}function encryptData(plaintext,options){if(!options.sharedKey)options.sharedKey=getSharedKey(options.privateKey,options.publicKey);var compressedPlaintext=pako.gzip(new Uint8Array(plaintext));options.nonce=new Uint8Array(32);window.crypto.getRandomValues(options.nonce);var data=aesEncrypt(compressedPlaintext,
options);return{"nonce":options.nonce,"data":data}}function decryptData(data,options){if(!options.sharedKey)options.sharedKey=getSharedKey(options.privateKey,options.publicKey);var compressedPlaintext=aesDecrypt(data,options);var binData=new Uint8Array(compressedPlaintext);var data=pako.inflate(binData);return converters.byteArrayToString(data)}function getSharedKey(key1,key2){return converters.shortArrayToByteArray(curve25519_(converters.byteArrayToShortArray(key1),converters.byteArrayToShortArray(key2),
null))}return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){NRS.pages.polls=function(){NRS.sendRequest("getPollIds+",function(response){if(response.pollIds&&response.pollIds.length){var polls={};var nrPolls=0;for(var i=0;i<response.pollIds.length;i++)NRS.sendRequest("getTransaction+",{"transaction":response.pollIds[i]},function(poll,input){if(NRS.currentPage!="polls"){polls={};return}if(!poll.errorCode)polls[input.transaction]=poll;nrPolls++;if(nrPolls==response.pollIds.length){var rows="";if(NRS.unconfirmedTransactions.length)for(var i=
0;i<NRS.unconfirmedTransactions.length;i++){var unconfirmedTransaction=NRS.unconfirmedTransactions[i];if(unconfirmedTransaction.type==1&&unconfirmedTransaction.subType==2){var pollDescription=String(unconfirmedTransaction.attachment.description);if(pollDescription.length>100)pollDescription=pollDescription.substring(0,100)+"...";rows+="\x3ctr class\x3d'tentative'\x3e\x3ctd\x3e"+String(unconfirmedTransaction.attachment.name).escapeHTML()+"\x3c/td\x3e\x3ctd\x3e"+pollDescription.escapeHTML()+"\x3c/td\x3e\x3ctd\x3e"+
(unconfirmedTransaction.sender!=NRS.genesis?"\x3ca href\x3d'#' data-user\x3d'"+NRS.getAccountFormatted(unconfirmedTransaction,"sender")+"' class\x3d'user_info'\x3e"+NRS.getAccountTitle(unconfirmedTransaction,"sender")+"\x3c/a\x3e":"Genesis")+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatTimestamp(unconfirmedTransaction.timestamp)+"\x3c/td\x3e\x3ctd\x3e\x3ca href\x3d'#'\x3eVote (todo)\x3c/td\x3e\x3c/tr\x3e"}}for(var i=0;i<nrPolls;i++){var poll=polls[response.pollIds[i]];if(!poll)continue;var pollDescription=String(poll.attachment.description);
if(pollDescription.length>100)pollDescription=pollDescription.substring(0,100)+"...";rows+="\x3ctr\x3e\x3ctd\x3e"+String(poll.attachment.name).escapeHTML()+"\x3c/td\x3e\x3ctd\x3e"+pollDescription.escapeHTML()+"\x3c/td\x3e\x3ctd\x3e"+(poll.sender!=NRS.genesis?"\x3ca href\x3d'#' data-user\x3d'"+NRS.getAccountFormatted(poll,"sender")+"' class\x3d'user_info'\x3e"+NRS.getAccountTitle(poll,"sender")+"\x3c/a\x3e":"Genesis")+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatTimestamp(poll.timestamp)+"\x3c/td\x3e\x3ctd\x3e\x3ca href\x3d'#'\x3eVote (todo)\x3c/td\x3e\x3c/tr\x3e"}NRS.dataLoaded(rows)}})}else NRS.dataLoaded()})};
NRS.incoming.polls=function(){NRS.loadPage("polls")};$("#create_poll_answers").on("click","button.btn.remove_answer",function(e){e.preventDefault();if($("#create_poll_answers \x3e .form-group").length==1)return;$(this).closest("div.form-group").remove()});$("#create_poll_answers_add").click(function(e){var $clone=$("#create_poll_answers \x3e .form-group").first().clone();$clone.find("input").val("");$clone.appendTo("#create_poll_answers")});NRS.forms.createPoll=function($modal){var options=new Array;
$("#create_poll_answers input.create_poll_answers").each(function(){var option=$.trim($(this).val());if(option)options.push(option)});if(!options.length);var data={"name":$("#create_poll_name").val(),"description":$("#create_poll_description").val(),"optionsAreBinary":"0","minNumberOfOptions":$("#create_poll_min_options").val(),"maxNumberOfOptions":$("#create_poll_max_options").val(),"feeNXT":"1","deadline":"24","secretPhrase":$("#create_poll_password").val()};for(var i=0;i<options.length;i++)data["option"+
i]=options[i];return{"requestType":"createPoll","data":data}};NRS.forms.createPollComplete=function(response,data){if(NRS.currentPage=="polls"){var $table=$("#polls_table tbody");var date=(new Date(Date.UTC(2013,10,24,12,0,0,0))).getTime();var now=parseInt(((new Date).getTime()-date)/1E3,10);var rowToAdd="\x3ctr class\x3d'tentative'\x3e\x3ctd\x3e"+String(data.name).escapeHTML()+" - \x3cstrong\x3ePending\x3c/strong\x3e\x3c/td\x3e\x3ctd\x3e"+String(data.description).escapeHTML()+"\x3c/td\x3e\x3ctd\x3e\x3ca href\x3d'#' data-user\x3d'"+
NRS.getAccountFormatted(NRS.accountRS)+"' class\x3d'user_info'\x3e"+NRS.getAccountTitle(NRS.accountRS)+"\x3c/a\x3e\x3c/td\x3e\x3ctd\x3e"+NRS.formatTimestamp(now)+"\x3c/td\x3e\x3ctd\x3e/\x3c/td\x3e\x3c/tr\x3e";$table.prepend(rowToAdd);if($("#polls_table").parent().hasClass("data-empty"))$("#polls_table").parent().removeClass("data-empty")}};NRS.forms.castVote=function($modal){};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){NRS.blocksPageType=null;NRS.tempBlocks=[];NRS.getBlock=function(blockID,callback,pageRequest){NRS.sendRequest("getBlock"+(pageRequest?"+":""),{"block":blockID},function(response){if(response.errorCode&&response.errorCode==-1)NRS.getBlock(blockID,callback,pageRequest);else if(callback){response.block=blockID;callback(response)}},true)};NRS.handleInitialBlocks=function(response){if(response.errorCode){NRS.dataLoadFinished($("#dashboard_blocks_table"));return}NRS.blocks.push(response);
if(NRS.blocks.length<10&&response.previousBlock)NRS.getBlock(response.previousBlock,NRS.handleInitialBlocks);else{NRS.lastBlockHeight=NRS.blocks[0].height;if(NRS.state&&NRS.state.time-NRS.blocks[0].timestamp>60*60*24){NRS.downloadingBlockchain=true;$("#nrs_update_explanation span").hide();$("#downloading_blockchain, #nrs_update_explanation_blockchain_sync").show();$("#show_console").hide();NRS.updateBlockchainDownloadProgress()}var rows="";for(var i=0;i<NRS.blocks.length;i++){var block=NRS.blocks[i];
rows+="\x3ctr\x3e\x3ctd\x3e\x3ca href\x3d'#' data-block\x3d'"+String(block.height).escapeHTML()+"' data-blockid\x3d'"+String(block.block).escapeHTML()+"' class\x3d'block'"+(block.numberOfTransactions>0?" style\x3d'font-weight:bold'":"")+"\x3e"+String(block.height).escapeHTML()+"\x3c/a\x3e\x3c/td\x3e\x3ctd\x3e"+NRS.formatTimestamp(block.timestamp)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatAmount(block.totalAmountNQT)+" + "+NRS.formatAmount(block.totalFeeNQT)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatAmount(block.numberOfTransactions)+
"\x3c/td\x3e\x3c/tr\x3e"}$("#dashboard_blocks_table tbody").empty().append(rows);NRS.dataLoadFinished($("#dashboard_blocks_table"))}};NRS.handleNewBlocks=function(response){if(NRS.downloadingBlockchain)if(NRS.tempBlocks.length==0&&NRS.state.lastBlock!=response.block)return;if(response.height-1==NRS.lastBlockHeight||NRS.tempBlocks.length==99){var newBlocks=[];if(NRS.tempBlocks.length==0){NRS.blocks.unshift(response);newBlocks.push(response)}else{NRS.tempBlocks.push(response);[].unshift.apply(NRS.blocks,
NRS.tempBlocks);newBlocks=NRS.tempBlocks;NRS.tempBlocks=[]}if(NRS.blocks.length>100)NRS.blocks=NRS.blocks.slice(0,100);NRS.lastBlockHeight=NRS.blocks[0].height;NRS.incoming.updateDashboardBlocks(newBlocks)}else{NRS.tempBlocks.push(response);NRS.getBlock(response.previousBlock,NRS.handleNewBlocks)}};NRS.incoming.updateDashboardBlocks=function(newBlocks){var newBlockCount=newBlocks.length;if(newBlockCount>10){newBlocks=newBlocks.slice(0,10);newBlockCount=newBlocks.length}if(NRS.downloadingBlockchain)if(NRS.state&&
NRS.state.time-NRS.blocks[0].timestamp<60*60*24){NRS.downloadingBlockchain=false;$("#dashboard_message").hide();$("#downloading_blockchain, #nrs_update_explanation_blockchain_sync").hide();$("#show_console").show();$.growl("The block chain is now up to date.",{"type":"success"});NRS.checkAliasVersions();NRS.checkIfOnAFork()}else NRS.updateBlockchainDownloadProgress();var rows="";for(var i=0;i<newBlockCount;i++){var block=newBlocks[i];rows+="\x3ctr\x3e\x3ctd\x3e\x3ca href\x3d'#' data-block\x3d'"+String(block.height).escapeHTML()+
"' data-blockid\x3d'"+String(block.block).escapeHTML()+"' class\x3d'block'"+(block.numberOfTransactions>0?" style\x3d'font-weight:bold'":"")+"\x3e"+String(block.height).escapeHTML()+"\x3c/a\x3e\x3c/td\x3e\x3ctd\x3e"+NRS.formatTimestamp(block.timestamp)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatAmount(block.totalAmountNQT)+" + "+NRS.formatAmount(block.totalFeeNQT)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatAmount(block.numberOfTransactions)+"\x3c/td\x3e\x3c/tr\x3e"}if(newBlockCount==1)$("#dashboard_blocks_table tbody tr:last").remove();
else if(newBlockCount==10)$("#dashboard_blocks_table tbody").empty();else $("#dashboard_blocks_table tbody tr").slice(10-newBlockCount).remove();$("#dashboard_blocks_table tbody").prepend(rows);$("#dashboard_transactions_table tr.confirmed td.confirmations").each(function(){if($(this).data("incoming")){$(this).removeData("incoming");return true}var confirmations=parseInt($(this).data("confirmations"),10);var nrConfirmations=confirmations+newBlocks.length;if(confirmations<=10){$(this).data("confirmations",
nrConfirmations);$(this).attr("data-content",NRS.formatAmount(nrConfirmations,false,true)+" confirmations");if(nrConfirmations>10)nrConfirmations="10+";$(this).html(nrConfirmations)}else $(this).attr("data-content",NRS.formatAmount(nrConfirmations,false,true)+" confirmations")})};NRS.pages.blocks=function(){if(NRS.blocksPageType=="forged_blocks"){$("#forged_fees_total_box, #forged_blocks_total_box").show();$("#blocks_transactions_per_hour_box, #blocks_generation_time_box").hide();NRS.sendRequest("getAccountBlockIds+",
{"account":NRS.account,"timestamp":0},function(response){if(response.blockIds&&response.blockIds.length){var blocks=[];var nrBlocks=0;var blockIds=response.blockIds.reverse().slice(0,100);if(response.blockIds.length>100)$("#blocks_page_forged_warning").show();for(var i=0;i<blockIds.length;i++)NRS.sendRequest("getBlock+",{"block":blockIds[i],"_extra":{"nr":i}},function(block,input){if(NRS.currentPage!="blocks"){blocks={};return}block["block"]=input.block;blocks[input["_extra"].nr]=block;nrBlocks++;
if(nrBlocks==blockIds.length)NRS.blocksPageLoaded(blocks)})}else NRS.blocksPageLoaded([])})}else{$("#forged_fees_total_box, #forged_blocks_total_box").hide();$("#blocks_transactions_per_hour_box, #blocks_generation_time_box").show();if(NRS.blocks.length<100)if(NRS.downloadingBlockchain)NRS.blocksPageLoaded(NRS.blocks);else if(NRS.blocks&&NRS.blocks.length){var previousBlock=NRS.blocks[NRS.blocks.length-1].previousBlock;if(typeof previousBlock!=="undefined")NRS.getBlock(previousBlock,NRS.finish100Blocks,
true)}else NRS.blocksPageLoaded([]);else NRS.blocksPageLoaded(NRS.blocks)}};NRS.incoming.blocks=function(){NRS.loadPage("blocks")};NRS.finish100Blocks=function(response){NRS.blocks.push(response);if(NRS.blocks.length<100&&typeof response.previousBlock!=="undefined")NRS.getBlock(response.previousBlock,NRS.finish100Blocks,true);else NRS.blocksPageLoaded(NRS.blocks)};NRS.blocksPageLoaded=function(blocks){var rows="";var totalAmount=new BigInteger("0");var totalFees=new BigInteger("0");var totalTransactions=
0;for(var i=0;i<blocks.length;i++){var block=blocks[i];totalAmount=totalAmount.add(new BigInteger(block.totalAmountNQT));totalFees=totalFees.add(new BigInteger(block.totalFeeNQT));totalTransactions+=block.numberOfTransactions;rows+="\x3ctr\x3e\x3ctd\x3e\x3ca href\x3d'#' data-block\x3d'"+String(block.height).escapeHTML()+"' data-blockid\x3d'"+String(block.block).escapeHTML()+"' class\x3d'block'"+(block.numberOfTransactions>0?" style\x3d'font-weight:bold'":"")+"\x3e"+String(block.height).escapeHTML()+
"\x3c/a\x3e\x3c/td\x3e\x3ctd\x3e"+NRS.formatTimestamp(block.timestamp)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatAmount(block.totalAmountNQT)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatAmount(block.totalFeeNQT)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatAmount(block.numberOfTransactions)+"\x3c/td\x3e\x3ctd\x3e"+(block.generator!=NRS.genesis?"\x3ca href\x3d'#' data-user\x3d'"+NRS.getAccountFormatted(block,"generator")+"' class\x3d'user_info'\x3e"+NRS.getAccountTitle(block,"generator")+"\x3c/a\x3e":"Genesis")+"\x3c/td\x3e\x3ctd\x3e"+
NRS.formatVolume(block.payloadLength)+"\x3c/td\x3e\x3ctd\x3e"+Math.round(block.baseTarget/153722867*100).pad(4)+" %\x3c/td\x3e\x3c/tr\x3e"}if(blocks.length){var startingTime=blocks[blocks.length-1].timestamp;var endingTime=blocks[0].timestamp;var time=endingTime-startingTime}else var startingTime=endingTime=time=0;if(blocks.length){var averageFee=(new Big(totalFees.toString())).div(new Big("100000000")).div(new Big(String(blocks.length))).toFixed(2);var averageAmount=(new Big(totalAmount.toString())).div(new Big("100000000")).div(new Big(String(blocks.length))).toFixed(2)}else{var averageFee=
0;var averageAmount=0}averageFee=NRS.convertToNQT(averageFee);averageAmount=NRS.convertToNQT(averageAmount);$("#blocks_average_fee").html(NRS.formatStyledAmount(averageFee)).removeClass("loading_dots");$("#blocks_average_amount").html(NRS.formatStyledAmount(averageAmount)).removeClass("loading_dots");if(NRS.blocksPageType=="forged_blocks"){if(blocks.length==100)var blockCount=blocks.length+"+";else var blockCount=blocks.length;$("#forged_blocks_total").html(blockCount).removeClass("loading_dots");
$("#forged_fees_total").html(NRS.formatStyledAmount(NRS.accountInfo.forgedBalanceNQT)).removeClass("loading_dots")}else{if(time==0)$("#blocks_transactions_per_hour").html("0").removeClass("loading_dots");else $("#blocks_transactions_per_hour").html(Math.round(totalTransactions/(time/60)*60)).removeClass("loading_dots");$("#blocks_average_generation_time").html(Math.round(time/100)+"s").removeClass("loading_dots")}NRS.dataLoaded(rows)};$("#blocks_page_type .btn").click(function(e){e.preventDefault();
var type=$.trim($(this).text()).toLowerCase();if(type=="forged by you")NRS.blocksPageType="forged_blocks";else NRS.blocksPageType="";$("#blocks_average_amount, #blocks_average_fee, #blocks_transactions_per_hour, #blocks_average_generation_time, #forged_blocks_total, #forged_fees_total").html("\x3cspan\x3e.\x3c/span\x3e\x3cspan\x3e.\x3c/span\x3e\x3cspan\x3e.\x3c/span\x3e\x3c/span\x3e").addClass("loading_dots");$("#blocks_table tbody").empty();$("#blocks_table").parent().addClass("data-loading").removeClass("data-empty");
NRS.loadPage("blocks")});$("#goto_forged_blocks").click(function(e){e.preventDefault();$("#blocks_page_type").find(".btn:last").button("toggle");NRS.blocksPageType="forged_blocks";NRS.goToPage("blocks")});return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){NRS.multiQueue=null;NRS.sendOutsideRequest=function(url,data,callback,async){if($.isFunction(data)){async=callback;callback=data;data={}}else data=data||{};$.support.cors=true;$.ajax({url:url,crossDomain:true,dataType:"json",type:"GET",timeout:3E4,async:async===undefined?true:async,data:data}).done(function(json){if(json.errorCode&&!json.errorDescription)json.errorDescription=json.errorMessage?json.errorMessage:"Unknown error occured.";if(callback)callback(json,data)}).fail(function(xhr,
textStatus,error){if(callback)callback({"errorCode":-1,"errorDescription":error},{})})};NRS.sendRequest=function(requestType,data,callback,async){if(requestType==undefined)return;if($.isFunction(data)){async=callback;callback=data;data={}}else data=data||{};$.each(data,function(key,val){if(key!="secretPhrase")if(typeof val=="string")data[key]=$.trim(val)});try{var nxtFields=["feeNXT","amountNXT","priceNXT","refundNXT","discountNXT"];for(var i=0;i<nxtFields.length;i++){var nxtField=nxtFields[i];var field=
nxtField.replace("NXT","");if(nxtField in data){data[field+"NQT"]=NRS.convertToNQT(data[nxtField]);delete data[nxtField]}}}catch(err){if(callback)callback({"errorCode":1,"errorDescription":err+" (Field: "+field+")"});return}if(requestType=="getAccountId"){var accountId=NRS.getAccountId(data.secretPhrase);if(callback)callback({"accountId":accountId});return}if("secretPhrase"in data){var accountId=NRS.getAccountId(NRS.rememberPassword?NRS.password:data.secretPhrase);if(accountId!=NRS.account){if(callback)callback({"errorCode":1,
"errorDescription":"Incorrect secret phrase."});return}else NRS.processAjaxRequest(requestType,data,callback,async)}else NRS.processAjaxRequest(requestType,data,callback,async)};NRS.processAjaxRequest=function(requestType,data,callback,async){if(!NRS.multiQueue)NRS.multiQueue=$.ajaxMultiQueue(8);if(data["_extra"]){var extra=data["_extra"];delete data["_extra"]}else var extra=null;var currentPage=null;var currentSubPage=null;if(requestType.slice(-1)=="+"){requestType=requestType.slice(0,-1);currentPage=
NRS.currentPage}else{var plusCharacter=requestType.indexOf("+");if(plusCharacter>0){var subType=requestType.substr(plusCharacter);requestType=requestType.substr(0,plusCharacter);currentPage=NRS.currentPage}}if(currentPage&&NRS.currentSubPage)currentSubPage=NRS.currentSubPage;var type="secretPhrase"in data?"POST":"GET";var url=NRS.server+"/nxt?requestType\x3d"+requestType;if(type=="GET")if(typeof data=="string")data+="\x26random\x3d"+Math.random();else data.random=Math.random();var secretPhrase="";
if(type=="POST"&&(NRS.accountInfo.errorCode&&NRS.accountInfo.errorCode==5)){if(callback)callback({"errorCode":2,"errorDescription":"You have a brand new account, fund it with some coins first."},data);else $.growl("You have a brand new account, fund it with some coins first.",{"type":"danger"});return}if(!NRS.isLocalHost&&(type=="POST"&&(requestType!="startForging"&&requestType!="stopForging"))){if(NRS.rememberPassword)secretPhrase=NRS.password;else secretPhrase=data.secretPhrase;delete data.secretPhrase;
if(NRS.accountInfo&&NRS.accountInfo.publicKey)data.publicKey=NRS.accountInfo.publicKey;else{data.publicKey=NRS.generatePublicKey(secretPhrase);NRS.accountInfo.publicKey=data.publicKey}}else if(type=="POST"&&NRS.rememberPassword)data.secretPhrase=NRS.password;$.support.cors=true;if(type=="GET")var ajaxCall=NRS.multiQueue.queue;else var ajaxCall=$.ajax;if(data.querystring){data=data.querystring;type="POST"}ajaxCall({url:url,crossDomain:true,dataType:"json",type:type,timeout:3E4,async:async===undefined?
true:async,currentPage:currentPage,currentSubPage:currentSubPage,shouldRetry:type=="GET"?2:undefined,data:data}).done(function(response,status,xhr){if(NRS.console)NRS.addToConsole(this.url,this.type,this.data,response);if(typeof data=="object"&&"recipient"in data)if(/^NXT\-/i.test(data.recipient)){data.recipientRS=data.recipient;var address=new NxtAddress;if(address.set(data.recipient))data.recipient=address.account_id()}else{var address=new NxtAddress;if(address.set(data.recipient))data.recipientRS=
address.toString()}if(secretPhrase&&(response.unsignedTransactionBytes&&(!response.errorCode&&!response.error))){var publicKey=NRS.generatePublicKey(secretPhrase);var signature=NRS.signBytes(response.unsignedTransactionBytes,converters.stringToHexString(secretPhrase));if(!NRS.verifyBytes(signature,response.unsignedTransactionBytes,publicKey)){if(callback)callback({"errorCode":1,"errorDescription":"Could not verify signature (client side)."},data);else $.growl("Could not verify signature.",{"type":"danger"});
return}else{var payload=response.unsignedTransactionBytes.substr(0,192)+signature+response.unsignedTransactionBytes.substr(320);if(!NRS.verifyTransactionBytes(payload,requestType,data)){if(callback)callback({"errorCode":1,"errorDescription":"Could not verify transaction bytes (server side)."},data);else $.growl("Could not verify transaction bytes.",{"type":"danger"});return}else if(callback){if(extra)data["_extra"]=extra;NRS.broadcastTransactionBytes(payload,callback,response,data)}else NRS.broadcastTransactionBytes(payload)}}else{if(response.errorCode&&
!response.errorDescription)response.errorDescription=response.errorMessage?response.errorMessage:"Unknown error occured.";else if(response.error&&!response.errorDescription){response.errorDescription=typeof response.error=="string"?response.error:"Unknown error occured.";if(!response.errorCode)response.errorCode=1}if(callback){if(extra)data["_extra"]=extra;callback(response,data)}}}).fail(function(xhr,textStatus,error){if(NRS.console)NRS.addToConsole(this.url,this.type,this.data,error,true);if((error==
"error"||textStatus=="error")&&(xhr.status==404||xhr.status==0))if(type=="POST")$.growl("Could not connect.",{"type":"danger","offset":10});if(error=="abort")return;else if(callback){if(error=="timeout")error="The request timed out. Warning: This does not mean the request did not go through. You should wait a couple of blocks and see if your request has been processed.";callback({"errorCode":-1,"errorDescription":error},{})}})};NRS.verifyTransactionBytes=function(transactionBytes,requestType,data){var transaction=
{};var byteArray=converters.hexStringToByteArray(transactionBytes);transaction.type=byteArray[0];transaction.subtype=byteArray[1];transaction.timestamp=String(converters.byteArrayToSignedInt32(byteArray,2));transaction.deadline=String(converters.byteArrayToSignedShort(byteArray,6));transaction.senderPublicKey=converters.byteArrayToHexString(byteArray.slice(8,40));transaction.recipient=String(converters.byteArrayToBigInteger(byteArray,40));transaction.amountNQT=String(converters.byteArrayToBigInteger(byteArray,
48));transaction.feeNQT=String(converters.byteArrayToBigInteger(byteArray,56));var refHash=byteArray.slice(64,96);transaction.referencedTransactionFullHash=converters.byteArrayToHexString(refHash);if(transaction.referencedTransactionFullHash=="0000000000000000000000000000000000000000000000000000000000000000"){transaction.referencedTransactionFullHash=null;transaction.referencedTransactionId=null}else transaction.referencedTransactionId=converters.byteArrayToBigInteger([refHash[7],refHash[6],refHash[5],
refHash[4],refHash[3],refHash[2],refHash[1],refHash[0]],0);if(!("amountNQT"in data))data.amountNQT="0";if(!("recipient"in data)){data.recipient="1739068987193023818";data.recipientRS="NXT-MRCC-2YLS-8M54-3CMAJ"}if(transaction.senderPublicKey!=NRS.accountInfo.publicKey)return false;if(transaction.deadline!==data.deadline||transaction.recipient!==data.recipient)return false;if(transaction.amountNQT!==data.amountNQT||transaction.feeNQT!==data.feeNQT)return false;if("referencedTransactionFullHash"in data){if(transaction.referencedTransactionFullHash!==
data.referencedTransactionFullHash)return false}else if(transaction.referencedTransactionFullHash!==null)return false;if("referencedTransactionId"in data){if(transaction.referencedTransactionId!==data.referencedTransactionId)return false}else if(transaction.referencedTransactionId!==null)return false;var pos=160;switch(requestType){case "sendMoney":if(transaction.type!==0||transaction.subtype!==0)return false;break;case "sendMessage":if(transaction.type!==1||transaction.subtype!==0)return false;var messageLength=
String(converters.byteArrayToSignedInt32(byteArray,pos));pos+=4;var slice=byteArray.slice(pos,pos+messageLength);transaction.message=converters.byteArrayToHexString(slice);if(transaction.message!==data.message)return false;break;case "setAlias":if(transaction.type!==1||transaction.subtype!==1)return false;var aliasLength=parseInt(byteArray[pos],10);pos++;transaction.aliasName=converters.byteArrayToString(byteArray,pos,aliasLength);pos+=aliasLength;var uriLength=converters.byteArrayToSignedShort(byteArray,
pos);pos+=2;transaction.aliasURI=converters.byteArrayToString(byteArray,pos,uriLength);if(transaction.aliasName!==data.aliasName||transaction.aliasURI!==data.aliasURI)return false;break;case "createPoll":if(transaction.type!==1||transaction.subtype!==2)return false;var nameLength=converters.byteArrayToSignedShort(byteArray,pos);pos+=2;transaction.name=converters.byteArrayToString(byteArray,pos,nameLength);pos+=nameLength;var descriptionLength=converters.byteArrayToSignedShort(byteArray,pos);pos+=
2;transaction.description=converters.byteArrayToString(byteArray,pos,descriptionLength);pos+=descriptionLength;var nr_options=byteArray[pos];pos++;for(var i=0;i<nr_options;i++){var optionLength=converters.byteArrayToSignedShort(byteArray,pos);pos+=2;transaction["option"+i]=converters.byteArrayToString(byteArray,pos,optionLength);pos+=optionLength}transaction.minNumberOfOptions=String(byteArray[pos]);pos++;transaction.maxNumberOfOptions=String(byteArray[pos]);pos++;transaction.optionsAreBinary=String(byteArray[pos]);
if(transaction.name!==data.name||(transaction.description!==data.description||(transaction.minNumberOfOptions!==data.minNumberOfOptions||(transaction.maxNumberOfOptions!==data.maxNumberOfOptions||transaction.optionsAreBinary!==data.optionsAreBinary))))return false;for(var i=0;i<nr_options;i++)if(transaction["option"+i]!==data["option"+i])return false;if("option"+i in data)return false;break;case "castVote":if(transaction.type!==1||transaction.subtype!==3)return false;transaction.poll=String(converters.byteArrayToBigInteger(byteArray,
pos));pos+=8;var voteLength=byteArray[pos];pos++;transaction.votes=[];for(var i=0;i<voteLength;i++){transaction.votes.push(byteArray[pos]);pos++}return false;break;case "hubAnnouncement":if(transaction.type!==1||transaction.subtype!=4)return false;var minFeePerByte=String(converters.byteArrayToBigInteger(byteArray,pos));pos+=8;var numberOfUris=parseInt(byteArray[pos],10);pos++;var uris=[];for(var i=0;i<numberOfUris;i++){var uriLength=parseInt(byteArray[pos],10);pos++;uris[i]=converters.byteArrayToString(byteArray,
pos,uriLength);pos+=uriLength}return false;break;case "setAccountInfo":if(transaction.type!==1||transaction.subtype!=5)return false;var nameLength=parseInt(byteArray[pos],10);pos++;transaction.name=converters.byteArrayToString(byteArray,pos,nameLength);pos+=nameLength;var descriptionLength=converters.byteArrayToSignedShort(byteArray,pos);pos+=2;transaction.description=converters.byteArrayToString(byteArray,pos,descriptionLength);pos+=descriptionLength;if(transaction.name!==data.name||transaction.description!==
data.description)return false;break;case "sellAlias":if(transaction.type!==1||transaction.subtype!==6)return false;var aliasLength=parseInt(byteArray[pos],10);pos++;transaction.alias=converters.byteArrayToString(byteArray,pos,aliasLength);pos+=aliasLength;transaction.priceNQT=String(converters.byteArrayToBigInteger(byteArray,pos));if(transaction.alias!==data.aliasName||transaction.priceNQT!==data.priceNQT)return false;break;case "buyAlias":if(transaction.type!==1&&transaction.subtype!==7)return false;
var aliasLength=parseInt(byteArray[pos],10);pos++;transaction.alias=converters.byteArrayToString(byteArray,pos,aliasLength);if(transaction.alias!==data.aliasName)return false;break;case "sendEncryptedNote":if(transaction.type!==1&&transaction.subtype!==8)return false;var messageLength=converters.byteArrayToSignedShort(byteArray,pos);pos+=2;var slice=byteArray.slice(pos,pos+messageLength);transaction.message=converters.byteArrayToHexString(slice);if(transaction.message!=data.message)return false;break;
case "issueAsset":if(transaction.type!==2||transaction.subtype!==0)return false;var nameLength=byteArray[pos];pos++;transaction.name=converters.byteArrayToString(byteArray,pos,nameLength);pos+=nameLength;var descriptionLength=converters.byteArrayToSignedShort(byteArray,pos);pos+=2;transaction.description=converters.byteArrayToString(byteArray,pos,descriptionLength);pos+=descriptionLength;transaction.quantityQNT=String(converters.byteArrayToBigInteger(byteArray,pos));if(transaction.name!==data.name||
(transaction.description!==data.description||transaction.quantityQNT!==data.quantityQNT))return false;break;case "transferAsset":if(transaction.type!==2||transaction.subtype!==1)return false;transaction.asset=String(converters.byteArrayToBigInteger(byteArray,pos));pos+=8;transaction.quantityQNT=String(converters.byteArrayToBigInteger(byteArray,pos));pos+=8;var commentLength=converters.byteArrayToSignedShort(byteArray,pos);pos+=2;transaction.comment=converters.byteArrayToString(byteArray,pos,commentLength);
if(transaction.asset!==data.asset||(transaction.quantityQNT!==data.quantityQNT||transaction.comment!==data.comment))return false;break;case "placeAskOrder":case "placeBidOrder":if(transaction.type!==2)return false;else if(requestType=="placeAskOrder"&&transaction.subtype!==2)return false;else if(requestType=="placeBidOrder"&&transaction.subtype!==3)return false;transaction.asset=String(converters.byteArrayToBigInteger(byteArray,pos));pos+=8;transaction.quantityQNT=String(converters.byteArrayToBigInteger(byteArray,
pos));pos+=8;transaction.priceNQT=String(converters.byteArrayToBigInteger(byteArray,pos));if(transaction.asset!==data.asset||(transaction.quantityQNT!==data.quantityQNT||transaction.priceNQT!==data.priceNQT))return false;break;case "cancelAskOrder":case "cancelBidOrder":if(transaction.type!==2)return false;else if(requestType=="cancelAskOrder"&&transaction.subtype!==4)return false;else if(requestType=="cancelBidOrder"&&transaction.subtype!==5)return false;transaction.order=String(converters.byteArrayToBigInteger(byteArray,
pos));if(transaction.order!==data.order)return false;break;case "dgsListing":if(transaction.type!==3&&transaction.subtype!=0)return false;var nameLength=converters.byteArrayToSignedShort(byteArray,pos);pos+=2;transaction.name=converters.byteArrayToString(byteArray,pos,nameLength);pos+=nameLength;var descriptionLength=converters.byteArrayToSignedShort(byteArray,pos);pos+=2;transaction.description=converters.byteArrayToString(byteArray,pos,descriptionLength);pos+=descriptionLength;var tagsLength=converters.byteArrayToSignedShort(byteArray,
pos);pos+=2;transaction.tags=converters.byteArrayToString(byteArray,pos,tagsLength);pos+=tagsLength;transaction.quantity=String(converters.byteArrayToSignedInt32(byteArray,pos));pos+=4;transaction.priceNQT=String(converters.byteArrayToBigInteger(byteArray,pos));if(transaction.name!==data.name||(transaction.description!==data.description||(transaction.tags!==data.tags||(transaction.quantity!==data.quantity||transaction.priceNQT!==data.priceNQT))))return false;break;case "dgsDelisting":if(transaction.type!==
3&&transaction.subtype!==1)return false;transaction.goodsId=String(converters.byteArrayToBigInteger(byteArray,pos));if(transaction.goodsId!==data.goodsId)return false;break;case "dgsPriceChange":if(transaction.type!==3&&transaction.subtype!==2)return false;transaction.goodsId=String(converters.byteArrayToBigInteger(byteArray,pos));pos+=8;transaction.priceNQT=String(converters.byteArrayToBigInteger(byteArray,pos));if(transaction.goodsId!==data.goodsId||transaction.priceNQT!==data.priceNQT)return false;
break;case "dgsQuantityChange":if(transaction.type!==3&&transaction.subtype!==3)return false;transaction.goodsId=String(converters.byteArrayToBigInteger(byteArray,pos));pos+=8;transaction.deltaQuantity=String(converters.byteArrayToSignedInt32(byteArray,pos));if(transaction.goodsId!==data.goodsId||transaction.deltaQuantity!==data.deltaQuantity)return false;break;case "dgsPurchase":if(transaction.type!==3&&transaction.subtype!==4)return false;transaction.goodsId=String(converters.byteArrayToBigInteger(byteArray,
pos));pos+=8;transaction.quantity=String(converters.byteArrayToSignedInt32(byteArray,pos));pos+=4;transaction.priceNQT=String(converters.byteArrayToBigInteger(byteArray,pos));pos+=8;transaction.deliveryDeadline=String(converters.byteArrayToSignedInt32(byteArray,pos));pos+=4;var noteLength=converters.byteArrayToSignedShort(byteArray,pos);pos+=2;transaction.note=converters.byteArrayToString(byteArray,pos,noteLength);pos+=noteLength;transaction.noteNonce=converters.byteArrayToString(byteArray,pos,32);
if(transaction.goodsId!==data.goodsId||(transaction.quantity!==data.quantity||(transaction.priceNQT!==data.priceNQT||(transaction.deliveryDeadline!==data.deliveryDeadline||(transaction.note!==data.note||transaction.noteNonce!==data.noteNonce)))))return false;break;case "dgsDelivery":if(transaction.type!==3&&transaction.subtype!==5)return false;transaction.goodsId=String(converters.byteArrayToBigInteger(byteArray,pos));pos+=8;var goodsLength=converters.byteArrayToSignedShort(byteArray,pos);pos+=2;
transaction.goods=converters.byteArrayToString(byteArray,pos,goodsLength);pos+=goodsLength;transaction.goodsNonce=converters.byteArrayToString(byteArray,pos,32);pos+=32;transaction.discountNQT=String(converters.byteArrayToBigInteger(byteArray,pos));if(transaction.goodsId!==data.goodsId||(transaction.goods!==data.goods||(transaction.goodsNonce!==data.goodsNonce||transaction.discountNQT!==data.discountNQT)))return false;break;case "dgsFeedback":if(transaction.type!==3&&transaction.subtype!==6)return false;
transaction.purchaseId=String(converters.byteArrayToBigInteger(byteArray,pos));pos+=8;var noteLength=converters.byteArrayToSignedShort(byteArray,pos);pos+=2;transaction.note=converters.byteArrayToString(byteArray,pos,noteLength);pos+=noteLength;transaction.noteNonce=converters.byteArrayToString(byteArray,pos,32);if(transaction.purchaseId!==data.purchaseId||(transaction.note!==data.note||transaction.noteNonce!==data.noteNonce))return false;break;case "dgsRefund":if(transaction.type!==3&&transaction.subtype!==
7)return false;transaction.purchaseId=String(converters.byteArrayToBigInteger(byteArray,pos));pos+=8;transaction.refundNQT=String(converters.byteArrayToBigInteger(byteArray,pos));pos+=8;var noteLength=converters.byteArrayToSignedShort(byteArray,pos);pos+=2;transaction.note=converters.byteArrayToString(byteArray,pos,noteLength);pos+=noteLength;transaction.noteNonce=converters.byteArrayToString(byteArray,pos,32);if(transaction.purchaseId!==data.purchaseId||(transaction.refundNQT!==data.refundNQT||(transaction.note!==
data.note||transaction.noteNonce!==data.noteNonce)))return false;break;case "leaseBalance":if(transaction.type!==4&&transaction.subtype!==0)return false;transaction.period=String(converters.byteArrayToSignedShort(byteArray,pos));if(transaction.period!==data.period)return false;break;default:return false}return true};NRS.broadcastTransactionBytes=function(transactionData,callback,original_response,original_data){$.ajax({url:NRS.server+"/nxt?requestType\x3dbroadcastTransaction",crossDomain:true,dataType:"json",
type:"POST",timeout:3E4,async:true,data:{"transactionBytes":transactionData}}).done(function(response,status,xhr){if(NRS.console)NRS.addToConsole(this.url,this.type,this.data,response);if(callback)if(response.errorCode&&!response.errorDescription){response.errorDescription=response.errorMessage?response.errorMessage:"Unknown error occured.";callback(response,original_data)}else if(response.error){response.errorCode=1;response.errorDescription=response.error;callback(response,original_data)}else{if("transactionBytes"in
original_response)delete original_response.transactionBytes;original_response.broadcasted=true;original_response.transaction=response.transaction;original_response.fullHash=response.fullHash;callback(original_response,original_data)}}).fail(function(xhr,textStatus,error){if(NRS.console)NRS.addToConsole(this.url,this.type,this.data,error,true);if(callback){if(error=="timeout")error="The request timed out. Warning: This does not mean the request did not go through. You should a few blocks and see if your request has been processed before trying to submit it again.";
callback({"errorCode":-1,"errorDescription":error},{})}})};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){NRS.normalVersion={};NRS.betaVersion={};NRS.isOutdated=false;NRS.checkAliasVersions=function(){if(NRS.downloadingBlockchain){$("#nrs_update_explanation span").hide();$("#nrs_update_explanation_blockchain_sync").show();return}if(NRS.isTestNet){$("#nrs_update_explanation span").hide();$("#nrs_update_explanation_testnet").show();return}NRS.sendRequest("getAlias",{"aliasName":"nrsversion"},function(response){if(response.aliasURI&&(response=response.aliasURI.split(" "))){NRS.normalVersion.versionNr=
response[0];NRS.normalVersion.hash=response[1];if(NRS.betaVersion.versionNr)NRS.checkForNewVersion()}});NRS.sendRequest("getAlias",{"aliasName":"nrsbetaversion"},function(response){if(response.aliasURI&&(response=response.aliasURI.split(" "))){NRS.betaVersion.versionNr=response[0];NRS.betaVersion.hash=response[1];if(NRS.normalVersion.versionNr)NRS.checkForNewVersion()}})};NRS.checkForNewVersion=function(){var installVersusNormal,installVersusBeta,normalVersusBeta;if(NRS.normalVersion&&NRS.normalVersion.versionNr)installVersusNormal=
NRS.versionCompare(NRS.state.version,NRS.normalVersion.versionNr);if(NRS.betaVersion&&NRS.betaVersion.versionNr)installVersusBeta=NRS.versionCompare(NRS.state.version,NRS.betaVersion.versionNr);$("#nrs_update_explanation span").hide();$(".nrs_new_version_nr").html(NRS.normalVersion.versionNr).show();$(".nrs_beta_version_nr").html(NRS.betaVersion.versionNr).show();if(installVersusNormal==-1&&installVersusBeta==-1){NRS.isOutdated=true;$("#nrs_update").html("Outdated!").show();$("#nrs_update_explanation_new_choice").show()}else if(installVersusBeta==
-1){NRS.isOutdated=false;$("#nrs_update").html("New Beta").show();$("#nrs_update_explanation_new_beta").show()}else if(installVersusNormal==-1){NRS.isOutdated=true;$("#nrs_update").html("Outdated!").show();$("#nrs_update_explanation_new_release").show()}else{NRS.isOutdated=false;$("#nrs_update_explanation_up_to_date").show()}};NRS.versionCompare=function(v1,v2){if(v2==undefined)return-1;else if(v1==undefined)return-1;var v1last=v1.slice(-1);var v2last=v2.slice(-1);if(v1last=="e")v1=v1.substring(0,
v1.length-1);else v1last="";if(v2last=="e")v2=v2.substring(0,v2.length-1);else v2last="";var v1parts=v1.split(".");var v2parts=v2.split(".");function isValidPart(x){return/^\d+$/.test(x)}if(!v1parts.every(isValidPart)||!v2parts.every(isValidPart))return NaN;v1parts=v1parts.map(Number);v2parts=v2parts.map(Number);for(var i=0;i<v1parts.length;++i){if(v2parts.length==i)return 1;if(v1parts[i]==v2parts[i])continue;else if(v1parts[i]>v2parts[i])return 1;else return-1}if(v1parts.length!=v2parts.length)return-1;
if(v1last&&v2last)return 0;else if(v1last)return 1;else if(v2last)return-1;else return 0};NRS.supportsUpdateVerification=function(){if(typeof File!=="undefined"&&!File.prototype.slice){if(File.prototype.webkitSlice)File.prototype.slice=File.prototype.webkitSlice;if(File.prototype.mozSlice)File.prototype.slice=File.prototype.mozSlice}if(!window.File||(!window.FileReader||(!window.FileList||(!window.Blob||(!File.prototype.slice||!window.Worker)))))return false;return true};NRS.verifyClientUpdate=function(e){e.stopPropagation();
e.preventDefault();var files=null;if(e.originalEvent.target.files&&e.originalEvent.target.files.length)files=e.originalEvent.target.files;else if(e.originalEvent.dataTransfer.files&&e.originalEvent.dataTransfer.files.length)files=e.originalEvent.dataTransfer.files;if(!files)return;$("#nrs_update_hash_progress").css("width","0%");$("#nrs_update_hash_progress").show();var worker=new Worker("js/crypto/sha256worker.js");worker.onmessage=function(e){if(e.data.progress)$("#nrs_update_hash_progress").css("width",
e.data.progress+"%");else{$("#nrs_update_hash_progress").hide();$("#nrs_update_drop_zone").hide();if(e.data.sha256==NRS.downloadedVersion.hash)$("#nrs_update_result").html("The downloaded version has been verified, the hash is correct. You may proceed with the installation.").attr("class"," ");else $("#nrs_update_result").html("The downloaded version hash does not compare to the specified hash in the blockchain. DO NOT PROCEED.").attr("class","incorrect");$("#nrs_update_hash_version").html(NRS.downloadedVersion.versionNr);
$("#nrs_update_hash_download").html(e.data.sha256);$("#nrs_update_hash_official").html(NRS.downloadedVersion.hash);$("#nrs_update_hashes").show();$("#nrs_update_result").show();NRS.downloadedVersion={};$("body").off("dragover.nrs, drop.nrs")}};worker.postMessage({file:files[0]})};NRS.downloadClientUpdate=function(version){if(version=="release")NRS.downloadedVersion=NRS.normalVersion;else NRS.downloadedVersion=NRS.betaVersion;if(NRS.inApp){parent.postMessage({"type":"update","update":{"type":version,
"version":NRS.downloadedVersion.versionNr,"hash":NRS.downloadedVersion.hash}},"*");$("#nrs_modal").modal("hide")}else{$("#nrs_update_iframe").attr("src","https://bitbucket.org/JeanLucPicard/nxt/downloads/nxt-client-"+NRS.downloadedVersion.versionNr+".zip");$("#nrs_update_explanation").hide();$("#nrs_update_drop_zone").show();$("body").on("dragover.nrs",function(e){e.preventDefault();e.stopPropagation();if(e.originalEvent&&e.originalEvent.dataTransfer)e.originalEvent.dataTransfer.dropEffect="copy"});
$("body").on("drop.nrs",function(e){NRS.verifyClientUpdate(e)});$("#nrs_update_drop_zone").on("click",function(e){e.preventDefault();$("#nrs_update_file_select").trigger("click")});$("#nrs_update_file_select").on("change",function(e){NRS.verifyClientUpdate(e)})}return false};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){NRS.showConsole=function(){NRS.console=window.open("","console","width\x3d750,height\x3d400,menubar\x3dno,scrollbars\x3dyes,status\x3dno,toolbar\x3dno,resizable\x3dyes");$(NRS.console.document.head).html("\x3ctitle\x3eConsole\x3c/title\x3e\x3cstyle type\x3d'text/css'\x3ebody { background:black; color:white; font-family:courier-new,courier;font-size:14px; } pre { font-size:14px; } #console { padding-top:15px; }\x3c/style\x3e");$(NRS.console.document.body).html("\x3cdiv style\x3d'position:fixed;top:0;left:0;right:0;padding:5px;background:#efefef;color:black;'\x3eConsole opened. Logging started...\x3cdiv style\x3d'float:right;text-decoration:underline;color:blue;font-weight:bold;cursor:pointer;' onclick\x3d'document.getElementById(\"console\").innerHTML\x3d\"\"'\x3eclear\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d'console'\x3e\x3c/div\x3e")};
NRS.addToConsole=function(url,type,data,response,error){if(!NRS.console)return;if(!NRS.console.document||!NRS.console.document.body){NRS.console=null;return}url=url.replace(/&random=[\.\d]+/,"",url);NRS.addToConsoleBody(url+" ("+type+") "+(new Date).toString(),"url");if(data)if(typeof data=="string"){var d=NRS.queryStringToObject(data);NRS.addToConsoleBody(JSON.stringify(d,null,"\t"),"post")}else NRS.addToConsoleBody(JSON.stringify(data,null,"\t"),"post");if(error)NRS.addToConsoleBody(response,"error");
else NRS.addToConsoleBody(JSON.stringify(response,null,"\t"),response.errorCode?"error":"")};NRS.addToConsoleBody=function(text,type){var color="";switch(type){case "url":color="#29FD2F";break;case "post":color="lightgray";break;case "error":color="red";break}$(NRS.console.document.body).find("#console").append("\x3cpre"+(color?" style\x3d'color:"+color+"'":"")+"\x3e"+text.escapeHTML()+"\x3c/pre\x3e")};NRS.queryStringToObject=function(qs){qs=qs.split("\x26");if(!qs)return{};var obj={};for(var i=0;i<
qs.length;++i){var p=qs[i].split("\x3d");if(p.length!=2)continue;obj[p[0]]=decodeURIComponent(p[1].replace(/\+/g," "))}if("secretPhrase"in obj)obj.secretPhrase="***";return obj};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){$(".sidebar_context").on("contextmenu","a",function(e){e.preventDefault();if(!NRS.databaseSupport)return;NRS.closeContextMenu();if($(this).hasClass("no-context"))return;NRS.selectedContext=$(this);NRS.selectedContext.addClass("context");$(document).on("click.contextmenu",NRS.closeContextMenu);var contextMenu=$(this).data("context");if(!contextMenu)contextMenu=$(this).closest(".list-group").attr("id")+"_context";var $contextMenu=$("#"+contextMenu);if($contextMenu.length){var $options=
$contextMenu.find("ul.dropdown-menu a");$.each($options,function(){var requiredClass=$(this).data("class");if(!requiredClass)$(this).show();else if(NRS.selectedContext.hasClass(requiredClass))$(this).show();else $(this).hide()});$contextMenu.css({display:"block",left:e.pageX,top:e.pageY})}return false});NRS.closeContextMenu=function(e){if(e&&e.which==3)return;$(".context_menu").hide();if(NRS.selectedContext)NRS.selectedContext.removeClass("context");$(document).off("click.contextmenu")};return NRS}(NRS||
{},jQuery);var NRS=function(NRS,$,undefined){NRS.lastTransactionsTimestamp=0;NRS.lastTransactions="";NRS.unconfirmedTransactions=[];NRS.unconfirmedTransactionIds="";NRS.unconfirmedTransactionsChange=true;NRS.transactionsPageType=null;NRS.getInitialTransactions=function(){NRS.sendRequest("getAccountTransactionIds",{"account":NRS.account,"timestamp":0},function(response){if(response.transactionIds&&response.transactionIds.length){var transactionIds=response.transactionIds.reverse().slice(0,10);var nrTransactions=
0;var transactions=[];for(var i=0;i<transactionIds.length;i++)NRS.sendRequest("getTransaction",{"transaction":transactionIds[i]},function(transaction,input){nrTransactions++;transaction.transaction=input.transaction;transaction.confirmed=true;transactions.push(transaction);if(nrTransactions==transactionIds.length)NRS.getUnconfirmedTransactions(function(unconfirmedTransactions){NRS.handleInitialTransactions(transactions.concat(unconfirmedTransactions),transactionIds)})})}else NRS.getUnconfirmedTransactions(function(unconfirmedTransactions){NRS.handleInitialTransactions(unconfirmedTransactions,
[])})})};NRS.handleInitialTransactions=function(transactions,transactionIds){if(transactions.length){var rows="";transactions.sort(NRS.sortArray);if(transactions.length>=1){NRS.lastTransactions=transactionIds.toString();for(var i=transactions.length-1;i>=0;i--)if(transactions[i].confirmed){NRS.lastTransactionsTimestamp=transactions[i].timestamp;break}}for(var i=0;i<transactions.length;i++){var transaction=transactions[i];var receiving=transaction.recipient==NRS.account;var account=receiving?"sender":
"recipient";if(transaction.amountNQT){transaction.amount=new BigInteger(transaction.amountNQT);transaction.fee=new BigInteger(transaction.feeNQT)}rows+="\x3ctr class\x3d'"+(!transaction.confirmed?"tentative":"confirmed")+"'\x3e\x3ctd\x3e\x3ca href\x3d'#' data-transaction\x3d'"+String(transaction.transaction).escapeHTML()+"'\x3e"+NRS.formatTimestamp(transaction.timestamp)+"\x3c/a\x3e\x3c/td\x3e\x3ctd style\x3d'width:5px;padding-right:0;'\x3e"+(transaction.type==0?receiving?"\x3ci class\x3d'fa fa-plus-circle' style\x3d'color:#65C62E'\x3e\x3c/i\x3e":
"\x3ci class\x3d'fa fa-minus-circle' style\x3d'color:#E04434'\x3e\x3c/i\x3e":"")+"\x3c/td\x3e\x3ctd\x3e\x3cspan"+(transaction.type==0&&receiving?" style\x3d'color:#006400'":!receiving&&transaction.amount>0?" style\x3d'color:red'":"")+"\x3e"+NRS.formatAmount(transaction.amount)+"\x3c/span\x3e \x3cspan"+(!receiving&&transaction.type==0?" style\x3d'color:red'":"")+"\x3e+\x3c/span\x3e \x3cspan"+(!receiving?" style\x3d'color:red'":"")+"\x3e"+NRS.formatAmount(transaction.fee)+"\x3c/span\x3e\x3c/td\x3e\x3ctd\x3e"+
(transaction[account]!=NRS.genesis?"\x3ca href\x3d'#' data-user\x3d'"+NRS.getAccountFormatted(transaction,account)+"' data-user-id\x3d'"+String(transaction[account]).escapeHTML()+"' data-user-rs\x3d'"+String(transaction[account+"RS"]).escapeHTML()+"' class\x3d'user_info'\x3e"+NRS.getAccountTitle(transaction,account)+"\x3c/a\x3e":"Genesis")+"\x3c/td\x3e\x3ctd class\x3d'confirmations' data-confirmations\x3d'"+String(transaction.confirmations).escapeHTML()+"' data-content\x3d'"+NRS.formatAmount(transaction.confirmations)+
" confirmations' data-container\x3d'body' data-initial\x3d'true'\x3e"+(transaction.confirmations>10?"10+":String(transaction.confirmations).escapeHTML())+"\x3c/td\x3e\x3c/tr\x3e"}$("#dashboard_transactions_table tbody").empty().append(rows)}NRS.dataLoadFinished($("#dashboard_transactions_table"))};NRS.getNewTransactions=function(){NRS.sendRequest("getAccountTransactionIds",{"account":NRS.account,"timestamp":NRS.lastTransactionsTimestamp},function(response){if(response.transactionIds&&response.transactionIds.length){var transactionIds=
response.transactionIds.reverse().slice(0,10);if(transactionIds.toString()==NRS.lastTransactions){NRS.getUnconfirmedTransactions(function(unconfirmedTransactions){NRS.handleIncomingTransactions(unconfirmedTransactions)});return}NRS.transactionIds=transactionIds;var nrTransactions=0;var newTransactions=[];for(var i=0;i<transactionIds.length;i++)NRS.sendRequest("getTransaction",{"transaction":transactionIds[i]},function(transaction,input){nrTransactions++;transaction.transaction=input.transaction;transaction.confirmed=
true;newTransactions.push(transaction);if(nrTransactions==transactionIds.length)NRS.getUnconfirmedTransactions(function(unconfirmedTransactions){NRS.handleIncomingTransactions(newTransactions.concat(unconfirmedTransactions),transactionIds)})})}else NRS.getUnconfirmedTransactions(function(unconfirmedTransactions){NRS.handleIncomingTransactions(unconfirmedTransactions)})})};NRS.getUnconfirmedTransactions=function(callback){NRS.sendRequest("getUnconfirmedTransactionIds",{"account":NRS.account},function(response){if(response.unconfirmedTransactionIds&&
response.unconfirmedTransactionIds.length){var unconfirmedTransactionIds=response.unconfirmedTransactionIds.reverse();var nr_transactions=0;var unconfirmedTransactions=[];var unconfirmedTransactionIdArray=[];for(var i=0;i<unconfirmedTransactionIds.length;i++)NRS.sendRequest("getTransaction",{"transaction":unconfirmedTransactionIds[i]},function(transaction,input){nr_transactions++;transaction.transaction=input.transaction;transaction.confirmed=false;transaction.unconfirmed=true;transaction.confirmations=
"/";if(transaction.attachment)for(var key in transaction.attachment)if(!transaction.hasOwnProperty(key))transaction[key]=transaction.attachment[key];unconfirmedTransactions.push(transaction);unconfirmedTransactionIdArray.push(transaction.transaction);if(nr_transactions==unconfirmedTransactionIds.length){NRS.unconfirmedTransactions=unconfirmedTransactions;var unconfirmedTransactionIdString=unconfirmedTransactionIdArray.toString();if(unconfirmedTransactionIdString!=NRS.unconfirmedTransactionIds){NRS.unconfirmedTransactionsChange=
true;NRS.unconfirmedTransactionIds=unconfirmedTransactionIdString}else NRS.unconfirmedTransactionsChange=false;if(callback)callback(unconfirmedTransactions);else if(NRS.unconfirmedTransactionsChange)NRS.incoming.updateDashboardTransactions(unconfirmedTransactions,true)}})}else{NRS.unconfirmedTransactions=[];if(NRS.unconfirmedTransactionIds)NRS.unconfirmedTransactionsChange=true;else NRS.unconfirmedTransactionsChange=false;NRS.unconfirmedTransactionIds="";if(callback)callback([]);else if(NRS.unconfirmedTransactionsChange)NRS.incoming.updateDashboardTransactions([],
true)}})};NRS.handleIncomingTransactions=function(transactions,confirmedTransactionIds){var oldBlock=confirmedTransactionIds===false;if(typeof confirmedTransactionIds!="object")confirmedTransactionIds=[];if(confirmedTransactionIds.length){NRS.lastTransactions=confirmedTransactionIds.toString();for(var i=transactions.length-1;i>=0;i--)if(transactions[i].confirmed){NRS.lastTransactionsTimestamp=transactions[i].timestamp;break}}if(confirmedTransactionIds.length||NRS.unconfirmedTransactionsChange){transactions.sort(NRS.sortArray);
NRS.incoming.updateDashboardTransactions(transactions,confirmedTransactionIds.length==0)}if(NRS.currentPage=="peers")NRS.incoming.peers();else if(NRS.currentPage=="transactions"&&NRS.transactionsPageType=="unconfirmed")NRS.incoming.transactions();else if(!oldBlock||(NRS.unconfirmedTransactionsChange||NRS.state.isScanning))if(NRS.incoming[NRS.currentPage])NRS.incoming[NRS.currentPage](transactions)};NRS.sortArray=function(a,b){return b.timestamp-a.timestamp};NRS.incoming.updateDashboardTransactions=
function(newTransactions,unconfirmed){var newTransactionCount=newTransactions.length;if(newTransactionCount){var rows="";var onlyUnconfirmed=true;for(var i=0;i<newTransactionCount;i++){var transaction=newTransactions[i];var receiving=transaction.recipient==NRS.account;var account=receiving?"sender":"recipient";if(transaction.confirmed)onlyUnconfirmed=false;if(transaction.amountNQT){transaction.amount=new BigInteger(transaction.amountNQT);transaction.fee=new BigInteger(transaction.feeNQT)}rows+="\x3ctr class\x3d'"+
(!transaction.confirmed?"tentative":"confirmed")+"'\x3e\x3ctd\x3e\x3ca href\x3d'#' data-transaction\x3d'"+String(transaction.transaction).escapeHTML()+"'\x3e"+NRS.formatTimestamp(transaction.timestamp)+"\x3c/a\x3e\x3c/td\x3e\x3ctd style\x3d'width:5px;padding-right:0;'\x3e"+(transaction.type==0?receiving?"\x3ci class\x3d'fa fa-plus-circle' style\x3d'color:#65C62E'\x3e\x3c/i\x3e":"\x3ci class\x3d'fa fa-minus-circle' style\x3d'color:#E04434'\x3e\x3c/i\x3e":"")+"\x3c/td\x3e\x3ctd\x3e\x3cspan"+(transaction.type==
0&&receiving?" style\x3d'color:#006400'":!receiving&&transaction.amount>0?" style\x3d'color:red'":"")+"\x3e"+NRS.formatAmount(transaction.amount)+"\x3c/span\x3e \x3cspan"+(!receiving&&transaction.type==0?" style\x3d'color:red'":"")+"\x3e+\x3c/span\x3e \x3cspan"+(!receiving?" style\x3d'color:red'":"")+"\x3e"+NRS.formatAmount(transaction.fee)+"\x3c/span\x3e\x3c/td\x3e\x3ctd\x3e"+(transaction[account]!=NRS.genesis?"\x3ca href\x3d'#' data-user\x3d'"+NRS.getAccountFormatted(transaction,account)+"' data-user-id\x3d'"+
String(transaction[account]).escapeHTML()+"' data-user-rs\x3d'"+String(transaction[account+"RS"]).escapeHTML()+"' class\x3d'user_info'\x3e"+NRS.getAccountTitle(transaction,account)+"\x3c/a\x3e":"Genesis")+"\x3c/td\x3e\x3ctd class\x3d'confirmations' data-confirmations\x3d'"+String(transaction.confirmations).escapeHTML()+"' data-content\x3d'"+(transaction.confirmed?NRS.formatAmount(transaction.confirmations)+" confirmations":"Unconfirmed transaction")+"' data-container\x3d'body' data-initial\x3d'true'\x3e"+
(transaction.confirmations>10?"10+":String(transaction.confirmations).escapeHTML())+"\x3c/td\x3e\x3c/tr\x3e"}if(onlyUnconfirmed){$("#dashboard_transactions_table tbody tr.tentative").remove();$("#dashboard_transactions_table tbody").prepend(rows)}else $("#dashboard_transactions_table tbody").empty().append(rows);var $parent=$("#dashboard_transactions_table").parent();if($parent.hasClass("data-empty")){$parent.removeClass("data-empty");if($parent.data("no-padding"))$parent.parent().addClass("no-padding")}}else if(unconfirmed)$("#dashboard_transactions_table tbody tr.tentative").remove()};
NRS.addUnconfirmedTransaction=function(transactionId,callback){NRS.sendRequest("getTransaction",{"transaction":transactionId},function(response){if(!response.errorCode){response.transaction=transactionId;response.confirmations="/";response.confirmed=false;response.unconfirmed=true;if(response.attachment)for(var key in response.attachment)if(!response.hasOwnProperty(key))response[key]=response.attachment[key];var alreadyProcessed=false;try{var regex=new RegExp("(^|,)"+transactionId+"(,|$)");if(regex.exec(NRS.lastTransactions))alreadyProcessed=
true;else $.each(NRS.unconfirmedTransactions,function(key,unconfirmedTransaction){if(unconfirmedTransaction.transaction==transactionId){alreadyProcessed=true;return false}})}catch(e){}if(!alreadyProcessed)NRS.unconfirmedTransactions.unshift(response);if(callback)callback(alreadyProcessed);NRS.incoming.updateDashboardTransactions(NRS.unconfirmedTransactions,true);NRS.getAccountInfo()}else if(callback)callback(false)})};NRS.pages.transactions=function(){if(NRS.transactionsPageType=="unconfirmed"){NRS.displayUnconfirmedTransactions();
return}var rows="";var params={"account":NRS.account,"timestamp":0};if(NRS.transactionsPageType){params.type=NRS.transactionsPageType.type;params.subtype=NRS.transactionsPageType.subtype;var unconfirmedTransactions=NRS.getUnconfirmedTransactionsFromCache(params.type,params.subtype)}else var unconfirmedTransactions=NRS.unconfirmedTransactions;if(unconfirmedTransactions)for(var i=0;i<unconfirmedTransactions.length;i++)rows+=NRS.getTransactionRowHTML(unconfirmedTransactions[i]);NRS.sendRequest("getAccountTransactionIds+",
params,function(response){if(response.transactionIds&&response.transactionIds.length){var transactions={};var nrTransactions=0;var transactionIds=response.transactionIds.reverse().slice(0,100);for(var i=0;i<transactionIds.length;i++)NRS.sendRequest("getTransaction+",{"transaction":transactionIds[i]},function(transaction,input){if(NRS.currentPage!="transactions"){transactions={};return}transaction.transaction=input.transaction;transaction.confirmed=true;transactions[input.transaction]=transaction;
nrTransactions++;if(nrTransactions==transactionIds.length){for(var i=0;i<nrTransactions;i++){var transaction=transactions[transactionIds[i]];rows+=NRS.getTransactionRowHTML(transaction)}NRS.dataLoaded(rows)}})}else NRS.dataLoaded(rows)})};NRS.incoming.transactions=function(transactions){NRS.loadPage("transactions")};NRS.displayUnconfirmedTransactions=function(){NRS.sendRequest("getUnconfirmedTransactions",function(response){var rows="";if(response.unconfirmedTransactions&&response.unconfirmedTransactions.length)for(var i=
0;i<response.unconfirmedTransactions.length;i++)rows+=NRS.getTransactionRowHTML(response.unconfirmedTransactions[i]);NRS.dataLoaded(rows)})};NRS.getTransactionRowHTML=function(transaction){var transactionType="Unknown";if(transaction.type==0)transactionType="Ordinary payment";else if(transaction.type==1)switch(transaction.subtype){case 0:transactionType="Arbitrary message";break;case 1:transactionType="Alias assignment";break;case 2:transactionType="Poll creation";break;case 3:transactionType="Vote casting";
break;case 4:transactionType="Hub Announcement";break;case 5:transactionType="Account Info";break;case 6:if(transaction.attachment.priceNQT=="0")if(transaction.sender==NRS.account&&transaction.recipient==NRS.account)transactionType="Alias Sale Cancellation";else transactionType="Alias Transfer";else transactionType="Alias Sale";break;case 7:transactionType="Alias Buy";break;case 8:transactionType="Encrypted Message";break}else if(transaction.type==2)switch(transaction.subtype){case 0:transactionType=
"Asset issuance";break;case 1:transactionType="Asset transfer";break;case 2:transactionType="Ask order placement";break;case 3:transactionType="Bid order placement";break;case 4:transactionType="Ask order cancellation";break;case 5:transactionType="Bid order cancellation";break}else if(transaction.type==3)switch(transaction.subtype){case 0:transactionType="Marketplace Listing";break;case 1:transactionType="Marketplace Removal";break;case 2:transactionType="Marketplace Price Change";break;case 3:transactionType=
"Marketplace Quantity Change";break;case 4:transactionType="Marketplace Purchase";break;case 5:transactionType="Marketplace Delivery";break;case 6:transactionType="Marketplace Feedback";break;case 7:transactionType="Marketplace Refund";break}else if(transaction.type==4)switch(transaction.subtype){case 0:transactionType="Balance Leasing";break}var receiving=transaction.recipient==NRS.account;var account=receiving?"sender":"recipient";if(transaction.amountNQT){transaction.amount=new BigInteger(transaction.amountNQT);
transaction.fee=new BigInteger(transaction.feeNQT)}return"\x3ctr "+(!transaction.confirmed&&(transaction.recipient==NRS.account||transaction.sender==NRS.account)?" class\x3d'tentative'":"")+"\x3e\x3ctd\x3e\x3ca href\x3d'#' data-transaction\x3d'"+String(transaction.transaction).escapeHTML()+"'\x3e"+String(transaction.transaction).escapeHTML()+"\x3c/a\x3e\x3c/td\x3e\x3ctd\x3e"+NRS.formatTimestamp(transaction.timestamp)+"\x3c/td\x3e\x3ctd\x3e"+transactionType+"\x3c/td\x3e\x3ctd style\x3d'width:5px;padding-right:0;'\x3e"+
(transaction.type==0?receiving?"\x3ci class\x3d'fa fa-plus-circle' style\x3d'color:#65C62E'\x3e\x3c/i\x3e":"\x3ci class\x3d'fa fa-minus-circle' style\x3d'color:#E04434'\x3e\x3c/i\x3e":"")+"\x3c/td\x3e\x3ctd "+(transaction.type==0&&receiving?" style\x3d'color:#006400;'":!receiving&&transaction.amount>0?" style\x3d'color:red'":"")+"\x3e"+NRS.formatAmount(transaction.amount)+"\x3c/td\x3e\x3ctd "+(!receiving?" style\x3d'color:red'":"")+"\x3e"+NRS.formatAmount(transaction.fee)+"\x3c/td\x3e\x3ctd\x3e"+
(transaction[account]!=NRS.genesis?"\x3ca href\x3d'#' data-user\x3d'"+NRS.getAccountFormatted(transaction,account)+"' class\x3d'user_info'\x3e"+NRS.getAccountTitle(transaction,account)+"\x3c/a\x3e":"Genesis")+"\x3c/td\x3e\x3ctd class\x3d'confirmations' data-content\x3d'"+(transaction.confirmed?NRS.formatAmount(transaction.confirmations)+" confirmations":"Unconfirmed transaction")+"' data-container\x3d'body' data-placement\x3d'left'\x3e"+(!transaction.confirmed?"/":transaction.confirmations>1440?"1440+":
NRS.formatAmount(transaction.confirmations))+"\x3c/td\x3e\x3c/tr\x3e"};$("#transactions_page_type li a").click(function(e){e.preventDefault();var type=$(this).data("type");if(!type)NRS.transactionsPageType=null;else if(type=="unconfirmed")NRS.transactionsPageType="unconfirmed";else{type=type.split(":");NRS.transactionsPageType={"type":type[0],"subtype":type[1]}}$(this).parents(".btn-group").find(".text").text($(this).text());$(".popover").remove();NRS.loadPage("transactions")});return NRS}(NRS||{},
jQuery);var NRS=function(NRS,$,undefined){NRS.newlyCreatedAccount=false;NRS.password="";NRS.allowLoginViaEnter=function(){$("#login_password").keypress(function(e){if(e.which=="13"){e.preventDefault();var password=$("#login_password").val();NRS.login(password)}})};NRS.showLoginOrWelcomeScreen=function(){if(NRS.hasLocalStorage&&localStorage.getItem("logged_in"))NRS.showLoginScreen();else NRS.showWelcomeScreen()};NRS.showLoginScreen=function(){$("#account_phrase_custom_panel, #account_phrase_generator_panel, #welcome_panel, #custom_passphrase_link").hide();
$("#account_phrase_custom_panel :input:not(:button):not([type\x3dsubmit])").val("");$("#account_phrase_generator_panel :input:not(:button):not([type\x3dsubmit])").val("");$("#login_panel").show();setTimeout(function(){$("#login_password").focus()},10)};NRS.showWelcomeScreen=function(){$("#login_panel, account_phrase_custom_panel, #account_phrase_generator_panel, #account_phrase_custom_panel, #welcome_panel, #custom_passphrase_link").hide();$("#welcome_panel").show()};NRS.registerUserDefinedAccount=
function(){$("#account_phrase_generator_panel, #login_panel, #welcome_panel, #custom_passphrase_link").hide();$("#account_phrase_custom_panel :input:not(:button):not([type\x3dsubmit])").val("");$("#account_phrase_generator_panel :input:not(:button):not([type\x3dsubmit])").val("");$("#account_phrase_custom_panel").show();$("#registration_password").focus()};NRS.registerAccount=function(){$("#login_panel, #welcome_panel").hide();$("#account_phrase_generator_panel").show();$("#account_phrase_generator_panel step_3 .callout").hide();
var $loading=$("#account_phrase_generator_loading");var $loaded=$("#account_phrase_generator_loaded");if(window.crypto||window.msCrypto)$loading.find("span.loading_text").html("Generating your secret phrase. Please wait");$loading.show();$loaded.hide();if(typeof PassPhraseGenerator=="undefined")$.when($.getScript("js/crypto/3rdparty/seedrandom.js"),$.getScript("js/crypto/passphrasegenerator.js")).done(function(){$loading.hide();$loaded.show();PassPhraseGenerator.generatePassPhrase("#account_phrase_generator_panel")}).fail(function(jqxhr,
settings,exception){alert("Could not load word list...")});else{$loading.hide();$loaded.show();PassPhraseGenerator.generatePassPhrase("#account_phrase_generator_panel")}};NRS.verifyGeneratedPassphrase=function(){var password=$.trim($("#account_phrase_generator_panel .step_3 textarea").val());if(password!=PassPhraseGenerator.passPhrase)$("#account_phrase_generator_panel .step_3 .callout").show();else{NRS.newlyCreatedAccount=true;NRS.login(password,function(){$.growl("Secret phrase confirmed successfully, you are now logged in.",
{"type":"success"})});PassPhraseGenerator.reset();$("#account_phrase_generator_panel textarea").val("");$("#account_phrase_generator_panel .step_3 .callout").hide()}};$("#account_phrase_custom_panel form").submit(function(event){event.preventDefault();var password=$("#registration_password").val();var repeat=$("#registration_password_repeat").val();var error="";if(password.length<35)error="Secret phrase must be at least 35 characters long.";else if(password.length<50&&(!password.match(/[A-Z]/)||!password.match(/[0-9]/)))error=
"Since your secret phrase is less than 50 characters long, it must contain numbers and uppercase letters.";else if(password!=repeat)error="Secret phrases do not match.";if(error)$("#account_phrase_custom_panel .callout").first().removeClass("callout-info").addClass("callout-danger").html(error);else{$("#registration_password, #registration_password_repeat").val("");NRS.login(password,function(){$.growl("Secret phrase confirmed successfully, you are now logged in.",{"type":"success"})})}});NRS.login=
function(password,callback){$("#login_password, #registration_password, #registration_password_repeat").val("");if(!password.length){$.growl("You must enter your secret phrase. If you don't have one, click the registration button below.",{"type":"danger","offset":10});return}NRS.sendRequest("getBlockchainStatus",function(response){if(response.errorCode){$.growl("Could not connect to server.",{"type":"danger","offset":10});return}NRS.state=response;NRS.sendRequest("getAccountId",{"secretPhrase":password},
function(response){if(!response.errorCode)NRS.account=String(response.accountId).escapeHTML();if(!NRS.account)return;var nxtAddress=new NxtAddress;if(nxtAddress.set(NRS.account))NRS.accountRS=nxtAddress.toString();else $.growl("Could not generate Reed Solomon address.",{"type":"danger"});NRS.sendRequest("getAccountPublicKey",{"account":NRS.account},function(response){if(response&&(response.publicKey&&response.publicKey!=NRS.generatePublicKey(password))){$.growl("This account is already taken. Please choose another pass phrase.",
{"type":"danger","offset":10});return}if($("#remember_password").is(":checked")){NRS.rememberPassword=true;$("#remember_password").prop("checked",false);NRS.password=password;$(".secret_phrase, .show_secret_phrase").hide();$(".hide_secret_phrase").show()}$("#account_id").html(String(NRS.accountRS).escapeHTML()).css("font-size","12px");var passwordNotice="";if(password.length<35)passwordNotice="Your secret phrase is less than 35 characters long. This is not secure.";else if(password.length<50&&(!password.match(/[A-Z]/)||
!password.match(/[0-9]/)))passwordNotice="Your secret phrase does not contain numbers and uppercase letters. This is not secure.";if(passwordNotice)$.growl("\x3cstrong\x3eWarning\x3c/strong\x3e: "+passwordNotice,{"type":"danger"});NRS.getAccountInfo(true,function(){if(NRS.accountInfo.currentLeasingHeightFrom)NRS.isLeased=NRS.lastBlockHeight>=NRS.accountInfo.currentLeasingHeightFrom&&NRS.lastBlockHeight<=NRS.accountInfo.currentLeasingHeightTo;else NRS.isLeased=false;if(!NRS.accountInfo.publicKey||
(NRS.accountInfo.effectiveBalanceNXT==0||(!NRS.isLocalHost||(NRS.downloadingBlockchain||NRS.isLeased)))){$("#forging_indicator").removeClass("forging");$("#forging_indicator span").html("Not Forging");$("#forging_indicator").show();NRS.isForging=false}else if(NRS.isLocalHost)NRS.sendRequest("startForging",{"secretPhrase":password},function(response){if("deadline"in response){$("#forging_indicator").addClass("forging");$("#forging_indicator span").html("Forging");NRS.isForging=true}else{$("#forging_indicator").removeClass("forging");
$("#forging_indicator span").html("Not Forging");NRS.isForging=false}$("#forging_indicator").show()})});NRS.unlock();if(NRS.isOutdated)$.growl("A new NRS release is available. It is recommended that you update.",{"type":"danger"});NRS.checkIfOnAFork();NRS.setupClipboardFunctionality();if(callback)callback();NRS.checkLocationHash(password);$(window).on("hashchange",NRS.checkLocationHash);NRS.getInitialTransactions()})})})};$("#logout_button_container").on("show.bs.dropdown",function(e){if(!NRS.isForging)e.preventDefault()});
NRS.showLockscreen=function(){if(NRS.hasLocalStorage&&localStorage.getItem("logged_in"))setTimeout(function(){$("#login_password").focus()},10);else NRS.showWelcomeScreen();$("#center").show()};NRS.unlock=function(){if(NRS.hasLocalStorage&&!localStorage.getItem("logged_in"))localStorage.setItem("logged_in",true);var userStyles=["header","sidebar","page_header"];for(var i=0;i<userStyles.length;i++){var color=NRS.settings[userStyles[i]+"_color"];if(color)NRS.updateStyle(userStyles[i],color)}var contentHeaderHeight=
$(".content-header").height();var navBarHeight=$("nav.navbar").height();$(".content-splitter-right").css("bottom",contentHeaderHeight+navBarHeight+10+"px");$("#lockscreen").hide();$("body, html").removeClass("lockscreen");$(document.documentElement).scrollTop(0)};$("#logout_button").click(function(e){if(!NRS.isForging){e.preventDefault();NRS.logout()}});NRS.logout=function(stopForging){if(stopForging&&NRS.isForging){$("#stop_forging_modal .show_logout").show();$("#stop_forging_modal").modal("show")}else{NRS.setDecryptionPassword("");
NRS.password="";window.location.reload()}};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){NRS.pages.aliases=function(){NRS.sendRequest("getAliases+",{"account":NRS.account,"timestamp":0},function(response){if(response.aliases&&response.aliases.length){var aliases=response.aliases;if(NRS.unconfirmedTransactions.length)for(var i=0;i<NRS.unconfirmedTransactions.length;i++){var unconfirmedTransaction=NRS.unconfirmedTransactions[i];if(unconfirmedTransaction.type==1&&unconfirmedTransaction.subtype==1){var found=false;for(var j=0;j<aliases.length;j++)if(aliases[j].aliasName==
unconfirmedTransaction.attachment.alias){aliases[j].aliasURI=unconfirmedTransaction.attachment.uri;aliases[j].tentative=true;found=true;break}if(!found)aliases.push({"aliasName":unconfirmedTransaction.attachment.alias,"aliasURI":unconfirmedTransaction.attachment.uri,"tentative":true})}}aliases.sort(function(a,b){if(a.aliasName.toLowerCase()>b.aliasName.toLowerCase())return 1;else if(a.aliasName.toLowerCase()<b.aliasName.toLowerCase())return-1;else return 0});var rows="";var alias_account_count=0,
alias_uri_count=0,empty_alias_count=0,alias_count=aliases.length;for(var i=0;i<alias_count;i++){var alias=aliases[i];alias.status="/";var unconfirmedTransaction=NRS.getUnconfirmedTransactionFromCache(1,6,{"alias":alias.aliasName});if(unconfirmedTransaction){alias.tentative=true;alias.buyer=unconfirmedTransaction.recipient;alias.priceNQT=unconfirmedTransaction.priceNQT}var allowCancel=false;if(alias.buyer)if(alias.priceNQT=="0")if(alias.buyer==NRS.account)alias.status="Cancelling Sale";else alias.status=
"Transfer In Progress";else{allowCancel=true;if(alias.buyer!=NRS.genesis)alias.status="For Sale (direct)";else alias.status="For Sale (indirect)"}if(alias.status!="/")alias.status="\x3cspan class\x3d'label label-info'\x3e"+alias.status+"\x3c/span\x3e";rows+="\x3ctr"+(alias.tentative?" class\x3d'tentative'":"")+" data-alias\x3d'"+String(alias.aliasName).toLowerCase().escapeHTML()+"'\x3e\x3ctd class\x3d'alias'\x3e"+String(alias.aliasName).escapeHTML()+"\x3c/td\x3e\x3ctd class\x3d'uri'\x3e"+(alias.aliasURI.indexOf("http")===
0?"\x3ca href\x3d'"+String(alias.aliasURI).escapeHTML()+"' target\x3d'_blank'\x3e"+String(alias.aliasURI).escapeHTML()+"\x3c/a\x3e":String(alias.aliasURI).escapeHTML())+"\x3c/td\x3e\x3ctd class\x3d'status'\x3e"+alias.status+"\x3c/td\x3e\x3ctd style\x3d'white-space:nowrap'\x3e\x3ca class\x3d'btn btn-xs btn-default' href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#register_alias_modal' data-alias\x3d'"+String(alias.aliasName).escapeHTML()+"'\x3eEdit\x3c/a\x3e \x3ca class\x3d'btn btn-xs btn-default' href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#transfer_alias_modal' data-alias\x3d'"+
String(alias.aliasName).escapeHTML()+"'\x3eTransfer\x3c/a\x3e \x3ca class\x3d'btn btn-xs btn-default' href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#sell_alias_modal' data-alias\x3d'"+String(alias.aliasName).escapeHTML()+"'\x3eSell\x3c/a\x3e"+(allowCancel?" \x3ca class\x3d'btn btn-xs btn-default' href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#cancel_alias_sale_modal' data-alias\x3d'"+String(alias.aliasName).escapeHTML()+"'\x3eCancel Sale\x3c/a\x3e":"")+"\x3c/td\x3e\x3c/tr\x3e";if(!alias.aliasURI)empty_alias_count++;
else if(alias.aliasURI.indexOf("http")===0)alias_uri_count++;else if(alias.aliasURI.indexOf("acct:")===0||alias.aliasURI.indexOf("nacc:")===0)alias_account_count++}$("#aliases_table tbody").empty().append(rows);NRS.dataLoadFinished($("#aliases_table"));$("#alias_account_count").html(alias_account_count).removeClass("loading_dots");$("#alias_uri_count").html(alias_uri_count).removeClass("loading_dots");$("#empty_alias_count").html(empty_alias_count).removeClass("loading_dots");$("#alias_count").html(alias_count).removeClass("loading_dots")}else{$("#aliases_table tbody").empty();
NRS.dataLoadFinished($("#aliases_table"));$("#alias_account_count, #alias_uri_count, #empty_alias_count, #alias_count").html("0").removeClass("loading_dots")}NRS.pageLoaded()})};$("#transfer_alias_modal, #sell_alias_modal, #cancel_alias_sale_modal").on("show.bs.modal",function(e){var $invoker=$(e.relatedTarget);var alias=String($invoker.data("alias"));$(this).find("input[name\x3daliasName]").val(alias.escapeHTML());$(this).find(".alias_name_display").html(alias.escapeHTML());if($(this).attr("id")==
"sell_alias_modal"){$(this).find("ul.nav-pills li").removeClass("active");$(this).find("ul.nav-pills li:first-child").addClass("active");$("#sell_alias_recipient_div").show()}});NRS.forms.sellAlias=function($modal){var data=NRS.getFormData($modal.find("form:first"));if(data.cancelSale){data.priceNQT="0";data.recipient=NRS.account;delete data.cancelSale}return{"data":data}};NRS.forms.sellAliasComplete=function(response,data){if(response.alreadyProcessed)return;var $row=$("#aliases_table tr[data-alias\x3d"+
String(data.aliasName).toLowerCase().escapeHTML()+"]");$row.addClass("tentative");if(data.priceNQT=="0")if(data.recipient==NRS.account)$row.find("td.status").html("\x3cspan class\x3d'label label-info'\x3eCancelling Sale\x3c/span\x3e");else $row.find("td.status").html("\x3cspan class\x3d'label label-info'\x3eTransfer In Progress\x3c/span\x3e");else if(data.recipient!="0")$row.find("td.status").html("\x3cspan class\x3d'label label-info'\x3eFor Sale (direct)\x3c/span\x3e");else $row.find("td.status").html("\x3cspan class\x3d'label label-info'\x3eFor Sale (indirect)\x3c/span\x3e")};
$("#sell_alias_to_specific_account, #sell_alias_to_anyone").on("click",function(e){e.preventDefault();$(this).closest("ul").find("li").removeClass("active");$(this).parent().addClass("active");var $modal=$(this).closest(".modal");if($(this).attr("id")=="sell_alias_to_anyone"){$modal.find("input[name\x3drecipient]").val("0");$("#sell_alias_recipient_div").hide()}else{$modal.find("input[name\x3drecipient]").val("");$("#sell_alias_recipient_div").show()}$modal.find("input[name\x3dconverted_account_id]").val("");
$modal.find(".callout").hide()});$("#buy_alias_modal").on("show.bs.modal",function(e){var $modal=$(this);var $invoker=$(e.relatedTarget);NRS.fetchingModalData=true;var alias=String($invoker.data("alias"));NRS.sendRequest("getAlias",{"aliasName":alias},function(response){NRS.fetchingModalData=false;if(response.errorCode){e.preventDefault();$.growl("Could not find alias.",{"type":"danger"})}else if(!response.buyer){e.preventDefault();$.growl("This alias is no longer for sale.",{"type":"danger"})}else if(response.buyer!=
NRS.genesis&&response.buyer!=NRS.account){e.preventDefault();$.growl("This alias is offered for sale to another account pending decision.",{"type":"danger"})}else{$modal.find("input[name\x3daliasName]").val(alias.escapeHTML());$modal.find(".alias_name_display").html(alias.escapeHTML());$modal.find("input[name\x3dpriceNXT]").val(NRS.convertToNXT(response.priceNQT))}},false)});$("#register_alias_modal").on("show.bs.modal",function(e){var $invoker=$(e.relatedTarget);var alias=$invoker.data("alias");
if(alias){NRS.fetchingModalData=true;alias=String(alias);NRS.sendRequest("getAlias",{"aliasName":alias},function(response){if(response.errorCode){e.preventDefault();$.growl("Could not find alias.",{"type":"danger"});NRS.fetchingModalData=false}else{var aliasURI;if(/http:\/\//i.test(response.aliasURI))NRS.forms.setAliasType("uri");else if((aliasURI=/acct:(.*)@nxt/.exec(response.aliasURI))||(aliasURI=/nacc:(.*)/.exec(response.aliasURI))){NRS.forms.setAliasType("account");response.aliasURI=String(aliasURI[1]).toUpperCase()}else NRS.forms.setAliasType("general");
$("#register_alias_modal h4.modal-title").html("Update Alias");$("#register_alias_modal .btn-primary").html("Update");$("#register_alias_alias").val(alias.escapeHTML()).hide();$("#register_alias_alias_noneditable").html(alias.escapeHTML()).show();$("#register_alias_alias_update").val(1);$("#register_alias_uri").val(response.aliasURI)}},false)}else{$("#register_alias_modal h4.modal-title").html("Register Alias");$("#register_alias_modal .btn-primary").html("Register");$("#register_alias_alias").val("").show();
$("#register_alias_alias_noneditable").html("").hide();$("#register_alias_alias_update").val(0);NRS.forms.setAliasType("uri")}});NRS.incoming.aliases=function(transactions){if(NRS.hasTransactionUpdates(transactions))NRS.loadPage("aliases")};NRS.forms.setAlias=function($modal){var data=NRS.getFormData($modal.find("form:first"));data.aliasURI=$.trim(data.aliasURI).toLowerCase();if(data.type=="account")if(!/acct:(.*)@nxt/.test(data.aliasURI)&&!/nacc:(.*)/.test(data.aliasURI))if(/^(NXT\-)/i.test(data.aliasURI))data.aliasURI=
"acct:"+data.aliasURI+"@nxt";else if(/^\d+$/.test(data.aliasURI))return{"error":"Numeric account ID's are no longer allowed."};else return{"error":"Invalid account ID."};delete data["type"];if($("#register_alias_alias_update").val()==1)return{"data":data,"successMessage":"Alias updated successfully"};else return{"data":data}};NRS.forms.setAliasType=function(type,uri){$("#register_alias_type").val(type);if(type=="uri"){$("#register_alias_uri_label").html("URI");$("#register_alias_uri").prop("placeholder",
"URI");if(uri)if(uri==NRS.accountRS)$("#register_alias_uri").val("http://");else if(!/https?:\/\//i.test(uri))$("#register_alias_uri").val("http://"+uri);else $("#register_alias_uri").val(uri);else $("#register_alias_uri").val("http://");$("#register_alias_help").hide()}else if(type=="account"){$("#register_alias_uri_label").html("Account ID");$("#register_alias_uri").prop("placeholder","Account ID");$("#register_alias_uri").val("");if(uri)if(!/acct:(.*)@nxt/.test(uri)&&!/nacc:(.*)/.test(uri))if(/^\d+$/.test(uri))$("#register_alias_uri").val(uri);
else $("#register_alias_uri").val(NRS.accountRS);else $("#register_alias_uri").val(uri);else $("#register_alias_uri").val(NRS.accountRS);$("#register_alias_help").html("The alias will reference the account number entered and can be used to send Nxt to, messages, etc..").show()}else{$("#register_alias_uri_label").html("Data");$("#register_alias_uri").prop("placeholder","Data");if(uri)if(uri==NRS.accountRS)$("#register_alias_uri").val("");else if(uri=="http://")$("#register_alias_uri").val("");else $("#register_alias_uri").val(uri);
$("#register_alias_help").html("The alias can contain any data you want.").show()}};$("#register_alias_type").on("change",function(){var type=$(this).val();NRS.forms.setAliasType(type,$("#register_alias_uri").val())});NRS.forms.setAliasComplete=function(response,data){if(response.alreadyProcessed)return;if(NRS.currentPage=="aliases"){data.aliasName=String(data.aliasName).escapeHTML();data.aliasURI=String(data.aliasURI).escapeHTML();var $table=$("#aliases_table tbody");var $row=$table.find("tr[data-alias\x3d"+
data.aliasName.toLowerCase()+"]");if($row.length){$row.addClass("tentative");$row.find("td.alias").html(data.aliasName);if(data.aliasURI&&data.aliasURI.indexOf("http")===0)$row.find("td.uri").html("\x3ca href\x3d'"+data.aliasURI+"' target\x3d'_blank'\x3e"+data.aliasURI+"\x3c/a\x3e");else $row.find("td.uri").html(data.aliasURI)}else{var $rows=$table.find("tr");var rowToAdd="\x3ctr class\x3d'tentative' data-alias\x3d'"+data.aliasName.toLowerCase()+"'\x3e\x3ctd class\x3d'alias'\x3e"+data.aliasName+"\x3c/td\x3e\x3ctd class\x3d'uri'\x3e"+
(data.aliasURI&&data.aliasURI.indexOf("http")===0?"\x3ca href\x3d'"+data.aliasURI+"' target\x3d'_blank'\x3e"+data.aliasURI+"\x3c/a\x3e":data.aliasURI)+"\x3c/td\x3e\x3ctd\x3e/\x3c/td\x3e\x3ctd style\x3d'white-space:nowrap'\x3e\x3ca class\x3d'btn btn-xs btn-default' href\x3d'#'\x3eEdit\x3c/a\x3e \x3ca class\x3d'btn btn-xs btn-default' href\x3d'#'\x3eTransfer\x3c/a\x3e \x3ca class\x3d'btn btn-xs btn-default' href\x3d'#'\x3eSell\x3c/a\x3e \x3ca class\x3d'btn btn-xs btn-default' href\x3d'#'\x3eCancel Sale\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e";
var rowAdded=false;var newAlias=data.aliasName.toLowerCase();if($rows.length)$rows.each(function(){var alias=$(this).data("alias");if(newAlias<alias){$(this).before(rowToAdd);rowAdded=true;return false}});if(!rowAdded)$table.append(rowToAdd);if($("#aliases_table").parent().hasClass("data-empty"))$("#aliases_table").parent().removeClass("data-empty")}}};$("#alias_search").on("submit",function(e){e.preventDefault();if(NRS.fetchingModalData)return;NRS.fetchingModalData=true;var alias=$.trim($("#alias_search input[name\x3dq]").val());
$("#alias_info_table tbody").empty();NRS.sendRequest("getAlias",{"aliasName":alias},function(response,input){if(response.errorCode){$.growl("Could not find alias.",{"type":"danger"});NRS.fetchingModalData=false}else{$("#alias_info_modal_alias").html(String(response.aliasName).escapeHTML());var data={"Account":NRS.getAccountTitle(response,"account"),"Last Updated":NRS.formatTimestamp(response.timestamp),"DataFormattedHTML":String(response.aliasURI).autoLink()};if(response.buyer)if(response.buyer==
NRS.account)$("#alias_sale_callout").html("You have been offered this alias for "+NRS.formatAmount(response.priceNQT)+" NXT. \x3ca href\x3d'#' data-alias\x3d'"+String(response.aliasName).escapeHTML()+"' data-toggle\x3d'modal' data-target\x3d'#buy_alias_modal'\x3eBuy it?\x3c/a\x3e").show();else if(response.buyer==NRS.genesis)$("#alias_sale_callout").html("This alias is offered for sale for "+NRS.formatAmount(response.priceNQT)+" NXT. \x3ca href\x3d'#' data-alias\x3d'"+String(response.aliasName).escapeHTML()+
"' data-toggle\x3d'modal' data-target\x3d'#buy_alias_modal'\x3eBuy it?\x3c/a\x3e").show();else $("#alias_sale_callout").html("This alias is offered for sale to another account pending decision.").show();else $("#alias_sale_callout").hide();$("#alias_info_table tbody").append(NRS.createInfoTable(data));$("#alias_info_modal").modal("show");NRS.fetchingModalData=false}})});return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){NRS.newsRefresh=0;NRS.pages.news=function(){if(NRS.settings.news!=1){$("#rss_news_container").hide();$("#rss_news_disabled").show();return}else{$("#rss_news_container").show();$("#rss_news_disabled").hide()}var currentTime=(new Date).getTime();if(currentTime-NRS.newsRefresh>60*60*10){NRS.newsRefresh=currentTime;$(".rss_news").empty().addClass("data-loading").html("\x3cimg src\x3d'img/loading_indicator.gif' width\x3d'32' height\x3d'32' /\x3e");var settings={"limit":5,
"layoutTemplate":"\x3cdiv class\x3d'list-group'\x3e{entries}\x3c/div\x3e","entryTemplate":"\x3ca href\x3d'{url}' target\x3d'_blank' class\x3d'list-group-item'\x3e\x3ch4 class\x3d'list-group-item-heading'\x3e{title}\x3c/h4\x3e\x3cp class\x3d'list-group-item-text'\x3e{shortBodyPlain}\x3c/p\x3e\x3c/a\x3e"};var settingsReddit={"limit":7,"filterLimit":5,"layoutTemplate":"\x3cdiv class\x3d'list-group'\x3e{entries}\x3c/div\x3e","entryTemplate":"\x3ca href\x3d'{url}' target\x3d'_blank' class\x3d'list-group-item'\x3e\x3ch4 class\x3d'list-group-item-heading'\x3e{title}\x3c/h4\x3e\x3cp class\x3d'list-group-item-text'\x3e{shortBodyReddit}\x3c/p\x3e\x3c/a\x3e",
"tokens":{"shortBodyReddit":function(entry,tokens){return entry.contentSnippet.replace("\x26lt;!-- SC_OFF --\x26gt;","").replace("\x26lt;!-- SC_ON --\x26gt;","").replace("[link]","").replace("[comment]","")}},"filter":function(entry,tokens){return tokens.title.indexOf("Donations toward")==-1&&tokens.title.indexOf("NXT tipping bot has arrived")==-1}};$("#nxtforum_news").rss("https://nxtforum.org/index.php?type\x3drss;action\x3d.xml;sa\x3dnews;",settings,NRS.newsLoaded);$("#nxtcrypto_news").rss("http://info.nxtcrypto.org/feed/",
settings,NRS.newsLoaded);$("#reddit_news").rss("http://www.reddit.com/r/NXT/.rss",settingsReddit,NRS.newsLoaded);$("#nxtcoin_blogspot_news").rss("http://nxtcoin.blogspot.com/feeds/posts/default",settings,NRS.newsLoaded);$("#nxter_news").rss("http://nxter.org/feed/",settings,NRS.newsLoaded);$("#nxtcommunity_news").rss("http://www.nxtcommunity.org/rss.xml",settings,NRS.newsLoaded)}NRS.pageLoaded()};NRS.newsLoaded=function($el){$el.removeClass("data-loading").find("img").remove()};$("#rss_news_enable").on("click",
function(){NRS.updateSettings("news",1);NRS.loadPage("news")});return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){NRS.defaultSettings={"submit_on_enter":0,"animate_forging":1,"news":-1,"console_log":0,"fee_warning":"100000000000","amount_warning":"10000000000000","asset_transfer_warning":"10000"};NRS.defaultColors={"background":"#F9F9F9","header":"#408EBA","sidebar":"#F4F4F4","page_header":"#FBFBFB","box":"#fff","table":"#F3F4F5"};NRS.userStyles={};NRS.styleOptions={};NRS.styleOptions.header=["header_bg",{"key":"header_bg_gradient","type":"gradient","optional":true},{"key":"logo_bg",
"optional":"true"},{"key":"logo_bg_gradient","type":"gradient","optional":true},"link_txt","link_txt_hover","link_bg_hover",{"key":"link_bg_hover_gradient","type":"gradient","optional":true},"toggle_icon",{"key":"toggle_icon_hover","optional":true},{"key":"link_border","optional":true},{"key":"link_border_inset","optional":true},{"key":"header_border","optional":true}];NRS.styleOptions.sidebar=["sidebar_bg",{"key":"user_panel_bg","optional":true},{"key":"user_panel_bg_gradient","type":"gradient",
"optional":true},"user_panel_txt","user_panel_link",{"key":"sidebar_top_border","optional":true},{"key":"sidebar_bottom_border","optional":true},{"key":"menu_item_top_border","optional":true},{"key":"menu_item_bottom_border","optional":true},"menu_item_txt","menu_item_bg",{"key":"menu_item_bg_gradient","type":"gradient","optional":true},"menu_item_txt_hover","menu_item_bg_hover",{"key":"menu_item_bg_hover_gradient","type":"gradient","optional":true},"menu_item_txt_active","menu_item_bg_active",{"key":"menu_item_bg_active_gradient",
"type":"gradient","optional":true},{"key":"menu_item_border_active","optional":true},{"key":"menu_item_border_hover","optional":true},{"key":"menu_item_border_size","type":"number","optional":"true"},{"key":"submenu_item_top_border","optional":true},{"key":"submenu_item_bottom_border","optional":true},"submenu_item_txt","submenu_item_bg",{"key":"submenu_item_bg_gradient","type":"gradient","optional":true},"submenu_item_txt_hover","submenu_item_bg_hover",{"key":"submenu_item_bg_hover_gradient","type":"gradient",
"optional":true}];NRS.styleOptions.background=["bg",{"key":"bg_image","type":"select","values":["always_grey","back_pattern","blu_stripes","brickwall","bright_squares","carbon_fibre_v2","circles","climpek","cubes","dark_matter","denim","ecailles","escheresque_ste","escheresque","furley_bg","gplaypattern","grey_sandbag","grey","grid_noise","gun_metal","hexellence","hoffman","knitting250px","light_grey","lil_fiber","noisy_grid","old_moon","pixel_weave","polaroid","ps_neutral","pw_maze_white","px_by_Gre3g",
"random_grey_variations","ricepaper_v3","scribble_light","shinedotted","square_bg","swirl","tiny_grid","weave","white_brick_wall","white_leather","worn_dots"],"optional":true},"txt","link"];NRS.styleOptions.page_header=["bg",{"key":"bg_gradient","type":"gradient","optional":true},"txt",{"key":"border","optional":"true"}];NRS.styleOptions.box=["bg","txt",{"key":"border_size","type":"number","optional":true},"border_color",{"key":"rounded_corners","optional":true,"type":"number"},"header_background",
"header_txt"];NRS.styleOptions.table=["bg","header_txt","rows_txt","row_separator","header_separator",{"key":"row_separator_size","type":"number"},{"key":"header_separator_size","type":"number"},{"key":"header_bold","type":"boolean"}];NRS.userStyles.header={"green":{"header_bg":"#29BB9C","logo_bg":"#26AE91","link_bg_hover":"#1F8E77"},"red":{"header_bg":"#cb4040","logo_bg":"#9e2b2b","link_bg_hover":"#9e2b2b","toggle_icon":"#d97474"},"brown":{"header_bg":"#ba5d32","logo_bg":"#864324","link_bg_hover":"#864324",
"toggle_icon":"#d3815b"},"purple":{"header_bg":"#86618f","logo_bg":"#614667","link_bg_hover":"#614667","toggle_icon":"#a586ad"},"gray":{"header_bg":"#575757","logo_bg":"#363636","link_bg_hover":"#363636","toggle_icon":"#787878"},"pink":{"header_bg":"#b94b6f","logo_bg":"#8b3652","link_bg_hover":"#8b3652","toggle_icon":"#cc7b95"},"bright-blue":{"header_bg":"#2494F2","logo_bg":"#2380cf","link_bg_hover":"#36a3ff","toggle_icon":"#AEBECD"},"dark-blue":{"header_bg":"#25313e","logo_bg":"#1b252e","link_txt":"#AEBECD",
"link_bg_hover":"#1b252e","link_txt_hover":"#fff","toggle_icon":"#AEBECD"}};NRS.userStyles.sidebar={"dark-gray":{"sidebar_bg":"#272930","user_panel_txt":"#fff","sidebar_top_border":"#1a1c20","sidebar_bottom_border":"#2f323a","menu_item_top_border":"#32353e","menu_item_bottom_border":"#1a1c20","menu_item_txt":"#c9d4f6","menu_item_bg_hover":"#2a2c34","menu_item_border_active":"#2494F2","submenu_item_bg":"#2A2A2A","submenu_item_txt":"#fff","submenu_item_bg_hover":"#222222"},"dark-blue":{"sidebar_bg":"#34495e",
"user_panel_txt":"#fff","sidebar_top_border":"#142638","sidebar_bottom_border":"#54677a","menu_item_top_border":"#54677a","menu_item_bottom_border":"#142638","menu_item_txt":"#fff","menu_item_bg_hover":"#3d566e","menu_item_bg_active":"#2c3e50","submenu_item_bg":"#ECF0F1","submenu_item_bg_hover":"#E0E7E8","submenu_item_txt":"#333333"}};NRS.userStyles.background={"black":{"bg":"#000","txt":"#fff","link":"#fff"},"light-gray":{"bg":"#f9f9f9","txt":"#000"},"light-gray-2":{"bg":"#ECF0F1","txt":"#000"},
"white":{"bg":"#fff","txt":"#000"},"dark-blue":{"bg":"#3E4649","txt":"#fff"},"dark-gray":{"bg":"#333333","txt":"#fff"},"blue":{"bg":"#58C0D4","txt":"#fff"},"light-blue":{"bg":"#D7DDE2","txt":"#000"}};NRS.userStyles.page_header={"light-gray":{"bg":"#ECF0F1","txt":"#000"}};NRS.userStyles.box={"black":{"bg":"#000","txt":"#fff","border_size":"2","border_color":"red","rounded_corners":"2","header_background":"#F3F3F3","header_txt":"#333"}};NRS.userStyles.table={"light_gray":{"bg":"#FAFAFA","header_txt":"#000",
"rows_txt":"#949494","row_separator":"#EBEBEB","header_separator":"#EBEBEB","row_separator_size":"1","header_separator_size":"3","header_bold":true},"black":{"bg":"#000","header_txt":"#fff","rows_bg":"#000","rows_txt":"#fff","row_separator_size":"1","row_separator":"#ADD0E4","header_bold":true}};NRS.pages.settings=function(){for(var style in NRS.userStyles){var $dropdown=$("#"+style+"_color_scheme");$dropdown.empty();$dropdown.append("\x3cli\x3e\x3ca href\x3d'#' data-color\x3d''\x3e\x3cspan class\x3d'color' style\x3d'background-color:"+
NRS.defaultColors[style]+";border:1px solid black;'\x3e\x3c/span\x3eDefault\x3c/a\x3e\x3c/li\x3e");$.each(NRS.userStyles[style],function(key,value){var bg="";if(value.bg)bg=value.bg;else if(value.header_bg)bg=value.header_bg;else if(value.sidebar_bg)bg=value.sidebar_bg;$dropdown.append("\x3cli\x3e\x3ca href\x3d'#' data-color\x3d'"+key+"'\x3e\x3cspan class\x3d'color' style\x3d'background-color: "+bg+";border:1px solid black;'\x3e\x3c/span\x3e "+key.replace("-"," ")+"\x3c/a\x3e\x3c/li\x3e")});$dropdown.append("\x3cli\x3e\x3ca href\x3d'#' data-color\x3d'custom'\x3e\x3cspan class\x3d'color'\x3e\x3c/span\x3eCustom...\x3c/a\x3e\x3c/li\x3e");
var $span=$dropdown.closest(".btn-group.colors").find("span.text");var color=NRS.settings[style+"_color"];if(!color)colorTitle="Default";else{var colorTitle=color.replace(/-/g," ");colorTitle=colorTitle.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})}$span.html(colorTitle)}for(var key in NRS.settings)if(/_warning/i.test(key)&&key!="asset_transfer_warning"){if($("#settings_"+key).length)$("#settings_"+key).val(NRS.convertToNXT(NRS.settings[key]))}else if(!/_color/i.test(key))if($("#settings_"+
key).length)$("#settings_"+key).val(NRS.settings[key]);if(NRS.settings["news"]!=-1)$("#settings_news_initial").remove();if(NRS.inApp)$("#settings_console_log_div").hide();NRS.pageLoaded()};NRS.cssGradient=function(start,stop){var output="";output+="background-image: -moz-linear-gradient(top, "+start+", "+stop+");";output+="background-image: -ms-linear-gradient(top, "+start+", "+stop+");";output+="background-image: -webkit-gradient(linear, 0 0, 0 100%, from("+start+"), to("+stop+"));";output+="background-image: -webkit-linear-gradient(top, "+
start+", "+stop+");";output+="background-image: -o-linear-gradient(top, "+start+", "+stop+");";output+="background-image: linear-gradient(top, "+start+", "+stop+");";output+="filter: progid:dximagetransform.microsoft.gradient(startColorstr\x3d'"+start+"', endColorstr\x3d'"+stop+"', GradientType\x3d0);";return output};NRS.updateStyle=function(type,color){var css="";if($.isPlainObject(color))var colors=color;else var colors=NRS.userStyles[type][color];if(colors)switch(type){case "table":if(!colors.header_bg)colors.header_bg=
colors.bg;if(!colors.rows_bg)colors.rows_bg=colors.bg;css+=".table \x3e thead \x3e tr \x3e th { background: "+colors.header_bg+"; color: "+colors.header_txt+(colors.header_bold?"; font-weight:bold":"; font-weight:normal")+" }";if(!colors.rows_even_bg&&!colors.rows_odd_bg)css+=".table \x3e tbody \x3e tr \x3e td { background: "+colors.rows_bg+" !important; color: "+colors.rows_txt+" !important }";else{if(!colors.rows_even_txt&&!colors.rows_odd_txt){colors.rows_even_txt=colors.rows_txt;colors.rows_odd_txt=
colors.rows_txt}css+=".table \x3e tbody \x3e tr \x3etd { background: "+colors.rows_even_bg+"; color: "+colors.rows_even_txt+" }";css+=".table \x3e tbody \x3e tr:nth-child(odd) \x3e td { background: "+colors.rows_odd_bg+"; color: "+colors.rows_odd_txt+" }"}if(colors.header_separator)css+=".table \x3e thead \x3e tr \x3e th { border-bottom: "+colors.header_separator_size+"px solid "+colors.header_separator+" }";else css+=".table \x3e thead \x3e tr \x3e th { border-bottom: none !important; border-top:none !important; }";
if(colors.row_separator)css+=".table \x3e tbody \x3e tr \x3e td { border-bottom: "+colors.row_separator_size+"px solid "+colors.row_separator+" }";else css+=".table \x3e tbody \x3e tr \x3e td { border-bottom: none !important; border-top:none !important; }";break;case "box":css+=".box { background: "+colors.bg+"; color: "+colors.txt+"; -moz-border-radius: "+colors.rounded_corners+"px; -webkit-border-radius: "+colors.rounded_corners+"px; border-radius: "+colors.rounded_corners+"px; border: "+colors.border_size+
"px solid "+colors.border_color+" !important }";if(colors.header_background)css+=".box .box-header { background: "+colors.header_background+(colors.header_txt?"; color: "+colors.header_txt+"; ":"")+" }";break;case "page_header":if(!colors.link)colors.link=colors.txt;css+=".right-side \x3e .page \x3e .content-header { background: "+colors.bg+"; color: "+colors.txt+(colors.border?"; border-bottom: 1px solid "+colors.border:"")+" }";if(colors.bg_gradient)css+=".right-side \x3e .page \x3e .content-header { "+
NRS.cssGradient(colors.bg,colors.bg_gradient)+" }";break;case "background":if(!colors.link)colors.link=colors.txt;css+="body, html, .content { background: "+colors.bg+"; color: "+colors.txt+" }";css+="a, a:active { color: "+colors.link+" }";if(colors.bg_image)css+="body, html, .content { background-image: url('http://subtlepatterns.com/patterns/"+colors.bg_image+".png') }";break;case "header":if(!colors.link_txt)colors.link_txt="#fff";if(!colors.toggle_icon)colors.toggle_icon="#fff";if(!colors.toggle_icon_hover)colors.toggle_icon_hover=
"#fff";if(!colors.link_txt_hover)colors.link_txt_hover=colors.link_txt;if(!colors.link_bg_hover&&colors.link_bg)colors.link_bg_hover=colors.link_bg;if(!colors.logo_bg){css+=".header { background:"+colors.header_bg+" }";if(colors.header_bg_gradient)css+=".header { "+NRS.cssGradient(colors.header_bg,colors.header_bg_gradient)+" }";css+=".header .navbar { background: inherit }";css+=".header .logo { background: inherit }"}else{css+=".header .navbar { background:"+colors.header_bg+" }";if(colors.header_bg_gradient)css+=
".header .navbar { "+NRS.cssGradient(colors.header_bg,colors.header_bg_gradient)+" }";css+=".header .logo { background: "+colors.logo_bg+" }";if(colors.logo_bg_gradient)css+=".header .logo { "+NRS.cssGradient(colors.logo_bg,colors.logo_bg_gradient)+" }"}css+=".header .navbar .nav a { color: "+colors.link_txt+(colors.link_bg?"; background:"+colors.link_bg:"")+" }";css+=".header .navbar .nav \x3e li \x3e a:hover { color: "+colors.link_txt_hover+(colors.link_bg_hover?"; background:"+colors.link_bg_hover:
"")+" }";if(colors.link_bg_hover)css+=".header .navbar .nav \x3e li \x3e a:hover { "+NRS.cssGradient(colors.link_bg_hover,colors.link_bg_hover_gradient)+" }";css+=".header .navbar .sidebar-toggle .icon-bar { background: "+colors.toggle_icon+" }";css+=".header .navbar .sidebar-toggle:hover .icon-bar { background: "+colors.toggle_icon_hover+" }";if(colors.link_border)css+=".header .navbar .nav \x3e li { border-left: 1px solid "+colors.link_border+" }";if(colors.link_border_inset){css+=".header .navbar .nav \x3e li { border-right: 1px solid "+
colors.link_border_inset+" }";css+=".header .navbar .nav \x3e li:last-child { border-right:none }";css+=".header .navbar .nav { border-left: 1px solid "+colors.link_border_inset+" }"}if(colors.header_border)css+=".header { border-bottom: 1px solid "+colors.header_border+" }";break;case "sidebar":if(!colors.user_panel_link)colors.user_panel_link=colors.user_panel_txt;if(!colors.menu_item_bg)colors.menu_item_bg=colors.sidebar_bg;if(!colors.menu_item_bg_active)colors.menu_item_bg_active=colors.menu_item_bg_hover;
if(!colors.menu_item_txt_hover)colors.menu_item_txt_hover=colors.menu_item_txt;if(!colors.menu_item_txt_active)colors.menu_item_txt_active=colors.menu_item_txt_hover;if(!colors.menu_item_border_active&&colors.menu_item_border_hover)colors.menu_item_border_active=colors.menu_item_border_hover;if(!colors.menu_item_border_size)colors.menu_item_border_size=1;css+=".left-side { background: "+colors.sidebar_bg+" }";css+=".left-side .user-panel \x3e .info { color: "+colors.user_panel_txt+" }";if(colors.user_panel_bg){css+=
".left-side .user-panel { background: "+colors.user_panel_bg+" }";if(colors.user_panel_bg_gradient)css+=".left-side .user-panel { "+NRS.cssGradient(colors.user_panel_bg,colors.user_panel_bg_gradient)+" }"}css+=".left-side .user-panel a { color:"+colors.user_panel_link+" }";if(colors.sidebar_top_border||colors.sidebar_bottom_border)css+=".left-side .sidebar \x3e .sidebar-menu { "+(colors.sidebar_top_border?"border-top: 1px solid "+colors.sidebar_top_border+"; ":"")+(colors.sidebar_bottom_border?"border-bottom: 1px solid "+
colors.sidebar_bottom_border:"")+" }";css+=".left-side .sidebar \x3e .sidebar-menu \x3e li \x3e a { background: "+colors.menu_item_bg+"; color: "+colors.menu_item_txt+(colors.menu_item_top_border?"; border-top:1px solid "+colors.menu_item_top_border:"")+(colors.menu_item_bottom_border?"; border-bottom: 1px solid "+colors.menu_item_bottom_border:"")+" }";if(colors.menu_item_bg_gradient)css+=".left-side .sidebar \x3e .sidebar-menu \x3e li \x3e a { "+NRS.cssGradient(colors.menu_item_bg,colors.menu_item_bg_gradient)+
" }";css+=".left-side .sidebar \x3e .sidebar-menu \x3e li.active \x3e a { background: "+colors.menu_item_bg_active+"; color: "+colors.menu_item_txt_active+(colors.menu_item_border_active?"; border-left: "+colors.menu_item_border_size+"px solid "+colors.menu_item_border_active:"")+" }";if(colors.menu_item_border_hover||colors.menu_item_border_active)css+=".left-side .sidebar \x3e .sidebar-menu \x3e li \x3e a { border-left: "+colors.menu_item_border_size+"px solid transparent }";if(colors.menu_item_bg_active_gradient)css+=
".left-side .sidebar \x3e .sidebar-menu \x3e li.active \x3e a { "+NRS.cssGradient(colors.menu_item_bg_active,colors.menu_item_bg_active_gradient)+" }";css+=".left-side .sidebar \x3e .sidebar-menu \x3e li \x3e a:hover { background: "+colors.menu_item_bg_hover+"; color: "+colors.menu_item_txt_hover+(colors.menu_item_border_hover?"; border-left: "+colors.menu_item_border_size+"px solid "+colors.menu_item_border_hover:"")+" }";if(colors.menu_item_bg_hover_gradient)css+=".left-side .sidebar \x3e .sidebar-menu \x3e li \x3e a:hover { "+
NRS.cssGradient(colors.menu_item_bg_hover,colors.menu_item_bg_hover_gradient)+" }";css+=".sidebar .sidebar-menu .treeview-menu \x3e li \x3e a { background: "+colors.submenu_item_bg+"; color: "+colors.submenu_item_txt+(colors.submenu_item_top_border?"; border-top:1px solid "+colors.submenu_item_top_border:"")+(colors.submenu_item_bottom_border?"; border-bottom: 1px solid "+colors.submenu_item_bottom_border:"")+" }";if(colors.submenu_item_bg_gradient)css+=".sidebar .sidebar-menu .treeview-menu \x3e li \x3e a { "+
NRS.cssGradient(colors.submenu_item_bg,colors.submenu_item_bg_gradient)+" }";css+=".sidebar .sidebar-menu .treeview-menu \x3e li \x3e a:hover { background: "+colors.submenu_item_bg_hover+"; color: "+colors.submenu_item_txt_hover+" }";if(colors.submenu_item_bg_hover_gradient)css+=".sidebar .sidebar-menu .treeview-menu \x3e li \x3e a:hover { "+NRS.cssGradient(colors.submenu_item_bg_hover,colors.submenu_item_bg_hover_gradient)+" }";break}var $style=$("#user_"+type+"_style");if($style[0].styleSheet)$style[0].styleSheet.cssText=
css;else $style.text(css)};$("ul.color_scheme_editor").on("click","li a",function(e){e.preventDefault();var color=$(this).data("color");var scheme=$(this).closest("ul").data("scheme");var $span=$(this).closest(".btn-group.colors").find("span.text");if(!color)colorTitle="Default";else{var colorTitle=color.replace(/-/g," ");colorTitle=colorTitle.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})}$span.html(colorTitle);if(color=="custom"){color=NRS.settings[scheme+
"_color"];if(!color)color="default";var style=NRS.userStyles[scheme][color];var output="";var sorted_keys=[];for(var key in style)sorted_keys.push(key);sorted_keys.sort();var options=NRS.styleOptions[scheme];output="\x3ctable class\x3d'settings'\x3e";$.each(options,function(i,definition){var value="";var optional=false;var has_value=false;var type="color";var key="";if($.isPlainObject(definition)){key=definition.key;if(key in style){value=style[key];has_value=true}if("type"in definition){type=definition["type"];
if(value==="")if(type=="number")value=0;else if(type=="boolean")value=false;else if(type=="select")value="";else value="#fff";else has_value=false}else{type="color";if(value==="")value="#fff";else has_value=true}if("optional"in definition)optional=true}else{key=definition;type="color";if(key in style){value=style[key];has_value=true}else value="#fff"}var title=key.replace(/_/g," ");title=title.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()});title=title.replace("Bg",
"BG");title=title.replace("Txt","Text");if(type=="boolean")output+="\x3ctr\x3e\x3ctd\x3e\x3clabel class\x3d'control-label' style\x3d'text-align:left;width:180px;font-weight:normal;'\x3e"+title+"\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv class\x3d'input-group' style\x3d'\x3e\x3cinput type\x3d'checkbox' name\x3d'"+key+"' value\x3d'1' class\x3d'form-control' "+(value?" checked\x3d'checked'":"")+" /\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e";else if(type=="number")output+="\x3ctr\x3e\x3ctd\x3e\x3clabel class\x3d'control-label' style\x3d'text-align:left;width:180px;font-weight:normal;'\x3e"+
title+"\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv class\x3d'input-group' style\x3d''\x3e\x3cinput type\x3d'"+type+"' name\x3d'"+key+"' value\x3d'"+value+"' class\x3d'form-control' style\x3d'width:140px' "+(optional&&!has_value?" disabled":"")+" /\x3e"+(optional?" \x3cinput type\x3dcheckbox style\x3d'margin-left:10px' class\x3d'color_scheme_enable' "+(has_value?" checked\x3d'checked'":"")+" /\x3e":"")+"\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e";else if(type=="select"){output+="\x3ctr\x3e\x3ctd\x3e\x3clabel class\x3d'control-label' style\x3d'text-align:left;width:180px;font-weight:normal;'\x3e"+
title+"\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv class\x3d'input-group'\x3e\x3cselect name\x3d'"+key+"' class\x3d'form-control' style\x3d'width:140px' "+(optional&&!has_value?" disabled":"")+"\x3e";for(var i=0;i<definition.values.length;i++)output+="\x3coption value\x3d'"+definition.values[i]+"'\x3e"+definition.values[i]+"\x3c/option\x3e";output+="\x3c/select\x3e"+(optional?" \x3cinput type\x3dcheckbox style\x3d'margin-left:10px' class\x3d'color_scheme_enable' "+(has_value?" checked\x3d'checked'":
"")+" /\x3e":"")+"\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e"}else output+="\x3ctr\x3e\x3ctd\x3e\x3clabel class\x3d'control-label' style\x3d'text-align:left;width:180px;font-weight:normal;'\x3e"+title+"\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e\x3cdiv class\x3d'input-group color_scheme_picker'\x3e\x3cinput type\x3d'text' name\x3d'"+key+"' value\x3d'"+value+"' class\x3d'form-control'"+(optional&&!has_value?" disabled":"")+" style\x3d'width:100px' /\x3e\x3cspan class\x3d'input-group-addon'"+(optional&&!has_value?
" disabled":"")+"\x3e\x3ci\x3e\x3c/i\x3e\x3c/span\x3e"+(optional?" \x3cinput type\x3dcheckbox style\x3d'margin-left:10px' class\x3d'color_scheme_enable' "+(has_value?" checked\x3d'checked'":"")+" /\x3e":"")+"\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e"});output+="\x3c/table\x3e";$("#"+scheme+"_custom_scheme").empty().append(output);$("#"+scheme+"_custom_scheme .color_scheme_picker").colorpicker().on("changeColor",function(e){NRS.updateColorScheme(e)});$("#"+scheme+"_custom_scheme_group").show()}else{$("#"+
scheme+"_custom_scheme_group").hide();if(color){NRS.updateSettings(scheme+"_color",color);NRS.updateStyle(scheme,color)}else{NRS.updateSettings(scheme+"_color");NRS.updateStyle(scheme)}}});$(".custom_color_scheme").on("change",".color_scheme_enable",function(e){e.preventDefault();var $field=$(this).closest(".input-group").find(":input.form-control",0);var $color=$(this).closest(".input-group").find("span.input-group-addon",0);$field.prop("disabled",!this.checked);if($color)$color.prop("disabled",
!this.checked);NRS.updateColorScheme(e)});$("#settings_box select").on("change",function(e){e.preventDefault();var key=$(this).attr("name");var value=parseInt($(this).val(),10);NRS.updateSettings(key,value)});$("#settings_box input[type\x3dtext]").on("input",function(e){var key=$(this).attr("name");var value=$(this).val();if(/_warning/i.test(key)&&key!="asset_transfer_warning")value=NRS.convertToNQT(value);NRS.updateSettings(key,value)});NRS.updateColorScheme=function(e){var $color_scheme=$(e.target).closest(".custom_color_scheme");
var scheme=$color_scheme.data("scheme");var $inputs=$color_scheme.find(":input:enabled");var values={};$inputs.each(function(){values[this.name]=$(this).val()});NRS.updateStyle(scheme,values)};NRS.getSettings=function(){if(NRS.databaseSupport)NRS.database.select("data",[{"id":"settings"}],function(error,result){if(result&&result.length)NRS.settings=$.extend({},NRS.defaultSettings,JSON.parse(result[0].contents));else{NRS.database.insert("data",{id:"settings",contents:"{}"});NRS.settings=NRS.defaultSettings}NRS.applySettings()});
else{if(NRS.hasLocalStorage)NRS.settings=$.extend({},NRS.defaultSettings,JSON.parse(localStorage.getItem("settings")));else NRS.settings=NRS.defaultSettings;NRS.applySettings()}};NRS.applySettings=function(key){if(!key||key=="submit_on_enter")if(NRS.settings["submit_on_enter"])$(".modal form").on("submit.onEnter",function(e){e.preventDefault();NRS.submitForm($(this).closest(".modal"))});else $(".modal form").off("submit.onEnter");if(!key||key=="animate_forging")if(NRS.settings["animate_forging"])$("#forging_indicator").addClass("animated");
else $("#forging_indicator").removeClass("animated");if(!key||key=="news")if(NRS.settings["news"]==0)$("#news_link").hide();else if(NRS.settings["news"]==1)$("#news_link").show();if(!NRS.inApp)if(!key||key=="console_log")if(NRS.settings["console_log"]==0)$("#show_console").hide();else $("#show_console").show()};NRS.updateSettings=function(key,value){if(key)NRS.settings[key]=value;if(NRS.databaseSupport)NRS.database.update("data",{contents:JSON.stringify(NRS.settings)},[{id:"settings"}]);else if(NRS.hasLocalStorage)localStorage.setItem("settings",
JSON.stringify(NRS.settings));NRS.applySettings(key)};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){NRS.confirmedFormWarning=false;NRS.forms={"errorMessages":{}};$(".modal form input").keydown(function(e){if(e.which=="13"){e.preventDefault();if(NRS.settings["submit_on_enter"]&&e.target.type!="textarea")$(this).submit();else return false}});$(".modal button.btn-primary:not([data-dismiss\x3dmodal])").click(function(){NRS.submitForm($(this).closest(".modal"),$(this))});NRS.submitForm=function($modal,$btn){if(!$btn)$btn=$modal.find("button.btn-primary:not([data-dismiss\x3dmodal])");
var $modal=$btn.closest(".modal");$modal.modal("lock");$modal.find("button").prop("disabled",true);$btn.button("loading");var requestType=$modal.find("input[name\x3drequest_type]").val();var successMessage=$modal.find("input[name\x3dsuccess_message]").val();var errorMessage=$modal.find("input[name\x3derror_message]").val();var data=null;var formFunction=NRS["forms"][requestType];var originalRequestType=requestType;var $form=$modal.find("form:first");if(NRS.downloadingBlockchain){$modal.find(".error_message").html("Please wait until the blockchain has finished downloading.").show();
NRS.unlockForm($modal,$btn);return}else if(NRS.state.isScanning){$modal.find(".error_message").html("The blockchain is currently being rescanned. Please wait a minute and then try submitting again.").show();NRS.unlockForm($modal,$btn);return}var invalidElement=false;$form.find(":input").each(function(){if($(this).is(":invalid")){var error="";var name=String($(this).attr("name")).capitalize();var value=$(this).val();if($(this).hasAttr("max")){var max=$(this).attr("max");if(value>max)error=name.escapeHTML()+
": Maximum value is "+String(max).escapeHTML()+"."}if($(this).hasAttr("min")){var min=$(this).attr("min");if(value<min)error=name.escapeHTML()+": Minimum value is "+String(min).escapeHTML()+"."}if(!error)error=name.escapeHTML()+" is invalid.";$modal.find(".error_message").html(error).show();NRS.unlockForm($modal,$btn);invalidElement=true;return false}});if(invalidElement)return;if(typeof formFunction=="function"){var output=formFunction($modal);if(!output)return;else if(output.error){$modal.find(".error_message").html(output.error.escapeHTML()).show();
NRS.unlockForm($modal,$btn);return}else{if(output.requestType)requestType=output.requestType;if(output.data)data=output.data;if(output.successMessage)successMessage=output.successMessage;if(output.errorMessage)errorMessage=output.errorMessage;if(output.stop){NRS.unlockForm($modal,$btn,true);return}}}if(!data)data=NRS.getFormData($modal.find("form:first"));if(data.deadline)data.deadline=String(data.deadline*60);if("secretPhrase"in data&&(!data.secretPhrase.length&&!NRS.rememberPassword)){$modal.find(".error_message").html("Secret phrase is a required field.").show();
NRS.unlockForm($modal,$btn);return}if(data.recipient){data.recipient=$.trim(data.recipient);if(/^\d+$/.test(data.recipient)){$modal.find(".error_message").html("Numeric account IDs are no longer allowed.").show();NRS.unlockForm($modal,$btn);return}else if(!/^NXT\-[A-Z0-9]+\-[A-Z0-9]+\-[A-Z0-9]+\-[A-Z0-9]+/i.test(data.recipient)){var convertedAccountId=$modal.find("input[name\x3dconverted_account_id]").val();if(!convertedAccountId||!/^\d+$/.test(convertedAccountId)&&!/^NXT\-[A-Z0-9]+\-[A-Z0-9]+\-[A-Z0-9]+\-[A-Z0-9]+/i.test(convertedAccountId)){$modal.find(".error_message").html("Invalid account ID.").show();
NRS.unlockForm($modal,$btn);return}else{data.recipient=convertedAccountId;data["_extra"]={"convertedAccount":true}}}}if(!NRS.showedFormWarning){if("amountNXT"in data&&(NRS.settings["amount_warning"]&&NRS.settings["amount_warning"]!="0"))if((new BigInteger(NRS.convertToNQT(data.amountNXT))).compareTo(new BigInteger(NRS.settings["amount_warning"]))>0){NRS.showedFormWarning=true;$modal.find(".error_message").html("You amount is higher than "+NRS.formatAmount(NRS.settings["amount_warning"])+" NXT. Are you sure you want to continue? Click the submit button again to confirm.").show();
NRS.unlockForm($modal,$btn);return}if("feeNXT"in data&&(NRS.settings["fee_warning"]&&NRS.settings["fee_warning"]!="0"))if((new BigInteger(NRS.convertToNQT(data.feeNXT))).compareTo(new BigInteger(NRS.settings["fee_warning"]))>0){NRS.showedFormWarning=true;$modal.find(".error_message").html("You fee is higher than "+NRS.formatAmount(NRS.settings["fee_warning"])+" NXT. Are you sure you want to continue? Click the submit button again to confirm.").show();NRS.unlockForm($modal,$btn);return}}NRS.sendRequest(requestType,
data,function(response){if(response.fullHash&&(!response.error||response.error!="Double spending transaction")){NRS.unlockForm($modal,$btn);if(!$modal.hasClass("modal-no-hide"))$modal.modal("hide");if(successMessage)$.growl(successMessage.escapeHTML(),{type:"success"});var formCompleteFunction=NRS["forms"][originalRequestType+"Complete"];if(typeof formCompleteFunction=="function"){data.requestType=requestType;if(response.transaction)NRS.addUnconfirmedTransaction(response.transaction,function(alreadyProcessed){response.alreadyProcessed=
alreadyProcessed;formCompleteFunction(response,data)});else{response.alreadyProcessed=false;formCompleteFunction(response,data)}}else NRS.addUnconfirmedTransaction(response.transaction);if(NRS.accountInfo&&!NRS.accountInfo.publicKey)$("#dashboard_message").hide()}else if(response.errorCode){if(NRS.forms.errorMessages[requestType]&&NRS.forms.errorMessages[requestType][response.errorCode])$modal.find(".error_message").html(NRS.forms.errorMessages[requestType][response.errorCode].escapeHTML()).show();
else if(NRS.forms.errorMessages[originalRequestType]&&NRS.forms.errorMessages[originalRequestType][response.errorCode])$modal.find(".error_message").html(NRS.forms.errorMessages[originalRequestType][response.errorCode].escapeHTML()).show();else $modal.find(".error_message").html(response.errorDescription?String(response.errorDescription).escapeHTML():"Unknown error occured.").show();NRS.unlockForm($modal,$btn)}else if(response.error){$modal.find(".error_message").html(String(response.error).escapeHTML()).show();
NRS.unlockForm($modal,$btn)}else{var sentToFunction=false;if(!errorMessage){var formCompleteFunction=NRS["forms"][originalRequestType+"Complete"];if(typeof formCompleteFunction=="function"){sentToFunction=true;data.requestType=requestType;NRS.unlockForm($modal,$btn);if(!$modal.hasClass("modal-no-hide"))$modal.modal("hide");formCompleteFunction(response,data)}else errorMessage="An unknown error occured."}if(!sentToFunction){NRS.unlockForm($modal,$btn,true);$.growl(errorMessage.escapeHTML(),{type:"danger"})}}})};
NRS.unlockForm=function($modal,$btn,hide){$modal.find("button").prop("disabled",false);if($btn)$btn.button("reset");$modal.modal("unlock");if(hide)$modal.modal("hide")};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){NRS.fetchingModalData=false;var _superModal=$.fn.modal;$.extend(_superModal.Constructor.DEFAULTS,{locked:false});var _hide=_superModal.Constructor.prototype.hide;$.extend(_superModal.Constructor.prototype,{lock:function(){this.options.locked=true},unlock:function(){this.options.locked=false},hide:function(){if(this.options.locked)return;_hide.apply(this,arguments)}});$('a[data-toggle\x3d"tab"]').on("shown.bs.tab",function(e){var target=$(e.target).attr("href");$(target).scrollTop(0)});
$(".modal").on("show.bs.modal",function(e){var $visible_modal=$(".modal.in");if($visible_modal.length)$visible_modal.modal("hide")});$(".modal").on("shown.bs.modal",function(){$(this).find("input[type\x3dtext]:first, textarea:first, input[type\x3dpassword]:first").first().focus();$(this).find("input[name\x3dconverted_account_id]").val("");NRS.showedFormWarning=false});$(".modal").on("hidden.bs.modal",function(e){$(this).find(":input:not([type\x3dhidden],button)").each(function(index){var default_value=
$(this).data("default");var type=$(this).attr("type");if(type=="checkbox")if(default_value=="checked")$(this).prop("checked",true);else $(this).prop("checked",false);else if(default_value)$(this).val(default_value);else $(this).val("")});$(this).find("input[name\x3dconverted_account_id]").val("");$(this).find(".callout-danger:not(.never_hide), .error_message, .account_info").html("").hide();NRS.showedFormWarning=false});NRS.showModalError=function(errorMessage,$modal){var $btn=$modal.find("button.btn-primary:not([data-dismiss\x3dmodal], .ignore)");
$modal.find("button").prop("disabled",false);$modal.find(".error_message").html(String(errorMessage).escapeHTML()).show();$btn.button("reset");$modal.modal("unlock")};NRS.closeModal=function($modal){if(!$modal)$modal=$("div.modal.in:first");$modal.find("button").prop("disabled",false);var $btn=$modal.find("button.btn-primary:not([data-dismiss\x3dmodal], .ignore)");$btn.button("reset");$modal.modal("unlock");$modal.modal("hide")};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){$("#nrs_modal").on("show.bs.modal",function(e){if(NRS.fetchingModalData)return;NRS.fetchingModalData=true;NRS.sendRequest("getState",function(state){for(var key in state){var el=$("#nrs_node_state_"+key);if(el.length)if(key.indexOf("number")!=-1)el.html(NRS.formatAmount(state[key]));else if(key.indexOf("Memory")!=-1)el.html(NRS.formatVolume(state[key]));else if(key=="time")el.html(NRS.formatTimestamp(state[key]));else el.html(String(state[key]).escapeHTML())}$("#nrs_update_explanation").show();
$("#nrs_modal_state").show();NRS.fetchingModalData=false})});$("#nrs_modal").on("hide.bs.modal",function(e){$("body").off("dragover.nrs, drop.nrs");$("#nrs_update_drop_zone, #nrs_update_result, #nrs_update_hashes, #nrs_update_hash_progress").hide();$(this).find("ul.nav li.active").removeClass("active");$("#nrs_modal_state_nav").addClass("active");$(".nrs_modal_content").hide()});$("#nrs_modal ul.nav li").click(function(e){e.preventDefault();var tab=$(this).data("tab");$(this).siblings().removeClass("active");
$(this).addClass("active");$(".nrs_modal_content").hide();var content=$("#nrs_modal_"+tab);content.show()});return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){$("#account_details_modal").on("show.bs.modal",function(e){$("#account_details_modal_balance").show();if(NRS.accountInfo.errorCode){$("#account_balance_table").hide();if(NRS.accountInfo.errorCode==5)$("#account_balance_warning").html("Your account is brand new. You should fund it with some coins. Your account ID is \x3cstrong\x3e"+NRS.account+"\x3c/strong\x3e").show();else $("#account_balance_warning").html(NRS.accountInfo.errorDescription.escapeHTML()).show()}else{$("#account_balance_warning").hide();
$("#account_balance_balance").html(NRS.formatAmount(new BigInteger(NRS.accountInfo.balanceNQT))+" NXT");$("#account_balance_unconfirmed_balance").html(NRS.formatAmount(new BigInteger(NRS.accountInfo.unconfirmedBalanceNQT))+" NXT");$("#account_balance_effective_balance").html(NRS.formatAmount(NRS.accountInfo.effectiveBalanceNXT)+" NXT");$("#account_balance_guaranteed_balance").html(NRS.formatAmount(new BigInteger(NRS.accountInfo.guaranteedBalanceNQT))+" NXT");$("#account_balance_public_key").html(String(NRS.accountInfo.publicKey).escapeHTML());
$("#account_balance_account_id").html(String(NRS.account).escapeHTML());$("#account_balance_account_rs").html(String(NRS.accountInfo.accountRS).escapeHTML());if(!NRS.accountInfo.publicKey){$("#account_balance_public_key").html("/");$("#account_balance_warning").html("Your account does not have a public key! This means it's not as protected as other accounts. You must make an outgoing transaction to fix this issue. (\x3ca href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#send_message_modal'\x3esend a message\x3c/a\x3e, \x3ca href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#register_alias_modal'\x3ebuy an alias\x3c/a\x3e, \x3ca href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#send_money_modal'\x3esend Nxt\x3c/a\x3e, ...)").show()}}});
$("#account_details_modal ul.nav li").click(function(e){e.preventDefault();var tab=$(this).data("tab");$(this).siblings().removeClass("active");$(this).addClass("active");$(".account_details_modal_content").hide();var content=$("#account_details_modal_"+tab);content.show()});$("#account_details_modal").on("hidden.bs.modal",function(e){$(this).find(".account_details_modal_content").hide();$(this).find("ul.nav li.active").removeClass("active");$("#account_details_balance_nav").addClass("active")});
return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){NRS.forms.errorMessages.startForging={5:"You cannot forge. Either your balance is 0 or your account is too new (you must wait a day or so)."};NRS.forms.startForgingComplete=function(response,data){if("deadline"in response){$("#forging_indicator").addClass("forging");$("#forging_indicator span").html("Forging");NRS.isForging=true;$.growl("Forging started successfully.",{type:"success"})}else{NRS.isForging=false;$.growl("Couldn't start forging, unknown error.",{type:"danger"})}};
NRS.forms.stopForgingComplete=function(response,data){if($("#stop_forging_modal .show_logout").css("display")=="inline"){NRS.logout();return}$("#forging_indicator").removeClass("forging");$("#forging_indicator span").html("Not forging");NRS.isForging=false;if(response.foundAndStopped)$.growl("Forging stopped successfully.",{type:"success"});else $.growl("You weren't forging to begin with.",{type:"danger"})};$("#forging_indicator").click(function(e){e.preventDefault();if(NRS.downloadingBlockchain)$.growl("The blockchain is busy downloading, you cannot forge during this time. Please try again when the blockchain is fully synced.",
{"type":"danger"});else if(NRS.state.isScanning)$.growl("The blockchain is currently being rescanned, you cannot forge during this time. Please try again in a minute.",{"type":"danger"});else if(!NRS.accountInfo.publicKey)$.growl("You cannot forge because your account has no public key. Please make an outgoing transaction first.",{"type":"danger"});else if(NRS.accountInfo.effectiveBalanceNXT==0)if(NRS.lastBlockHeight>=NRS.accountInfo.currentLeasingHeightFrom&&NRS.lastBlockHeight<=NRS.accountInfo.currentLeasingHeightTo)$.growl("Your effective balance is leased out, you cannot forge at the moment.",
{"type":"danger"});else $.growl("Your effective balance is zero, you cannot forge. (Effective balance is your balance after 1440 block confirmations).",{"type":"danger"});else if($(this).hasClass("forging"))$("#stop_forging_modal").modal("show");else $("#start_forging_modal").modal("show")});return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){$("#transactions_table, #dashboard_transactions_table").on("click","a[data-transaction]",function(e){e.preventDefault();var transactionId=$(this).data("transaction");NRS.showTransactionModal(transactionId)});NRS.showTransactionModal=function(transaction){if(NRS.fetchingModalData)return;NRS.fetchingModalData=true;$("#transaction_info_output_top, #transaction_info_output_bottom").html("").hide();$("#transaction_info_callout").hide();$("#transaction_info_table").hide();
$("#transaction_info_table tbody").empty();if(typeof transaction!="object")NRS.sendRequest("getTransaction",{"transaction":transaction},function(response,input){response.transaction=input.transaction;NRS.processTransactionModalData(response)});else NRS.processTransactionModalData(transaction)};NRS.processTransactionModalData=function(transaction){var async=false;var transactionDetails=$.extend({},transaction);delete transactionDetails.attachment;if(transactionDetails.referencedTransaction=="0")delete transactionDetails.referencedTransaction;
delete transactionDetails.transaction;$("#transaction_info_modal_transaction").html(String(transaction.transaction).escapeHTML());$("#transaction_info_tab_link").tab("show");$("#transaction_info_details_table tbody").empty().append(NRS.createInfoTable(transactionDetails,true));$("#transaction_info_table tbody").empty();var incorrect=false;if(transaction.type==0)switch(transaction.subtype){case 0:var data={"Type":"Ordinary Payment","Amount":transaction.amountNQT,"Fee":transaction.feeNQT,"Recipient":NRS.getAccountTitle(transaction,
"recipient"),"Sender":NRS.getAccountTitle(transaction,"sender")};$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();break;default:incorrect=true;break}if(transaction.type==1)switch(transaction.subtype){case 0:try{var message=converters.hexStringToString(transaction.attachment.message)}catch(err){var message="Could not convert hex to string: "+String(transaction.attachment.message)}var sender_info="";if(transaction.sender==NRS.account||transaction.recipient==
NRS.account)if(transaction.sender==NRS.account)sender_info="\x3cstrong\x3eTo\x3c/strong\x3e: "+NRS.getAccountLink(transaction,"recipient");else sender_info="\x3cstrong\x3eFrom\x3c/strong\x3e: "+NRS.getAccountLink(transaction,"sender");else{sender_info="\x3cstrong\x3eTo\x3c/strong\x3e: "+NRS.getAccountLink(transaction,"recipient")+"\x3cbr /\x3e";sender_info+="\x3cstrong\x3eFrom\x3c/strong\x3e: "+NRS.getAccountLink(transaction,"sender")}$("#transaction_info_output_top").html("\x3cdiv style\x3d'color:#999999;padding-bottom:10px'\x3e\x3ci class\x3d'fa fa-unlock'\x3e\x3c/i\x3e Public Message\x3c/div\x3e\x3cdiv style\x3d'padding-bottom:10px'\x3e"+
message.escapeHTML().nl2br()+"\x3c/div\x3e"+sender_info).show();break;case 1:var data={"Type":"Alias Assignment","Alias":transaction.attachment.alias,"DataFormattedHTML":transaction.attachment.uri.autoLink()};if(transaction.sender!=NRS.account)data["Sender"]=NRS.getAccountTitle(transaction,"sender");$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();break;case 2:var data={"Type":"Poll Creation","Name":transaction.attachment.name,"Description":transaction.attachment.description};
if(transaction.sender!=NRS.account)data["Sender"]=NRS.getAccountTitle(transaction,"sender");$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();break;case 3:var data={"Type":"Vote Casting"};if(transaction.sender!=NRS.account)data["Sender"]=NRS.getAccountTitle(transaction,"sender");$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();break;case 4:var data={"Type":"Hub Announcement"};$("#transaction_info_table tbody").append(NRS.createInfoTable(data));
$("#transaction_info_table").show();break;case 5:var data={"Type":"Account Info","Name":transaction.attachment.name,"Description":transaction.attachment.description};$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();break;case 6:if(transaction.attachment.priceNQT=="0")if(transaction.sender==transaction.recipient)var type="Alias Sale Cancellation";else var type="Alias Transfer";else var type="Alias Sale";var data={"Type":type,"Alias Name":transaction.attachment.alias};
if(type=="Alias Sale")data["Price"]=transaction.attachment.priceNQT;if(type!="Alias Sale Cancellation")data["Recipient"]=NRS.getAccountTitle(transaction,"recipient");data["Sender"]=NRS.getAccountTitle(transaction,"sender");$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();break;case 7:var data={"Type":"Alias Buy","Alias Name":transaction.attachment.alias,"Recipient":NRS.getAccountTitle(transaction,"recipient"),"Sender":NRS.getAccountTitle(transaction,
"sender")};$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();break;case 8:var data={"Type":"Encrypted Message"};$("#transaction_info_output_top").html("\x3cdiv style\x3d'color:#999999;padding-bottom:10px'\x3e\x3ci class\x3d'fa fa-lock'\x3e\x3c/i\x3e Encrypted Message\x3c/div\x3e\x3cdiv id\x3d'transaction_info_decryption_form'\x3e\x3c/div\x3e\x3cdiv id\x3d'transaction_info_decrypted_note' style\x3d'display:none;padding-bottom:10px;'\x3e\x3c/div\x3e");
var output="";if(NRS.account==transaction.recipient||NRS.account==transaction.sender){NRS.tryToDecrypt(transaction,{"message":{"title":"","nonce":"nonce"}},transaction.recipient==NRS.account?transaction.sender:transaction.recipient,{"noPadding":true,"formEl":"#transaction_info_decryption_form","outputEl":"#transaction_info_decrypted_note"});if(transaction.sender==NRS.account)output="\x3cstrong\x3eTo\x3c/strong\x3e: "+NRS.getAccountLink(transaction,"recipient");else output="\x3cstrong\x3eFrom\x3c/strong\x3e: "+
NRS.getAccountLink(transaction,"sender")}else{output="\x3cdiv style\x3d'padding-bottom:10px'\x3eThis is an encrypted message not addressed to you. You cannot read it's contents.\x3c/div\x3e";output="\x3cstrong\x3eTo\x3c/strong\x3e: "+NRS.getAccountLink(transaction,"recipient")+"\x3cbr /\x3e";output="\x3cstrong\x3eFrom\x3c/strong\x3e: "+NRS.getAccountLink(transaction,"sender")}$("#transaction_info_output_top").append(output).show();break;default:incorrect=true;break}else if(transaction.type==2)switch(transaction.subtype){case 0:var data=
{"Type":"Asset Issuance","Name":transaction.attachment.name,"Quantity":[transaction.attachment.quantityQNT,transaction.attachment.decimals],"Decimals":transaction.attachment.decimals,"Description":transaction.attachment.description};if(transaction.sender!=NRS.account)data["Sender"]=NRS.getAccountTitle(transaction,"sender");$("#transaction_info_callout").html("\x3ca href\x3d'#' data-goto-asset\x3d'"+String(transaction.transaction).escapeHTML()+"'\x3eClick here\x3c/a\x3e to view this asset in the Asset Exchange.").show();
$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();break;case 1:async=true;NRS.sendRequest("getAsset",{"asset":transaction.attachment.asset},function(asset,input){var data={"Type":"Asset Transfer","Asset Name":asset.name,"Quantity":[transaction.attachment.quantityQNT,asset.decimals],"Comment":transaction.attachment.comment};data["Sender"]=NRS.getAccountTitle(transaction,"sender");data["Recipient"]=NRS.getAccountTitle(transaction,"recipient");$("#transaction_info_table tbody").append(NRS.createInfoTable(data));
$("#transaction_info_table").show();$("#transaction_info_modal").modal("show");NRS.fetchingModalData=false});break;case 2:async=true;NRS.sendRequest("getAsset",{"asset":transaction.attachment.asset},function(asset,input){var data={"Type":"Ask Order Placement","Asset Name":asset.name,"Quantity":[transaction.attachment.quantityQNT,asset.decimals],"PriceFormattedHTML":NRS.formatOrderPricePerWholeQNT(transaction.attachment.priceNQT,asset.decimals)+" NXT","TotalFormattedHTML":NRS.formatAmount(NRS.calculateOrderTotalNQT(transaction.attachment.quantityQNT,
transaction.attachment.priceNQT))+" NXT"};if(transaction.sender!=NRS.account)data["Sender"]=NRS.getAccountTitle(transaction,"sender");$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();$("#transaction_info_modal").modal("show");NRS.fetchingModalData=false});break;case 3:async=true;NRS.sendRequest("getAsset",{"asset":transaction.attachment.asset},function(asset,input){var data={"Type":"Bid Order Placement","Asset Name":asset.name,"Quantity":[transaction.attachment.quantityQNT,
asset.decimals],"PriceFormattedHTML":NRS.formatOrderPricePerWholeQNT(transaction.attachment.priceNQT,asset.decimals)+" NXT","TotalFormattedHTML":NRS.formatAmount(NRS.calculateOrderTotalNQT(transaction.attachment.quantityQNT,transaction.attachment.priceNQT))+" NXT"};if(transaction.sender!=NRS.account)data["Sender"]=NRS.getAccountTitle(transaction,"sender");$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();$("#transaction_info_modal").modal("show");
NRS.fetchingModalData=false});break;case 4:async=true;NRS.sendRequest("getTransaction",{"transaction":transaction.attachment.order},function(transaction,input){if(transaction.attachment.asset)NRS.sendRequest("getAsset",{"asset":transaction.attachment.asset},function(asset){var data={"Type":"Ask Order Cancellation","Asset Name":asset.name,"Quantity":[transaction.attachment.quantityQNT,asset.decimals],"PriceFormattedHTML":NRS.formatOrderPricePerWholeQNT(transaction.attachment.priceNQT,asset.decimals)+
" NXT","TotalFormattedHTML":NRS.formatAmount(NRS.calculateOrderTotalNQT(transaction.attachment.quantityQNT,transaction.attachment.priceNQT))+" NXT"};if(transaction.sender!=NRS.account)data["Sender"]=NRS.getAccountTitle(transaction,"sender");$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();$("#transaction_info_modal").modal("show");NRS.fetchingModalData=false});else NRS.fetchingModalData=false});break;case 5:async=true;NRS.sendRequest("getTransaction",
{"transaction":transaction.attachment.order},function(transaction){if(transaction.attachment.asset)NRS.sendRequest("getAsset",{"asset":transaction.attachment.asset},function(asset){var data={"Type":"Bid Order Cancellation","Asset Name":asset.name,"Quantity":[transaction.attachment.quantityQNT,asset.decimals],"PriceFormattedHTML":NRS.formatOrderPricePerWholeQNT(transaction.attachment.priceNQT,asset.decimals)+" NXT","TotalFormattedHTML":NRS.formatAmount(NRS.calculateOrderTotalNQT(transaction.attachment.quantityQNT,
transaction.attachment.priceNQT))+" NXT"};if(transaction.sender!=NRS.account)data["Sender"]=NRS.getAccountTitle(transaction,"sender");$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();$("#transaction_info_modal").modal("show");NRS.fetchingModalData=false});else NRS.fetchingModalData=false});break;default:incorrect=true;break}else if(transaction.type==3)switch(transaction.subtype){case 0:var data={"Type":"Marketplace Listing","Name":transaction.attachment.name,
"Description":transaction.attachment.description,"Price":transaction.attachment.priceNQT,"quantityFormattedHTML":NRS.format(transaction.attachment.quantity),"Seller":NRS.getAccountFormatted(transaction,"sender")};$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();break;case 1:async=true;NRS.sendRequest("getDGSGood",{"goods":transaction.attachment.goods},function(goods){var data={"Type":"Marketplace Removal","Item Name":goods.name,"Seller":NRS.getAccountFormatted(goods,
"seller")};$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();$("#transaction_info_modal").modal("show");NRS.fetchingModalData=false});break;case 2:async=true;NRS.sendRequest("getDGSGood",{"goods":transaction.attachment.goods},function(goods){var data={"Type":"Marketplace Price Change","Item Name":goods.name,"New PriceFormattedHTML":NRS.formatAmount(transaction.attachment.priceNQT)+" NXT","Seller":NRS.getAccountFormatted(goods,"seller")};$("#transaction_info_table tbody").append(NRS.createInfoTable(data));
$("#transaction_info_table").show();$("#transaction_info_modal").modal("show");NRS.fetchingModalData=false});break;case 3:async=true;NRS.sendRequest("getDGSGood",{"goods":transaction.attachment.goods},function(goods){var data={"Type":"Marketplace Quantity Change","Item Name":goods.name,"Delta Quantity":transaction.attachment.deltaQuantity,"Seller":NRS.getAccountFormatted(goods,"seller")};$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();$("#transaction_info_modal").modal("show");
NRS.fetchingModalData=false});break;case 4:async=true;NRS.sendRequest("getDGSGood",{"goods":transaction.attachment.goods},function(goods){var data={"Type":"Marketplace Purchase","Item Name":goods.name,"Price":transaction.attachment.priceNQT,"quantityFormattedHTML":NRS.format(transaction.attachment.quantity),"Buyer":NRS.getAccountFormatted(transaction,"sender"),"Seller":NRS.getAccountFormatted(goods,"seller")};if(transaction.attachment.note)if(NRS.account==goods.seller||NRS.account==transaction.sender)NRS.tryToDecrypt(transaction,
{"note":"Note"},transaction.sender==NRS.account?goods.seller:transaction.sender);else data["Note"]="Note is encrypted and cannot be read by you.";$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();$("#transaction_info_modal").modal("show");NRS.fetchingModalData=false});break;case 5:async=true;NRS.sendRequest("getDGSPurchase",{"purchase":transaction.attachment.purchase},function(purchase){NRS.sendRequest("getDGSGood",{"goods":purchase.goods},function(goods){var data=
{"Type":"Marketplace Delivery","Item Name":goods.name,"Price":purchase.priceNQT,"quantityFormattedHTML":NRS.format(purchase.quantity),"Buyer":NRS.getAccountFormatted(purchase,"buyer"),"Seller":NRS.getAccountFormatted(purchase,"seller")};if(transaction.attachment.goodsData)if(NRS.account==purchase.seller||NRS.account==purchase.buyer)NRS.tryToDecrypt(transaction,{"goodsData":{"title":"Data","nonce":"goodsNonce"}},purchase.buyer==NRS.account?purchase.seller:purchase.buyer);else data["Data"]="Goods data is encrypted and cannot be read by you.";
$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();$("#transaction_info_modal").modal("show");NRS.fetchingModalData=false})});break;case 6:async=true;NRS.sendRequest("getDGSPurchase",{"purchase":transaction.attachment.purchase},function(purchase){NRS.sendRequest("getDGSGood",{"goods":purchase.goods},function(goods){var data={"Type":"Marketplace Feedback","Item Name":goods.name,"Buyer":NRS.getAccountFormatted(purchase,"buyer"),"Seller":NRS.getAccountFormatted(purchase,
"seller")};if(transaction.attachment.note)if(NRS.account==purchase.seller||NRS.account==purchase.buyer)NRS.tryToDecrypt(transaction,{"note":"Feedback"},purchase.buyer==NRS.account?purchase.seller:purchase.buyer);else data["Feedback"]="Feedback is encrypted and cannot be read by you.";$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();$("#transaction_info_modal").modal("show");NRS.fetchingModalData=false})});break;case 7:async=true;NRS.sendRequest("getDGSPurchase",
{"purchase":transaction.attachment.purchase},function(purchase){NRS.sendRequest("getDGSGood",{"goods":purchase.goods},function(goods){var data={"Type":"Marketplace Refund","Item Name":goods.name,"Refund":transaction.attachment.refundNQT,"Buyer":NRS.getAccountFormatted(purchase,"buyer"),"Seller":NRS.getAccountFormatted(purchase,"seller")};if(transaction.attachment.note)if(NRS.account==purchase.seller||NRS.account==purchase.buyer)NRS.tryToDecrypt(transaction,{"note":"Note"},purchase.buyer==NRS.account?
purchase.seller:purchase.buyer);else data["Note"]="Note is encrypted and cannot be read by you.";$("#transaction_info_table tbody").append(NRS.createInfoTable(data));$("#transaction_info_table").show();$("#transaction_info_modal").modal("show");NRS.fetchingModalData=false})});break;default:incorrect=true;break}else if(transaction.type==4)switch(transaction.subtype){case 0:var data={"Type":"Balance Leasing","Period":transaction.attachment.period};$("#transaction_info_table tbody").append(NRS.createInfoTable(data));
$("#transaction_info_table").show();break;default:incorrect=true;break}if(incorrect){$.growl("Invalid or unknown transaction type.",{"type":"danger"});NRS.fetchingModalData=false;return}if(!async){$("#transaction_info_modal").modal("show");NRS.fetchingModalData=false}};$("#transaction_info_modal").on("hide.bs.modal",function(e){NRS.removeDecryptionForm($(this));$("#transaction_info_output_bottom, #transaction_info_output_top").html("").hide()});return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){NRS.userInfoModal={"user":0};$("#blocks_table, #polls_table, #contacts_table, #transactions_table, #dashboard_transactions_table, #asset_account, #asset_exchange_ask_orders_table, #asset_exchange_bid_orders_table, #alias_info_table, .dgs_page_contents, .modal-content").on("click","a[data-user]",function(e){e.preventDefault();var account=$(this).data("user");NRS.showAccountModal(account)});NRS.showAccountModal=function(account){if(NRS.fetchingModalData)return;if(typeof account==
"object")NRS.userInfoModal.user=account.account;else{NRS.userInfoModal.user=account;NRS.fetchingModalData=true}$("#user_info_modal_account").html(NRS.getAccountFormatted(NRS.userInfoModal.user));$("#user_info_modal_actions button").data("account",NRS.userInfoModal.user);if(NRS.userInfoModal.user in NRS.contacts)$("#user_info_modal_add_as_contact").hide();else $("#user_info_modal_add_as_contact").show();if(NRS.fetchingModalData)NRS.sendRequest("getAccount",{"account":NRS.userInfoModal.user},function(response){NRS.processAccountModalData(response);
NRS.fetchingModalData=false});else NRS.processAccountModalData(account);$("#user_info_modal_transactions").show();NRS.userInfoModal.transactions()};NRS.processAccountModalData=function(account){if(account.unconfirmedBalanceNQT=="0")$("#user_info_modal_account_balance").html("0");else $("#user_info_modal_account_balance").html(NRS.formatAmount(account.unconfirmedBalanceNQT)+" NXT");if(account.name){$("#user_info_modal_account_name").html(String(account.name).escapeHTML());$("#user_info_modal_account_name_container").show()}else $("#user_info_modal_account_name_container").hide();
if(account.description){$("#user_info_description").show();$("#user_info_modal_description").html(String(account.description).escapeHTML().nl2br())}else $("#user_info_description").hide();$("#user_info_modal").modal("show")};$("#user_info_modal").on("hidden.bs.modal",function(e){$(this).find(".user_info_modal_content").hide();$(this).find(".user_info_modal_content table tbody").empty();$(this).find(".user_info_modal_content:not(.data-loading,.data-never-loading)").addClass("data-loading");$(this).find("ul.nav li.active").removeClass("active");
$("#user_info_transactions").addClass("active");NRS.userInfoModal.user=0});$("#user_info_modal ul.nav li").click(function(e){e.preventDefault();var tab=$(this).data("tab");$(this).siblings().removeClass("active");$(this).addClass("active");$(".user_info_modal_content").hide();var content=$("#user_info_modal_"+tab);content.show();if(content.hasClass("data-loading"))NRS.userInfoModal[tab]()});NRS.userInfoModal.transactions=function(type){NRS.sendRequest("getAccountTransactionIds",{"account":NRS.userInfoModal.user,
"timestamp":0},function(response){if(response.transactionIds&&response.transactionIds.length){var transactions={};var nr_transactions=0;var transactionIds=response.transactionIds.reverse().slice(0,100);for(var i=0;i<transactionIds.length;i++)NRS.sendRequest("getTransaction",{"transaction":transactionIds[i]},function(transaction,input){transactions[input.transaction]=transaction;nr_transactions++;if(nr_transactions==transactionIds.length){var rows="";for(var i=0;i<nr_transactions;i++){var transaction=
transactions[transactionIds[i]];var transactionType="Unknown";if(transaction.type==0)transactionType="Ordinary payment";else if(transaction.type==1)switch(transaction.subtype){case 0:transactionType="Arbitrary message";break;case 1:transactionType="Alias assignment";break;case 2:transactionType="Poll creation";break;case 3:transactionType="Vote casting";break;case 4:transactionType="Hub Announcement";break;case 5:transactionType="Account Info";break;case 6:if(transaction.attachment.priceNQT=="0")if(transaction.sender==
transaction.recipient)transactionType="Alias Sale Cancellation";else transactionType="Alias Transfer";else transactionType="Alias Sale";break;case 7:transactionType="Alias Buy";break;case 8:transactionType="Encrypted Message";break}else if(transaction.type==2)switch(transaction.subtype){case 0:transactionType="Asset issuance";break;case 1:transactionType="Asset transfer";break;case 2:transactionType="Ask order placement";break;case 3:transactionType="Bid order placement";break;case 4:transactionType=
"Ask order cancellation";break;case 5:transactionType="Bid order cancellation";break}else if(transaction.type==3)switch(transaction.subtype){case 0:transactionType="Market Listing";break;case 1:transactionType="Market Removal";break;case 2:transactionType="Market Price Change";break;case 3:transactionType="Market QTY Change";break;case 4:transactionType="Market Purchase";break;case 5:transactionType="Market Delivery";break;case 6:transactionType="Market Feedback";break;case 7:transactionType="Market Refund";
break}else if(transaction.type==4)switch(transaction.subtype){case 0:transactionType="Balance Leasing";break}if(/^NXT\-/i.test(NRS.userInfoModal.user))var receiving=transaction.recipientRS==NRS.userInfoModal.user;else var receiving=transaction.recipient==NRS.userInfoModal.user;if(transaction.amountNQT){transaction.amount=new BigInteger(transaction.amountNQT);transaction.fee=new BigInteger(transaction.feeNQT)}var account=receiving?"sender":"recipient";rows+="\x3ctr\x3e\x3ctd\x3e"+NRS.formatTimestamp(transaction.timestamp)+
"\x3c/td\x3e\x3ctd\x3e"+transactionType+"\x3c/td\x3e\x3ctd style\x3d'width:5px;padding-right:0;'\x3e"+(transaction.type==0?receiving?"\x3ci class\x3d'fa fa-plus-circle' style\x3d'color:#65C62E'\x3e\x3c/i\x3e":"\x3ci class\x3d'fa fa-minus-circle' style\x3d'color:#E04434'\x3e\x3c/i\x3e":"")+"\x3c/td\x3e\x3ctd "+(transaction.type==0&&receiving?" style\x3d'color:#006400;'":!receiving&&transaction.amount>0?" style\x3d'color:red'":"")+"\x3e"+NRS.formatAmount(transaction.amount)+"\x3c/td\x3e\x3ctd "+(!receiving?
" style\x3d'color:red'":"")+"\x3e"+NRS.formatAmount(transaction.fee)+"\x3c/td\x3e\x3ctd\x3e"+NRS.getAccountTitle(transaction,account)+"\x3c/td\x3e\x3c/tr\x3e"}$("#user_info_modal_transactions_table tbody").empty().append(rows);NRS.dataLoadFinished($("#user_info_modal_transactions_table"))}})}else{$("#user_info_modal_transactions_table tbody").empty();NRS.dataLoadFinished($("#user_info_modal_transactions_table"))}})};NRS.userInfoModal.aliases=function(){NRS.sendRequest("getAliases",{"account":NRS.userInfoModal.user,
"timestamp":0},function(response){if(response.aliases&&response.aliases.length){var aliases=response.aliases;aliases.sort(function(a,b){if(a.aliasName.toLowerCase()>b.aliasName.toLowerCase())return 1;else if(a.aliasName.toLowerCase()<b.aliasName.toLowerCase())return-1;else return 0});var rows="";var alias_account_count=0,alias_uri_count=0,empty_alias_count=0,alias_count=aliases.length;for(var i=0;i<alias_count;i++){var alias=aliases[i];rows+="\x3ctr data-alias\x3d'"+String(alias.aliasName).toLowerCase().escapeHTML()+
"'\x3e\x3ctd class\x3d'alias'\x3e"+String(alias.aliasName).escapeHTML()+"\x3c/td\x3e\x3ctd class\x3d'uri'\x3e"+(alias.aliasURI.indexOf("http")===0?"\x3ca href\x3d'"+String(alias.aliasURI).escapeHTML()+"' target\x3d'_blank'\x3e"+String(alias.aliasURI).escapeHTML()+"\x3c/a\x3e":String(alias.aliasURI).escapeHTML())+"\x3c/td\x3e\x3c/tr\x3e";if(!alias.uri)empty_alias_count++;else if(alias.aliasURI.indexOf("http")===0)alias_uri_count++;else if(alias.aliasURI.indexOf("acct:")===0||alias.aliasURI.indexOf("nacc:")===
0)alias_account_count++}$("#user_info_modal_aliases_table tbody").empty().append(rows);NRS.dataLoadFinished($("#user_info_modal_aliases_table"))}else{$("#user_info_modal_aliases_table tbody").empty();NRS.dataLoadFinished($("#user_info_modal_aliases_table"))}})};NRS.userInfoModal.assets=function(){NRS.sendRequest("getAccount",{"account":NRS.userInfoModal.user},function(response){if(response.assetBalances&&response.assetBalances.length){var assets={};var nrAssets=0;var ignoredAssets=0;for(var i=0;i<
response.assetBalances.length;i++){if(response.assetBalances[i].balanceQNT=="0"){ignoredAssets++;if(nrAssets+ignoredAssets==response.assetBalances.length)NRS.userInfoModal.addIssuedAssets(assets);continue}NRS.sendRequest("getAsset",{"asset":response.assetBalances[i].asset,"_extra":{"balanceQNT":response.assetBalances[i].balanceQNT}},function(asset,input){asset.asset=input.asset;asset.balanceQNT=input["_extra"].balanceQNT;assets[asset.asset]=asset;nrAssets++;if(nrAssets+ignoredAssets==response.assetBalances.length)NRS.userInfoModal.addIssuedAssets(assets)})}}else NRS.userInfoModal.addIssuedAssets({})})};
NRS.userInfoModal.addIssuedAssets=function(assets){NRS.sendRequest("getAssetsByIssuer",{"account":NRS.userInfoModal.user},function(response){if(response.assets&&(response.assets[0]&&response.assets[0].length)){$.each(response.assets[0],function(key,issuedAsset){if(assets[issuedAsset.asset])assets[issuedAsset.asset].issued=true;else{issuedAsset.balanceQNT="0";issuedAsset.issued=true;assets[issuedAsset.asset]=issuedAsset}});NRS.userInfoModal.assetsLoaded(assets)}else if(!$.isEmptyObject(assets))NRS.userInfoModal.assetsLoaded(assets);
else{$("#user_info_modal_assets_table tbody").empty();NRS.dataLoadFinished($("#user_info_modal_assets_table"))}})};NRS.userInfoModal.assetsLoaded=function(assets){var assetArray=[];var rows="";$.each(assets,function(key,asset){assetArray.push(asset)});assetArray.sort(function(a,b){if(a.issued&&b.issued)if(a.name.toLowerCase()>b.name.toLowerCase())return 1;else if(a.name.toLowerCase()<b.name.toLowerCase())return-1;else return 0;else if(a.issued)return-1;else if(b.issued)return 1;else if(a.name.toLowerCase()>
b.name.toLowerCase())return 1;else if(a.name.toLowerCase()<b.name.toLowerCase())return-1;else return 0});for(var i=0;i<assetArray.length;i++){var asset=assetArray[i];var percentageAsset=NRS.calculatePercentage(asset.balanceQNT,asset.quantityQNT);rows+="\x3ctr"+(asset.issued?" class\x3d'asset_owner'":"")+"\x3e\x3ctd\x3e\x3ca href\x3d'#' data-goto-asset\x3d'"+String(asset.asset).escapeHTML()+"'"+(asset.issued?" style\x3d'font-weight:bold'":"")+"\x3e"+String(asset.name).escapeHTML()+"\x3c/a\x3e\x3c/td\x3e\x3ctd class\x3d'quantity'\x3e"+
NRS.formatQuantity(asset.balanceQNT,asset.decimals)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatQuantity(asset.quantityQNT,asset.decimals)+"\x3c/td\x3e\x3ctd\x3e"+percentageAsset+"%\x3c/td\x3e\x3c/tr\x3e"}$("#user_info_modal_assets_table tbody").empty().append(rows);NRS.dataLoadFinished($("#user_info_modal_assets_table"))};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){NRS.forms.leaseBalanceComplete=function(response,data){NRS.getAccountInfo()};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){NRS.assets=[];NRS.assetIds=[];NRS.closedGroups=[];NRS.assetSearch=false;NRS.lastIssuerCheck=false;NRS.viewingAsset=false;NRS.pages.asset_exchange=function(callback){$(".content.content-stretch:visible").width($(".page:visible").width());if(NRS.databaseSupport){NRS.assets=[];NRS.assetIds=[];NRS.database.select("assets",null,function(error,assets){$.each(assets,function(index,asset){NRS.cacheAsset(asset)});if(NRS.accountInfo.unconfirmedAssetBalances){var newAssetIds=
[];$.each(NRS.accountInfo.unconfirmedAssetBalances,function(key,assetBalance){if(NRS.assetIds.indexOf(assetBalance.asset)==-1){newAssetIds.push(assetBalance.asset);NRS.assetIds.push(assetBalance.asset)}});if(newAssetIds.length){var qs=[];for(var i=0;i<newAssetIds.length;i++)qs.push("assets\x3d"+encodeURIComponent(newAssetIds[i]));qs=qs.join("\x26");NRS.sendRequest("getAssets+",{"querystring":qs},function(response){if(response.assets&&response.assets.length)NRS.saveAssetBookmarks(response.assets,function(){NRS.loadAssetExchangeSidebar(callback)});
else NRS.loadAssetExchangeSidebar(callback)})}else NRS.loadAssetExchangeSidebar(callback)}else NRS.loadAssetExchangeSidebar(callback)})}else if(NRS.accountInfo.unconfirmedAssetBalances){var qs=[];$.each(NRS.accountInfo.unconfirmedAssetBalances,function(key,assetBalance){qs.push("assets\x3d"+encodeURIComponent(assetBalance.asset))});qs=qs.join("\x26");NRS.sendRequest("getAssets+",{"querystring":qs},function(response){if(response.assets&&response.assets.length)$.each(response.assets,function(key,asset){NRS.cacheAsset(asset)});
NRS.loadAssetExchangeSidebar(callback)})}else NRS.loadAssetExchangeSidebar(callback)};NRS.cacheAsset=function(asset){NRS.assetIds.push(asset.asset);if(!asset.groupName)asset.groupName="";var asset={"asset":String(asset.asset),"name":String(asset.name).toLowerCase(),"description":String(asset.description),"groupName":String(asset.groupName).toLowerCase(),"account":String(asset.account),"accountRS":String(asset.accountRS),"quantityQNT":String(asset.quantityQNT),"decimals":parseInt(asset.decimals,10)};
NRS.assets.push(asset);return asset};NRS.forms.addAssetBookmark=function($modal){var data=NRS.getFormData($modal.find("form:first"));data.id=$.trim(data.id);if(!data.id)return{"error":"Asset or account ID is a required field."};if(!/^\d+$/.test(data.id)&&!/^NXT\-/i.test(data.id))return{"error":"Asset or account ID is invalid."};if(/^NXT\-/i.test(data.id))NRS.sendRequest("getAssetsByIssuer",{"account":data.id},function(response){if(response.errorCode)NRS.showModalError(response.errorDescription,$modal);
else if(response.assets&&(response.assets[0]&&response.assets[0].length))NRS.saveAssetBookmarks(response.assets[0],NRS.forms.addAssetBookmarkComplete);else NRS.showModalError("No assets found by this account.",$modal)});else NRS.sendRequest("getAsset",{"asset":data.id},function(response){if(response.errorCode)NRS.sendRequest("getAssetsByIssuer",{"account":data.id},function(response){if(response.errorCode)NRS.showModalError(response.errorDescription,$modal);else if(response.assets&&(response.assets[0]&&
response.assets[0].length))NRS.saveAssetBookmarks(response.assets[0],NRS.forms.addAssetBookmarkComplete);else NRS.showModalError("No asset found.",$modal)});else NRS.saveAssetBookmarks(new Array(response),NRS.forms.addAssetBookmarkComplete)})};$("#asset_exchange_bookmark_this_asset").on("click",function(){if(NRS.viewingAsset)NRS.saveAssetBookmarks(new Array(NRS.viewingAsset),function(newAssets){NRS.viewingAsset=false;NRS.loadAssetExchangeSidebar(function(){$("#asset_exchange_sidebar a[data-asset\x3d"+
newAssets[0].asset+"]").addClass("active").trigger("click")})})});NRS.forms.addAssetBookmarkComplete=function(newAssets,submittedAssets){NRS.assetSearch=false;if(newAssets.length==0){NRS.closeModal();$.growl((submittedAssets.length==1?"Asset":"Assets")+" already in bookmark list.",{"type":"danger"});$("#asset_exchange_sidebar a.active").removeClass("active");$("#asset_exchange_sidebar a[data-asset\x3d"+submittedAssets[0].asset+"]").addClass("active").trigger("click");return}else{NRS.closeModal();
var message=(newAssets.length==1?"Asset":newAssets.length+" assets")+" added successfully.";if(!NRS.databaseSupport)message+="Note that the assets could not be saved in the database.";$.growl(message,{"type":"success"});NRS.loadAssetExchangeSidebar(function(callback){$("#asset_exchange_sidebar a.active").removeClass("active");$("#asset_exchange_sidebar a[data-asset\x3d"+newAssets[0].asset+"]").addClass("active").trigger("click")})}};NRS.saveAssetBookmarks=function(assets,callback){var newAssetIds=
[];var newAssets=[];$.each(assets,function(key,asset){var newAsset={"asset":String(asset.asset),"name":String(asset.name),"description":String(asset.description),"account":String(asset.account),"accountRS":String(asset.accountRS),"quantityQNT":String(asset.quantityQNT),"decimals":parseInt(asset.decimals,10),"groupName":""};newAssets.push(newAsset);if(NRS.databaseSupport)newAssetIds.push({"asset":String(asset.asset)});else{NRS.assetIds.push(asset.asset);NRS.assets.push(newAsset)}});if(!NRS.databaseSupport){if(callback)callback(newAssets,
assets);return}NRS.database.select("assets",newAssetIds,function(error,existingAssets){var existingIds=[];if(existingAssets.length){$.each(existingAssets,function(index,asset){existingIds.push(asset.asset)});newAssets=$.grep(newAssets,function(v){return existingIds.indexOf(v.asset)===-1})}if(newAssets.length==0){if(callback)callback([],assets)}else NRS.database.insert("assets",newAssets,function(error){$.each(newAssets,function(key,asset){asset.name=asset.name.toLowerCase();NRS.assetIds.push(asset.asset);
NRS.assets.push(asset)});if(callback)setTimeout(function(){callback(newAssets,assets)},50)})})};NRS.positionAssetSidebar=function(){$("#asset_exchange_sidebar").parent().css("position","relative");$("#asset_exchange_sidebar").parent().css("padding-bottom","5px");$("#asset_exchange_sidebar_content").height($(window).height()-120);$("#asset_exchange_sidebar").height($(window).height()-120)};NRS.loadAssetExchangeSidebar=function(callback){if(!NRS.assets.length){NRS.pageLoaded();$("#asset_exchange_sidebar_content").empty();
$("#no_asset_selected, #loading_asset_data, #no_asset_search_results, #asset_details").hide();$("#no_assets_available").show();$("#asset_exchange_page").addClass("no_assets");return}var rows="";$("#asset_exchange_page").removeClass("no_assets");NRS.positionAssetSidebar();NRS.assets.sort(function(a,b){if(!a.groupName&&!b.groupName)if(a.name>b.name)return 1;else if(a.name<b.name)return-1;else return 0;else if(!a.groupName)return 1;else if(!b.groupName)return-1;else if(a.groupName>b.groupName)return 1;
else if(a.groupName<b.groupName)return-1;else if(a.name>b.name)return 1;else if(a.name<b.name)return-1;else return 0});var lastGroup="";var ungrouped=true;var isClosedGroup=false;var isSearch=NRS.assetSearch!==false;var searchResults=0;for(var i=0;i<NRS.assets.length;i++){var asset=NRS.assets[i];if(isSearch)if(NRS.assetSearch.indexOf(asset.asset)==-1)continue;else searchResults++;if(asset.groupName.toLowerCase()!=lastGroup){var to_check=asset.groupName?asset.groupName:"undefined";if(NRS.closedGroups.indexOf(to_check)!=
-1)isClosedGroup=true;else isClosedGroup=false;if(asset.groupName){ungrouped=false;rows+="\x3ca href\x3d'#' class\x3d'list-group-item list-group-item-header"+(asset.groupName=="Ignore List"?" no-context":"")+"'"+(asset.groupName!="Ignore List"?" data-context\x3d'asset_exchange_sidebar_group_context' ":"data-context\x3d''")+" data-groupname\x3d'"+asset.groupName.escapeHTML()+"' data-closed\x3d'"+isClosedGroup+"'\x3e\x3ch4 class\x3d'list-group-item-heading'\x3e"+asset.groupName.toUpperCase().escapeHTML()+
"\x3c/h4\x3e\x3ci class\x3d'fa fa-angle-"+(isClosedGroup?"right":"down")+" group_icon'\x3e\x3c/i\x3e\x3c/h4\x3e\x3c/a\x3e"}else{ungrouped=true;rows+="\x3ca href\x3d'#' class\x3d'list-group-item list-group-item-header no-context' data-closed\x3d'"+isClosedGroup+"'\x3e\x3ch4 class\x3d'list-group-item-heading'\x3eUNGROUPED \x3ci class\x3d'fa pull-right fa-angle-"+(isClosedGroup?"right":"down")+"'\x3e\x3c/i\x3e\x3c/h4\x3e\x3c/a\x3e"}lastGroup=asset.groupName.toLowerCase()}var ownsAsset=false;if(NRS.accountInfo.assetBalances)$.each(NRS.accountInfo.assetBalances,
function(key,assetBalance){if(assetBalance.asset==asset.asset&&assetBalance.balanceQNT!="0"){ownsAsset=true;return false}});rows+="\x3ca href\x3d'#' class\x3d'list-group-item list-group-item-"+(ungrouped?"ungrouped":"grouped")+(ownsAsset?" owns_asset":" not_owns_asset")+"' data-cache\x3d'"+i+"' data-asset\x3d'"+String(asset.asset).escapeHTML()+"'"+(!ungrouped?" data-groupname\x3d'"+asset.groupName.escapeHTML()+"'":"")+(isClosedGroup?" style\x3d'display:none'":"")+" data-closed\x3d'"+isClosedGroup+
"'\x3e\x3ch4 class\x3d'list-group-item-heading'\x3e"+asset.name.escapeHTML()+"\x3c/h4\x3e\x3cp class\x3d'list-group-item-text'\x3eqty: "+NRS.formatQuantity(asset.quantityQNT,asset.decimals)+"\x3c/p\x3e\x3c/a\x3e"}var active=$("#asset_exchange_sidebar a.active");if(active.length)active=active.data("asset");else active=false;$("#asset_exchange_sidebar_content").empty().append(rows);$("#asset_exchange_sidebar_search").show();if(isSearch)if(active&&NRS.assetSearch.indexOf(active)!=-1)$("#asset_exchange_sidebar a[data-asset\x3d"+
active+"]").addClass("active");else{if(NRS.assetSearch.length==1)$("#asset_exchange_sidebar a[data-asset\x3d"+NRS.assetSearch[0]+"]").addClass("active").trigger("click")}else if(active)$("#asset_exchange_sidebar a[data-asset\x3d"+active+"]").addClass("active");if(isSearch||NRS.assets.length>=10)$("#asset_exchange_sidebar_search").show();else $("#asset_exchange_sidebar_search").hide();if(isSearch&&NRS.assetSearch.length==0){$("#no_asset_search_results").show();$("#asset_details, #no_asset_selected, #no_assets_available").hide()}else if(!$("#asset_exchange_sidebar a.active").length){$("#no_asset_selected").show();
$("#asset_details, #no_assets_available, #no_asset_search_results").hide()}else if(active)$("#no_assets_available, #no_asset_selected, #no_asset_search_results").hide();if(NRS.viewingAsset)$("#asset_exchange_bookmark_this_asset").show();else $("#asset_exchange_bookmark_this_asset").hide();NRS.pageLoaded(callback)};NRS.incoming.asset_exchange=function(){if(!NRS.viewingAsset){var $active=$("#asset_exchange_sidebar a.active");if($active.length)$active.trigger("click",[{"refresh":true}])}else NRS.loadAsset(NRS.viewingAsset,
true);$("#asset_exchange_sidebar a.list-group-item.owns_asset").removeClass("owns_asset").addClass("not_owns_asset");if(NRS.accountInfo.assetBalances)$.each(NRS.accountInfo.assetBalances,function(key,assetBalance){if(assetBalance.balanceQNT!="0")$("#asset_exchange_sidebar a.list-group-item[data-asset\x3d"+assetBalance.asset+"]").addClass("owns_asset").removeClass("not_owns_asset")})};$("#asset_exchange_sidebar").on("click","a",function(e,data){e.preventDefault();var assetId=$(this).data("asset");
if(data&&data.refresh)var refresh=true;else var refresh=false;if(!assetId){if(NRS.databaseSupport){var group=$(this).data("groupname");var closed=$(this).data("closed");if(!group)var $links=$("#asset_exchange_sidebar a.list-group-item-ungrouped");else var $links=$("#asset_exchange_sidebar a.list-group-item-grouped[data-groupname\x3d'"+group.escapeHTML()+"']");if(!group)group="undefined";if(closed){var pos=NRS.closedGroups.indexOf(group);if(pos>=0)NRS.closedGroups.splice(pos);$(this).data("closed",
"");$(this).find("i").removeClass("fa-angle-right").addClass("fa-angle-down");$links.show()}else{NRS.closedGroups.push(group);$(this).data("closed",true);$(this).find("i").removeClass("fa-angle-down").addClass("fa-angle-right");$links.hide()}NRS.database.update("data",{"contents":NRS.closedGroups.join("#")},[{"id":"closed_groups"}])}return}assetId=assetId.escapeHTML();if(NRS.databaseSupport)NRS.database.select("assets",[{"asset":assetId}],function(error,asset){if(asset&&asset.length)NRS.loadAsset(asset[0],
refresh)});else NRS.sendRequest("getAsset+",{"asset":assetId},function(response,input){if(!response.errorCode)NRS.loadAsset(response,refresh)})});NRS.loadAsset=function(asset,refresh){var assetId=asset.asset;NRS.currentAsset=asset;NRS.currentSubPage=assetId;if(!refresh){$("#asset_exchange_sidebar a.active").removeClass("active");$("#asset_exchange_sidebar a[data-asset\x3d"+assetId+"]").addClass("active");$("#no_asset_selected, #loading_asset_data, #no_assets_available, #no_asset_search_results").hide();
$("#asset_details").show().parent().animate({"scrollTop":0},0);$("#asset_account").html("\x3ca href\x3d'#' data-user\x3d'"+NRS.getAccountFormatted(asset,"account")+"' class\x3d'user_info'\x3e"+NRS.getAccountTitle(asset,"account")+"\x3c/a\x3e");$("#asset_id").html(assetId.escapeHTML());$("#asset_decimals").html(String(asset.decimals).escapeHTML());$("#asset_name").html(String(asset.name).escapeHTML());$("#asset_description").html(String(asset.description).autoLink());$("#asset_quantity").html(NRS.formatQuantity(asset.quantityQNT,
asset.decimals));$(".asset_name").html(String(asset.name).escapeHTML());$("#sell_asset_button").data("asset",assetId);$("#buy_asset_button").data("asset",assetId);$("#sell_asset_price, #buy_asset_price").val("");$("#sell_asset_quantity, #sell_asset_total, #buy_asset_quantity, #buy_asset_total").val("0");$("#asset_exchange_ask_orders_table tbody").empty();$("#asset_exchange_bid_orders_table tbody").empty();$("#asset_exchange_trade_history_table tbody").empty();$("#asset_exchange_ask_orders_table").parent().addClass("data-loading").removeClass("data-empty");
$("#asset_exchange_bid_orders_table").parent().addClass("data-loading").removeClass("data-empty");$("#asset_exchange_trade_history_table").parent().addClass("data-loading").removeClass("data-empty");$(".data-loading img.loading").hide();setTimeout(function(){$(".data-loading img.loading").fadeIn(200)},200);var nrDuplicates=0;$.each(NRS.assets,function(key,singleAsset){if(String(singleAsset.name).toLowerCase()==String(asset.name).toLowerCase()&&singleAsset.asset!=assetId)nrDuplicates++});if(nrDuplicates>=
1){$("#asset_exchange_duplicates_warning span").html((nrDuplicates==1?" is ":" are ")+nrDuplicates+" "+(nrDuplicates==1?"other asset":"other assets"));$("#asset_exchange_duplicates_warning").show()}else $("#asset_exchange_duplicates_warning").hide();if(NRS.databaseSupport)NRS.sendRequest("getAsset",{"asset":assetId},function(response){if(!response.errorCode)if(response.asset!=asset.asset||(response.account!=asset.account||(response.accountRS!=asset.accountRS||(response.decimals!=asset.decimals||(response.description!=
asset.description||(response.name!=asset.name||response.quantityQNT!=asset.quantityQNT))))))NRS.database.delete("assets",[{"asset":asset.asset}],function(){setTimeout(function(){NRS.loadPage("asset_exchange");$.growl("Invalid asset.",{"type":"danger"})},50)})});if(asset.viewingAsset){$("#asset_exchange_bookmark_this_asset").show();NRS.viewingAsset=asset}else{$("#asset_exchange_bookmark_this_asset").hide();NRS.viewingAsset=false}}if(NRS.accountInfo.unconfirmedBalanceNQT=="0"){$("#your_nxt_balance").html("0");
$("#buy_automatic_price").addClass("zero").removeClass("nonzero")}else{$("#your_nxt_balance").html(NRS.formatAmount(NRS.accountInfo.unconfirmedBalanceNQT));$("#buy_automatic_price").addClass("nonzero").removeClass("zero")}if(NRS.accountInfo.unconfirmedAssetBalances)for(var i=0;i<NRS.accountInfo.unconfirmedAssetBalances.length;i++){var balance=NRS.accountInfo.unconfirmedAssetBalances[i];if(balance.asset==assetId){NRS.currentAsset.yourBalanceNQT=balance.unconfirmedBalanceQNT;$("#your_asset_balance").html(NRS.formatQuantity(balance.unconfirmedBalanceQNT,
NRS.currentAsset.decimals));if(balance.unconfirmedBalanceQNT=="0")$("#sell_automatic_price").addClass("zero").removeClass("nonzero");else $("#sell_automatic_price").addClass("nonzero").removeClass("zero");break}}if(!NRS.currentAsset.yourBalanceNQT){NRS.currentAsset.yourBalanceNQT="0";$("#your_asset_balance").html("0")}NRS.loadAssetOrders("ask",assetId,refresh);NRS.loadAssetOrders("bid",assetId,refresh);NRS.sendRequest("getTrades+"+assetId,{"asset":assetId,"firstIndex":0,"lastIndex":50},function(response,
input){if(response.trades&&response.trades.length){var trades=response.trades;var rows="";for(var i=0;i<trades.length;i++){trades[i].priceNQT=new BigInteger(trades[i].priceNQT);trades[i].quantityQNT=new BigInteger(trades[i].quantityQNT);trades[i].totalNQT=new BigInteger(NRS.calculateOrderTotalNQT(trades[i].priceNQT,trades[i].quantityQNT));rows+="\x3ctr\x3e\x3ctd\x3e"+NRS.formatTimestamp(trades[i].timestamp)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatQuantity(trades[i].quantityQNT,NRS.currentAsset.decimals)+
"\x3c/td\x3e\x3ctd class\x3d'asset_price'\x3e"+NRS.formatOrderPricePerWholeQNT(trades[i].priceNQT,NRS.currentAsset.decimals)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatAmount(trades[i].totalNQT)+"\x3c/td\x3e\x3ctd\x3e"+String(trades[i].askOrder).escapeHTML()+"\x3c/td\x3e\x3ctd\x3e"+String(trades[i].bidOrder).escapeHTML()+"\x3c/td\x3e\x3c/tr\x3e"}$("#asset_exchange_trade_history_table tbody").empty().append(rows);NRS.dataLoadFinished($("#asset_exchange_trade_history_table"),!refresh)}else{$("#asset_exchange_trade_history_table tbody").empty();
NRS.dataLoadFinished($("#asset_exchange_trade_history_table"),!refresh)}})};NRS.loadAssetOrders=function(type,assetId,refresh){type=type.toLowerCase();NRS.sendRequest("get"+type.capitalize()+"Orders+"+assetId,{"asset":assetId,"timestamp":0,"limit":50},function(response,input){var orders=response[type+"Orders"];if(!orders)orders=[];if(NRS.unconfirmedTransactions.length){var added=false;for(var i=0;i<NRS.unconfirmedTransactions.length;i++){var unconfirmedTransaction=NRS.unconfirmedTransactions[i];unconfirmedTransaction.order=
unconfirmedTransaction.transaction;if(unconfirmedTransaction.type==2&&((type=="ask"?unconfirmedTransaction.subtype==2:unconfirmedTransaction.subtype==3)&&unconfirmedTransaction.asset==assetId)){orders.push($.extend(true,{},unconfirmedTransaction));added=true}}if(added)orders.sort(function(a,b){if(type=="ask")return(new BigInteger(a.priceNQT)).compareTo(new BigInteger(b.priceNQT));else return(new BigInteger(b.priceNQT)).compareTo(new BigInteger(a.priceNQT))})}if(orders.length){$("#"+(type=="ask"?"sell":
"buy")+"_orders_count").html("("+orders.length+(orders.length==50?"+":"")+")");var rows="";for(var i=0;i<orders.length;i++){var order=orders[i];order.priceNQT=new BigInteger(order.priceNQT);order.quantityQNT=new BigInteger(order.quantityQNT);order.totalNQT=new BigInteger(NRS.calculateOrderTotalNQT(order.quantityQNT,order.priceNQT));if(i==0&&!refresh)$("#"+(type=="ask"?"buy":"sell")+"_asset_price").val(NRS.calculateOrderPricePerWholeQNT(order.priceNQT,NRS.currentAsset.decimals));var className=(order.account==
NRS.account?"your-order":"")+(order.unconfirmed?" tentative":NRS.isUserCancelledOrder(order)?" tentative tentative-crossed":"");rows+="\x3ctr class\x3d'"+className+"' data-transaction\x3d'"+String(order.order).escapeHTML()+"' data-quantity\x3d'"+order.quantityQNT.toString().escapeHTML()+"' data-price\x3d'"+order.priceNQT.toString().escapeHTML()+"'\x3e\x3ctd\x3e"+(order.unconfirmed?"You - \x3cstrong\x3ePending\x3c/strong\x3e":order.account==NRS.account?"\x3cstrong\x3eYou\x3c/strong\x3e":"\x3ca href\x3d'#' data-user\x3d'"+
NRS.getAccountFormatted(order,"account")+"' class\x3d'user_info'\x3e"+(order.account==NRS.currentAsset.account?"Asset Issuer":NRS.getAccountTitle(order,"account"))+"\x3c/a\x3e")+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatQuantity(order.quantityQNT,NRS.currentAsset.decimals)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatOrderPricePerWholeQNT(order.priceNQT,NRS.currentAsset.decimals)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatAmount(order.totalNQT)+"\x3c/tr\x3e"}$("#asset_exchange_"+type+"_orders_table tbody").empty().append(rows)}else{$("#asset_exchange_"+
type+"_orders_table tbody").empty();if(!refresh)$("#"+(type=="ask"?"buy":"sell")+"_asset_price").val("0");$("#"+(type=="ask"?"sell":"buy")+"_orders_count").html("")}NRS.dataLoadFinished($("#asset_exchange_"+type+"_orders_table"),!refresh)})};NRS.isUserCancelledOrder=function(order){if(NRS.unconfirmedTransactions.length)for(var i=0;i<NRS.unconfirmedTransactions.length;i++){var unconfirmedTransaction=NRS.unconfirmedTransactions[i];if(unconfirmedTransaction.type==2&&((order.type=="ask"?unconfirmedTransaction.subtype==
4:unconfirmedTransaction.subtype==5)&&unconfirmedTransaction.attachment.order==order.order))return true}return false};$("#asset_exchange_search").on("submit",function(e){e.preventDefault();$("#asset_exchange_search input[name\x3dq]").trigger("input")});$("#asset_exchange_search input[name\x3dq]").on("input",function(e){var input=$.trim($(this).val()).toLowerCase();if(!input){NRS.assetSearch=false;NRS.loadAssetExchangeSidebar();$("#asset_exchange_clear_search").hide()}else{NRS.assetSearch=[];if(/NXT\-/i.test(input))$.each(NRS.assets,
function(key,asset){if(asset.accountRS.toLowerCase()==input||asset.accountRS.toLowerCase().indexOf(input)!==-1)NRS.assetSearch.push(asset.asset)});else $.each(NRS.assets,function(key,asset){if(asset.account==input||(asset.asset==input||asset.name.toLowerCase().indexOf(input)!==-1))NRS.assetSearch.push(asset.asset)});NRS.loadAssetExchangeSidebar();$("#asset_exchange_clear_search").show();$("#asset_exchange_show_type").hide()}});$("#asset_exchange_clear_search").on("click",function(){$("#asset_exchange_search input[name\x3dq]").val("");
$("#asset_exchange_search").trigger("submit")});$("#buy_asset_box .box-header, #sell_asset_box .box-header").click(function(e){e.preventDefault();var box=$(this).parents(".box").first();var bf=box.find(".box-body, .box-footer");if(!box.hasClass("collapsed-box")){box.addClass("collapsed-box");$(this).find(".btn i.fa").removeClass("fa-minus").addClass("fa-plus");bf.slideUp()}else{box.removeClass("collapsed-box");bf.slideDown();$(this).find(".btn i.fa").removeClass("fa-plus").addClass("fa-minus")}});
$("#asset_exchange_bid_orders_table tbody, #asset_exchange_ask_orders_table tbody").on("click","td",function(e){var $target=$(e.target);if($target.prop("tagName").toLowerCase()=="a")return;var type=$target.closest("table").attr("id")=="asset_exchange_bid_orders_table"?"sell":"buy";var $tr=$target.closest("tr");try{var priceNQT=new BigInteger(String($tr.data("price")));var quantityQNT=new BigInteger(String($tr.data("quantity")));var totalNQT=new BigInteger(NRS.calculateOrderTotalNQT(quantityQNT,priceNQT));
$("#"+type+"_asset_price").val(NRS.calculateOrderPricePerWholeQNT(priceNQT,NRS.currentAsset.decimals));$("#"+type+"_asset_quantity").val(NRS.convertToQNTf(quantityQNT,NRS.currentAsset.decimals));$("#"+type+"_asset_total").val(NRS.convertToNXT(totalNQT))}catch(err){return}if(type=="sell"){try{var balanceNQT=new BigInteger(NRS.accountInfo.unconfirmedBalanceNQT)}catch(err){return}if(totalNQT.compareTo(balanceNQT)>0)$("#"+type+"_asset_total").css({"background":"#ED4348","color":"white"});else $("#"+type+
"_asset_total").css({"background":"","color":""})}var box=$("#"+type+"_asset_box");if(box.hasClass("collapsed-box")){box.removeClass("collapsed-box");box.find(".box-body").slideDown()}});$("#sell_automatic_price, #buy_automatic_price").on("click",function(e){try{var type=$(this).attr("id")=="sell_automatic_price"?"sell":"buy";var price=new Big(NRS.convertToNQT(String($("#"+type+"_asset_price").val())));var balance=new Big(type=="buy"?NRS.accountInfo.unconfirmedBalanceNQT:NRS.currentAsset.yourBalanceNQT);
var balanceNQT=new Big(NRS.accountInfo.unconfirmedBalanceNQT);var maxQuantity=new Big(NRS.convertToQNTf(NRS.currentAsset.quantityQNT,NRS.currentAsset.decimals));if(balance.cmp(new Big("0"))<=0)return;if(price.cmp(new Big("0"))<=0){price=new Big(""+Math.pow(10,NRS.currentAsset.decimals));$("#"+type+"_asset_price").val(NRS.convertToNXT(price.toString()))}var quantity=new Big(NRS.amountToPrecision((type=="sell"?balanceNQT:balance).div(price).toString(),NRS.currentAsset.decimals));var total=quantity.times(price);
if(quantity.cmp(maxQuantity)==1){quantity=maxQuantity;total=quantity.times(price)}if(type=="sell"){var maxUserQuantity=new Big(NRS.convertToQNTf(balance,NRS.currentAsset.decimals));if(quantity.cmp(maxUserQuantity)==1){quantity=maxUserQuantity;total=quantity.times(price)}}$("#"+type+"_asset_quantity").val(quantity.toString());$("#"+type+"_asset_total").val(NRS.convertToNXT(total.toString()));$("#"+type+"_asset_total").css({"background":"","color":""})}catch(err){}});function isControlKey(charCode){if(charCode>=
32)return false;if(charCode==10)return false;if(charCode==13)return false;return true}$("#buy_asset_quantity, #buy_asset_price, #sell_asset_quantity, #sell_asset_price, #buy_asset_fee, #sell_asset_fee").keydown(function(e){var charCode=!e.charCode?e.which:e.charCode;if(isControlKey(charCode)||(e.ctrlKey||e.metaKey))return;var isQuantityField=/_quantity/i.test($(this).attr("id"));var maxFractionLength=isQuantityField?NRS.currentAsset.decimals:8-NRS.currentAsset.decimals;if(maxFractionLength){if(charCode==
110||charCode==190)if($(this).val().indexOf(".")!=-1){e.preventDefault();return false}else return}else if(charCode==110||(charCode==190||charCode==188)){$.growl("Fractions are not allowed.",{"type":"danger"});e.preventDefault();return false}var input=$(this).val()+String.fromCharCode(charCode);var afterComma=input.match(/\.(\d*)$/);if(afterComma&&afterComma[1].length>maxFractionLength){var selectedText=NRS.getSelectedText();if(selectedText!=$(this).val()){var errorMessage;if(isQuantityField)errorMessage=
"Only "+NRS.currentAsset.decimals+" digits after the decimal mark are allowed for this asset.";else errorMessage="Only "+(8-NRS.currentAsset.decimals)+" digits after the decimal mark are allowed.";$.growl(errorMessage,{"type":"danger"});e.preventDefault();return false}}if(charCode==8||(charCode==37||(charCode==39||(charCode==46||(charCode>=48&&(charCode<=57&&!isNaN(String.fromCharCode(charCode)))||charCode>=96&&charCode<=105)))))return;else{if(charCode==188)$.growl("Comma is not allowed, use a dot instead.",
{"type":"danger"});e.preventDefault();return false}});$("#sell_asset_quantity, #sell_asset_price, #buy_asset_quantity, #buy_asset_price").keyup(function(e){var orderType=$(this).data("type").toLowerCase();try{var quantityQNT=new BigInteger(NRS.convertToQNT(String($("#"+orderType+"_asset_quantity").val()),NRS.currentAsset.decimals));var priceNQT=new BigInteger(NRS.calculatePricePerWholeQNT(NRS.convertToNQT(String($("#"+orderType+"_asset_price").val())),NRS.currentAsset.decimals));if(priceNQT.toString()==
"0"||quantityQNT.toString()=="0")$("#"+orderType+"_asset_total").val("0");else{var total=NRS.calculateOrderTotal(quantityQNT,priceNQT,NRS.currentAsset.decimals);$("#"+orderType+"_asset_total").val(total.toString())}}catch(err){$("#"+orderType+"_asset_total").val("0")}});$("#asset_order_modal").on("show.bs.modal",function(e){var $invoker=$(e.relatedTarget);var orderType=$invoker.data("type");var assetId=$invoker.data("asset");$("#asset_order_modal_button").html(orderType+" Asset").data("resetText",
orderType+" Asset");orderType=orderType.toLowerCase();try{var quantity=String($("#"+orderType+"_asset_quantity").val());var quantityQNT=new BigInteger(NRS.convertToQNT(quantity,NRS.currentAsset.decimals));var priceNQT=new BigInteger(NRS.calculatePricePerWholeQNT(NRS.convertToNQT(String($("#"+orderType+"_asset_price").val())),NRS.currentAsset.decimals));var feeNQT=new BigInteger(NRS.convertToNQT(String($("#"+orderType+"_asset_fee").val())));var totalNXT=NRS.formatAmount(NRS.calculateOrderTotalNQT(quantityQNT,
priceNQT,NRS.currentAsset.decimals),false,true)}catch(err){$.growl("Invalid input.",{"type":"danger"});return e.preventDefault()}if(priceNQT.toString()=="0"||quantityQNT.toString()=="0"){$.growl("Please fill in an amount and price.",{"type":"danger"});return e.preventDefault()}if(feeNQT.toString()=="0")feeNQT=new BigInteger("100000000");var priceNQTPerWholeQNT=priceNQT.multiply(new BigInteger(""+Math.pow(10,NRS.currentAsset.decimals)));if(orderType=="buy"){var description="Buy \x3cstrong\x3e"+NRS.formatQuantity(quantityQNT,
NRS.currentAsset.decimals,true)+" "+$("#asset_name").html()+"\x3c/strong\x3e assets at \x3cstrong\x3e"+NRS.formatAmount(priceNQTPerWholeQNT,false,true)+" NXT\x3c/strong\x3e each.";var tooltipTitle="Per whole asset bought you will pay "+NRS.formatAmount(priceNQTPerWholeQNT,false,true)+" NXT, making a total of "+totalNXT+" NXT once everything have been bought."}else{var description="Sell \x3cstrong\x3e"+NRS.formatQuantity(quantityQNT,NRS.currentAsset.decimals,true)+" "+$("#asset_name").html()+"\x3c/strong\x3e assets at \x3cstrong\x3e"+
NRS.formatAmount(priceNQTPerWholeQNT,false,true)+" NXT\x3c/strong\x3e each.";var tooltipTitle="Per whole asset sold you will receive "+NRS.formatAmount(priceNQTPerWholeQNT,false,true)+" NXT, making a total of "+totalNXT+" NXT once everything has been sold."}$("#asset_order_description").html(description);$("#asset_order_total").html(totalNXT+" NXT");$("#asset_order_fee_paid").html(NRS.formatAmount(feeNQT)+" NXT");if(quantity!="1"){$("#asset_order_total_tooltip").show();$("#asset_order_total_tooltip").popover("destroy");
$("#asset_order_total_tooltip").data("content",tooltipTitle);$("#asset_order_total_tooltip").popover({"content":tooltipTitle,"trigger":"hover"})}else $("#asset_order_total_tooltip").hide();$("#asset_order_type").val(orderType=="buy"?"placeBidOrder":"placeAskOrder");$("#asset_order_asset").val(assetId);$("#asset_order_quantity").val(quantityQNT.toString());$("#asset_order_price").val(priceNQT.toString());$("#asset_order_fee").val(feeNQT.toString())});NRS.forms.orderAsset=function($modal){var orderType=
$("#asset_order_type").val();return{"requestType":orderType,"successMessage":$modal.find("input[name\x3dsuccess_message]").val().replace("__",orderType=="placeBidOrder"?"buy":"sell")}};NRS.forms.orderAssetComplete=function(response,data){if(response.alreadyProcessed)return;if(data.requestType=="placeBidOrder")var $table=$("#asset_exchange_bid_orders_table tbody");else var $table=$("#asset_exchange_ask_orders_table tbody");if($table.find("tr[data-transaction\x3d'"+String(response.transaction).escapeHTML()+
"']").length)return;var $rows=$table.find("tr");data.quantityQNT=new BigInteger(data.quantityQNT);data.priceNQT=new BigInteger(data.priceNQT);data.totalNQT=new BigInteger(NRS.calculateOrderTotalNQT(data.quantityQNT,data.priceNQT));var rowToAdd="\x3ctr class\x3d'tentative' data-transaction\x3d'"+String(response.transaction).escapeHTML()+"' data-quantity\x3d'"+data.quantityQNT.toString().escapeHTML()+"' data-price\x3d'"+data.priceNQT.toString().escapeHTML()+"'\x3e\x3ctd\x3eYou - \x3cstrong\x3ePending\x3c/strong\x3e\x3c/td\x3e\x3ctd\x3e"+
NRS.formatQuantity(data.quantityQNT,NRS.currentAsset.decimals)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatOrderPricePerWholeQNT(data.priceNQT,NRS.currentAsset.decimals)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatAmount(data.totalNQT)+"\x3c/td\x3e\x3c/tr\x3e";var rowAdded=false;if($rows.length)$rows.each(function(){var rowPrice=new BigInteger(String($(this).data("price")));if(data.requestType=="placeBidOrder"&&data.priceNQT.compareTo(rowPrice)>0){$(this).before(rowToAdd);rowAdded=true;return false}else if(data.requestType==
"placeAskOrder"&&data.priceNQT.compareTo(rowPrice)<0){$(this).before(rowToAdd);rowAdded=true;return false}});if(!rowAdded){$table.append(rowToAdd);$table.parent().parent().removeClass("data-empty").parent().addClass("no-padding")}};NRS.forms.issueAsset=function($modal){var data=NRS.getFormData($modal.find("form:first"));data.description=$.trim(data.description);if(!data.description)return{"error":"Description is a required field."};else if(!/^\d+$/.test(data.quantity))return{"error":"Quantity must be a whole numbrer."};
else{data.quantityQNT=String(data.quantity);if(data.decimals>0)for(var i=0;i<data.decimals;i++)data.quantityQNT+="0";delete data.quantity;return{"data":data}}};$("#asset_exchange_sidebar_group_context").on("click","a",function(e){e.preventDefault();var groupName=NRS.selectedContext.data("groupname");var option=$(this).data("option");if(option=="change_group_name"){$("#asset_exchange_change_group_name_old_display").html(groupName.escapeHTML());$("#asset_exchange_change_group_name_old").val(groupName);
$("#asset_exchange_change_group_name_new").val("");$("#asset_exchange_change_group_name_modal").modal("show")}});NRS.forms.assetExchangeChangeGroupName=function($modal){var oldGroupName=$("#asset_exchange_change_group_name_old").val();var newGroupName=$("#asset_exchange_change_group_name_new").val();if(!newGroupName.match(/^[a-z0-9 ]+$/i))return{"error":"Only alphanumerical characters can be used in the group name."};NRS.database.update("assets",{"groupName":newGroupName},[{"groupName":oldGroupName}],
function(){setTimeout(function(){NRS.loadPage("asset_exchange");$.growl("Group name updated successfully.",{"type":"success"})},50)});return{"stop":true}};$("#asset_exchange_sidebar_context").on("click","a",function(e){e.preventDefault();var assetId=NRS.selectedContext.data("asset");var option=$(this).data("option");NRS.closeContextMenu();if(option=="add_to_group"){$("#asset_exchange_group_asset").val(assetId);NRS.database.select("assets",[{"asset":assetId}],function(error,asset){asset=asset[0];$("#asset_exchange_group_title").html(String(asset.name).escapeHTML());
NRS.database.select("assets",[],function(error,assets){var groupNames=[];$.each(assets,function(index,asset){if(asset.groupName&&$.inArray(asset.groupName,groupNames)==-1)groupNames.push(asset.groupName)});assets=[];groupNames.sort(function(a,b){if(a.toLowerCase()>b.toLowerCase())return 1;else if(a.toLowerCase()<b.toLowerCase())return-1;else return 0});var groupSelect=$("#asset_exchange_group_group");groupSelect.empty();$.each(groupNames,function(index,groupName){groupSelect.append("\x3coption value\x3d'"+
groupName.escapeHTML()+"'"+(asset.groupName&&asset.groupName.toLowerCase()==groupName.toLowerCase()?" selected\x3d'selected'":"")+"\x3e"+groupName.escapeHTML()+"\x3c/option\x3e")});groupSelect.append("\x3coption value\x3d'0'"+(!asset.groupName?" selected\x3d'selected'":"")+"\x3eNone\x3c/option\x3e");groupSelect.append("\x3coption value\x3d'-1'\x3eNew group\x3c/option\x3e");$("#asset_exchange_group_modal").modal("show")})})}else if(option=="remove_from_group")NRS.database.update("assets",{"groupName":""},
[{"asset":assetId}],function(){setTimeout(function(){NRS.loadPage("asset_exchange");$.growl("Asset removed from group successfully.",{"type":"success"})},50)});else if(option=="remove_from_bookmarks"){var ownsAsset=false;if(NRS.accountInfo.unconfirmedAssetBalances)$.each(NRS.accountInfo.unconfirmedAssetBalances,function(key,assetBalance){if(assetBalance.asset==assetId){ownsAsset=true;return false}});if(ownsAsset)$.growl("Asset cannot be removed (you own it).",{"type":"danger"});else NRS.database.delete("assets",
[{"asset":assetId}],function(error,affected){setTimeout(function(){NRS.loadPage("asset_exchange");$.growl("Asset removed from bookmarks successfully.",{"type":"success"})},50)})}});$("#asset_exchange_group_group").on("change",function(){var value=$(this).val();if(value==-1)$("#asset_exchange_group_new_group_div").show();else $("#asset_exchange_group_new_group_div").hide()});NRS.forms.assetExchangeGroup=function($modal){var assetId=$("#asset_exchange_group_asset").val();var groupName=$("#asset_exchange_group_group").val();
if(groupName==0)groupName="";else if(groupName==-1)groupName=$("#asset_exchange_group_new_group").val();NRS.database.update("assets",{"groupName":groupName},[{"asset":assetId}],function(){setTimeout(function(){NRS.loadPage("asset_exchange");if(!groupName)$.growl("Asset removed from group successfully.",{"type":"success"});else $.growl("Asset added to group successfully.",{"type":"success"})},50)});return{"stop":true}};$("#asset_exchange_group_modal").on("hidden.bs.modal",function(e){$("#asset_exchange_group_new_group_div").val("").hide()});
NRS.pages.my_assets=function(){if(NRS.accountInfo.assetBalances&&NRS.accountInfo.assetBalances.length){var result={"assets":[],"bid_orders":{},"ask_orders":{}};var count={"total_assets":NRS.accountInfo.assetBalances.length,"assets":0,"ignored_assets":0,"ask_orders":0,"bid_orders":0};for(var i=0;i<NRS.accountInfo.assetBalances.length;i++){if(NRS.accountInfo.assetBalances[i].balanceQNT=="0"){count.ignored_assets++;if(NRS.checkMyAssetsPageLoaded(count))NRS.myAssetsPageLoaded(result);continue}NRS.sendRequest("getAskOrderIds+",
{"asset":NRS.accountInfo.assetBalances[i].asset,"limit":1,"timestamp":0},function(response,input){if(NRS.currentPage!="my_assets")return;if(response.askOrderIds&&response.askOrderIds.length)NRS.sendRequest("getAskOrder+",{"order":response.askOrderIds[0],"_extra":{"asset":input.asset}},function(response,input){if(NRS.currentPage!="my_assets")return;response.priceNQT=new BigInteger(response.priceNQT);result.ask_orders[input["_extra"].asset]=response.priceNQT;count.ask_orders++;if(NRS.checkMyAssetsPageLoaded(count))NRS.myAssetsPageLoaded(result)});
else{result.ask_orders[input.asset]=-1;count.ask_orders++;if(NRS.checkMyAssetsPageLoaded(count))NRS.myAssetsPageLoaded(result)}});NRS.sendRequest("getBidOrderIds+",{"asset":NRS.accountInfo.assetBalances[i].asset,"limit":1,"timestamp":0},function(response,input){if(NRS.currentPage!="my_assets")return;if(response.bidOrderIds&&response.bidOrderIds.length)NRS.sendRequest("getBidOrder+",{"order":response.bidOrderIds[0],"_extra":{"asset":input.asset}},function(response,input){if(NRS.currentPage!="my_assets")return;
response.priceNQT=new BigInteger(response.priceNQT);result.bid_orders[input["_extra"].asset]=response.priceNQT;count.bid_orders++;if(NRS.checkMyAssetsPageLoaded(count))NRS.myAssetsPageLoaded(result)});else{result.bid_orders[input.asset]=-1;count.bid_orders++;if(NRS.checkMyAssetsPageLoaded(count))NRS.myAssetsPageLoaded(result)}});NRS.sendRequest("getAsset+",{"asset":NRS.accountInfo.assetBalances[i].asset,"_extra":{"balanceQNT":NRS.accountInfo.assetBalances[i].balanceQNT}},function(asset,input){if(NRS.currentPage!=
"my_assets")return;asset.asset=input.asset;asset.balanceQNT=new BigInteger(input["_extra"].balanceQNT);asset.quantityQNT=new BigInteger(asset.quantityQNT);result.assets[count.assets]=asset;count.assets++;if(NRS.checkMyAssetsPageLoaded(count))NRS.myAssetsPageLoaded(result)})}}else NRS.dataLoaded()};NRS.checkMyAssetsPageLoaded=function(count){if(count.assets+count.ignored_assets==count.total_assets&&(count.assets==count.ask_orders&&count.assets==count.bid_orders))return true;else return false};NRS.myAssetsPageLoaded=
function(result){var rows="";result.assets.sort(function(a,b){if(a.name.toLowerCase()>b.name.toLowerCase())return 1;else if(a.name.toLowerCase()<b.name.toLowerCase())return-1;else return 0});for(var i=0;i<result.assets.length;i++){var asset=result.assets[i];var lowestAskOrder=result.ask_orders[asset.asset];var highestBidOrder=result.bid_orders[asset.asset];var percentageAsset=NRS.calculatePercentage(asset.balanceQNT,asset.quantityQNT);if(highestBidOrder!=-1)var total=new BigInteger(NRS.calculateOrderTotalNQT(asset.balanceQNT,
highestBidOrder,asset.decimals));else var total=0;var tentative=-1;if(NRS.unconfirmedTransactions.length)for(var j=0;j<NRS.unconfirmedTransactions.length;j++){var unconfirmedTransaction=NRS.unconfirmedTransactions[j];if(unconfirmedTransaction.type==2&&(unconfirmedTransaction.subtype==1&&unconfirmedTransaction.attachment.asset==asset.asset))if(tentative==-1)if(unconfirmedTransaction.recipient==NRS.account)tentative=new BigInteger(unconfirmedTransaction.attachment.quantityQNT);else tentative=new BigInteger("-"+
unconfirmedTransaction.attachment.quantityQNT);else if(unconfirmedTransaction.recipient==NRS.account)tentative=tentative.add(new BigInteger(unconfirmedTransaction.attachment.quantityQNT));else tentative=tentative.add(new BigInteger("-"+unconfirmedTransaction.attachment.quantityQNT))}if(highestBidOrder!=-1)var totalNQT=new BigInteger(NRS.calculateOrderTotalNQT(asset.balanceQNT,highestBidOrder));var sign="+";if(tentative!=-1&&tentative.compareTo(BigInteger.ZERO)<0){tentative=tentative.abs();sign="-"}rows+=
"\x3ctr"+(tentative!=-1?" class\x3d'tentative tentative-allow-links'":"")+" data-asset\x3d'"+String(asset.asset).escapeHTML()+"'\x3e\x3ctd\x3e\x3ca href\x3d'#' data-goto-asset\x3d'"+String(asset.asset).escapeHTML()+"'\x3e"+String(asset.name).escapeHTML()+"\x3c/a\x3e\x3c/td\x3e\x3ctd class\x3d'quantity'\x3e"+NRS.formatQuantity(asset.balanceQNT,asset.decimals)+(tentative!=-1?" "+sign+" \x3cspan class\x3d'added_quantity'\x3e"+NRS.formatQuantity(tentative,asset.decimals)+"\x3c/span\x3e":"")+"\x3c/td\x3e\x3ctd\x3e"+
NRS.formatQuantity(asset.quantityQNT,asset.decimals)+"\x3c/td\x3e\x3ctd\x3e"+percentageAsset+"%\x3c/td\x3e\x3ctd\x3e"+(lowestAskOrder!=-1?NRS.formatOrderPricePerWholeQNT(lowestAskOrder,asset.decimals):"/")+"\x3c/td\x3e\x3ctd\x3e"+(highestBidOrder!=-1?NRS.formatOrderPricePerWholeQNT(highestBidOrder,asset.decimals):"/")+"\x3c/td\x3e\x3ctd\x3e"+(highestBidOrder!=-1?NRS.formatAmount(totalNQT):"/")+"\x3c/td\x3e\x3ctd\x3e\x3ca href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#transfer_asset_modal' data-asset\x3d'"+
String(asset.asset).escapeHTML()+"' data-name\x3d'"+String(asset.name).escapeHTML()+"' data-decimals\x3d'"+String(asset.decimals).escapeHTML()+"'\x3eTransfer\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e"}NRS.dataLoaded(rows)};NRS.incoming.my_assets=function(){NRS.loadPage("my_assets")};$("#transfer_asset_modal").on("show.bs.modal",function(e){var $invoker=$(e.relatedTarget);var assetId=$invoker.data("asset");var assetName=$invoker.data("name");var decimals=$invoker.data("decimals");$("#transfer_asset_asset").val(assetId);
$("#transfer_asset_decimals").val(decimals);$("#transfer_asset_name").html(String(assetName).escapeHTML());$("#transer_asset_available").html("");var confirmedBalance=0;var unconfirmedBalance=0;if(NRS.accountInfo.assetBalances)$.each(NRS.accountInfo.assetBalances,function(key,assetBalance){if(assetBalance.asset==assetId){confirmedBalance=assetBalance.balanceQNT;return false}});if(NRS.accountInfo.unconfirmedAssetBalances)$.each(NRS.accountInfo.unconfirmedAssetBalances,function(key,assetBalance){if(assetBalance.asset==
assetId){unconfirmedBalance=assetBalance.unconfirmedBalanceQNT;return false}});var availableAssetsMessage="";if(confirmedBalance==unconfirmedBalance)availableAssetsMessage=" - "+NRS.formatQuantity(confirmedBalance,decimals)+" available for transfer";else availableAssetsMessage=" - "+NRS.formatQuantity(unconfirmedBalance,decimals)+" available for transfer ("+NRS.formatQuantity(confirmedBalance,decimals)+" total)";$("#transfer_asset_available").html(availableAssetsMessage)});NRS.forms.transferAsset=
function($modal){var data=NRS.getFormData($modal.find("form:first"));if(!NRS.showedFormWarning)if(NRS.settings["asset_transfer_warning"]&&NRS.settings["asset_transfer_warning"]!=0)if((new Big(data.quantity)).cmp(new Big(NRS.settings["asset_transfer_warning"]))>0){NRS.showedFormWarning=true;return{"error":"Quantity specified is higher than "+String(NRS.settings["asset_transfer_warning"]).escapeHTML()+". Are you sure you want to continue? Click the submit button again to confirm."}}try{data.quantityQNT=
NRS.convertToQNT(data.quantity,data.decimals)}catch(e){return{"error":"Incorrect quantity: "+e}}delete data.quantity;delete data.decimals;return{"data":data}};NRS.forms.transferAssetComplete=function(response,data){NRS.loadPage("my_assets")};$("body").on("click","a[data-goto-asset]",function(e){e.preventDefault();var $visible_modal=$(".modal.in");if($visible_modal.length)$visible_modal.modal("hide");NRS.goToAsset($(this).data("goto-asset"))});NRS.goToAsset=function(asset){NRS.assetSearch=false;$("#asset_exchange_sidebar_search input[name\x3dq]").val("");
$("#asset_exchange_clear_search").hide();$("#asset_exchange_sidebar a.list-group-item.active").removeClass("active");$("#no_asset_selected, #asset_details, #no_assets_available, #no_asset_search_results").hide();$("#loading_asset_data").show();$("ul.sidebar-menu a[data-page\x3dasset_exchange]").last().trigger("click",[{callback:function(){var assetLink=$("#asset_exchange_sidebar a[data-asset\x3d"+asset+"]");if(assetLink.length)assetLink.click();else NRS.sendRequest("getAsset",{"asset":asset},function(response){if(!response.errorCode)NRS.loadAssetExchangeSidebar(function(){response.groupName=
"";response.viewingAsset=true;NRS.loadAsset(response)});else $.growl("Could not find asset.",{"type":"danger"})})}}])};NRS.pages.open_orders=function(){var loaded=0;NRS.getOpenOrders("ask",function(){loaded++;if(loaded==2)NRS.pageLoaded()});NRS.getOpenOrders("bid",function(){loaded++;if(loaded==2)NRS.pageLoaded()})};NRS.getOpenOrders=function(type,callback){var uppercase=type.charAt(0).toUpperCase()+type.slice(1).toLowerCase();var lowercase=type.toLowerCase();var getCurrentOrderIds="getAccountCurrent"+
uppercase+"OrderIds+";var orderIds=lowercase+"OrderIds";var getOrder="get"+uppercase+"Order+";var orders=[];NRS.sendRequest(getCurrentOrderIds,{"account":NRS.account,"timestamp":0},function(response){if(response[orderIds]&&response[orderIds].length){var nr_orders=0;for(var i=0;i<response[orderIds].length;i++){NRS.sendRequest(getOrder,{"order":response[orderIds][i]},function(order,input){if(NRS.currentPage!="open_orders")return;order.order=input.order;orders.push(order);nr_orders++;if(nr_orders==response[orderIds].length){var nr_orders_complete=
0;for(var i=0;i<nr_orders;i++){var order=orders[i];NRS.sendRequest("getAsset+",{"asset":order.asset,"_extra":{"id":i}},function(asset,input){if(NRS.currentPage!="open_orders")return;orders[input["_extra"].id].assetName=asset.name;orders[input["_extra"].id].decimals=asset.decimals;nr_orders_complete++;if(nr_orders_complete==nr_orders)NRS.getUnconfirmedOrders(type,function(unconfirmedOrders){NRS.openOrdersLoaded(orders.concat(unconfirmedOrders),lowercase,callback)})});if(NRS.currentPage!="open_orders")return}}});
if(NRS.currentPage!="open_orders")return}}else NRS.getUnconfirmedOrders(type,function(unconfirmedOrders){NRS.openOrdersLoaded(unconfirmedOrders,lowercase,callback)})})};NRS.getUnconfirmedOrders=function(type,callback){if(NRS.unconfirmedTransactions.length){var unconfirmedOrders=[];for(var i=0;i<NRS.unconfirmedTransactions.length;i++){var unconfirmedTransaction=NRS.unconfirmedTransactions[i];if(unconfirmedTransaction.type==2&&unconfirmedTransaction.subtype==(type=="ask"?2:3))unconfirmedOrders.push({"account":unconfirmedTransaction.sender,
"asset":unconfirmedTransaction.attachment.asset,"assetName":"","decimals":0,"height":0,"order":unconfirmedTransaction.transaction,"priceNQT":unconfirmedTransaction.attachment.priceNQT,"quantityQNT":unconfirmedTransaction.attachment.quantityQNT,"tentative":true})}if(unconfirmedOrders.length==0)callback([]);else{var nr_orders=0;for(var i=0;i<unconfirmedOrders.length;i++)NRS.sendRequest("getAsset+",{"asset":unconfirmedOrders[i].asset,"_extra":{"id":i}},function(asset,input){unconfirmedOrders[input["_extra"].id].assetName=
asset.name;unconfirmedOrders[input["_extra"].id].decimals=asset.decimals;nr_orders++;if(nr_orders==unconfirmedOrders.length)callback(unconfirmedOrders)})}}else callback([])};NRS.openOrdersLoaded=function(orders,type,callback){if(!orders.length){$("#open_"+type+"_orders_table tbody").empty();NRS.dataLoadFinished($("#open_"+type+"_orders_table"));callback();return}orders.sort(function(a,b){if(a.assetName.toLowerCase()>b.assetName.toLowerCase())return 1;else if(a.assetName.toLowerCase()<b.assetName.toLowerCase())return-1;
else if(a.quantity*a.price>b.quantity*b.price)return 1;else if(a.quantity*a.price<b.quantity*b.price)return-1;else return 0});var rows="";for(var i=0;i<orders.length;i++){var completeOrder=orders[i];var cancelled=false;if(NRS.unconfirmedTransactions.length)for(var j=0;j<NRS.unconfirmedTransactions.length;j++){var unconfirmedTransaction=NRS.unconfirmedTransactions[j];if(unconfirmedTransaction.type==2&&(unconfirmedTransaction.subtype==(type=="ask"?4:5)&&unconfirmedTransaction.attachment.order==completeOrder.order)){cancelled=
true;break}}completeOrder.priceNQT=new BigInteger(completeOrder.priceNQT);completeOrder.quantityQNT=new BigInteger(completeOrder.quantityQNT);completeOrder.totalNQT=new BigInteger(NRS.calculateOrderTotalNQT(completeOrder.quantityQNT,completeOrder.priceNQT));rows+="\x3ctr data-order\x3d'"+String(completeOrder.order).escapeHTML()+"'"+(cancelled?" class\x3d'tentative tentative-crossed'":completeOrder.tentative?" class\x3d'tentative'":"")+"\x3e\x3ctd\x3e\x3ca href\x3d'#' data-goto-asset\x3d'"+String(completeOrder.asset).escapeHTML()+
"'\x3e"+completeOrder.assetName.escapeHTML()+"\x3c/a\x3e\x3c/td\x3e\x3ctd\x3e"+NRS.formatQuantity(completeOrder.quantityQNT,completeOrder.decimals)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatOrderPricePerWholeQNT(completeOrder.priceNQT,completeOrder.decimals)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatAmount(completeOrder.totalNQT)+"\x3c/td\x3e\x3ctd class\x3d'cancel'\x3e"+(cancelled||completeOrder.tentative?"/":"\x3ca href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#cancel_order_modal' data-order\x3d'"+String(completeOrder.order).escapeHTML()+
"' data-type\x3d'"+type+"'\x3eCancel\x3c/a\x3e")+"\x3c/td\x3e\x3c/tr\x3e"}$("#open_"+type+"_orders_table tbody").empty().append(rows);NRS.dataLoadFinished($("#open_"+type+"_orders_table"));orders={};callback()};NRS.incoming.open_orders=function(transactions){if(NRS.hasTransactionUpdates(transactions))NRS.loadPage("open_orders")};$("#cancel_order_modal").on("show.bs.modal",function(e){var $invoker=$(e.relatedTarget);var orderType=$invoker.data("type");var orderId=$invoker.data("order");if(orderType==
"bid")$("#cancel_order_type").val("cancelBidOrder");else $("#cancel_order_type").val("cancelAskOrder");$("#cancel_order_order").val(orderId)});NRS.forms.cancelOrder=function($modal){var orderType=$("#cancel_order_type").val();return{"requestType":orderType,"successMessage":$modal.find("input[name\x3dsuccess_message]").val().replace("__",orderType=="cancelBidOrder"?"buy":"sell")}};NRS.forms.cancelOrderComplete=function(response,data){if(response.alreadyProcessed)return;$("#open_orders_page tr[data-order\x3d"+
String(data.order).escapeHTML()+"]").addClass("tentative tentative-crossed").find("td.cancel").html("/")};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){NRS.pages.peers=function(){NRS.sendRequest("getPeers+",function(response){if(response.peers&&response.peers.length){var peers={};var nrPeers=0;for(var i=0;i<response.peers.length;i++)NRS.sendRequest("getPeer+",{"peer":response.peers[i]},function(peer,input){if(NRS.currentPage!="peers"){peers={};return}if(!peer.errorCode)peers[input.peer]=peer;nrPeers++;if(nrPeers==response.peers.length){var rows="";var uploaded=0;var downloaded=0;var connected=0;var up_to_date=0;
var active_peers=0;for(var i=0;i<nrPeers;i++){var peer=peers[response.peers[i]];if(!peer)continue;if(peer.state!=0){active_peers++;downloaded+=peer.downloadedVolume;uploaded+=peer.uploadedVolume;if(peer.state==1)connected++;if(NRS.versionCompare(peer.version,NRS.normalVersion.versionNr)>=0)up_to_date++;rows+="\x3ctr\x3e\x3ctd\x3e"+(peer.state==1?"\x3ci class\x3d'fa fa-check-circle' style\x3d'color:#5cb85c' title\x3d'Connected'\x3e\x3c/i\x3e":"\x3ci class\x3d'fa fa-times-circle' style\x3d'color:#f0ad4e' title\x3d'Disconnected'\x3e\x3c/i\x3e")+
"\x26nbsp;\x26nbsp;"+(peer.announcedAddress?String(peer.announcedAddress).escapeHTML():"No name")+"\x3c/td\x3e\x3ctd"+(peer.weight>0?" style\x3d'font-weight:bold'":"")+"\x3e"+NRS.formatWeight(peer.weight)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatVolume(peer.downloadedVolume)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatVolume(peer.uploadedVolume)+"\x3c/td\x3e\x3ctd\x3e\x3cspan class\x3d'label label-"+(NRS.versionCompare(peer.version,NRS.normalVersion.versionNr)>=0?"success":"danger")+"'\x3e"+(peer.application&&peer.version?
String(peer.application).escapeHTML()+" "+String(peer.version).escapeHTML():"?")+"\x3c/label\x3e\x3c/td\x3e\x3ctd\x3e"+(peer.platform?String(peer.platform).escapeHTML():"?")+"\x3c/td\x3e\x3c/tr\x3e"}}$("#peers_uploaded_volume").html(NRS.formatVolume(uploaded)).removeClass("loading_dots");$("#peers_downloaded_volume").html(NRS.formatVolume(downloaded)).removeClass("loading_dots");$("#peers_connected").html(connected).removeClass("loading_dots");$("#peers_up_to_date").html(up_to_date+"/"+active_peers).removeClass("loading_dots");
NRS.dataLoaded(rows)}})}else{$("#peers_uploaded_volume, #peers_downloaded_volume, #peers_connected, #peers_up_to_date").html("0").removeClass("loading_dots");NRS.dataLoaded()}})};NRS.incoming.peers=function(){NRS.loadPage("peers")};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){$("#generate_token_modal").on("show.bs.modal",function(e){$("#generate_token_website").val("http://");$("#generate_token_token").html("").hide()});NRS.forms.generateToken=function($modal){var url=$.trim($("#generate_token_website").val());if(!url||url=="http://"){return{"error":"Website is a required field."};$("#generate_token_token").html("").hide()}else return{}};NRS.forms.generateTokenComplete=function(response,data){$("#generate_token_modal").find(".error_message").hide();
if(response.token)$("#generate_token_token").html("The generated token for \x3cstrong\x3e"+data.website.escapeHTML()+"\x3c/strong\x3e is: \x3cbr /\x3e\x3cbr /\x3e\x3ctextarea style\x3d'width:100%' rows\x3d'3'\x3e"+response.token.escapeHTML()+"\x3c/textarea\x3e").show();else{$.growl("Could not generate token.",{"type":"danger"});$("#generate_token_modal").modal("hide")}};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){$("#account_info_modal").on("show.bs.modal",function(e){$("#account_info_name").val(NRS.accountInfo.name);$("#account_info_description").val(NRS.accountInfo.description)});NRS.forms.setAccountInfoComplete=function(response,data){var name=$.trim(String(data.name));if(name)$("#account_name").html(name.escapeHTML());else $("#account_name").html("No name set")};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){var LOCALE_DATE_FORMATS={"ar-SA":"dd/MM/yy","bg-BG":"dd.M.yyyy","ca-ES":"dd/MM/yyyy","zh-TW":"yyyy/M/d","cs-CZ":"d.M.yyyy","da-DK":"dd-MM-yyyy","de-DE":"dd.MM.yyyy","el-GR":"d/M/yyyy","en-US":"M/d/yyyy","fi-FI":"d.M.yyyy","fr-FR":"dd/MM/yyyy","he-IL":"dd/MM/yyyy","hu-HU":"yyyy. MM. dd.","is-IS":"d.M.yyyy","it-IT":"dd/MM/yyyy","ja-JP":"yyyy/MM/dd","ko-KR":"yyyy-MM-dd","nl-NL":"d-M-yyyy","nb-NO":"dd.MM.yyyy","pl-PL":"yyyy-MM-dd","pt-BR":"d/M/yyyy","ro-RO":"dd.MM.yyyy",
"ru-RU":"dd.MM.yyyy","hr-HR":"d.M.yyyy","sk-SK":"d. M. yyyy","sq-AL":"yyyy-MM-dd","sv-SE":"yyyy-MM-dd","th-TH":"d/M/yyyy","tr-TR":"dd.MM.yyyy","ur-PK":"dd/MM/yyyy","id-ID":"dd/MM/yyyy","uk-UA":"dd.MM.yyyy","be-BY":"dd.MM.yyyy","sl-SI":"d.M.yyyy","et-EE":"d.MM.yyyy","lv-LV":"yyyy.MM.dd.","lt-LT":"yyyy.MM.dd","fa-IR":"MM/dd/yyyy","vi-VN":"dd/MM/yyyy","hy-AM":"dd.MM.yyyy","az-Latn-AZ":"dd.MM.yyyy","eu-ES":"yyyy/MM/dd","mk-MK":"dd.MM.yyyy","af-ZA":"yyyy/MM/dd","ka-GE":"dd.MM.yyyy","fo-FO":"dd-MM-yyyy",
"hi-IN":"dd-MM-yyyy","ms-MY":"dd/MM/yyyy","kk-KZ":"dd.MM.yyyy","ky-KG":"dd.MM.yy","sw-KE":"M/d/yyyy","uz-Latn-UZ":"dd/MM yyyy","tt-RU":"dd.MM.yyyy","pa-IN":"dd-MM-yy","gu-IN":"dd-MM-yy","ta-IN":"dd-MM-yyyy","te-IN":"dd-MM-yy","kn-IN":"dd-MM-yy","mr-IN":"dd-MM-yyyy","sa-IN":"dd-MM-yyyy","mn-MN":"yy.MM.dd","gl-ES":"dd/MM/yy","kok-IN":"dd-MM-yyyy","syr-SY":"dd/MM/yyyy","dv-MV":"dd/MM/yy","ar-IQ":"dd/MM/yyyy","zh-CN":"yyyy/M/d","de-CH":"dd.MM.yyyy","en-GB":"dd/MM/yyyy","es-MX":"dd/MM/yyyy","fr-BE":"d/MM/yyyy",
"it-CH":"dd.MM.yyyy","nl-BE":"d/MM/yyyy","nn-NO":"dd.MM.yyyy","pt-PT":"dd-MM-yyyy","sr-Latn-CS":"d.M.yyyy","sv-FI":"d.M.yyyy","az-Cyrl-AZ":"dd.MM.yyyy","ms-BN":"dd/MM/yyyy","uz-Cyrl-UZ":"dd.MM.yyyy","ar-EG":"dd/MM/yyyy","zh-HK":"d/M/yyyy","de-AT":"dd.MM.yyyy","en-AU":"d/MM/yyyy","es-ES":"dd/MM/yyyy","fr-CA":"yyyy-MM-dd","sr-Cyrl-CS":"d.M.yyyy","ar-LY":"dd/MM/yyyy","zh-SG":"d/M/yyyy","de-LU":"dd.MM.yyyy","en-CA":"dd/MM/yyyy","es-GT":"dd/MM/yyyy","fr-CH":"dd.MM.yyyy","ar-DZ":"dd-MM-yyyy","zh-MO":"d/M/yyyy",
"de-LI":"dd.MM.yyyy","en-NZ":"d/MM/yyyy","es-CR":"dd/MM/yyyy","fr-LU":"dd/MM/yyyy","ar-MA":"dd-MM-yyyy","en-IE":"dd/MM/yyyy","es-PA":"MM/dd/yyyy","fr-MC":"dd/MM/yyyy","ar-TN":"dd-MM-yyyy","en-ZA":"yyyy/MM/dd","es-DO":"dd/MM/yyyy","ar-OM":"dd/MM/yyyy","en-JM":"dd/MM/yyyy","es-VE":"dd/MM/yyyy","ar-YE":"dd/MM/yyyy","en-029":"MM/dd/yyyy","es-CO":"dd/MM/yyyy","ar-SY":"dd/MM/yyyy","en-BZ":"dd/MM/yyyy","es-PE":"dd/MM/yyyy","ar-JO":"dd/MM/yyyy","en-TT":"dd/MM/yyyy","es-AR":"dd/MM/yyyy","ar-LB":"dd/MM/yyyy",
"en-ZW":"M/d/yyyy","es-EC":"dd/MM/yyyy","ar-KW":"dd/MM/yyyy","en-PH":"M/d/yyyy","es-CL":"dd-MM-yyyy","ar-AE":"dd/MM/yyyy","es-UY":"dd/MM/yyyy","ar-BH":"dd/MM/yyyy","es-PY":"dd/MM/yyyy","ar-QA":"dd/MM/yyyy","es-BO":"dd/MM/yyyy","es-SV":"dd/MM/yyyy","es-HN":"dd/MM/yyyy","es-NI":"dd/MM/yyyy","es-PR":"dd/MM/yyyy","am-ET":"d/M/yyyy","tzm-Latn-DZ":"dd-MM-yyyy","iu-Latn-CA":"d/MM/yyyy","sma-NO":"dd.MM.yyyy","mn-Mong-CN":"yyyy/M/d","gd-GB":"dd/MM/yyyy","en-MY":"d/M/yyyy","prs-AF":"dd/MM/yy","bn-BD":"dd-MM-yy",
"wo-SN":"dd/MM/yyyy","rw-RW":"M/d/yyyy","qut-GT":"dd/MM/yyyy","sah-RU":"MM.dd.yyyy","gsw-FR":"dd/MM/yyyy","co-FR":"dd/MM/yyyy","oc-FR":"dd/MM/yyyy","mi-NZ":"dd/MM/yyyy","ga-IE":"dd/MM/yyyy","se-SE":"yyyy-MM-dd","br-FR":"dd/MM/yyyy","smn-FI":"d.M.yyyy","moh-CA":"M/d/yyyy","arn-CL":"dd-MM-yyyy","ii-CN":"yyyy/M/d","dsb-DE":"d. M. yyyy","ig-NG":"d/M/yyyy","kl-GL":"dd-MM-yyyy","lb-LU":"dd/MM/yyyy","ba-RU":"dd.MM.yy","nso-ZA":"yyyy/MM/dd","quz-BO":"dd/MM/yyyy","yo-NG":"d/M/yyyy","ha-Latn-NG":"d/M/yyyy",
"fil-PH":"M/d/yyyy","ps-AF":"dd/MM/yy","fy-NL":"d-M-yyyy","ne-NP":"M/d/yyyy","se-NO":"dd.MM.yyyy","iu-Cans-CA":"d/M/yyyy","sr-Latn-RS":"d.M.yyyy","si-LK":"yyyy-MM-dd","sr-Cyrl-RS":"d.M.yyyy","lo-LA":"dd/MM/yyyy","km-KH":"yyyy-MM-dd","cy-GB":"dd/MM/yyyy","bo-CN":"yyyy/M/d","sms-FI":"d.M.yyyy","as-IN":"dd-MM-yyyy","ml-IN":"dd-MM-yy","en-IN":"dd-MM-yyyy","or-IN":"dd-MM-yy","bn-IN":"dd-MM-yy","tk-TM":"dd.MM.yy","bs-Latn-BA":"d.M.yyyy","mt-MT":"dd/MM/yyyy","sr-Cyrl-ME":"d.M.yyyy","se-FI":"d.M.yyyy","zu-ZA":"yyyy/MM/dd",
"xh-ZA":"yyyy/MM/dd","tn-ZA":"yyyy/MM/dd","hsb-DE":"d. M. yyyy","bs-Cyrl-BA":"d.M.yyyy","tg-Cyrl-TJ":"dd.MM.yy","sr-Latn-BA":"d.M.yyyy","smj-NO":"dd.MM.yyyy","rm-CH":"dd/MM/yyyy","smj-SE":"yyyy-MM-dd","quz-EC":"dd/MM/yyyy","quz-PE":"dd/MM/yyyy","hr-BA":"d.M.yyyy.","sr-Latn-ME":"d.M.yyyy","sma-SE":"yyyy-MM-dd","en-SG":"d/M/yyyy","ug-CN":"yyyy-M-d","sr-Cyrl-BA":"d.M.yyyy","es-US":"M/d/yyyy"};var LANG=window.navigator.userLanguage||window.navigator.language;var LOCALE_DATE_FORMAT=LOCALE_DATE_FORMATS[LANG]||
"dd/MM/yyyy";NRS.formatVolume=function(volume){var sizes=["B","KB","MB","GB","TB"];if(volume==0)return"0 B";var i=parseInt(Math.floor(Math.log(volume)/Math.log(1024)));volume=Math.round(volume/Math.pow(1024,i),2);var size=sizes[i];var digits=[],formattedVolume="",i;do{digits[digits.length]=volume%10;volume=Math.floor(volume/10)}while(volume>0);for(i=0;i<digits.length;i++){if(i>0&&i%3==0)formattedVolume="'"+formattedVolume;formattedVolume=digits[i]+formattedVolume}return formattedVolume+" "+size};
NRS.formatWeight=function(weight){var digits=[],formattedWeight="",i;do{digits[digits.length]=weight%10;weight=Math.floor(weight/10)}while(weight>0);for(i=0;i<digits.length;i++){if(i>0&&i%3==0)formattedWeight="'"+formattedWeight;formattedWeight=digits[i]+formattedWeight}return formattedWeight.escapeHTML()};NRS.formatOrderPricePerWholeQNT=function(price,decimals){price=NRS.calculateOrderPricePerWholeQNT(price,decimals,true);return NRS.format(price)};NRS.calculateOrderPricePerWholeQNT=function(price,
decimals,returnAsObject){if(typeof price!="object")price=new BigInteger(String(price));return NRS.convertToNXT(price.multiply(new BigInteger(""+Math.pow(10,decimals))),returnAsObject)};NRS.calculatePricePerWholeQNT=function(price,decimals){price=String(price);if(decimals){var toRemove=price.slice(-decimals);if(!/^[0]+$/.test(toRemove))throw"Invalid input.";else return price.slice(0,-decimals)}else return price};NRS.calculateOrderTotalNQT=function(quantityQNT,priceNQT){if(typeof quantityQNT!="object")quantityQNT=
new BigInteger(String(quantityQNT));if(typeof priceNQT!="object")priceNQT=new BigInteger(String(priceNQT));var orderTotal=quantityQNT.multiply(priceNQT);return orderTotal.toString()};NRS.calculateOrderTotal=function(quantityQNT,priceNQT){if(typeof quantityQNT!="object")quantityQNT=new BigInteger(String(quantityQNT));if(typeof priceNQT!="object")priceNQT=new BigInteger(String(priceNQT));return NRS.convertToNXT(quantityQNT.multiply(priceNQT))};NRS.calculatePercentage=function(a,b){a=new Big(String(a));
b=new Big(String(b));var result=a.div(b).times(new Big("100")).toFixed(2);return result.toString()};NRS.convertToNXT=function(amount,returnAsObject){var negative="";var afterComma="";if(typeof amount!="object")amount=new BigInteger(String(amount));var fractionalPart=amount.mod(new BigInteger("100000000")).toString();amount=amount.divide(new BigInteger("100000000"));if(amount.compareTo(BigInteger.ZERO)<0){amount=amount.abs();negative="-"}if(fractionalPart&&fractionalPart!="0"){afterComma=".";for(var i=
fractionalPart.length;i<8;i++)afterComma+="0";afterComma+=fractionalPart.replace(/0+$/,"")}amount=amount.toString();if(returnAsObject)return{"negative":negative,"amount":amount,"afterComma":afterComma};else return negative+amount+afterComma};NRS.amountToPrecision=function(amount,decimals){amount=String(amount);var parts=amount.split(".");if(parts.length==1)return parts[0];else if(parts.length==2){var fraction=parts[1];fraction=fraction.replace(/0+$/,"");if(fraction.length>decimals)fraction=fraction.substring(0,
decimals);return parts[0]+"."+fraction}else throw"Incorrect input";};NRS.convertToNQT=function(currency){currency=String(currency);var parts=currency.split(".");var amount=parts[0];if(parts.length==1)var fraction="00000000";else if(parts.length==2)if(parts[1].length<=8)var fraction=parts[1];else var fraction=parts[1].substring(0,8);else throw"Invalid input";for(var i=fraction.length;i<8;i++)fraction+="0";var result=amount+""+fraction;if(!/^\d+$/.test(result))throw"Invalid input.";result=result.replace(/^0+/,
"");if(result==="")result="0";return result};NRS.convertToQNTf=function(quantity,decimals,returnAsObject){quantity=String(quantity);if(quantity.length<decimals)for(var i=quantity.length;i<decimals;i++)quantity="0"+quantity;var afterComma="";if(decimals){afterComma="."+quantity.substring(quantity.length-decimals);quantity=quantity.substring(0,quantity.length-decimals);if(!quantity)quantity="0";afterComma=afterComma.replace(/0+$/,"");if(afterComma==".")afterComma=""}if(returnAsObject)return{"amount":quantity,
"afterComma":afterComma};else return quantity+afterComma};NRS.convertToQNT=function(quantity,decimals){quantity=String(quantity);var parts=quantity.split(".");var qnt=parts[0];if(parts.length==1){if(decimals)for(var i=0;i<decimals;i++)qnt+="0"}else if(parts.length==2){var fraction=parts[1];if(fraction.length>decimals)throw"Fraction can only have "+decimals+" decimals max.";else if(fraction.length<decimals)for(var i=fraction.length;i<decimals;i++)fraction+="0";qnt+=fraction}else throw"Incorrect input";
if(!/^\d+$/.test(qnt))throw"Invalid input. Only numbers and a dot are accepted.";return qnt.replace(/^0+/,"")};NRS.format=function(params,no_escaping){if(typeof params!="object")params={"amount":String(params),"negative":false,"afterComma":""};var amount=String(params.amount);var digits=amount.split("").reverse();var formattedAmount="";for(var i=0;i<digits.length;i++){if(i>0&&i%3==0)formattedAmount="'"+formattedAmount;formattedAmount=digits[i]+formattedAmount}var output=(params.negative?params.negative:
"")+formattedAmount+params.afterComma;if(!no_escaping)output=output.escapeHTML();return output};NRS.formatQuantity=function(quantity,decimals,no_escaping){return NRS.format(NRS.convertToQNTf(quantity,decimals,true),no_escaping)};NRS.formatAmount=function(amount,round,no_escaping){if(typeof amount=="undefined")return"0";else if(typeof amount=="string")amount=new BigInteger(amount);var negative="";var afterComma="";var formattedAmount="";if(typeof amount=="object"){var params=NRS.convertToNXT(amount,
true);negative=params.negative;amount=params.amount;afterComma=params.afterComma}else{if(round)amount=Math.round(amount*100)/100;if(amount<0){amount=Math.abs(amount);negative="-"}amount=""+amount;if(amount.indexOf(".")!==-1){var afterComma=amount.substr(amount.indexOf("."));amount=amount.replace(afterComma,"")}else var afterComma=""}return NRS.format({"negative":negative,"amount":amount,"afterComma":afterComma},no_escaping)};NRS.formatTimestamp=function(timestamp,date_only){if(typeof timestamp=="object")var date=
timestamp;else var date=new Date(Date.UTC(2013,10,24,12,0,0,0)+timestamp*1E3);if(!isNaN(date)&&typeof date.getFullYear=="function"){var d=date.getDate();var dd=d<10?"0"+d:d;var M=date.getMonth()+1;var MM=M<10?"0"+M:M;var yyyy=date.getFullYear();var yy=(new String(yyyy)).substring(2);var format=LOCALE_DATE_FORMAT;var res=format.replace(/dd/g,dd).replace(/d/g,d).replace(/MM/g,MM).replace(/M/g,M).replace(/yyyy/g,yyyy).replace(/yy/g,yy);if(!date_only){var hours=date.getHours();var minutes=date.getMinutes();
var seconds=date.getSeconds();if(hours<10)hours="0"+hours;if(minutes<10)minutes="0"+minutes;if(seconds<10)seconds="0"+seconds;res+=" "+hours+":"+minutes+":"+seconds}return res}else return date.toLocaleString()};NRS.formatTime=function(timestamp){var date=new Date(Date.UTC(2013,10,24,12,0,0,0)+timestamp*1E3);if(!isNaN(date)&&typeof date.getFullYear=="function"){var res="";var hours=date.getHours();var minutes=date.getMinutes();var seconds=date.getSeconds();if(hours<10)hours="0"+hours;if(minutes<10)minutes=
"0"+minutes;if(seconds<10)seconds="0"+seconds;res+=" "+hours+":"+minutes+":"+seconds;return res}else return date.toLocaleString()};NRS.isPrivateIP=function(ip){if(!/^\d+\.\d+\.\d+\.\d+$/.test(ip))return false;var parts=ip.split(".");if(parts[0]==="10"||(parts[0]==="172"&&(parseInt(parts[1],10)>=16&&parseInt(parts[1],10)<=31)||parts[0]==="192"&&parts[1]==="168"))return true;return false};NRS.convertToHex16=function(str){var hex,i;var result="";for(i=0;i<str.length;i++){hex=str.charCodeAt(i).toString(16);
result+=("000"+hex).slice(-4)}return result};NRS.convertFromHex16=function(hex){var j;var hexes=hex.match(/.{1,4}/g)||[];var back="";for(j=0;j<hexes.length;j++)back+=String.fromCharCode(parseInt(hexes[j],16));return back};NRS.convertFromHex8=function(hex){var hex=hex.toString();var str="";for(var i=0;i<hex.length;i+=2)str+=String.fromCharCode(parseInt(hex.substr(i,2),16));return str};NRS.convertToHex8=function(str){var hex="";for(var i=0;i<str.length;i++)hex+=""+str.charCodeAt(i).toString(16);return hex};
NRS.getFormData=function($form){var serialized=$form.serializeArray();var data={};for(var s in serialized)data[serialized[s]["name"]]=serialized[s]["value"];return data};NRS.getAccountLink=function(object,acc){return"\x3ca href\x3d'#' data-user\x3d'"+String(object[acc]).escapeHTML()+"'\x3e"+NRS.getAccountTitle(object,acc)+"\x3c/a\x3e"};NRS.getAccountTitle=function(object,acc){var type=typeof object;var formattedAcc="";if(type=="string"||type=="number"){formattedAcc=object;object=null}else formattedAcc=
String(object[acc+"RS"]).escapeHTML();if(formattedAcc in NRS.contacts)return NRS.contacts[formattedAcc].name.escapeHTML();else if(formattedAcc==NRS.account||formattedAcc==NRS.accountRS)return"You";else return String(formattedAcc).escapeHTML()};NRS.getAccountFormatted=function(object,acc){var type=typeof object;if(type=="string"||type=="number")return String(object).escapeHTML();else return String(object[acc+"RS"]).escapeHTML()};NRS.setupClipboardFunctionality=function(){var elements="#asset_id_dropdown .dropdown-menu a, #account_id_dropdown .dropdown-menu a";
if(NRS.isLocalHost)$("#account_id_dropdown li.remote_only, #asset_info_dropdown li.remote_only").remove();var $el=$(elements);if(NRS.inApp)$el.on("click",function(){parent.postMessage({"type":"copy","text":NRS.getClipboardText($(this).data("type"))},"*");$.growl("Copied to the clipboard successfully.",{"type":"success"})});else{var clipboard=new ZeroClipboard($el,{moviePath:"js/3rdparty/zeroclipboard.swf"});clipboard.on("dataRequested",function(client,args){client.setText(NRS.getClipboardText($(this).data("type")))});
if($el.hasClass("dropdown-toggle")){$el.removeClass("dropdown-toggle").data("toggle","");$el.parent().remove(".dropdown-menu")}clipboard.on("complete",function(client,args){$.growl("Copied to the clipboard successfully.",{"type":"success"})});clipboard.on("noflash",function(client,args){$("#account_id_dropdown .dropdown-menu, #asset_id_dropdown .dropdown-menu").remove();$("#account_id_dropdown, #asset_id").data("toggle","");$.growl("Your browser doesn't support flash, therefore copy to clipboard functionality will not work.",
{"type":"danger"})});clipboard.on("wrongflash",function(client,args){$("#account_id_dropdown .dropdown-menu, #asset_id_dropdown .dropdown-menu").remove();$("#account_id_dropdown, #asset_id").data("toggle","");$.growl("Your browser flash version is too old. The copy to clipboard functionality needs version 10 or newer.")})}};NRS.getClipboardText=function(type){switch(type){case "account_rs":return NRS.accountRS;break;case "message_link":return document.URL.replace(/#.*$/,"")+"#message:"+NRS.account;
break;case "send_link":return document.URL.replace(/#.*$/,"")+"#send:"+NRS.account;break;case "asset_id":return $("#asset_id").text();break;case "asset_link":return document.URL.replace(/#.*/,"")+"#asset:"+$("#asset_id").text();break;default:return"";break}};NRS.dataLoaded=function(data,noPageLoad){var $el=$("#"+NRS.currentPage+"_contents");if($el.length)$el.empty().append(data);else{$el=$("#"+NRS.currentPage+"_table");$el.find("tbody").empty().append(data)}NRS.dataLoadFinished($el);if(!noPageLoad)NRS.pageLoaded()};
NRS.dataLoadFinished=function($el,fadeIn){var $parent=$el.parent();if(fadeIn)$parent.hide();$parent.removeClass("data-loading");var extra=$parent.data("extra");var empty=false;if($el.is("table"))if($el.find("tbody tr").length>0){$parent.removeClass("data-empty");if($parent.data("no-padding"))$parent.parent().addClass("no-padding");if(extra)$(extra).show()}else empty=true;else if($.trim($el.html()).length==0)empty=true;if(empty){$parent.addClass("data-empty");if($parent.data("no-padding"))$parent.parent().removeClass("no-padding");
if(extra)$(extra).hide()}else $parent.removeClass("data-empty");if(fadeIn)$parent.fadeIn()};NRS.createInfoTable=function(data,fixed){var rows="";for(var key in data){var value=data[key];if(/FormattedHTML$/i.test(key)){key=key.replace("FormattedHTML","");value=String(value)}else if(/Formatted$/i.test(key)){key=key.replace("Formatted","");value=String(value).escapeHTML()}else if(key=="Quantity"&&$.isArray(value))if($.isArray(value))value=NRS.formatQuantity(value[0],value[1]);else value=NRS.formatQuantity(value,
0);else if(key=="Price"||(key=="Total"||(key=="Amount"||key=="Fee")))value=NRS.formatAmount(new BigInteger(value))+" NXT";else if(key=="Sender"||(key=="Recipient"||(key=="Account"||(key=="Seller"||key=="Buyer"))))value="\x3ca href\x3d'#' data-user\x3d'"+String(value).escapeHTML()+"'\x3e"+NRS.getAccountTitle(value)+"\x3c/a\x3e";else value=String(value).escapeHTML().nl2br();rows+="\x3ctr\x3e\x3ctd style\x3d'font-weight:bold;white-space:nowrap"+(fixed?";width:150px":"")+"'\x3e"+String(key.capitalize()).escapeHTML()+
":\x3c/td\x3e\x3ctd style\x3d'width:90%;word-break:break-all'\x3e"+value+"\x3c/td\x3e\x3c/tr\x3e"}return rows};NRS.getSelectedText=function(){var t="";if(window.getSelection)t=window.getSelection().toString();else if(document.getSelection)t=document.getSelection().toString();else if(document.selection)t=document.selection.createRange().text;return t};NRS.formatStyledAmount=function(amount,round){var amount=NRS.formatAmount(amount,round);amount=amount.split(".");if(amount.length==2)amount=amount[0]+
"\x3cspan style\x3d'font-size:12px'\x3e."+amount[1]+"\x3c/span\x3e";else amount=amount[0];return amount};NRS.getUnconfirmedTransactionFromCache=function(type,subtype,fields){return NRS.getUnconfirmedTransactionsFromCache(type,subtype,fields,true)};NRS.getUnconfirmedTransactionsFromCache=function(type,subtype,fields,single){if(!NRS.unconfirmedTransactions.length)return false;if(typeof type=="number")type=[type];if(typeof subtype=="number")subtype=[subtype];var unconfirmedTransactions=[];for(var i=
0;i<NRS.unconfirmedTransactions.length;i++){var unconfirmedTransaction=NRS.unconfirmedTransactions[i];if(type.indexOf(unconfirmedTransaction.type)==-1||subtype.indexOf(unconfirmedTransaction.subtype)==-1)continue;if(fields)for(var key in fields){if(unconfirmedTransaction[key]==fields[key])if(single)return NRS.completeUnconfirmedTransactionDetails(unconfirmedTransaction);else unconfirmedTransactions.push(unconfirmedTransaction)}else if(single)return NRS.completeUnconfirmedTransactionDetails(unconfirmedTransaction);
else unconfirmedTransactions.push(unconfirmedTransaction)}if(single||unconfirmedTransactions.length==0)return false;else{$.each(unconfirmedTransactions,function(key,val){unconfirmedTransactions[key]=NRS.completeUnconfirmedTransactionDetails(val)});return unconfirmedTransactions}};NRS.completeUnconfirmedTransactionDetails=function(unconfirmedTransaction){if(unconfirmedTransaction.type==3&&(unconfirmedTransaction.subtype==4&&!unconfirmedTransaction.name))NRS.sendRequest("getDGSGood",{"goods":unconfirmedTransaction.attachment.goods},
function(response){unconfirmedTransaction.name=response.name;unconfirmedTransaction.buyer=unconfirmedTransaction.sender;unconfirmedTransaction.buyerRS=unconfirmedTransaction.senderRS;unconfirmedTransaction.seller=response.seller;unconfirmedTransaction.sellerRS=response.sellerRS},false);else if(unconfirmedTransaction.type==3&&unconfirmedTransaction.subtype==0)unconfirmedTransaction.goods=unconfirmedTransaction.transaction;return unconfirmedTransaction};NRS.hasTransactionUpdates=function(transactions){return transactions&&
transactions.length||(NRS.unconfirmedTransactionsChange||NRS.state.isScanning)};NRS.showMore=function($el){if(!$el){$el=$("#"+NRS.currentPage+"_contents");if(!$el.length)$el=$("#"+NRS.currentPage+"_table")}var adjustheight=40;var moreText="Show more...";var lessText="Show less...";$el.find(".showmore \x3e .moreblock").each(function(){if($(this).height()>adjustheight){$(this).css("height",adjustheight).css("overflow","hidden");$(this).parent(".showmore").append(' \x3ca href\x3d"#" class\x3d"adjust"\x3e\x3c/a\x3e');
$(this).parent(".showmore").find("a.adjust").text(moreText).click(function(){if($(this).text()==moreText){$(this).parents("div:first").find(".moreblock").css("height","auto").css("overflow","visible");$(this).parents("div:first").find("p.continued").css("display","none");$(this).text(lessText)}else{$(this).parents("div:first").find(".moreblock").css("height",adjustheight).css("overflow","hidden");$(this).parents("div:first").find("p.continued").css("display","block");$(this).text(moreText)}})}})};
NRS.showFullDescription=function($el){$el.addClass("open").removeClass("closed");$el.find(".description_toggle").text("Less...")};NRS.showPartialDescription=function($el){if($el.hasClass("open")||$el.height()>40){$el.addClass("closed").removeClass("open");$el.find(".description_toggle").text("More...")}else $el.find(".description_toggle").text("")};$("body").on(".description_toggle","click",function(e){e.preventDefault();if($(this).closest(".description").hasClass("open"))NRS.showPartialDescription();
else NRS.showFullDescription()});$("#offcanvas_toggle").on("click",function(e){e.preventDefault();if($(window).width()<=992){$(".row-offcanvas").toggleClass("active");$(".left-side").removeClass("collapse-left");$(".right-side").removeClass("strech");$(".row-offcanvas").toggleClass("relative")}else{$(".left-side").toggleClass("collapse-left");$(".right-side").toggleClass("strech")}});$.fn.tree=function(){return this.each(function(){var btn=$(this).children("a").first();var menu=$(this).children(".treeview-menu").first();
var isActive=$(this).hasClass("active");if(isActive){menu.show();btn.children(".fa-angle-right").first().removeClass("fa-angle-right").addClass("fa-angle-down")}btn.click(function(e){e.preventDefault();if(isActive){menu.slideUp();isActive=false;btn.children(".fa-angle-down").first().removeClass("fa-angle-down").addClass("fa-angle-right");btn.parent("li").removeClass("active")}else{menu.slideDown();isActive=true;btn.children(".fa-angle-right").first().removeClass("fa-angle-right").addClass("fa-angle-down");
btn.parent("li").addClass("active")}})})};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){$("#blocks_table, #dashboard_blocks_table").on("click","a[data-block]",function(event){event.preventDefault();if(NRS.fetchingModalData)return;NRS.fetchingModalData=true;var blockHeight=$(this).data("block");var block=$(NRS.blocks).filter(function(){return parseInt(this.height)==parseInt(blockHeight)}).get(0);if(!block)NRS.getBlock($(this).data("blockid"),function(response){NRS.showBlockModal(response)});else NRS.showBlockModal(block)});NRS.showBlockModal=function(block){$("#block_info_modal_block").html(String(block.block).escapeHTML());
$("#block_info_transactions_tab_link").tab("show");var blockDetails=$.extend({},block);delete blockDetails.transactions;delete blockDetails.previousBlockHash;delete blockDetails.nextBlockHash;delete blockDetails.generationSignature;delete blockDetails.payloadHash;delete blockDetails.block;$("#block_info_details_table tbody").empty().append(NRS.createInfoTable(blockDetails));$("#block_info_details_table").show();if(block.transactions.length){$("#block_info_transactions_none").hide();$("#block_info_transactions_table").show();
var transactions={};var nrTransactions=0;for(var i=0;i<block.transactions.length;i++)NRS.sendRequest("getTransaction",{"transaction":block.transactions[i]},function(transaction,input){nrTransactions++;transactions[input.transaction]=transaction;if(nrTransactions==block.transactions.length){var rows="";for(var i=0;i<nrTransactions;i++){var transaction=transactions[block.transactions[i]];if(transaction.amountNQT){transaction.amount=new BigInteger(transaction.amountNQT);transaction.fee=new BigInteger(transaction.feeNQT)}rows+=
"\x3ctr\x3e\x3ctd\x3e"+NRS.formatTime(transaction.timestamp)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatAmount(transaction.amount)+"\x3c/td\x3e\x3ctd\x3e"+NRS.formatAmount(transaction.fee)+"\x3c/td\x3e\x3ctd\x3e"+NRS.getAccountTitle(transaction,"recipient")+"\x3c/td\x3e\x3ctd\x3e"+NRS.getAccountTitle(transaction,"sender")+"\x3c/td\x3e\x3c/tr\x3e"}$("#block_info_transactions_table tbody").empty().append(rows);$("#block_info_modal").modal("show");NRS.fetchingModalData=false}})}else{$("#block_info_transactions_none").show();
$("#block_info_transactions_table").hide();$("#block_info_modal").modal("show");NRS.fetchingModalData=false}};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){var _messages={};var _totalMessages=0;var _totalMessagesLoaded=0;var _messageTypesChecked=0;NRS.pages.messages=function(callback){_messages={};_totalMessages=0;_totalMessagesLoaded=0;_messageTypesChecked=0;$(".content.content-stretch:visible").width($(".page:visible").width());NRS.getAccountMessages("public",function(){NRS.getAccountMessagesComplete(callback)});NRS.getAccountMessages("private",function(){NRS.getAccountMessagesComplete(callback)})};NRS.getAccountMessages=
function(type,callback){NRS.sendRequest("getAccountTransactionIds+",{"account":NRS.account,"timestamp":0,"type":1,"subtype":type=="public"?0:8},function(response){_messageTypesChecked++;if(response.transactionIds&&response.transactionIds.length){var transactionIds=response.transactionIds.reverse().slice(0,75);var nrTransactions=0;_totalMessages+=transactionIds.length;for(var i=0;i<transactionIds.length;i++)NRS.sendRequest("getTransaction+",{"transaction":transactionIds[i]},function(response){nrTransactions++;
_totalMessagesLoaded++;var otherUser=response.recipient==NRS.account?response.sender:response.recipient;if(!(otherUser in _messages))_messages[otherUser]=[];_messages[otherUser].push(response);if(nrTransactions==transactionIds.length)callback()})}else callback()})};NRS.getAccountMessagesComplete=function(callback){if(_totalMessages==_totalMessagesLoaded&&_messageTypesChecked==2)if(NRS._totalMessages==0){$("#no_message_selected").hide();$("#no_messages_available").show();$("#messages_sidebar").empty();
NRS.pageLoaded(callback)}else{var activeAccount=false;var $active=$("#messages_sidebar a.active");if($active.length)activeAccount=$active.data("account");var rows="";var menu="";var sortedMessages=[];for(var otherUser in _messages){_messages[otherUser].sort(function(a,b){if(a.timestamp>b.timestamp)return 1;else if(a.timestamp<b.timestamp)return-1;else return 0});var otherUserRS=otherUser==_messages[otherUser][0].sender?_messages[otherUser][0].senderRS:_messages[otherUser][0].recipientRS;sortedMessages.push({"timestamp":_messages[otherUser][_messages[otherUser].length-
1].timestamp,"user":otherUser,"userRS":otherUserRS})}sortedMessages.sort(function(a,b){if(a.timestamp<b.timestamp)return 1;else if(a.timestamp>b.timestamp)return-1;else return 0});for(var i=0;i<sortedMessages.length;i++){var sortedMessage=sortedMessages[i];var extra="";if(sortedMessage.user in NRS.contacts)extra=" data-contact\x3d'"+NRS.getAccountTitle(sortedMessage,"user")+"' data-context\x3d'messages_sidebar_update_context'";rows+="\x3ca href\x3d'#' class\x3d'list-group-item' data-account\x3d'"+
NRS.getAccountFormatted(sortedMessage,"user")+"' data-account-id\x3d'"+NRS.getAccountFormatted(sortedMessage.user)+"'"+extra+"\x3e\x3ch4 class\x3d'list-group-item-heading'\x3e"+NRS.getAccountTitle(sortedMessage,"user")+"\x3c/h4\x3e\x3cp class\x3d'list-group-item-text'\x3e"+NRS.formatTimestamp(sortedMessage.timestamp)+"\x3c/p\x3e\x3c/a\x3e"}$("#messages_sidebar").empty().append(rows);if(activeAccount)$("#messages_sidebar a[data-account\x3d"+activeAccount+"]").addClass("active").trigger("click");NRS.pageLoaded(callback)}};
NRS.incoming.messages=function(transactions){if(NRS.hasTransactionUpdates(transactions)){var activeAccount=$("#messages_sidebar a.active");if(activeAccount.length)activeAccount=activeAccount.data("account");else activeAccount=-1;NRS.loadPage("messages")}};$("#messages_sidebar").on("click","a",function(e){e.preventDefault();$("#messages_sidebar a.active").removeClass("active");$(this).addClass("active");var otherUser=$(this).data("account-id");$("#no_message_selected, #no_messages_available").hide();
$("#inline_message_recipient").val(otherUser);$("#inline_message_form").show();var last_day="";var output="\x3cdl class\x3d'chat'\x3e";var messages=_messages[otherUser];var sharedKey=null;if(messages)for(var i=0;i<messages.length;i++){var decoded="";var extra="";if(messages[i].subtype==8)try{decoded=NRS.tryToDecryptMessage(messages[i]);extra="decrypted"}catch(err){if(err.errorCode&&err.errorCode==1){decoded="Your password is needed to decrypt this message.";extra="to_decrypt"}else decoded="An unknown error occured during decryption."}else try{decoded=
converters.hexStringToString(messages[i].attachment.message)}catch(err){if(messages[i].attachment.message.indexOf("feff")===0)decoded=NRS.convertFromHex16(messages[i].attachment.message);else decoded=NRS.convertFromHex8(messages[i].attachment.message)}if(decoded){decoded=String(decoded).escapeHTML().nl2br();if(extra=="to_decrypt")decoded="\x3ci class\x3d'fa fa-warning'\x3e\x3c/i\x3e "+decoded;else if(extra=="decrypted")decoded="\x3ci class\x3d'fa fa-lock'\x3e\x3c/i\x3e "+decoded}else{decoded="\x3ci class\x3d'fa fa-warning'\x3e\x3c/i\x3e Could not decrypt message.";
extra="decryption_failed"}var day=NRS.formatTimestamp(messages[i].timestamp,true);if(day!=last_day){output+="\x3cdt\x3e\x3cstrong\x3e"+day+"\x3c/strong\x3e\x3c/dt\x3e";last_day=day}output+="\x3cdd class\x3d'"+(messages[i].recipient==NRS.account?"from":"to")+(extra?" "+extra:"")+"'\x3e\x3cp\x3e"+decoded+"\x3c/p\x3e\x3c/dd\x3e"}if(NRS.unconfirmedTransactions.length)for(var i=0;i<NRS.unconfirmedTransactions.length;i++){var unconfirmedTransaction=NRS.unconfirmedTransactions[i];if(unconfirmedTransaction.type==
1&&((unconfirmedTransaction.subtype==0||unconfirmedTransaction.subtype==8)&&unconfirmedTransaction.recipient==otherUser)){var decoded="";var extra="";if(unconfirmedTransaction.subtype==8)try{decoded=NRS.tryToDecryptMessage(unconfirmedTransaction);extra="decrypted"}catch(err){if(err.errorCode&&err.errorCode==1){decoded="Your password is needed to decrypt this message.";extra="to_decrypt"}else decoded="An unknown error occured during decryption."}else try{decoded=converters.hexStringToString(unconfirmedTransaction.attachment.message)}catch(err){if(unconfirmedTransaction.attachment.message.indexOf("feff")===
0)decoded=NRS.convertFromHex16(unconfirmedTransaction.attachment.message);else decoded=NRS.convertFromHex8(unconfirmedTransaction.attachment.message)}output+="\x3cdd class\x3d'to tentative"+(extra?" "+extra:"")+"'\x3e\x3cp\x3e"+(extra=="to_decrypt"?"\x3ci class\x3d'fa fa-warning'\x3e\x3c/i\x3e ":extra=="decrypted"?"\x3ci class\x3d'fa fa-lock'\x3e\x3c/i\x3e ":"")+String(decoded).escapeHTML().nl2br()+"\x3c/p\x3e\x3c/dd\x3e"}}output+="\x3c/dl\x3e";$("#message_details").empty().append(output)});$("#messages_sidebar_context").on("click",
"a",function(e){e.preventDefault();var account=NRS.getAccountFormatted(NRS.selectedContext.data("account"));var option=$(this).data("option");NRS.closeContextMenu();if(option=="add_contact"){$("#add_contact_account_id").val(account).trigger("blur");$("#add_contact_modal").modal("show")}else if(option=="send_nxt"){$("#send_money_recipient").val(account).trigger("blur");$("#send_money_modal").modal("show")}else if(option=="account_info")NRS.showAccountModal(account)});$("#messages_sidebar_update_context").on("click",
"a",function(e){e.preventDefault();var account=NRS.getAccountFormatted(NRS.selectedContext.data("account"));var option=$(this).data("option");NRS.closeContextMenu();if(option=="update_contact")$("#update_contact_modal").modal("show");else if(option=="send_nxt"){$("#send_money_recipient").val(NRS.selectedContext.data("contact")).trigger("blur");$("#send_money_modal").modal("show")}});NRS.forms.sendMessage=function($modal){var requestType="sendMessage";var data={"recipient":$.trim($("#send_message_recipient").val()),
"feeNXT":$.trim($("#send_message_fee").val()),"deadline":$.trim($("#send_message_deadline").val()),"secretPhrase":$.trim($("#send_message_password").val())};var message=$.trim($("#send_message_message").val());if(!message)return{"error":"Message is a required field."};if($("#send_message_encrypt").is(":checked"))try{var encrypted=NRS.encryptNote(message,{"account":data.recipient},NRS.rememberPassword?NRS.password:data.secretPhrase);requestType="sendEncryptedNote";data["encryptedNote"]=encrypted.message;
data["encryptedNoteNonce"]=encrypted.nonce}catch(err){return{"error":"Could not encrypt message."}}else data["message"]=converters.stringToHexString(message);data["_extra"]={"message":message};return{"requestType":requestType,"data":data}};$("#inline_message_form").submit(function(e){e.preventDefault();var data={"recipient":$.trim($("#inline_message_recipient").val()),"feeNXT":"1","deadline":"1440","secretPhrase":$.trim($("#inline_message_password").val())};if(!NRS.rememberPassword){if($("#inline_message_password").val()==
""){$.growl("Secret phrase is a required field.",{"type":"danger"});return}var accountId=NRS.getAccountId(data.secretPhrase);if(accountId!=NRS.account){$.growl("Incorrect secret phrase.",{"type":"danger"});return}}var message=$.trim($("#inline_message_text").val());if(!message){$.growl("Message is a required field.",{"type":"danger"});return}var $btn=$("#inline_message_submit");$btn.button("loading");var requestType="sendMessage";if($("#inline_message_encrypt").is(":checked"))try{var encrypted=NRS.encryptNote(message,
{"account":data.recipient},NRS.rememberPassword?NRS.password:data.secretPhrase);requestType="sendEncryptedNote";data["encryptedNote"]=encrypted.message;data["encryptedNoteNonce"]=encrypted.nonce}catch(err){$.growl("Could not encrypt message.",{"type":"danger"});return}else data["message"]=converters.stringToHexString(message);data["_extra"]={"message":message};NRS.sendRequest(requestType,data,function(response,input){if(response.errorCode)$.growl(response.errorDescription?response.errorDescription.escapeHTML():
"Unknown error occured.",{type:"danger"});else if(response.fullHash){$.growl("Message sent.",{type:"success"});$("#inline_message_text").val("");NRS.addDecryptedTransaction(response.transaction,{"message":String(data["_extra"].message)});NRS.addUnconfirmedTransaction(response.transaction,function(alreadyProcessed){if(!alreadyProcessed)$("#message_details dl.chat").append("\x3cdd class\x3d'to tentative"+(requestType=="sendEncryptedNote"?" decrypted":"")+"'\x3e\x3cp\x3e"+(requestType=="sendEncryptedNote"?
"\x3ci class\x3d'fa fa-lock'\x3e\x3c/i\x3e ":"")+String(data["_extra"].message).escapeHTML()+"\x3c/p\x3e\x3c/dd\x3e")})}else $.growl("An unknown error occured. Your message may or may not have been sent.",{type:"danger"});$btn.button("reset")})});NRS.forms.sendMessageComplete=function(response,data){data.message=data._extra.message;if(!(data["_extra"]&&data["_extra"].convertedAccount))$.growl("Your message has been sent! \x3ca href\x3d'#' data-account\x3d'"+NRS.getAccountFormatted(data,"recipient")+
"' data-toggle\x3d'modal' data-target\x3d'#add_contact_modal' style\x3d'text-decoration:underline'\x3eAdd recipient to contacts?\x3c/a\x3e",{"type":"success"});else $.growl("Your message has been sent!",{"type":"success"});NRS.addDecryptedTransaction(response.transaction,{"message":String(data["_extra"].message)});if(NRS.currentPage=="messages"){var date=(new Date(Date.UTC(2013,10,24,12,0,0,0))).getTime();var now=parseInt(((new Date).getTime()-date)/1E3,10);var $sidebar=$("#messages_sidebar");var $existing=
$sidebar.find("a.list-group-item[data-account\x3d"+NRS.getAccountFormatted(data,"recipient")+"]");if($existing.length){if(response.alreadyProcesed)return;$sidebar.prepend($existing);$existing.find("p.list-group-item-text").html(NRS.formatTimestamp(now));var isEncrypted=data.requestType=="sendEncryptedNote";if($existing.hasClass("active"))$("#message_details dl.chat").append("\x3cdd class\x3d'to tentative"+(isEncrypted?" decrypted":"")+"'\x3e\x3cp\x3e"+(isEncrypted?"\x3ci class\x3d'fa fa-lock'\x3e\x3c/i\x3e ":
"")+data.message.escapeHTML()+"\x3c/p\x3e\x3c/dd\x3e")}else{var accountTitle=NRS.getAccountTitle(data,"recipient");var extra="";if(accountTitle!=data.recipient)extra=" data-context\x3d'messages_sidebar_update_context'";var listGroupItem="\x3ca href\x3d'#' class\x3d'list-group-item' data-account\x3d'"+NRS.getAccountFormatted(data,"recipient")+"'"+extra+"\x3e\x3ch4 class\x3d'list-group-item-heading'\x3e"+accountTitle+"\x3c/h4\x3e\x3cp class\x3d'list-group-item-text'\x3e"+NRS.formatTimestamp(now)+"\x3c/p\x3e\x3c/a\x3e";
$("#messages_sidebar").prepend(listGroupItem)}}};$("#message_details").on("click","dd.to_decrypt",function(e){$("#messages_decrypt_modal").modal("show")});NRS.forms.decryptMessages=function($modal){var data=NRS.getFormData($modal.find("form:first"));try{NRS.decryptAllMessages(_messages,data.secretPhrase)}catch(err){if(err.errorCode&&err.errorCode<=2)return{"error":err.message.escapeHTML()};else return{"error":"Could not decrypt."}}if(data.rememberPassword)NRS.setDecryptionPassword(data.secretPhrase);
$("#messages_sidebar a.active").trigger("click");$.growl("Messages decrypted successfully.",{"type":"success"});return{"stop":true}};return NRS}(NRS||{},jQuery);var NRS=function(NRS,$,undefined){NRS.getMarketplaceItemHTML=function(good){return"\x3cdiv style\x3d'float:right;color: #999999;background:white;padding:5px;border:1px solid #ccc;border-radius:3px'\x3e"+"\x3cstrong\x3eSeller\x3c/strong\x3e: \x3cspan\x3e\x3ca href\x3d'#' data-user\x3d'"+NRS.getAccountFormatted(good,"seller")+"' class\x3d'user_info'\x3e"+NRS.getAccountTitle(good,"seller")+"\x3c/a\x3e\x3c/span\x3e\x3cbr\x3e"+"\x3cstrong\x3eProduct Id\x3c/strong\x3e: \x26nbsp;\x3ca href\x3d'#''\x3e"+
String(good.goods).escapeHTML()+"\x3c/a\x3e"+"\x3c/div\x3e"+"\x3ch3 class\x3d'title'\x3e\x3ca href\x3d'#' data-goods\x3d'"+String(good.goods).escapeHTML()+"' data-toggle\x3d'modal' data-target\x3d'#dgs_purchase_modal'\x3e"+String(good.name).escapeHTML()+"\x3c/a\x3e\x3c/h3\x3e"+"\x3cdiv class\x3d'price'\x3e\x3cstrong\x3e"+NRS.formatAmount(good.priceNQT)+" NXT\x3c/strong\x3e\x3c/div\x3e"+"\x3cdiv class\x3d'showmore'\x3e\x3cdiv class\x3d'moreblock description'\x3e"+String(good.description).escapeHTML().nl2br()+
"\x3c/div\x3e\x3c/div\x3e"+"\x3cspan class\x3d'tags'\x3e\x3cstrong\x3eTags\x3c/strong\x3e: "+String(good.tags).escapeHTML()+"\x3c/span\x3e\x3chr /\x3e"};NRS.getMarketplacePurchaseHTML=function(purchase){var status,statusHTML,modal;if(purchase.unconfirmed)status="Tentative";else if(purchase.pending){status="Pending";statusHTML="\x3cspan class\x3d'label label-warning'\x3ePending\x3c/span\x3e"}else if(purchase.refundNQT){status="Refunded";modal="#dgs_view_refund_modal"}else status="Complete";return"\x3cdiv"+
(purchase.unconfirmed?" class\x3d'tentative'":"")+"\x3e\x3cdiv style\x3d'float:right;color: #999999;background:white;padding:5px;border:1px solid #ccc;border-radius:3px'\x3e"+"\x3cstrong\x3eSeller\x3c/strong\x3e: \x3cspan\x3e\x3ca href\x3d'#' data-user\x3d'"+NRS.getAccountFormatted(purchase,"seller")+"' class\x3d'user_info'\x3e"+NRS.getAccountTitle(purchase,"seller")+"\x3c/a\x3e\x3c/span\x3e\x3cbr\x3e"+"\x3cstrong\x3eProduct Id\x3c/strong\x3e: \x26nbsp;\x3ca href\x3d'#''\x3e"+String(purchase.goods).escapeHTML()+
"\x3c/a\x3e"+"\x3c/div\x3e"+"\x3ch3 class\x3d'title'\x3e\x3ca href\x3d'#' data-purchase\x3d'"+String(purchase.purchase).escapeHTML()+"' data-toggle\x3d'modal' data-target\x3d'"+(modal?modal:"#dgs_view_delivery_modal")+"'\x3e"+String(purchase.name).escapeHTML()+"\x3c/a\x3e\x3c/h3\x3e"+"\x3ctable\x3e"+"\x3ctr\x3e\x3ctd style\x3d'width:150px'\x3e\x3cstrong\x3eOrder Date\x3c/strong\x3e:\x3c/td\x3e\x3ctd\x3e"+NRS.formatTimestamp(purchase.timestamp)+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\x3cstrong\x3eOrder Status\x3c/strong\x3e:\x3c/td\x3e\x3ctd\x3e"+
(statusHTML?statusHTML:status)+"\x3c/td\x3e\x3c/tr\x3e"+(purchase.pending?"\x3ctr\x3e\x3ctd\x3e\x3cstrong\x3eDelivery Deadline\x3c/strong\x3e:\x3c/td\x3e\x3ctd\x3e"+NRS.formatTimestamp(new Date(purchase.deliveryDeadlineTimestamp*1E3))+"\x3c/td\x3e\x3c/tr\x3e":"")+"\x3ctr\x3e\x3ctd\x3e\x3cstrong\x3ePrice\x3c/strong\x3e:\x3c/td\x3e\x3ctd\x3e"+NRS.formatAmount(purchase.priceNQT)+" NXT\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\x3cstrong\x3eQuantity\x3c/strong\x3e:\x3c/td\x3e\x3ctd\x3e"+NRS.format(purchase.quantity)+
"\x3c/td\x3e\x3c/tr\x3e"+(purchase.seller==NRS.account&&purchase.feedbackNote?"\x3ctr\x3e\x3ctd\x3e\x3cstrong\x3eFeedback\x3c/strong\x3e:\x3c/td\x3e\x3ctd\x3eIncludes feedback\x3c/td\x3e\x3c/tr\x3e":"")+"\x3c/table\x3e\x3c/div\x3e"+"\x3chr /\x3e"};NRS.getMarketplacePendingOrderHTML=function(purchase){var delivered=NRS.getUnconfirmedTransactionsFromCache(3,[5,7],{"purchase":purchase.purchase});return"\x3cdiv data-purchase\x3d'"+String(purchase.purchase).escapeHTML()+"'"+(delivered?" class\x3d'tentative'":
"")+"\x3e\x3cdiv style\x3d'float:right;color: #999999;background:white;padding:5px;border:1px solid #ccc;border-radius:3px'\x3e"+"\x3cstrong\x3eBuyer\x3c/strong\x3e: \x3cspan\x3e\x3ca href\x3d'#' data-user\x3d'"+NRS.getAccountFormatted(purchase,"buyer")+"' class\x3d'user_info'\x3e"+NRS.getAccountTitle(purchase,"buyer")+"\x3c/a\x3e\x3c/span\x3e\x3cbr\x3e"+"\x3cstrong\x3eProduct Id\x3c/strong\x3e: \x26nbsp;\x3ca href\x3d'#''\x3e"+String(purchase.goods).escapeHTML()+"\x3c/a\x3e"+"\x3c/div\x3e"+"\x3ch3 class\x3d'title'\x3e\x3ca href\x3d'#' data-purchase\x3d'"+
String(purchase.purchase).escapeHTML()+"' data-toggle\x3d'modal' data-target\x3d'#dgs_view_purchase_modal'\x3e"+String(purchase.name).escapeHTML()+"\x3c/a\x3e\x3c/h3\x3e"+"\x3ctable class\x3d'purchase' style\x3d'margin-bottom:5px'\x3e"+"\x3ctr\x3e\x3ctd style\x3d'width:150px'\x3e\x3cstrong\x3eOrder Date\x3c/strong\x3e:\x3c/td\x3e\x3ctd\x3e"+NRS.formatTimestamp(purchase.timestamp)+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\x3cstrong\x3eDelivery Deadline\x3c/strong\x3e:\x3c/td\x3e\x3ctd\x3e"+NRS.formatTimestamp(new Date(purchase.deliveryDeadlineTimestamp*
1E3))+"\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\x3cstrong\x3ePrice\x3c/strong\x3e:\x3c/td\x3e\x3ctd\x3e"+NRS.formatAmount(purchase.priceNQT)+" NXT\x3c/td\x3e\x3c/tr\x3e"+"\x3ctr\x3e\x3ctd\x3e\x3cstrong\x3eQuantity\x3c/strong\x3e:\x3c/td\x3e\x3ctd\x3e"+NRS.format(purchase.quantity)+"\x3c/td\x3e\x3c/tr\x3e"+"\x3c/table\x3e"+"\x3cspan class\x3d'delivery'\x3e"+(!delivered?"\x3cbutton type\x3d'button' class\x3d'btn btn-default btn-deliver' data-toggle\x3d'modal' data-target\x3d'#dgs_delivery_modal' data-purchase\x3d'"+
String(purchase.purchase).escapeHTML()+"'\x3eDeliver Goods\x3c/button\x3e":"Delivered")+"\x3c/span\x3e"+"\x3c/div\x3e\x3chr /\x3e"};NRS.pages.newest_dgs=function(){var content="";NRS.sendRequest("getDGSGoods+",{"firstIndex":NRS.pageNumber*NRS.itemsPerPage-NRS.itemsPerPage,"lastIndex":NRS.pageNumber*NRS.itemsPerPage},function(response){if(response.goods&&response.goods.length){if(response.goods.length>NRS.itemsPerPage){NRS.hasMorePages=true;response.goods.pop()}for(var i=0;i<response.goods.length;i++)content+=
NRS.getMarketplaceItemHTML(response.goods[i])}NRS.dataLoaded(content);NRS.showMore()})};NRS.incoming.newest_dgs=function(){NRS.loadPage("newest_dgs")};NRS.pages.dgs_seller=function(){var content="";var seller=$(".dgs_search input[name\x3dq]").val();NRS.sendRequest("getDGSGoods+",{"seller":seller,"firstIndex":NRS.pageNumber*NRS.itemsPerPage-NRS.itemsPerPage,"lastIndex":NRS.pageNumber*NRS.itemsPerPage},function(response){if(response.goods&&response.goods.length){if(response.goods.length>NRS.itemsPerPage){NRS.hasMorePages=
true;response.goods.pop()}var content="";for(var i=0;i<response.goods.length;i++)content+=NRS.getMarketplaceItemHTML(response.goods[i])}NRS.dataLoaded(content);NRS.showMore()})};NRS.incoming.dgs_seller=function(){NRS.loadPage("dgs_seller")};NRS.pages.purchased_dgs=function(){var content="";if(NRS.pageNumber==1){var unconfirmedTransactions=NRS.getUnconfirmedTransactionsFromCache(3,4);if(unconfirmedTransactions)for(var i=0;i<unconfirmedTransactions.length;i++){var unconfirmedTransaction=unconfirmedTransactions[i];
content+=NRS.getMarketplacePurchaseHTML(unconfirmedTransaction)}}NRS.sendRequest("getDGSPurchases",{"buyer":NRS.account,"firstIndex":NRS.pageNumber*NRS.itemsPerPage-NRS.itemsPerPage,"lastIndex":NRS.pageNumber*NRS.itemsPerPage},function(response){if(response.purchases&&response.purchases.length){if(response.purchases.length>NRS.itemsPerPage){NRS.hasMorePages=true;response.purchases.pop()}for(var i=0;i<response.purchases.length;i++)content+=NRS.getMarketplacePurchaseHTML(response.purchases[i])}NRS.dataLoaded(content)})};
NRS.incoming.purchased_dgs=function(transactions){if(NRS.hasTransactionUpdates(transactions))NRS.loadPage("purchased_dgs")};NRS.pages.completed_orders_dgs=function(){NRS.sendRequest("getDGSPurchases",{"seller":NRS.account,"firstIndex":NRS.pageNumber*NRS.itemsPerPage-NRS.itemsPerPage,"lastIndex":NRS.pageNumber*NRS.itemsPerPage},function(response){var content="";if(response.purchases&&response.purchases.length){if(response.purchases.length>NRS.itemsPerPage){NRS.hasMorePages=true;response.purchases.pop()}for(var i=
0;i<response.purchases.length;i++)content+=NRS.getMarketplacePurchaseHTML(response.purchases[i])}NRS.dataLoaded(content)})};NRS.incoming.completed_orders_dgs=function(){NRS.loadPage("completed_orders_dgs")};NRS.pages.pending_orders_dgs=function(){NRS.sendRequest("getDGSPendingPurchases",{"seller":NRS.account,"firstIndex":NRS.pageNumber*NRS.itemsPerPage-NRS.itemsPerPage,"lastIndex":NRS.pageNumber*NRS.itemsPerPage},function(response){var content="";if(response.purchases&&response.purchases.length){if(response.purchases.length>
NRS.itemsPerPage){NRS.hasMorePages=true;response.purchases.pop()}for(var i=0;i<response.purchases.length;i++)content+=NRS.getMarketplacePendingOrderHTML(response.purchases[i])}NRS.dataLoaded(content)})};NRS.incoming.pending_orders_dgs=function(){NRS.loadPage("pending_orders_dgs")};NRS.pages.my_dgs_listings=function(){var rows="";var unconfirmedTransactions=NRS.getUnconfirmedTransactionsFromCache(3,0);if(unconfirmedTransactions)for(var i=0;i<unconfirmedTransactions.length;i++){var unconfirmedTransaction=
unconfirmedTransactions[i];rows+="\x3ctr class\x3d'tentative' data-goods\x3d'"+String(unconfirmedTransaction.goods).escapeHTML()+"'\x3e\x3ctd\x3e\x3ca href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#dgs_listing_modal' data-goods\x3d'"+String(unconfirmedTransaction.goods).escapeHTML()+"'\x3e"+String(unconfirmedTransaction.name).escapeHTML()+"\x3c/a\x3e\x3c/td\x3e\x3ctd class\x3d'quantity'\x3e"+NRS.format(unconfirmedTransaction.quantity)+"\x3c/td\x3e\x3ctd class\x3d'price'\x3e"+NRS.formatAmount(unconfirmedTransaction.priceNQT)+
" NXT\x3c/td\x3e\x3ctd style\x3d'white-space:nowrap'\x3e\x3ca class\x3d'btn btn-xs btn-default' href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#dgs_price_change_modal' data-goods\x3d'"+String(unconfirmedTransaction.goods).escapeHTML()+"'\x3eChange Price\x3c/a\x3e \x3ca class\x3d'btn btn-xs btn-default' href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#dgs_quantity_change_modal' data-goods\x3d'"+String(unconfirmedTransaction.goods).escapeHTML()+"'\x3eChange QTY\x3c/a\x3e \x3ca class\x3d'btn btn-xs btn-default' href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#dgs_delisting_modal' data-goods\x3d'"+
String(unconfirmedTransaction.goods).escapeHTML()+"'\x3eDelete\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e"}NRS.sendRequest("getDGSGoods+",{"seller":NRS.account,"firstIndex":0,"lastIndex":0},function(response){if(response.goods&&response.goods.length)for(var i=0;i<response.goods.length;i++){var good=response.goods[i];var deleted=false;var tentative=false;var quantityFormatted=false;var unconfirmedTransaction=NRS.getUnconfirmedTransactionFromCache(3,[1,2,3],{"goods":good.goods});if(unconfirmedTransaction)if(unconfirmedTransaction.subtype==
1)deleted=tentative=true;else if(unconfirmedTransaction.subtype==2){good.priceNQT=unconfirmedTransaction.priceNQT;tentative=true}else{good.quantity=NRS.format(good.quantity)+" "+NRS.format(unconfirmedTransaction.deltaQuantity);tentative=true;quantityFormatted=true}rows+="\x3ctr class\x3d'"+(tentative?"tentative":"")+(deleted?" tentative-crossed":"")+"' data-goods\x3d'"+String(good.goods).escapeHTML()+"'\x3e\x3ctd\x3e\x3ca href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#dgs_listing_modal' data-goods\x3d'"+
String(good.goods).escapeHTML()+"'\x3e"+String(good.name).escapeHTML()+"\x3c/a\x3e\x3c/td\x3e\x3ctd class\x3d'quantity'\x3e"+(quantityFormatted?good.quantity:NRS.format(good.quantity))+"\x3c/td\x3e\x3ctd class\x3d'price'\x3e"+NRS.formatAmount(good.priceNQT)+" NXT\x3c/td\x3e\x3ctd style\x3d'white-space:nowrap'\x3e\x3ca class\x3d'btn btn-xs btn-default' href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#dgs_price_change_modal' data-goods\x3d'"+String(good.goods).escapeHTML()+"'\x3eChange Price\x3c/a\x3e \x3ca class\x3d'btn btn-xs btn-default' href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#dgs_quantity_change_modal' data-goods\x3d'"+
String(good.goods).escapeHTML()+"'\x3eChange QTY\x3c/a\x3e \x3ca class\x3d'btn btn-xs btn-default' href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#dgs_delisting_modal' data-goods\x3d'"+String(good.goods).escapeHTML()+"'\x3eDelete\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e"}NRS.dataLoaded(rows)})};NRS.incoming.my_dgs_listings=function(transactions){NRS.loadPage("my_dgs_listings")};NRS.forms.dgsListing=function($modal){var data=NRS.getFormData($modal.find("form:first"));if(!data.description)return{"error":"Description is a required field."};
$.each(data,function(key,value){data[key]=$.trim(value)});if(!data.description)return{"error":"Description is a required field."};if(data.tags){data.tags=data.tags.toLowerCase();var tags=data.tags.split(",");if(tags.length>3)return{"error":"A maximum of 3 tags is allowed."};else{var clean_tags=[];for(var i=0;i<tags.length;i++){var tag=$.trim(tags[i]);if(tag.length<3||tag.length>20)return{"error":'Incorrect "tag" (length must be in [3..20] range)'};else if(!tag.match(/^[a-z]+$/i))return{"error":'Incorrect "tag" (must contain only alphabetic characters)'};
else if(clean_tags.indexOf(tag)>-1)return{"error":"The same tag was inserted multiple times."};else clean_tags.push(tag)}data.tags=clean_tags.join(",")}}return{"data":data}};NRS.forms.dgsListingComplete=function(response,data){if(response.alreadyProcessed)return;if(NRS.currentPage=="my_dgs_listings"){var $table=$("#my_dgs_listings_table tbody");var rowToAdd="\x3ctr class\x3d'tentative' data-goods\x3d'"+String(response.transaction).escapeHTML()+"'\x3e\x3ctd\x3e\x3ca href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#dgs_listing_modal' data-goods\x3d'"+
String(response.transaction).escapeHTML()+"'\x3e"+String(data.name).escapeHTML()+"\x3c/a\x3e\x3c/td\x3e\x3ctd class\x3d'quantity'\x3e"+NRS.format(data.quantity)+"\x3c/td\x3e\x3ctd class\x3d'price'\x3e"+NRS.formatAmount(data.priceNQT)+" NXT\x3c/td\x3e\x3ctd style\x3d'white-space:nowrap'\x3e\x3ca class\x3d'btn btn-xs btn-default' href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#dgs_price_change_modal' data-goods\x3d'"+String(response.transaction).escapeHTML()+"'\x3eChange Price\x3c/a\x3e \x3ca class\x3d'btn btn-xs btn-default' href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#dgs_quantity_change_modal' data-goods\x3d'"+
String(response.transaction).escapeHTML()+"'\x3eChange QTY\x3c/a\x3e \x3ca class\x3d'btn btn-xs btn-default' href\x3d'#' data-toggle\x3d'modal' data-target\x3d'#dgs_delisting_modal' data-goods\x3d'"+String(response.transaction).escapeHTML()+"'\x3eDelete\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e";$table.prepend(rowToAdd);if($("#my_dgs_listings_table").parent().hasClass("data-empty"))$("#my_dgs_listings_table").parent().removeClass("data-empty")}};NRS.forms.dgsDelistingComplete=function(response,data){if(response.alreadyProcessed)return;
$("#my_dgs_listings_table tr[data-goods\x3d"+String(data.goods).escapeHTML()+"]").addClass("tentative tentative-crossed")};NRS.forms.dgsFeedback=function($modal){var data=NRS.getFormData($modal.find("form:first"));NRS.sendRequest("getDGSPurchase",{"purchase":data.purchase},function(response){if(response.errorCode)return{"error":"Could not fetch purchase."};else data.seller=response.seller},false);if(data.note){try{var encrypted=NRS.encryptNote(data.note,{"account":data.seller},data.secretPhrase);
data.encryptedNoteNonce=encrypted.nonce;data.encryptedNote=encrypted.message}catch(err){return{"error":err.message}}delete data.note}delete data.seller;return{"data":data}};NRS.forms.dgsPurchase=function($modal){var data=NRS.getFormData($modal.find("form:first"));NRS.sendRequest("getDGSGood",{"goods":data.goods},function(response){if(response.errorCode)return{"error":"Could not fetch goods."};else data.seller=response.seller},false);if(data.note){try{var encrypted=NRS.encryptNote(data.note,{"account":data.seller},
data.secretPhrase);data.encryptedNoteNonce=encrypted.nonce;data.encryptedNote=encrypted.message}catch(err){return{"error":err.message}}delete data.note}data.deliveryDeadlineTimestamp=Math.floor((new Date).getTime()/1E3)+60*60*data.deliveryDeadlineTimestamp;delete data.seller;return{"data":data}};NRS.forms.dgsRefund=function($modal){var data=NRS.getFormData($modal.find("form:first"));NRS.sendRequest("getDGSPurchase",{"purchase":data.purchase},function(response){if(!response.errorCode)data.buyer=response.buyer;
else data.buyer=false},false);if(data.buyer===false)return{"error":"Could not fetch purchase."};if(data.note){try{var encrypted=NRS.encryptNote(data.note,{"account":data.buyer},data.secretPhrase);data.encryptedNoteNonce=encrypted.nonce;data.encryptedNote=encrypted.message}catch(err){return{"error":err.message}}delete data.note}delete data.buyer;return{"data":data}};NRS.forms.dgsDelivery=function($modal){var data=NRS.getFormData($modal.find("form:first"));NRS.sendRequest("getDGSPurchase",{"purchase":data.purchase},
function(response){if(!response.errorCode)data.buyer=response.buyer;else data.buyer=false},false);if(data.buyer===false)return{"error":"Could not fetch purchase."};if(data.data)try{var encrypted=NRS.encryptNote(data.data,{"account":data.buyer},data.secretPhrase);data.encryptedGoodsData=encrypted.message;data.encryptedGoodsNonce=encrypted.nonce}catch(err){return{"error":err.message}}delete data.buyer;delete data.data;return{"data":data}};NRS.forms.dgsQuantityChange=function($modal){var data=NRS.getFormData($modal.find("form:first"));
NRS.sendRequest("getDGSGood",{"goods":data.goods},function(response){if(!response.errorCode)if(data.quantity==response.quantity)data.deltaQuantity="0";else if(data.quantity>response.quantity)data.deltaQuantity="+"+(data.quantity-response.quantity);else data.deltaQuantity="-"+(response.quantity-data.quantity);else data.deltaQuantity=false},false);if(data.deltaQuantity===false)return{"error":"Could not fetch goods."};if(data.deltaQuantity=="0")return{"error":"No change in quantity."};delete data.quantity;
return{"data":data}};NRS.forms.dgsQuantityChangeComplete=function(response,data){if(response.alreadyProcessed)return;var quantityField=$("#my_dgs_listings_table tr[data-goods\x3d"+String(data.goods).escapeHTML()+"]").addClass("tentative").find(".quantity");quantityField.html(quantityField.html()+" "+String(data.deltaQuantity).escapeHTML())};NRS.forms.dgsPriceChangeComplete=function(response,data){if(response.alreadyProcessed)return;$("#my_dgs_listings_table tr[data-goods\x3d"+String(data.goods).escapeHTML()+
"]").addClass("tentative").find(".price").html(NRS.formatAmount(data.priceNQT)+" NXT")};NRS.forms.dgsRefundComplete=function(response,data){if(response.alreadyProcessed)return;$("#pending_orders_dgs_contents div[data-purchase\x3d"+String(data.purchase).escapeHTML()+"]").fadeOut()};NRS.forms.dgsDeliveryComplete=function(response,data){if(response.alreadyProcessed)return;$("#pending_orders_dgs_contents div[data-purchase\x3d"+String(data.purchase).escapeHTML()+"]").addClass("tentative").find("span.delivery").html("Delivered")};
$("#dgs_refund_modal, #dgs_delivery_modal, #dgs_feedback_modal, #dgs_view_purchase_modal, #dgs_view_delivery_modal, #dgs_view_refund_modal").on("show.bs.modal",function(e){var $modal=$(this);var $invoker=$(e.relatedTarget);var type=$modal.attr("id");var purchase=$invoker.data("purchase");$modal.find("input[name\x3dpurchase]").val(purchase);NRS.sendRequest("getDGSPurchase",{"purchase":purchase},function(response){if(response.errorCode){e.preventDefault();$.growl("Error fetching purchase info.",{"type":"danger"})}else NRS.sendRequest("getDGSGood",
{"goods":response.goods},function(good){if(response.errorCode){e.preventDefault();$.growl("Error fetching product info.",{"type":"danger"})}else{var output="\x3ctable\x3e";output+="\x3ctr\x3e\x3cth style\x3d'width:85px'\x3e\x3cstrong\x3eProduct\x3c/strong\x3e:\x3c/th\x3e\x3ctd\x3e"+String(good.name).escapeHTML()+"\x3c/td\x3e\x3c/tr\x3e";output+="\x3ctr\x3e\x3cth\x3e\x3cstrong\x3ePrice\x3c/strong\x3e:\x3c/th\x3e\x3ctd\x3e"+NRS.formatAmount(response.priceNQT)+" NXT\x3c/td\x3e\x3c/tr\x3e";output+="\x3ctr\x3e\x3cth\x3e\x3cstrong\x3eQuantity\x3c/strong\x3e:\x3c/th\x3e\x3ctd\x3e"+
NRS.format(response.quantity)+"\x3c/td\x3e\x3c/tr\x3e";if(response.seller==NRS.account)output+="\x3ctr\x3e\x3cth\x3e\x3cstrong\x3eBuyer\x3c/strong\x3e:\x3c/th\x3e\x3ctd\x3e\x3ca href\x3d'#' data-user\x3d'"+NRS.getAccountFormatted(response,"buyer")+"' class\x3d'user_info'\x3e"+NRS.getAccountTitle(response,"buyer")+"\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e";else output+="\x3ctr\x3e\x3cth\x3e\x3cstrong\x3eSeller\x3c/strong\x3e:\x3c/th\x3e\x3ctd\x3e\x3ca href\x3d'#' data-user\x3d'"+NRS.getAccountFormatted(response,
"seller")+"' class\x3d'user_info'\x3e"+NRS.getAccountTitle(response,"seller")+"\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e";if(type=="dgs_view_refund_modal")output+="\x3ctr\x3e\x3cth\x3e\x3cstrong\x3eRefund Price\x3c/strong\x3e:\x3c/th\x3e\x3ctd\x3e"+NRS.formatAmount(response.refundNQT)+" NXT\x3c/td\x3e\x3c/tr\x3e";if(response.note&&(type=="dgs_view_purchase_modal"||type=="dgs_delivery_modal"))output+="\x3ctr\x3e\x3cth\x3e\x3cstrong\x3eNote\x3c/strong\x3e:\x3c/th\x3e\x3ctd id\x3d'"+type+"_note'\x3e\x3c/td\x3e\x3c/tr\x3e";
output+="\x3c/table\x3e";$modal.find(".purchase_info").html(output);if(response.note&&(type=="dgs_view_purchase_modal"||type=="dgs_delivery_modal"))try{NRS.tryToDecrypt(response,{"note":""},response.buyer==NRS.account?response.seller:response.buyer,{"identifier":"purchase","formEl":"#"+type+"_note","outputEl":"#"+type+"_note","showFormOnClick":true})}catch(err){response.note=String(err.message)}if(type=="dgs_refund_modal"){$("#dgs_refund_purchase").val(response.purchase);$("#dgs_refund_refund").val(NRS.convertToNXT(response.priceNQT))}else if(type==
"dgs_view_purchase_modal"){var $btn=$modal.find("button.btn-primary");$btn.data("purchase",response.purchase)}else if(type=="dgs_view_refund_modal")NRS.tryToDecrypt(response,{"refundNote":"Refund Note"},response.buyer==NRS.account?response.seller:response.buyer,{"identifier":"purchase","noPadding":true,"formEl":"#dgs_view_refund_output","outputEl":"#dgs_view_refund_output"});else if(type=="dgs_view_delivery_modal"){if(response.pending){e.preventDefault();$.growl("The goods have not yet been delivered.",
{"type":"warning"});return}var fieldsToDecrypt={"goodsData":"Data"};if(response.feedbackNote)fieldsToDecrypt["feedbackNote"]="Feedback Given";if(response.refundNote)fieldsToDecrypt["refundNote"]="Refund Note";NRS.tryToDecrypt(response,fieldsToDecrypt,response.buyer==NRS.account?response.seller:response.buyer,{"identifier":"purchase","noPadding":true,"formEl":"#dgs_view_delivery_output","outputEl":"#dgs_view_delivery_output"});var $btn=$modal.find("button.btn-primary");if(!response.feedbackNote)if(NRS.account==
response.buyer){$btn.data("purchase",response.purchase);$btn.attr("data-target","#dgs_feedback_modal");$btn.html("Give Feedback");$btn.show()}else $btn.hide();else $btn.hide();if(!response.refundNote&&NRS.account==response.seller){var $btn=$modal.find("button.btn-primary");$btn.data("purchase",response.purchase);$btn.attr("data-target","#dgs_refund_modal");$btn.html("Refund purchase");$btn.show()}}}},false)},false)}).on("hidden.bs.modal",function(e){var type=$(this).attr("id");NRS.removeDecryptionForm($(this));
$(this).find(".purchase_info").html("Loading...");if(type=="dgs_refund_modal")$("#dgs_refund_purchase").val("");else if(type=="dgs_view_delivery_modal")$("#dgs_delivery_purchase").val("");if(type=="dgs_view_delivery_modal")$(this).find("button.btn-primary").data("purchase","")});$("#dgs_delisting_modal, #dgs_quantity_change_modal, #dgs_price_change_modal, #dgs_purchase_modal").on("show.bs.modal",function(e){var $modal=$(this);var $invoker=$(e.relatedTarget);var type=$modal.attr("id");var goods=$invoker.data("goods");
$modal.find("input[name\x3dgoods]").val(goods);NRS.sendRequest("getDGSGood",{"goods":goods},function(response){if(response.errorCode){e.preventDefault();$.growl("Error fetching product info.",{"type":"danger"})}else{var output="\x3ctable\x3e";output+="\x3ctr\x3e\x3cth style\x3d'width:85px'\x3e\x3cstrong\x3eProduct\x3c/strong\x3e:\x3c/th\x3e\x3ctd\x3e"+String(response.name).escapeHTML()+"\x3c/td\x3e\x3c/tr\x3e";output+="\x3ctr\x3e\x3cth\x3e\x3cstrong\x3ePrice\x3c/strong\x3e:\x3c/th\x3e\x3ctd\x3e"+
NRS.formatAmount(response.priceNQT)+" NXT\x3c/td\x3e\x3c/tr\x3e";output+="\x3ctr\x3e\x3cth\x3e\x3cstrong\x3eSeller\x3c/strong\x3e:\x3c/th\x3e\x3ctd\x3e\x3ca href\x3d'#' data-user\x3d'"+NRS.getAccountFormatted(response,"seller")+"' class\x3d'user_info'\x3e"+NRS.getAccountTitle(response,"seller")+"\x3c/a\x3e\x3c/td\x3e\x3c/tr\x3e";if(type=="dgs_purchase_modal")output+="\x3ctr\x3e\x3ctd colspan\x3d'2'\x3e\x3cdiv style\x3d'max-height:250px;overflow:auto;'\x3e"+String(response.description).escapeHTML().nl2br()+
"\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e";output+="\x3c/table\x3e"}$modal.find(".goods_info").html(output);if(type=="dgs_quantity_change_modal")$("#dgs_quantity_change_current_quantity, #dgs_quantity_change_quantity").val(String(response.quantity).escapeHTML());else if(type=="dgs_price_change_modal")$("#dgs_price_change_current_price, #dgs_price_change_price").val(NRS.convertToNXT(response.priceNQT).escapeHTML());else if(type=="dgs_purchase_modal"){$("#dgs_purchase_price").val(String(response.priceNQT).escapeHTML());
$("#dgs_total_purchase_price").html(NRS.formatAmount(response.priceNQT)+" NXT");$("#dgs_purchase_quantity").on("change",function(){var totalNQT=(new BigInteger(response.priceNQT)).multiply(new BigInteger(String($(this).val()))).toString();$("#dgs_total_purchase_price").html(NRS.formatAmount(totalNQT)+" NXT")})}},false)}).on("hidden.bs.modal",function(e){$("#dgs_purchase_quantity").off("change");NRS.removeDecryptionForm($(this));$(this).find(".goods_info").html("Loading...");$("#dgs_quantity_change_current_quantity, #dgs_price_change_current_price, #dgs_quantity_change_quantity, #dgs_price_change_price").val("0")});
$(".dgs_search").on("submit",function(e){e.preventDefault();var seller=$.trim($(this).find("input[name\x3dq]").val());$(".dgs_search input[name\x3dq]").val(seller);if(/^\d+$/.test(seller)||/^(NXT\-)/i.test(seller)){$("#dgs_seller_page_link").show();NRS.goToPage("dgs_seller")}else $.growl("Invalid seller ID.",{"type":"danger"})});return NRS}(NRS||{},jQuery);
/** 
* @ignore
**/