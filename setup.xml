<?xml version="1.0" encoding="iso-8859-1"  ?>
<installation version="5.0">
    <properties>
		<!--property file="resource/build.properties"/-->
		<property name="appversion" value="1.4.10"/>
		</properties>
	<info>
        <appname>NXT</appname>
        <appversion>@{appversion}</appversion>
        <url>http://nxt.org</url>
        <run-privileged condition="izpack.windowsinstall"/>
    </info>
	
	<listeners>
		<listener classname="SummaryLoggerInstallerListener" stage="install"/>
		<listener classname="RegistryInstallerListener" stage="install" >
			<os family="windows"/>
		</listener>
			<listener classname="RegistryUninstallerListener" stage="uninstall" >
		<os family="windows"/>
		</listener>
	</listeners>
	
    <natives>
		<native type="izpack" name="ShellLink.dll" stage="both">
			<os family="windows"/>
		</native>
		<native type="izpack" name="ShellLink_x64.dll" stage="both">
			<os family="windows"/>
		</native>
		<native type="izpack" name="WinSetupAPI.dll" stage="both">
			<os family="windows"/>
		</native>
		<native type="izpack" name="WinSetupAPI_x64.dll" stage="both">
			<os family="windows"/>
		</native>
		<native type="3rdparty" name="COIOSHelper.dll" stage="uninstall">
			<os family="windows"/>
		</native>
		<native type="3rdparty" name="COIOSHelper_x64.dll" stage="uninstall">
			<os family="windows"/>
		</native>
    </natives>
	
    <guiprefs height="700" resizable="yes" width="870">
        <!-- GUI adaption for more information see "Modifying the GUI" in the documentation -->
        <modifier key="langDisplayType" value="default"/>
        <modifier key="layoutAnchor" value="CENTER"/>
        <modifier key="headingPanelCounter" value="progressbar"/>
        <modifier key="headingPanelCounterPos" value="inNavigationPanel"/>
        <modifier key="allYGap" value="4"/>
        <modifier key="paragraphYGap" value="10"/>
        <modifier key="filler1YGap" value="5"/>
        <modifier key="filler3XGap" value="10"/>
    </guiprefs>

	<locale>
        <langpack iso3="eng"/>
    </locale>

    <resources>
		<res id="InfoPanel.info" src="changelogs/nxt-client-@{appversion}.changelog.txt" parse="yes"/>
		<res id="LicencePanel.licence" src="MIT-license.txt"/>
		<res id="Installer.image" src="html/ui/img/nxt_logo.png"/>
		<res id="shortcutSpec.xml" src="shortcutSpec.xml"/>
        <!--res id="RegistrySpec.xml" src="RegistrySpec.xml"/-->		
    </resources>

	<variables>
		<variable name="$InstallerFrame.logfilePath" value="default"/>
		<variable name="DesktopShortcutCheckboxEnabled" value="true"/>
	</variables>

    <panels>
        <panel classname="CheckedHelloPanel" id="hellopanel"/>	
        <panel classname="LicencePanel"/>
        <panel classname="InfoPanel"/>
        <panel classname="TargetPanel"/>
        <panel classname="PacksPanel"/>
		<panel classname="ShortcutPanel"/>
        <panel classname="InstallPanel"/>
        <panel classname="SimpleFinishPanel"/>
    </panels>

    <packs>
        <pack name="server" required="yes">
            <description>Common Server Files</description>
            <file src="nxt.jar" targetdir="${INSTALL_PATH}" override="true"/>
			<file src="README.txt" targetdir="${INSTALL_PATH}" override="true"/>
			<file src="NXT_Wallet.url" targetdir="${INSTALL_PATH}" override="true"/>
			<file src="MIT-license.txt" targetdir="${INSTALL_PATH}" override="true"/>
			<file src="conf/nxt-default.properties" targetdir="${INSTALL_PATH}/conf" override="true"/>
			<file src="conf/logging-default.properties" targetdir="${INSTALL_PATH}/conf" override="true"/>
			<fileset dir="lib" targetdir="${INSTALL_PATH}/lib" override="true" excludes=".gitignore"/>
			<fileset dir="changelogs" targetdir="${INSTALL_PATH}/changelogs" override="true" excludes=".gitignore"/>
			<fileset dir="classes" targetdir="${INSTALL_PATH}/classes" override="true" excludes=".gitignore"/>
			<fileset dir="html" targetdir="${INSTALL_PATH}/html" override="true" excludes=".gitignore"/>
			<fileset dir="src" targetdir="${INSTALL_PATH}/src" override="true" excludes=".gitignore"/>
		</pack>
        <pack name="server.windows" os="windows" required="yes">
            <description>Windows Specific Resources</description>
			<os family="windows"/>
            <file src="nxt.exe" targetdir="${INSTALL_PATH}" override="true"/>
            <file src="run.bat" targetdir="${INSTALL_PATH}" override="false"/>
			<parsable targetfile="${INSTALL_PATH}/run.bat"/>
			<singlefile src="resource/nxt.properties" target="${INSTALL_PATH}/resource/nxt.properties" override="true"/>
			<parsable targetfile="${INSTALL_PATH}/resource/nxt.properties"/>
			<singlefile src="resource/nxt.properties.template" target="${USER_HOME}/AppData/Roaming/NXT/nxt.properties" override="false"/>
			<singlefile src="resource/logging.properties.template" target="${USER_HOME}/AppData/Roaming/NXT/logging.properties" override="false"/>
			<singlefile src="resource/logs/nxt.log" target="${USER_HOME}/AppData/Roaming/NXT/logs/nxt.log" override="false"/>
		</pack>
        <pack name="server.unix" os="unix" required="yes">
            <description>Unix Specific Resources</description>
            <file src="run.sh" targetdir="${INSTALL_PATH}" override="false"/>
			<executable targetfile="${INSTALL_PATH}/run.sh"/>
            <file src="run-tor.sh" targetdir="${INSTALL_PATH}" override="true"/>
			<executable targetfile="${INSTALL_PATH}/run-tor.sh"/>
            <file src="compile.sh" targetdir="${INSTALL_PATH}" override="true"/>
			<executable targetfile="${INSTALL_PATH}/compile.sh"/>
            <file src="win-compile.sh" targetdir="${INSTALL_PATH}" override="true"/>
			<executable targetfile="${INSTALL_PATH}/win-compile.sh"/>
			<file src="javadoc.sh" targetdir="${INSTALL_PATH}" override="true"/>
			<executable targetfile="${INSTALL_PATH}/javadoc.sh"/>
			<file src="verify.sh" targetdir="${INSTALL_PATH}" override="true"/>
			<executable targetfile="${INSTALL_PATH}/verify.sh"/>
			<file src="docker_start.sh" targetdir="${INSTALL_PATH}" override="true"/>
			<executable targetfile="${INSTALL_PATH}/docker_start.sh"/>
			<file src="Dockerfile" targetdir="${INSTALL_PATH}" override="true"/>
		</pack>
        <pack name="jre" os="windows" required="no">
            <description>Java 32 bit</description>
			<fileset dir="jre" targetdir="${INSTALL_PATH}/jre" override="true"/>
		</pack>
	</packs>
</installation>